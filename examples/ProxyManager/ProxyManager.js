!function(){var e={334:function(){var e=document.querySelector("head");e&&[16,32,96,160,196].forEach((function(t){var n=document.createElement("link");n.setAttribute("rel","icon"),n.setAttribute("href","https://kitware.github.io/vtk-js/icon/favicon-".concat(t,"x").concat(t,".png")),n.setAttribute("sizes","".concat(t,"x").concat(t)),n.setAttribute("type","image/png"),e.appendChild(n)}))},865:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,{add:function(){return $},adjoint:function(){return y},clone:function(){return d},copy:function(){return p},create:function(){return l},determinant:function(){return b},equals:function(){return ae},exactEquals:function(){return re},frob:function(){return J},fromQuat:function(){return G},fromQuat2:function(){return B},fromRotation:function(){return M},fromRotationTranslation:function(){return L},fromRotationTranslationScale:function(){return _},fromRotationTranslationScaleOrigin:function(){return F},fromScaling:function(){return I},fromTranslation:function(){return A},fromValues:function(){return f},fromXRotation:function(){return R},fromYRotation:function(){return E},fromZRotation:function(){return D},frustum:function(){return U},getRotation:function(){return V},getScaling:function(){return k},getTranslation:function(){return N},identity:function(){return m},invert:function(){return h},lookAt:function(){return Y},mul:function(){return oe},multiply:function(){return x},multiplyScalar:function(){return te},multiplyScalarAndAdd:function(){return ne},ortho:function(){return X},orthoNO:function(){return K},orthoZO:function(){return q},perspective:function(){return z},perspectiveFromFieldOfView:function(){return H},perspectiveNO:function(){return j},perspectiveZO:function(){return W},rotate:function(){return P},rotateX:function(){return w},rotateY:function(){return C},rotateZ:function(){return O},scale:function(){return S},set:function(){return g},str:function(){return Q},sub:function(){return ie},subtract:function(){return ee},targetTo:function(){return Z},translate:function(){return T},transpose:function(){return v}});var a={};n.r(a),n.d(a,{add:function(){return tn},angle:function(){return En},bezier:function(){return Pn},ceil:function(){return on},clone:function(){return Zt},copy:function(){return $t},create:function(){return Yt},cross:function(){return xn},dist:function(){return Gn},distance:function(){return fn},div:function(){return Fn},divide:function(){return an},dot:function(){return bn},equals:function(){return Nn},exactEquals:function(){return Bn},floor:function(){return sn},forEach:function(){return Wn},fromValues:function(){return Jt},hermite:function(){return Sn},inverse:function(){return hn},len:function(){return jn},length:function(){return Qt},lerp:function(){return Tn},max:function(){return un},min:function(){return cn},mul:function(){return _n},multiply:function(){return rn},negate:function(){return vn},normalize:function(){return yn},random:function(){return wn},rotateX:function(){return In},rotateY:function(){return Mn},rotateZ:function(){return Rn},round:function(){return ln},scale:function(){return dn},scaleAndAdd:function(){return pn},set:function(){return en},sqrDist:function(){return Un},sqrLen:function(){return zn},squaredDistance:function(){return gn},squaredLength:function(){return mn},str:function(){return Ln},sub:function(){return Vn},subtract:function(){return nn},transformMat3:function(){return On},transformMat4:function(){return Cn},transformQuat:function(){return An},zero:function(){return Dn}}),n(334);var o=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,s=Math.random,c=Math.PI/180;function u(e){return e*c}function l(){var e=new i(16);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function d(e){var t=new i(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,n,r,a,o,s,c,u,l,d,p,f,g,m,v){var h=new i(16);return h[0]=e,h[1]=t,h[2]=n,h[3]=r,h[4]=a,h[5]=o,h[6]=s,h[7]=c,h[8]=u,h[9]=l,h[10]=d,h[11]=p,h[12]=f,h[13]=g,h[14]=m,h[15]=v,h}function g(e,t,n,r,a,o,i,s,c,u,l,d,p,f,g,m,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=c,e[8]=u,e[9]=l,e[10]=d,e[11]=p,e[12]=f,e[13]=g,e[14]=m,e[15]=v,e}function m(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],o=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=a,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],u=t[7],l=t[8],d=t[9],p=t[10],f=t[11],g=t[12],m=t[13],v=t[14],h=t[15],y=n*s-r*i,b=n*c-a*i,x=n*u-o*i,T=r*c-a*s,S=r*u-o*s,P=a*u-o*c,w=l*m-d*g,C=l*v-p*g,O=l*h-f*g,A=d*v-p*m,I=d*h-f*m,M=p*h-f*v,R=y*M-b*I+x*A+T*O-S*C+P*w;return R?(R=1/R,e[0]=(s*M-c*I+u*A)*R,e[1]=(a*I-r*M-o*A)*R,e[2]=(m*P-v*S+h*T)*R,e[3]=(p*S-d*P-f*T)*R,e[4]=(c*O-i*M-u*C)*R,e[5]=(n*M-a*O+o*C)*R,e[6]=(v*x-g*P-h*b)*R,e[7]=(l*P-p*x+f*b)*R,e[8]=(i*I-s*O+u*w)*R,e[9]=(r*O-n*I-o*w)*R,e[10]=(g*S-m*x+h*y)*R,e[11]=(d*x-l*S-f*y)*R,e[12]=(s*C-i*A-c*w)*R,e[13]=(n*A-r*C+a*w)*R,e[14]=(m*b-g*T-v*y)*R,e[15]=(l*T-d*b+p*y)*R,e):null}function y(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],u=t[7],l=t[8],d=t[9],p=t[10],f=t[11],g=t[12],m=t[13],v=t[14],h=t[15];return e[0]=s*(p*h-f*v)-d*(c*h-u*v)+m*(c*f-u*p),e[1]=-(r*(p*h-f*v)-d*(a*h-o*v)+m*(a*f-o*p)),e[2]=r*(c*h-u*v)-s*(a*h-o*v)+m*(a*u-o*c),e[3]=-(r*(c*f-u*p)-s*(a*f-o*p)+d*(a*u-o*c)),e[4]=-(i*(p*h-f*v)-l*(c*h-u*v)+g*(c*f-u*p)),e[5]=n*(p*h-f*v)-l*(a*h-o*v)+g*(a*f-o*p),e[6]=-(n*(c*h-u*v)-i*(a*h-o*v)+g*(a*u-o*c)),e[7]=n*(c*f-u*p)-i*(a*f-o*p)+l*(a*u-o*c),e[8]=i*(d*h-f*m)-l*(s*h-u*m)+g*(s*f-u*d),e[9]=-(n*(d*h-f*m)-l*(r*h-o*m)+g*(r*f-o*d)),e[10]=n*(s*h-u*m)-i*(r*h-o*m)+g*(r*u-o*s),e[11]=-(n*(s*f-u*d)-i*(r*f-o*d)+l*(r*u-o*s)),e[12]=-(i*(d*v-p*m)-l*(s*v-c*m)+g*(s*p-c*d)),e[13]=n*(d*v-p*m)-l*(r*v-a*m)+g*(r*p-a*d),e[14]=-(n*(s*v-c*m)-i*(r*v-a*m)+g*(r*c-a*s)),e[15]=n*(s*p-c*d)-i*(r*p-a*d)+l*(r*c-a*s),e}function b(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],s=e[6],c=e[7],u=e[8],l=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15];return(t*i-n*o)*(d*v-p*m)-(t*s-r*o)*(l*v-p*g)+(t*c-a*o)*(l*m-d*g)+(n*s-r*i)*(u*v-p*f)-(n*c-a*i)*(u*m-d*f)+(r*c-a*s)*(u*g-l*f)}function x(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=t[9],f=t[10],g=t[11],m=t[12],v=t[13],h=t[14],y=t[15],b=n[0],x=n[1],T=n[2],S=n[3];return e[0]=b*r+x*s+T*d+S*m,e[1]=b*a+x*c+T*p+S*v,e[2]=b*o+x*u+T*f+S*h,e[3]=b*i+x*l+T*g+S*y,b=n[4],x=n[5],T=n[6],S=n[7],e[4]=b*r+x*s+T*d+S*m,e[5]=b*a+x*c+T*p+S*v,e[6]=b*o+x*u+T*f+S*h,e[7]=b*i+x*l+T*g+S*y,b=n[8],x=n[9],T=n[10],S=n[11],e[8]=b*r+x*s+T*d+S*m,e[9]=b*a+x*c+T*p+S*v,e[10]=b*o+x*u+T*f+S*h,e[11]=b*i+x*l+T*g+S*y,b=n[12],x=n[13],T=n[14],S=n[15],e[12]=b*r+x*s+T*d+S*m,e[13]=b*a+x*c+T*p+S*v,e[14]=b*o+x*u+T*f+S*h,e[15]=b*i+x*l+T*g+S*y,e}function T(e,t,n){var r,a,o,i,s,c,u,l,d,p,f,g,m=n[0],v=n[1],h=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*h+t[12],e[13]=t[1]*m+t[5]*v+t[9]*h+t[13],e[14]=t[2]*m+t[6]*v+t[10]*h+t[14],e[15]=t[3]*m+t[7]*v+t[11]*h+t[15]):(r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=t[9],f=t[10],g=t[11],e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=s,e[5]=c,e[6]=u,e[7]=l,e[8]=d,e[9]=p,e[10]=f,e[11]=g,e[12]=r*m+s*v+d*h+t[12],e[13]=a*m+c*v+p*h+t[13],e[14]=o*m+u*v+f*h+t[14],e[15]=i*m+l*v+g*h+t[15]),e}function S(e,t,n){var r=n[0],a=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function P(e,t,n,r){var a,i,s,c,u,l,d,p,f,g,m,v,h,y,b,x,T,S,P,w,C,O,A,I,M=r[0],R=r[1],E=r[2],D=Math.hypot(M,R,E);return D<o?null:(M*=D=1/D,R*=D,E*=D,a=Math.sin(n),s=1-(i=Math.cos(n)),c=t[0],u=t[1],l=t[2],d=t[3],p=t[4],f=t[5],g=t[6],m=t[7],v=t[8],h=t[9],y=t[10],b=t[11],x=M*M*s+i,T=R*M*s+E*a,S=E*M*s-R*a,P=M*R*s-E*a,w=R*R*s+i,C=E*R*s+M*a,O=M*E*s+R*a,A=R*E*s-M*a,I=E*E*s+i,e[0]=c*x+p*T+v*S,e[1]=u*x+f*T+h*S,e[2]=l*x+g*T+y*S,e[3]=d*x+m*T+b*S,e[4]=c*P+p*w+v*C,e[5]=u*P+f*w+h*C,e[6]=l*P+g*w+y*C,e[7]=d*P+m*w+b*C,e[8]=c*O+p*A+v*I,e[9]=u*O+f*A+h*I,e[10]=l*O+g*A+y*I,e[11]=d*O+m*A+b*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function w(e,t,n){var r=Math.sin(n),a=Math.cos(n),o=t[4],i=t[5],s=t[6],c=t[7],u=t[8],l=t[9],d=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+u*r,e[5]=i*a+l*r,e[6]=s*a+d*r,e[7]=c*a+p*r,e[8]=u*a-o*r,e[9]=l*a-i*r,e[10]=d*a-s*r,e[11]=p*a-c*r,e}function C(e,t,n){var r=Math.sin(n),a=Math.cos(n),o=t[0],i=t[1],s=t[2],c=t[3],u=t[8],l=t[9],d=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-u*r,e[1]=i*a-l*r,e[2]=s*a-d*r,e[3]=c*a-p*r,e[8]=o*r+u*a,e[9]=i*r+l*a,e[10]=s*r+d*a,e[11]=c*r+p*a,e}function O(e,t,n){var r=Math.sin(n),a=Math.cos(n),o=t[0],i=t[1],s=t[2],c=t[3],u=t[4],l=t[5],d=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+u*r,e[1]=i*a+l*r,e[2]=s*a+d*r,e[3]=c*a+p*r,e[4]=u*a-o*r,e[5]=l*a-i*r,e[6]=d*a-s*r,e[7]=p*a-c*r,e}function A(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function I(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,n){var r,a,i,s=n[0],c=n[1],u=n[2],l=Math.hypot(s,c,u);return l<o?null:(s*=l=1/l,c*=l,u*=l,r=Math.sin(t),i=1-(a=Math.cos(t)),e[0]=s*s*i+a,e[1]=c*s*i+u*r,e[2]=u*s*i-c*r,e[3]=0,e[4]=s*c*i-u*r,e[5]=c*c*i+a,e[6]=u*c*i+s*r,e[7]=0,e[8]=s*u*i+c*r,e[9]=c*u*i-s*r,e[10]=u*u*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function R(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function D(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=r+r,c=a+a,u=o+o,l=r*s,d=r*c,p=r*u,f=a*c,g=a*u,m=o*u,v=i*s,h=i*c,y=i*u;return e[0]=1-(f+m),e[1]=d+y,e[2]=p-h,e[3]=0,e[4]=d-y,e[5]=1-(l+m),e[6]=g+v,e[7]=0,e[8]=p+h,e[9]=g-v,e[10]=1-(l+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function B(e,t){var n=new i(3),r=-t[0],a=-t[1],o=-t[2],s=t[3],c=t[4],u=t[5],l=t[6],d=t[7],p=r*r+a*a+o*o+s*s;return p>0?(n[0]=2*(c*s+d*r+u*o-l*a)/p,n[1]=2*(u*s+d*a+l*r-c*o)/p,n[2]=2*(l*s+d*o+c*a-u*r)/p):(n[0]=2*(c*s+d*r+u*o-l*a),n[1]=2*(u*s+d*a+l*r-c*o),n[2]=2*(l*s+d*o+c*a-u*r)),L(e,t,n),e}function N(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function k(e,t){var n=t[0],r=t[1],a=t[2],o=t[4],i=t[5],s=t[6],c=t[8],u=t[9],l=t[10];return e[0]=Math.hypot(n,r,a),e[1]=Math.hypot(o,i,s),e[2]=Math.hypot(c,u,l),e}function V(e,t){var n=new i(3);k(n,t);var r=1/n[0],a=1/n[1],o=1/n[2],s=t[0]*r,c=t[1]*a,u=t[2]*o,l=t[4]*r,d=t[5]*a,p=t[6]*o,f=t[8]*r,g=t[9]*a,m=t[10]*o,v=s+d+m,h=0;return v>0?(h=2*Math.sqrt(v+1),e[3]=.25*h,e[0]=(p-g)/h,e[1]=(f-u)/h,e[2]=(c-l)/h):s>d&&s>m?(h=2*Math.sqrt(1+s-d-m),e[3]=(p-g)/h,e[0]=.25*h,e[1]=(c+l)/h,e[2]=(f+u)/h):d>m?(h=2*Math.sqrt(1+d-s-m),e[3]=(f-u)/h,e[0]=(c+l)/h,e[1]=.25*h,e[2]=(p+g)/h):(h=2*Math.sqrt(1+m-s-d),e[3]=(c-l)/h,e[0]=(f+u)/h,e[1]=(p+g)/h,e[2]=.25*h),e}function _(e,t,n,r){var a=t[0],o=t[1],i=t[2],s=t[3],c=a+a,u=o+o,l=i+i,d=a*c,p=a*u,f=a*l,g=o*u,m=o*l,v=i*l,h=s*c,y=s*u,b=s*l,x=r[0],T=r[1],S=r[2];return e[0]=(1-(g+v))*x,e[1]=(p+b)*x,e[2]=(f-y)*x,e[3]=0,e[4]=(p-b)*T,e[5]=(1-(d+v))*T,e[6]=(m+h)*T,e[7]=0,e[8]=(f+y)*S,e[9]=(m-h)*S,e[10]=(1-(d+g))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function F(e,t,n,r,a){var o=t[0],i=t[1],s=t[2],c=t[3],u=o+o,l=i+i,d=s+s,p=o*u,f=o*l,g=o*d,m=i*l,v=i*d,h=s*d,y=c*u,b=c*l,x=c*d,T=r[0],S=r[1],P=r[2],w=a[0],C=a[1],O=a[2],A=(1-(m+h))*T,I=(f+x)*T,M=(g-b)*T,R=(f-x)*S,E=(1-(p+h))*S,D=(v+y)*S,L=(g+b)*P,B=(v-y)*P,N=(1-(p+m))*P;return e[0]=A,e[1]=I,e[2]=M,e[3]=0,e[4]=R,e[5]=E,e[6]=D,e[7]=0,e[8]=L,e[9]=B,e[10]=N,e[11]=0,e[12]=n[0]+w-(A*w+R*C+L*O),e[13]=n[1]+C-(I*w+E*C+B*O),e[14]=n[2]+O-(M*w+D*C+N*O),e[15]=1,e}function G(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,s=r+r,c=a+a,u=n*i,l=r*i,d=r*s,p=a*i,f=a*s,g=a*c,m=o*i,v=o*s,h=o*c;return e[0]=1-d-g,e[1]=l+h,e[2]=p-v,e[3]=0,e[4]=l-h,e[5]=1-u-g,e[6]=f+m,e[7]=0,e[8]=p+v,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function U(e,t,n,r,a,o,i){var s=1/(n-t),c=1/(a-r),u=1/(o-i);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*c,e[10]=(i+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*u,e[15]=0,e}function j(e,t,n,r,a){var o,i=1/Math.tan(t/2);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(r-a),e[10]=(a+r)*o,e[14]=2*a*r*o):(e[10]=-1,e[14]=-2*r),e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var z=j;function W(e,t,n,r,a){var o,i=1/Math.tan(t/2);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(r-a),e[10]=a*o,e[14]=a*r*o):(e[10]=-1,e[14]=-r),e}function H(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(i+s),u=2/(a+o);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(i-s)*c*.5,e[9]=(a-o)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function K(e,t,n,r,a,o,i){var s=1/(t-n),c=1/(r-a),u=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*c,e[14]=(i+o)*u,e[15]=1,e}var X=K;function q(e,t,n,r,a,o,i){var s=1/(t-n),c=1/(r-a),u=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*c,e[14]=o*u,e[15]=1,e}function Y(e,t,n,r){var a,i,s,c,u,l,d,p,f,g,v=t[0],h=t[1],y=t[2],b=r[0],x=r[1],T=r[2],S=n[0],P=n[1],w=n[2];return Math.abs(v-S)<o&&Math.abs(h-P)<o&&Math.abs(y-w)<o?m(e):(d=v-S,p=h-P,f=y-w,a=x*(f*=g=1/Math.hypot(d,p,f))-T*(p*=g),i=T*(d*=g)-b*f,s=b*p-x*d,(g=Math.hypot(a,i,s))?(a*=g=1/g,i*=g,s*=g):(a=0,i=0,s=0),c=p*s-f*i,u=f*a-d*s,l=d*i-p*a,(g=Math.hypot(c,u,l))?(c*=g=1/g,u*=g,l*=g):(c=0,u=0,l=0),e[0]=a,e[1]=c,e[2]=d,e[3]=0,e[4]=i,e[5]=u,e[6]=p,e[7]=0,e[8]=s,e[9]=l,e[10]=f,e[11]=0,e[12]=-(a*v+i*h+s*y),e[13]=-(c*v+u*h+l*y),e[14]=-(d*v+p*h+f*y),e[15]=1,e)}function Z(e,t,n,r){var a=t[0],o=t[1],i=t[2],s=r[0],c=r[1],u=r[2],l=a-n[0],d=o-n[1],p=i-n[2],f=l*l+d*d+p*p;f>0&&(l*=f=1/Math.sqrt(f),d*=f,p*=f);var g=c*p-u*d,m=u*l-s*p,v=s*d-c*l;return(f=g*g+m*m+v*v)>0&&(g*=f=1/Math.sqrt(f),m*=f,v*=f),e[0]=g,e[1]=m,e[2]=v,e[3]=0,e[4]=d*v-p*m,e[5]=p*g-l*v,e[6]=l*m-d*g,e[7]=0,e[8]=l,e[9]=d,e[10]=p,e[11]=0,e[12]=a,e[13]=o,e[14]=i,e[15]=1,e}function Q(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function J(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function $(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function ee(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function te(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function ne(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function re(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function ae(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],c=e[5],u=e[6],l=e[7],d=e[8],p=e[9],f=e[10],g=e[11],m=e[12],v=e[13],h=e[14],y=e[15],b=t[0],x=t[1],T=t[2],S=t[3],P=t[4],w=t[5],C=t[6],O=t[7],A=t[8],I=t[9],M=t[10],R=t[11],E=t[12],D=t[13],L=t[14],B=t[15];return Math.abs(n-b)<=o*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-x)<=o*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-T)<=o*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(i-S)<=o*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(s-P)<=o*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-w)<=o*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(u-C)<=o*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(l-O)<=o*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(d-A)<=o*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(p-I)<=o*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-M)<=o*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(g-R)<=o*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-E)<=o*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(v-D)<=o*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(h-L)<=o*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(y-B)<=o*Math.max(1,Math.abs(y),Math.abs(B))}var oe=x,ie=ee;function se(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ce(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ue(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],u=t[7],l=t[8],d=l*i-s*u,p=-l*o+s*c,f=u*o-i*c,g=n*d+r*p+a*f;return g?(g=1/g,e[0]=d*g,e[1]=(-l*r+a*u)*g,e[2]=(s*r-a*i)*g,e[3]=p*g,e[4]=(l*n-a*c)*g,e[5]=(-s*n+a*o)*g,e[6]=f*g,e[7]=(-u*n+r*c)*g,e[8]=(i*n-r*o)*g,e):null}function le(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=n[0],f=n[1],g=n[2],m=n[3],v=n[4],h=n[5],y=n[6],b=n[7],x=n[8];return e[0]=p*r+f*i+g*u,e[1]=p*a+f*s+g*l,e[2]=p*o+f*c+g*d,e[3]=m*r+v*i+h*u,e[4]=m*a+v*s+h*l,e[5]=m*o+v*c+h*d,e[6]=y*r+b*i+x*u,e[7]=y*a+b*s+x*l,e[8]=y*o+b*c+x*d,e}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){return he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},he(e,t)}function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function be(e,t,n){return be=ye()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&he(a,n.prototype),a},be.apply(null,arguments)}var xe=n(152),Te=n.n(xe),Se=n(177);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var we=n.n(Se)()(),Ce={vtkObject:function(){return null}};function Oe(e){if(null==e)return e;if(e.isA)return e;if(!e.vtkClass)return we.console&&we.console.error&&we.console.error("Invalid VTK object"),null;var t=Ce[e.vtkClass];if(!t)return we.console&&we.console.error&&we.console.error("No vtk class found for Object of type ".concat(e.vtkClass)),null;var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);Object.keys(n).forEach((function(e){n[e]&&"object"===ge(n[e])&&n[e].vtkClass&&(n[e]=Oe(n[e]))}));var r=t(n);return r&&r.modified&&r.modified(),r}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Ee(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Re(e)););return e}function De(){return De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ee(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},De.apply(this,arguments)}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Be(e)}function ke(e){var t="function"==typeof Map?new Map:void 0;return ke=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return be(e,arguments,Re(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),he(r,e)},ke(e)}Oe.register=function(e,t){Ce[e]=t};var Ve=function(e){Le(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Re(t);if(n){var a=Re(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return Ne(this,e)});function a(){return Ae(this,a),r.apply(this,arguments)}return Me(a,[{key:"push",value:function(){for(var e=0;e<arguments.length;e++)this.includes(arguments[e])||De(Re(a.prototype),"push",this).call(this,arguments[e]);return this.length}}]),a}(ke(Array));function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=0,Ue=Symbol("void"),je={};function ze(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach((function(e){je[e]=ze})),we.console=console.hasOwnProperty("log")?console:je;var We={debug:ze,error:we.console.error||ze,info:we.console.info||ze,log:we.console.log||ze,warn:we.console.warn||ze};function He(){We.debug.apply(We,arguments)}function Ke(){We.error.apply(We,arguments)}function Xe(){We.warn.apply(We,arguments)}var qe={},Ye=Object.create(null);Ye.Float32Array=Float32Array,Ye.Float64Array=Float64Array,Ye.Uint8Array=Uint8Array,Ye.Int8Array=Int8Array,Ye.Uint16Array=Uint16Array,Ye.Int16Array=Int16Array,Ye.Uint32Array=Uint32Array,Ye.Int32Array=Int32Array,Ye.Uint8ClampedArray=Uint8ClampedArray;try{Ye.BigInt64Array=BigInt64Array,Ye.BigUint64Array=BigUint64Array}catch(e){}function Ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return be(Ye[e]||Float64Array,n)}function Qe(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=Ye[e]||Float64Array).from.apply(t,r)}function Je(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $e(e){return Je("_"===e[0]?e.slice(1):e)}function et(e){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&(e[t]=[].concat(e[t]))}))}function tt(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}function nt(e){return e&&e.isA?e.getState():e}function rt(e){setTimeout(e,0)}function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};et(t);var n=[];if(Number.isInteger(t.mtime)||(t.mtime=++Ge),"classHierarchy"in t){if(!(t.classHierarchy instanceof Ve)){for(var r=new Ve,a=0;a<t.classHierarchy.length;a++)r.push(t.classHierarchy[a]);t.classHierarchy=r}}else t.classHierarchy=new Ve("vtkObject");function o(e){n[e]=null}function i(e){return Object.freeze({unsubscribe:function(){o(e)}})}return e.isDeleted=function(){return!!t.deleted},e.modified=function(r){t.deleted?Ke("instance deleted - cannot call any method"):r&&r<e.getMTime()||(t.mtime=++Ge,n.forEach((function(t){return t&&t(e)})))},e.onModified=function(e){if(t.deleted)return Ke("instance deleted - cannot call any method"),null;var r=n.length;return n.push(e),i(r)},e.getMTime=function(){return t.mtime},e.isA=function(e){for(var n=t.classHierarchy.length;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1;return Object.keys(n).forEach((function(i){var s=a?null:e["set".concat(Je(i))];s&&Array.isArray(n[i])&&s.length>1?o=s.apply(void 0,ve(n[i]))||o:s?o=s(n[i])||o:(-1!==["mtime"].indexOf(i)||r||Xe("Warning: Set value to model directly ".concat(i,", ").concat(n[i])),o=t[i]!==n[i]||o,t[i]=n[i])})),o},e.get=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return t;var a={};return n.forEach((function(e){a[e]=t[e]})),a},e.getReferenceByName=function(e){return t[e]},e.delete=function(){Object.keys(t).forEach((function(e){return delete t[e]})),n.forEach((function(e,t){return o(t)})),t.deleted=!0},e.getState=function(){if(t.deleted)return null;var n=Fe(Fe({},t),{},{vtkClass:e.getClassName()});Object.keys(n).forEach((function(e){null===n[e]||void 0===n[e]||"_"===e[0]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])&&(n[e]=n[e].map(nt))}));var r={};return Object.keys(n).sort().forEach((function(e){r[e]=n[e]})),r.mtime&&delete r.mtime,r},e.shallowCopy=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==e.getClassName())throw new Error("Cannot ShallowCopy ".concat(n.getClassName()," into ").concat(e.getClassName()));var a=n.get(),o=Object.keys(t).sort(),i=Object.keys(a).sort();i.forEach((function(e){var n=o.indexOf(e);-1===n?r&&He("add ".concat(e," in shallowCopy")):o.splice(n,1),t[e]=a[e]})),o.length&&r&&He("Untouched keys: ".concat(o.join(", "))),e.modified()},e.toJSON=function(){return e.getState()},e}var ot={object:function(e,t,n){return function(){return Fe({},t[n.name])}}};function it(e,t,n){n.forEach((function(n){if("object"===ge(n)){var r=ot[n.type];e["get".concat($e(n.name))]=r?r(e,t,n):function(){return t[n.name]}}else e["get".concat($e(n))]=function(){return t[n]}}))}var st={enum:function(e,t,n){var r="_on".concat($e(n.name),"Changed");return function(a){if("string"==typeof a){if(void 0!==n.enum[a])return t[n.name]!==n.enum[a]&&(t[n.name]=n.enum[a],e.modified(),!0);throw Ke("Set Enum with invalid argument ".concat(n,", ").concat(a)),new RangeError("Set Enum with invalid string argument")}if("number"==typeof a){if(t[n.name]!==a){if(-1!==Object.keys(n.enum).map((function(e){return n.enum[e]})).indexOf(a)){var o,i=t[n.name];return t[n.name]=a,null===(o=t[r])||void 0===o||o.call(t,e,t,a,i),e.modified(),!0}throw Ke("Set Enum outside numeric range ".concat(n,", ").concat(a)),new RangeError("Set Enum outside numeric range")}return!1}throw Ke("Set Enum with invalid argument (String/Number) ".concat(n,", ").concat(a)),new TypeError("Set Enum with invalid argument (String/Number)")}},object:function(e,t,n){var r="_on".concat($e(n.name),"Changed");return function(a){if(!Te()(t[n.name],a)){var o,i=t[n.name];return t[n.name]=a,null===(o=t[r])||void 0===o||o.call(t,e,t,a,i),e.modified(),!0}return!1}}};function ct(e){if("object"===ge(e)){var t=st[e.type];if(t)return function(n,r){return t(n,r,e)};throw Ke("No setter for field ".concat(e)),new TypeError("No setter for field")}return function(t,n){var r="_on".concat($e(e),"Changed");return function(a){if(n.deleted)return Ke("instance deleted - cannot call any method"),!1;if(n[e]!==a){var o,i=n[e.name];return n[e]=a,null===(o=n[r])||void 0===o||o.call(n,t,n,a,i),t.modified(),!0}return!1}}}function ut(e,t,n){n.forEach((function(n){"object"===ge(n)?e["set".concat($e(n.name))]=ct(n)(e,t):e["set".concat($e(n))]=ct(n)(e,t)}))}function lt(e,t,n){it(e,t,n),ut(e,t,n)}function dt(e,t,n){n.forEach((function(n){e["get".concat($e(n))]=function(){return t[n]?Array.from(t[n]):t[n]},e["get".concat($e(n),"ByReference")]=function(){return t[n]}}))}function pt(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach((function(n){if(t[n]&&r&&t[n].length!==r)throw new RangeError("Invalid initial number of values for array (".concat(n,")"));var o="_on".concat($e(n),"Changed");e["set".concat($e(n))]=function(){if(t.deleted)return Ke("instance deleted - cannot call any method"),!1;for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];var u,l=s,d=!1;if(1===l.length&&(null==l[0]||l[0].length>=0)&&(l=l[0],d=!0),null==l)u=t[n]!==l;else{if(r&&l.length!==r){if(!(l.length<r&&void 0!==a))throw new RangeError("Invalid number of values for array setter (".concat(n,")"));for(l=Array.from(l),d=!1;l.length<r;)l.push(a)}u=null==t[n]||t[n].length!==l.length;for(var p=0;!u&&p<l.length;++p)u=t[n][p]!==l[p];u&&d&&(l=Array.from(l))}if(u){var f,g=t[n.name];t[n]=l,null===(f=t[o])||void 0===f||f.call(t,e,t,l,g),e.modified()}return u},e["set".concat($e(n),"From")]=function(e){var r=t[n];e.forEach((function(e,t){r[t]=e}))}}))}function ft(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;dt(e,t,n),pt(e,t,n,r,a)}function gt(e,t,n){for(var r=0;r<n.length;r++){var a=n[r];void 0!==t[a]&&(t["_".concat(a)]=t[a],delete t[a])}}function mt(e,t,n,r){function a(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?Ke("instance deleted - cannot call any method"):r>=t.numberOfInputs?Ke("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[r]!==n||t.inputConnection[r])&&(t.inputData[r]=n,t.inputConnection[r]=null,e.modified&&e.modified())}function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)Ke("instance deleted - cannot call any method");else{if(r>=t.numberOfInputs){var a="algorithm ".concat(e.getClassName()," only has ");return a+="".concat(t.numberOfInputs),void Ke(a+=" input ports. To add more input ports, use addInputConnection()")}t.inputData[r]=null,t.inputConnection[r]=n}}function i(){for(var e=t.numberOfInputs;e&&!t.inputData[e-1]&&!t.inputConnection[e-1];)e--;return e===t.numberOfInputs&&t.numberOfInputs++,e}function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(Ke("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData?t.inputData=t.inputData.map(Oe):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(Oe):t.inputConnection=[],t.output?t.output=t.output.map(Oe):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(Oe):t.inputArrayToProcess=[],t.numberOfInputs=n,e.shouldUpdate=function(){for(var n=e.getMTime(),a=1/0,o=r;o--;){if(!t.output[o]||t.output[o].isDeleted())return!0;var i=t.output[o].getMTime();if(i<n)return!0;i<a&&(a=i)}for(o=t.numberOfInputs;o--;){var s,c;if(null!==(s=t.inputConnection[o])&&void 0!==s&&s.filter.shouldUpdate()||(null===(c=e.getInputData(o))||void 0===c?void 0:c.getMTime())>a)return!0}return!1},t.numberOfInputs){for(var c=t.numberOfInputs;c--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=a,e.setInputConnection=o,e.addInputData=function(e){t.deleted?Ke("instance deleted - cannot call any method"):a(e,i())},e.addInputConnection=function(e){t.deleted?Ke("instance deleted - cannot call any method"):o(e,i())},e.getInputData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}r&&(e.getOutputData=s,e.getOutputPort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=function(){return s(t)};return n.filter=e,n}),e.update=function(){var n=[];if(t.numberOfInputs)for(var r=0;r<t.numberOfInputs;)n[r]=e.getInputData(r),r++;e.shouldUpdate()&&e.requestData&&e.requestData(n,t.output)},e.getNumberOfInputPorts=function(){return t.numberOfInputs},e.getNumberOfOutputPorts=function(){return r||t.output.length},e.getInputArrayToProcess=function(e){var n=t.inputArrayToProcess[e],r=t.inputData[e];return n&&r?r["get".concat(n.fieldAssociation)]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:r,attributeType:a}}}var vt=Symbol("Event abort");function ht(e,t,n){var r=[],a=e.delete,o=1;function i(e){for(var t=0;t<r.length;++t)if(fe(r[t],1)[0]===e)return void r.splice(t,1)}function s(e){return Object.freeze({unsubscribe:function(){i(e)}})}e["invoke".concat($e(n))]=function(){var n=arguments;if(t.deleted)Ke("instance deleted - cannot call any method");else for(var a=r.slice(),o=function(t){var r=fe(a[t],3),o=r[1],i=r[2];if(!o)return"continue";if(i<0)setTimeout((function(){return o.apply(e,n)}),1-i);else if(o.apply(e,n)===vt)return"break"},i=0;i<a.length;++i){var s=o(i);if("continue"!==s&&"break"===s)break}},e["on".concat($e(n))]=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(n)),null;if(t.deleted)return Ke("instance deleted - cannot call any method"),null;var i=o++;return r.push([i,e,a]),r.sort((function(e,t){return t[2]-e[2]})),s(i)},e.delete=function(){a(),r.forEach((function(e){return i(fe(e,1)[0])}))}}function yt(e,t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={};return e(r,n,t),Object.freeze(r)};return t&&Oe.register(t,n),n}function bt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.filter((function(e){return!!e})).map((function(e){return e.apply(void 0,n)}))}}function xt(e){return e&&e.isA&&e.isA("vtkObject")}function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=function(e,n){t.keystore[e]=n},e.getKey=function(e){return t.keystore[e]},e.getAllKeys=function(){return Object.keys(t.keystore)},e.deleteKey=function(e){return delete t.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach((function(e){return delete t.keystore[e]}))}}var St=1,Pt="__root__";function wt(e,t){Tt(e,t);var n=e.delete;t.proxyId="".concat(St++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),it(e,t,["proxyId","proxyGroup","proxyName"]),lt(e,t,["proxyManager"]);var r={},a={};function o(e,t){a[t]||(a[t]=[]);for(var n=a[t],i=0;i<e.length;i++)n.push(e[i].name),r[e[i].name]=e[i],e[i].children&&e[i].children.length&&o(e[i].children,e[i].name)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return a[e]}function s(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,r=[],a=t.proxyId,o=i(n)||[],c=0;c<o.length;c++){var u=o[c],l=e["get".concat($e(u))],d=l?l():void 0,p={id:a,name:u,value:d},f=s(u);f.length&&(p.children=f),r.push(p)}return r}o(t.ui,Pt),e.updateUI=function(n){t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(r).forEach((function(e){return delete r[e]})),Object.keys(a).forEach((function(e){return delete a[e]})),o(t.ui,Pt),e.modified()},e.updateProxyProperty=function(e,t){var n=r[e];n?Object.assign(n,t):r[e]=Fe({},t)},e.activate=function(){if(t.proxyManager){var n="setActive".concat($e(e.getProxyGroup().slice(0,-1)));t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=function(e,n){n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=function(n){for(var r=t.propertyLinkSubscribers[n]||[];r.length;)r.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];var r=null,a=[],o=0,i=!1;function s(n){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i)return null;var c=[],u=null;for(o=a.length;o--;){var l=a[o];l.instance===n?u=l:c.push(l)}if(!u)return null;var d=u.instance["get".concat($e(u.propertyName))]();if(!tt(d,r)||s){for(r=d,i=!0;c.length;){var p=c.pop();p.instance.set(me({},p.propertyName,r))}i=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=d),d}function c(e,t){var n=[];for(o=a.length;o--;){var r=a[o];r.instance!==e||r.propertyName!==t&&void 0!==t||(r.subscription.unsubscribe(),n.push(o))}for(;n.length;)a.splice(n.pop(),1)}function u(n,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.onModified(s),u=a[0];return a.push({instance:n,propertyName:r,subscription:i}),o&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set(me({},r,t.propertyLinkMap[e].value)):u&&s(u.instance,!0)),{unsubscribe:function(){return c(n,r)}}}function l(){for(;a.length;)a.pop().subscription.unsubscribe()}var d={bind:u,unbind:c,unsubscribe:l,persistent:n};return t.propertyLinkMap[e]=d,d},e.listPropertyNames=function(){return s().map((function(e){return e.name}))},e.getPropertyByName=function(e){return s().find((function(t){return t.name===e}))},e.getPropertyDomainByName=function(e){return(r[e]||{}).domain},e.getProxySection=function(){return{id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:s()}},e.delete=function(){for(var r=Object.keys(t.propertyLinkMap),a=r.length;a--;)t.propertyLinkMap[r[a]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},e.getState=function(){return null},rt((function(){if(t.links)for(var n=0;n<t.links.length;n++){var r=t.links[n],a=r.link,o=r.property,i=r.persistent,s=r.updateOnBind;if("application"===r.type){var c=t.proxyManager.getPropertyLink(a,i);e.registerPropertyLinkForGC(c,"application"),c.bind(e,o,s)}}}))}function Ct(e,t,n){for(var r=e.delete,a=[],o=Object.keys(n),i=o.length;i--;){var s=o[i],c=n[s],u=c.modelKey,l=c.property,d=c.modified,p=void 0===d||d,f=$e(l),g=$e(s);e["get".concat(g)]=t[u]["get".concat(f)],e["set".concat(g)]=t[u]["set".concat(f)],p&&a.push(t[u].onModified(e.modified))}e.delete=function(){for(;a.length;)a.pop().unsubscribe();r()}}var Ot={algo:mt,capitalize:Je,chain:bt,debounce:function(e,t,n){var r,a=this,o=function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var c=a,u=function(){r=null,n||e.apply(c,i)},l=n&&!r;clearTimeout(r),r=setTimeout(u,t),l&&e.apply(c,i)};return o.cancel=function(){return clearTimeout(r)},o},enumToString:function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))},event:ht,EVENT_ABORT:vt,formatBytesToProperUnit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=["TB","GB","MB","KB"],a=Number(e),o="B";a>n;)a/=n,o=r.pop();return"".concat(a.toFixed(t)," ").concat(o)},formatNumbersWithThousandSeparator:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=[],r=e;r>1e3;)n.push("000".concat(r%1e3).slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(t)},get:it,getArray:dt,getCurrentGlobalMTime:function(){return Ge},getStateArrayMapFunc:nt,isVtkObject:xt,keystore:Tt,measurePromiseExecution:function(e,t){var n=performance.now();e.finally((function(){var e=performance.now()-n;t(e)}))},moveToProtected:gt,newInstance:yt,newTypedArray:Ze,newTypedArrayFrom:Qe,normalizeWheel:function(e){var t=0,n=0,r=0,a=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,a=10*n,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||a)&&e.deltaMode&&(1===e.deltaMode?(r*=40,a*=40):(r*=800,a*=800)),r&&!t&&(t=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:a}},obj:at,proxy:wt,proxyPropertyMapping:Ct,proxyPropertyState:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function a(e){for(var n=Object.keys(e),r=n.length;r--;){var a=n[r];t[a].set(e[a])}}t.this=e;for(var o=Object.keys(r),i=o.length,s=function(){var s=o[i];t[s]=r[s];var c=n[s];e["set".concat($e(s))]=function(n){n!==t[s]&&(t[s]=n,a(c[n]),e.modified())}};i--;)s();o.length&&it(e,t,o)},safeArrays:et,set:ut,setArray:pt,setGet:lt,setGetArray:ft,setImmediate:rt,setLoggerFunction:function(e,t){We[e]&&(We[e]=t||ze)},throttle:function(e,t){var n=!1,r=null;function a(){n=!1,null!==r&&(o.apply(void 0,ve(r)),r=null)}function o(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];n?r=i:(n=!0,e.apply(void 0,i),setTimeout(a,t))}return o},traverseInstanceTree:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(xt(t)){if(a.indexOf(t)>=0)return r;a.push(t);var o=n(t);void 0!==o&&r.push(o);var i=t.get();Object.keys(i).forEach((function(t){var o=i[t];Array.isArray(o)?o.forEach((function(t){e(t,n,r,a)})):e(o,n,r,a)}))}return r},TYPED_ARRAYS:Ye,uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},VOID:Ue,vtkDebugMacro:He,vtkErrorMacro:Ke,vtkInfoMacro:function(){We.info.apply(We,arguments)},vtkLogMacro:function(){We.log.apply(We,arguments)},vtkOnceErrorMacro:function(e){qe[e]||(We.error(e),qe[e]=!0)},vtkWarningMacro:Xe},At=Ot.vtkErrorMacro;function It(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(n){var r=n.getTraverseOperation(),a=e[r];if(a)a(n);else{e.apply(n,!0);for(var o=0;o<t.children.length;o++)t.children[o].traverse(n);e.apply(n,!1)}},e.apply=function(t,n){var r=e[t.getOperation()];r&&r(n,t)},e.getViewNodeFor=function(n){if(t.renderable===n)return e;for(var r=0;r<t.children.length;++r){var a=t.children[r].getViewNodeFor(n);if(a)return a}},e.getFirstAncestorOfType=function(e){return t._parent?t._parent.isA(e)?t._parent:t._parent.getFirstAncestorOfType(e):null},e.addMissingNode=function(n){if(n){var r=t._renderableChildMap.get(n);if(void 0!==r)r.setVisited(!0);else{var a=e.createViewNode(n);a&&(a.setParent(e),a.setVisited(!0),t._renderableChildMap.set(n,a),t.children.push(a))}}},e.addMissingNodes=function(n){if(n&&n.length)for(var r=0;r<n.length;++r){var a=n[r],o=t._renderableChildMap.get(a);if(void 0!==o)o.setVisited(!0);else{var i=e.createViewNode(a);i&&(i.setParent(e),i.setVisited(!0),t._renderableChildMap.set(a,i),t.children.push(i))}}},e.addMissingChildren=function(n){if(n&&n.length)for(var r=0;r<n.length;++r){var a=n[r];-1===t.children.indexOf(a)&&(a.setParent(e),t.children.push(a)),a.setVisited(!0)}},e.prepareNodes=function(){for(var e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=function(e){t.visited=e},e.removeUnusedNodes=function(){for(var e=null,n=0;n<t.children.length;++n){var r=t.children[n];if(r.getVisited())r.setVisited(!1);else{var a=r.getRenderable();a&&t._renderableChildMap.delete(a),e||(e=[]),e.push(r),r.delete()}}e&&(t.children=t.children.filter((function(t){return!e.includes(t)})))},e.createViewNode=function(e){if(!t.myFactory)return At("Cannot create view nodes without my own factory"),null;var n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n};var n=e.delete;e.delete=function(){for(var e=0;e<t.children.length;e++)t.children[e].delete();n()}}var Mt={renderable:null,myFactory:null,children:[],visited:!1};function Rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mt,n),Ot.obj(e,t),Ot.event(e,t,"event"),t._renderableChildMap=new Map,Ot.get(e,t,["visited"]),Ot.setGet(e,t,["_parent","renderable","myFactory"]),Ot.getArray(e,t,["children"]),Ot.moveToProtected(e,t,["parent"]),It(e,t)}var Et={newInstance:Ot.newInstance(Rt,"vtkViewNode"),extend:Rt,PASS_TYPES:["Build","Render"]};function Dt(e,t){t.overrides||(t.overrides={}),t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(n){if(n.isDeleted())return null;for(var r=0,a=n.getClassName(r++),o=!1,i=Object.keys(t.overrides);a&&!o;)-1!==i.indexOf(a)?o=!0:a=n.getClassName(r++);if(!o)return null;var s=t.overrides[a]();return s.setMyFactory(e),s},e.registerOverride=function(e,n){t.overrides[e]=n}}var Lt={};function Bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lt,n),Ot.obj(e,t),Dt(e,t)}var Nt={newInstance:Ot.newInstance(Bt,"vtkViewNodeFactory"),extend:Bt},kt=Object.create(null);function Vt(e,t){kt[e]=t}function _t(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}var Ft={};function Gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ft,n),t.overrides=kt,Nt.extend(e,t,n),_t(0,t)}var Ut={newInstance:Ot.newInstance(Gt,"vtkOpenGLViewNodeFactory"),extend:Gt};function jt(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(n){n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var n=t._openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),t.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},e.translucentPass=e.opaquePass,e.zBufferPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(n){if(n!==t.lastRenderer||t._openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){p(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),se(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),ue(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),v(t.keyMatrices.wcvc,t.keyMatrices.wcvc);var r=t._openGLRenderer.getAspectRatio();p(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(r,-1,1)),v(t.keyMatrices.vcpc,t.keyMatrices.vcpc),x(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}var zt={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};var Wt=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zt,n),Et.extend(e,t,n),t.keyMatrixTime={},at(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},lt(e,t,["context","keyMatrixTime"]),jt(e,t)}));Vt("vtkCamera",Wt);var Ht=He;function Kt(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(n){if(n){if(!t.renderable)return;e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),r=0;r<n.length;++r)n[r].getSwitch()>0&&e++;return e||(Ht("No lights are on, creating one."),t.renderable.createLight()),e},e.zBufferPass=function(n){if(n){var r=0,a=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,t.context.depthMask(!0));var o=e.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),a.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),a.colorMask(!0,!0,!0,!0),r&&a.clear(r),a.enable(a.DEPTH_TEST)}},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.cameraPass=function(t){t&&e.clear()},e.getAspectRatio=function(){var e=t._parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=e[0]-n[0],a=e[1]-n[1],o=t._parent.normalizedDisplayToDisplay(r,a),i=Math.round(o[0]),s=Math.round(o[1]),c=e[2]-n[0],u=e[3]-n[1],l=t._parent.normalizedDisplayToDisplay(c,u),d=Math.round(l[0])-i,p=Math.round(l[1])-s;return d<0&&(d=0),p<0&&(p=0),{usize:d,vsize:p,lowerLeftU:i,lowerLeftV:s}},e.clear=function(){var n=0,r=t.context;if(!t.renderable.getTransparent()){var a=t.renderable.getBackgroundByReference();t.context.clearColor(a[0],a[1],a[2],a[3]),n|=r.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,t.context.depthMask(!0)),r.colorMask(!0,!0,!0,!0);var o=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))}}var Xt={context:null,selector:null};var qt=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xt,n),Et.extend(e,t,n),it(e,t,["shaderCache"]),lt(e,t,["selector"]),gt(0,t,["openGLRenderWindow"]),Kt(e,t)}),"vtkOpenGLRenderer");function Yt(){var e=new i(3);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Zt(e){var t=new i(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Qt(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Jt(e,t,n){var r=new i(3);return r[0]=e,r[1]=t,r[2]=n,r}function $t(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function en(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function tn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function nn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function rn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function an(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function on(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function sn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function cn(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function un(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function ln(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function dn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function pn(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function fn(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function gn(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function mn(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function vn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function hn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function yn(e,t){var n=t[0],r=t[1],a=t[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function bn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xn(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],s=n[1],c=n[2];return e[0]=a*c-o*s,e[1]=o*i-r*c,e[2]=r*s-a*i,e}function Tn(e,t,n,r){var a=t[0],o=t[1],i=t[2];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e[2]=i+r*(n[2]-i),e}function Sn(e,t,n,r,a,o){var i=o*o,s=i*(2*o-3)+1,c=i*(o-2)+o,u=i*(o-1),l=i*(3-2*o);return e[0]=t[0]*s+n[0]*c+r[0]*u+a[0]*l,e[1]=t[1]*s+n[1]*c+r[1]*u+a[1]*l,e[2]=t[2]*s+n[2]*c+r[2]*u+a[2]*l,e}function Pn(e,t,n,r,a,o){var i=1-o,s=i*i,c=o*o,u=s*i,l=3*o*s,d=3*c*i,p=c*o;return e[0]=t[0]*u+n[0]*l+r[0]*d+a[0]*p,e[1]=t[1]*u+n[1]*l+r[1]*d+a[1]*p,e[2]=t[2]*u+n[2]*l+r[2]*d+a[2]*p,e}function wn(e,t){t=t||1;var n=2*s()*Math.PI,r=2*s()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function Cn(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,e}function On(e,t,n){var r=t[0],a=t[1],o=t[2];return e[0]=r*n[0]+a*n[3]+o*n[6],e[1]=r*n[1]+a*n[4]+o*n[7],e[2]=r*n[2]+a*n[5]+o*n[8],e}function An(e,t,n){var r=n[0],a=n[1],o=n[2],i=n[3],s=t[0],c=t[1],u=t[2],l=a*u-o*c,d=o*s-r*u,p=r*c-a*s,f=a*p-o*d,g=o*l-r*p,m=r*d-a*l,v=2*i;return l*=v,d*=v,p*=v,f*=2,g*=2,m*=2,e[0]=s+l+f,e[1]=c+d+g,e[2]=u+p+m,e}function In(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function Mn(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function Rn(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function En(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],i=t[1],s=t[2],c=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(o*o+i*i+s*s),u=c&&bn(e,t)/c;return Math.acos(Math.min(Math.max(u,-1),1))}function Dn(e){return e[0]=0,e[1]=0,e[2]=0,e}function Ln(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Bn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Nn(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],s=t[1],c=t[2];return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=o*Math.max(1,Math.abs(a),Math.abs(c))}Vt("vtkRenderer",qt);var kn,Vn=nn,_n=rn,Fn=an,Gn=fn,Un=gn,jn=Qt,zn=mn,Wn=(kn=Yt(),function(e,t,n,r,a,o){var i,s;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,i=n;i<s;i+=t)kn[0]=e[i],kn[1]=e[i+1],kn[2]=e[i+2],a(kn,kn,o),e[i]=kn[0],e[i+1]=kn[1],e[i+2]=kn[2];return e}),Hn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Kn={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},Xn={DefaultDataType:Kn.FLOAT,DataTypeByteSize:Hn,VtkDataTypes:Kn},qn=n(640),Yn=n.n(qn),Zn=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Qn=[1,0,0,0,1,0,0,0,1],Jn=1e-6,$n=1e-12,er=Ot.vtkErrorMacro,tr=Ot.vtkWarningMacro,nr=0;function rr(e){return function(){return er("vtkMath::".concat(e," - NOT IMPLEMENTED"))}}function ar(e,t,n,r){for(var a,o=0;o<t;o++)a=e[n*t+o],e[n*t+o]=e[r*t+o],e[r*t+o]=a}function or(e,t,n,r){for(var a,o=0;o<t;o++)a=e[o*t+n],e[o*t+n]=e[o*t+r],e[o*t+r]=a}function ir(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=Array(e),n=0;n<e;++n)t[n]=0;return t}function sr(e){return e/180*Math.PI}function cr(e){return 180*e/Math.PI}var ur=Math.round,lr=Math.floor,dr=Math.ceil,pr=Math.min,fr=Math.max;function gr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=1/0,a=-1/0,o=t,i=e.length;o<i;o+=n)e[o]<r&&(r=e[o]),a<e[o]&&(a=e[o]);return[r,a]}var mr=rr("ceilLog2"),vr=rr("factorial");function hr(e){for(var t=1;t<e;)t*=2;return t}function yr(e){return e===hr(e)}var br=rr("gaussian");function xr(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function Tr(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function Sr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Pr(e,t){return e[0]*=t,e[1]*=t,e}function wr(e,t,n,r){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r}function Cr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Or(e,t,n){var r=e[1]*t[2]-e[2]*t[1],a=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=r,n[1]=a,n[2]=o,n}function Ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var n=0,r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}function Ir(e){var t=Ar(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function Mr(e,t){return e[0]*t[0]+e[1]*t[1]}function Rr(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function Er(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Dr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:Number.NaN}function Lr(e,t,n){var r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],a=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],o=e[6]*t[0]+e[7]*t[1]+e[8]*t[2];n[0]=r,n[1]=a,n[2]=o}function Br(e,t,n){for(var r=ve(e),a=ve(t),o=0;o<3;o++)n[o]=r[0]*a[o]+r[1]*a[o+3]+r[2]*a[o+6],n[o+3]=r[3]*a[o]+r[4]*a[o+3]+r[5]*a[o+6],n[o+6]=r[6]*a[o]+r[7]*a[o+3]+r[8]*a[o+6]}function Nr(e,t){var n;n=e[3],t[3]=e[1],t[1]=n,n=e[6],t[6]=e[2],t[2]=n,n=e[7],t[7]=e[5],t[5]=n,t[0]=e[0],t[4]=e[4],t[8]=e[8]}function kr(e){return e[0]*e[4]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]-e[6]*e[4]*e[2]}function Vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jn;if(e.length!==t.length)return!1;function r(e,r){return Math.abs(e-t[r])<=n}return e.every(r)}var _r=Vr;function Fr(e){for(var t=0;t<3;t++)e[3*t]=e[3*t+1]=e[3*t+2]=0,e[3*t+t]=1}function Gr(e,t){for(var n=0;n<e;n++){for(var r=0;r<e;r++)t[n*e+r]=0;t[n*e+n]=1}return t}function Ur(e,t){var n=e[0]*e[0],r=e[0]*e[1],a=e[0]*e[2],o=e[0]*e[3],i=e[1]*e[1],s=e[2]*e[2],c=e[3]*e[3],u=e[1]*e[2],l=e[1]*e[3],d=e[2]*e[3],p=i+s+c,f=1/(n+p),g=(n-p)*f;f*=2,t[0]=i*f+g,t[3]=(u+o)*f,t[6]=(l-a)*f,t[1]=(u-o)*f,t[4]=s*f+g,t[7]=(d+r)*f,t[2]=(l+a)*f,t[5]=(d-r)*f,t[8]=c*f+g}function jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!"".concat(e).includes("e"))return+"".concat(Math.round("".concat(e,"e+").concat(t)),"e-").concat(t);var n="".concat(e).split("e"),r="";return+n[1]+t>0&&(r="+"),+"".concat(Math.round("".concat(+n[0],"e").concat(r).concat(+n[1]+t)),"e-").concat(t)}function zr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[0]=jr(e[0],n),t[1]=jr(e[1],n),t[2]=jr(e[2],n),t}function Wr(e,t,n,r){var a,o,i,s,c,u,l,d,p,f,g,m,v,h,y,b,x=ir(t),T=ir(t),S=function(e,t,n){h=e[t],v=e[n],e[t]=h-m*(v+h*f),e[n]=v+m*(h-v*f)};for(Gr(t,r),c=0;c<t;c++)x[c]=n[c]=e[c+c*t],T[c]=0;for(a=0;a<20;a++){for(g=0,c=0;c<t-1;c++)for(s=c+1;s<t;s++)g+=Math.abs(e[c*t+s]);if(0===g)break;for(l=a<3?.2*g/(t*t):0,c=0;c<t-1;c++)for(s=c+1;s<t;s++)if(h=100*Math.abs(e[c*t+s]),a>3&&Math.abs(n[c])+h===Math.abs(n[c])&&Math.abs(n[s])+h===Math.abs(n[s]))e[c*t+s]=0;else if(Math.abs(e[c*t+s])>l){for(v=n[s]-n[c],Math.abs(v)+h===Math.abs(v)?p=e[c*t+s]/v:(d=.5*v/e[c*t+s],p=1/(Math.abs(d)+Math.sqrt(1+d*d)),d<0&&(p=-p)),y=1/Math.sqrt(1+p*p),f=(m=p*y)/(1+y),v=p*e[c*t+s],T[c]-=v,T[s]+=v,n[c]-=v,n[s]+=v,e[c*t+s]=0,o=0;o<=c-1;o++)S(e,o*t+c,o*t+s);for(o=c+1;o<=s-1;o++)S(e,c*t+o,o*t+s);for(o=s+1;o<t;o++)S(e,c*t+o,s*t+o);for(o=0;o<t;o++)S(r,o*t+c,o*t+s)}for(c=0;c<t;c++)x[c]+=T[c],n[c]=x[c],T[c]=0}if(a>=20)return tr("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(o=0;o<t-1;o++){for(b=n[i=o],a=o+1;a<t;a++)(n[a]>=b||Math.abs(n[a]-b)<$n)&&(b=n[i=a]);i!==o&&(n[i]=n[o],n[o]=b,or(r,t,o,i))}var P=(t>>1)+(1&t);for(u=0,a=0;a<t*t;a++)r[a]>=0&&u++;if(u<P)for(a=0;a<t;a++)r[a*t+o]*=-1;return 1}function Hr(e,t){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=e[0]+e[4]+e[8],n[5]=e[0]-e[4]-e[8],n[10]=-e[0]+e[4]-e[8],n[15]=-e[0]-e[4]+e[8],n[1]=n[4]=e[7]-e[5],n[2]=n[8]=e[2]-e[6],n[3]=n[12]=e[3]-e[1],n[6]=n[9]=e[3]+e[1],n[7]=n[13]=e[2]+e[6],n[11]=n[14]=e[7]+e[5];var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];Wr([].concat(n),4,[0,0,0,0],r),t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12]}function Kr(e,t){for(var n=0;n<9;n++)t[n]=e[n];for(var r,a=ir(3),o=ir(3),i=0;i<3;i++){var s=Math.abs(t[3*i]),c=Math.abs(t[3*i+1]),u=Math.abs(t[3*i+2]);r=u>(r=c>s?c:s)?u:r,a[i]=1,0!==r&&(a[i]/=r)}var l=Math.abs(t[0])*a[0],d=Math.abs(t[3])*a[1],p=Math.abs(t[6])*a[2];o[0]=0,d>=(r=l)&&(r=d,o[0]=1),p>=r&&(o[0]=2),0!==o[0]&&(or(t,3,o[0],0),a[o[0]]=a[0]);var f=Math.abs(t[4])*a[1],g=Math.abs(t[7])*a[2];o[1]=1,g>=(r=f)&&(o[1]=2,or(t,3,1,2)),o[2]=2;var m=0;if(kr(t)<0){m=1;for(var v=0;v<9;v++)t[v]=-t[v]}var h=ir(4);if(Hr(t,h),Ur(h,t),m)for(var y=0;y<9;y++)t[y]=-t[y];1!==o[1]&&or(t,3,o[1],1),0!==o[0]&&or(t,3,o[0],0)}function Xr(e,t,n){var r,a,o,i,s,c;if(Wr(ve(e),3,t,n),t[0]!==t[1]||t[0]!==t[2]){for(Nr(n,n),r=0;r<3;r++)if(t[(r+1)%3]===t[(r+2)%3]){for(c=Math.abs(n[3*r]),i=0,a=1;a<3;a++)c<(s=Math.abs(n[3*r+a]))&&(c=s,i=a);i!==r&&(s=t[i],t[i]=t[r],t[r]=s,ar(n,3,r,i)),n[3*i+i]<0&&(n[3*i]=-n[3*i],n[3*i+1]=-n[3*i+1],n[3*i+2]=-n[3*i+2]),o=(i+2)%3,n[3*(a=(i+1)%3)]=0,n[3*a+1]=0,n[3*a+2]=0,n[3*a+a]=1;var u=Or([n[3*i],n[3*i+1],n[3*i+2]],[n[3*a],n[3*a+1],n[3*a+2]],[]);Ir(u);for(var l=Or(u,[n[3*i],n[3*i+1],n[3*i+2]],[]),d=0;d<3;d++)n[3*o+d]=u[d],n[3*a+d]=l[d];return void Nr(n,n)}for(c=Math.abs(n[0]),i=0,r=1;r<3;r++)c<(s=Math.abs(n[3*r]))&&(c=s,i=r);if(0!==i){var p=t[i];t[i]=t[0],t[0]=p,ar(n,3,i,0)}if(Math.abs(n[4])<Math.abs(n[7])){var f=t[2];t[2]=t[1],t[1]=f,ar(n,3,1,2)}for(r=0;r<2;r++)n[3*r+r]<0&&(n[3*r]=-n[3*r],n[3*r+1]=-n[3*r+1],n[3*r+2]=-n[3*r+2]);kr(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),Nr(n,n)}else Fr(n)}function qr(e,t,n){var r,a,o,i,s,c,u,l=0,d=ir(n);for(r=0;r<n;r++){for(i=0,a=0;a<n;a++)(u=Math.abs(e[r*n+a]))>i&&(i=u);if(0===i)return tr("Unable to factor linear system"),0;d[r]=1/i}for(a=0;a<n;a++){for(r=0;r<a;r++){for(s=e[r*n+a],o=0;o<r;o++)s-=e[r*n+o]*e[o*n+a];e[r*n+a]=s}for(i=0,r=a;r<n;r++){for(s=e[r*n+a],o=0;o<a;o++)s-=e[r*n+o]*e[o*n+a];e[r*n+a]=s,(c=d[r]*Math.abs(s))>=i&&(i=c,l=r)}if(a!==l){for(o=0;o<n;o++)c=e[l*n+o],e[l*n+o]=e[a*n+o],e[a*n+o]=c;d[l]=d[a]}if(t[a]=l,Math.abs(e[a*n+a])<=$n)return tr("Unable to factor linear system"),0;if(a!==n-1)for(c=1/e[a*n+a],r=a+1;r<n;r++)e[r*n+a]*=c}return 1}function Yr(e,t,n,r){var a,o,i,s,c;for(i=-1,a=0;a<r;a++){if(c=n[s=t[a]],n[s]=n[a],i>=0)for(o=i;o<=a-1;o++)c-=e[a*r+o]*n[o];else 0!==c&&(i=a);n[a]=c}for(a=r-1;a>=0;a--){for(c=n[a],o=a+1;o<r;o++)c-=e[a*r+o]*n[o];n[a]=c/e[a*r+a]}}function Zr(e,t,n){if(2===n){var r=ir(2),a=Dr(e[0],e[1],e[2],e[3]);return 0===a?0:(r[0]=(e[3]*t[0]-e[1]*t[1])/a,r[1]=(-e[2]*t[0]+e[0]*t[1])/a,t[0]=r[0],t[1]=r[1],1)}if(1===n)return 0===e[0]?0:(t[0]/=e[0],1);var o=ir(n);return 0===qr(e,o,n)?0:(Yr(e,o,t,n),1)}function Qr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=r||ir(n),i=a||ir(n);if(0===qr(e,o,n))return null;for(var s=0;s<n;s++){for(var c=0;c<n;c++)i[c]=0;i[s]=1,Yr(e,o,i,n);for(var u=0;u<n;u++)t[u*n+s]=i[u]}return t}function Jr(e,t,n,r){if(e<n)return tr("Insufficient number of samples. Underdetermined."),0;var a,o,i,s=ir(n*n),c=ir(n),u=ir(n*n);for(i=0;i<e;i++)for(a=0;a<n;a++)for(o=a;o<n;o++)s[a*n+o]+=t[i*n+a]*t[i*n+o];for(a=0;a<n;a++)for(o=0;o<a;o++)s[a*n+o]=s[o*n+a];for(Wr(s,n,c,u),a=0;a<n;a++)r[a]=u[a*n+n-1];return 1}function $r(e,t){var n,r,a=fe(e,3),o=a[0],i=a[1],s=a[2],c=1/6,u=o,l=o;i>u?u=i:i<l&&(l=i),s>u?u=s:s<l&&(l=s);var d=u;(r=d>0?(u-l)/u:0)>0?(n=o===u?c*(i-s)/(u-l):i===u?1/3+c*(s-o)/(u-l):2/3+c*(o-i)/(u-l))<0&&(n+=1):n=0,t[0]=n,t[1]=r,t[2]=d}function ea(e,t){var n,r,a,o=fe(e,3),i=o[0],s=o[1],c=o[2],u=1/3,l=1/6,d=2/3,p=5/6;i>l&&i<=u?(r=1,n=(u-i)/l,a=0):i>u&&i<=.5?(r=1,a=(i-u)/l,n=0):i>.5&&i<=d?(a=1,r=(d-i)/l,n=0):i>d&&i<=p?(a=1,n=(i-d)/l,r=0):i>p&&i<=1?(n=1,a=(1-i)/l,r=0):(n=1,r=i/l,a=0),n=s*n+(1-s),r=s*r+(1-s),a=s*a+(1-s),n*=c,r*=c,a*=c,t[0]=n,t[1]=r,t[2]=a}function ta(e,t){var n=fe(e,3),r=(n[0]+16)/116,a=n[1]/500+r,o=r-n[2]/200;r=Math.pow(r,3)>.008856?Math.pow(r,3):(r-16/116)/7.787,a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787,o=Math.pow(o,3)>.008856?Math.pow(o,3):(o-16/116)/7.787,t[0]=.9505*a,t[1]=1*r,t[2]=1.089*o}function na(e,t){var n=fe(e,3),r=n[0]/.9505,a=n[1]/1,o=n[2]/1.089;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,t[0]=116*a-16,t[1]=500*(r-a),t[2]=200*(a-o)}function ra(e,t){var n=fe(e,3),r=n[0],a=n[1],o=n[2],i=3.2406*r+-1.5372*a+-.4986*o,s=-.9689*r+1.8758*a+.0415*o,c=.0557*r+-.204*a+1.057*o;i>.0031308?i=1.055*Math.pow(i,1/2.4)-.055:i*=12.92,s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92,c>.0031308?c=1.055*Math.pow(c,1/2.4)-.055:c*=12.92;var u=i;u<s&&(u=s),u<c&&(u=c),u>1&&(i/=u,s/=u,c/=u),i<0&&(i=0),s<0&&(s=0),c<0&&(c=0),t[0]=i,t[1]=s,t[2]=c}function aa(e,t){var n=fe(e,3),r=n[0],a=n[1],o=n[2];r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,o>.04045?o=Math.pow((o+.055)/1.055,2.4):o/=12.92,t[0]=.4124*r+.3576*a+.1805*o,t[1]=.2126*r+.7152*a+.0722*o,t[2]=.0193*r+.1192*a+.9505*o}function oa(e,t){var n=[0,0,0];aa(e,n),na(n,t)}function ia(e,t){var n=[0,0,0];ta(e,n),ra(n,t)}function sa(e){return e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1,e}function ca(e){return!(e[1]-e[0]<0)}function ua(e,t,n){return e<t?t:e>n?n:e}function la(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return r[0]=ua(e[0],t[0],n[0]),r[1]=ua(e[1],t[1],n[1]),r[2]=ua(e[2],t[2],n[2]),r}var da=rr("GetScalarTypeFittingRange"),pa=rr("GetAdjustedScalarRange");var fa=function(e){return!Number.isFinite(e)},ga=Number.isFinite,ma=Number.isNaN,va=ma;function ha(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function ya(e){for(var t=-1,n=-1,r=0;r<e.length;r++){var a=Math.abs(e[r]);a>t&&(n=r,t=a)}return n}function ba(e){var t=Math.floor(255*e);return t>15?t.toString(16):"0".concat(t.toString(16))}function xa(e){return Math.round(255*e)}var Ta={Pi:function(){return Math.PI},radiansFromDegrees:sr,degreesFromRadians:cr,round:ur,floor:lr,ceil:dr,ceilLog2:mr,min:pr,max:fr,arrayMin:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=1/0,a=t,o=e.length;a<o;a+=n)e[a]<r&&(r=e[a]);return r},arrayMax:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=-1/0,a=t,o=e.length;a<o;a+=n)r<e[a]&&(r=e[a]);return r},arrayRange:gr,isPowerOfTwo:yr,nearestPowerOfTwo:hr,factorial:vr,binomial:function(e,t){for(var n=1,r=1;r<=t;++r)n*=(e-r+1)/r;return Math.floor(n)},beginCombination:function(e,t){if(e<t)return 0;for(var n=ir(t),r=0;r<t;++r)n[r]=r;return n},nextCombination:function(e,t,n){for(var r=0,a=t-1;a>=0;--a)if(n[a]<e-t+a){for(var o=n[a]+1;a<t;)n[a++]=o++;r=1;break}return r},randomSeed:function(e){Yn()("".concat(e),{global:!0}),nr=e},getSeed:function(){return nr},random:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t-e;return e+n*Math.random()},gaussian:br,add:xr,subtract:Tr,multiplyScalar:Sr,multiplyScalar2D:Pr,multiplyAccumulate:wr,multiplyAccumulate2D:function(e,t,n,r){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r},dot:Cr,outer:function(e,t,n){n[0]=e[0]*t[0],n[1]=e[0]*t[1],n[2]=e[0]*t[2],n[3]=e[1]*t[0],n[4]=e[1]*t[1],n[5]=e[1]*t[2],n[6]=e[2]*t[0],n[7]=e[2]*t[1],n[8]=e[2]*t[2]},cross:Or,norm:Ar,normalize:Ir,perpendiculars:function(e,t,n,r){var a,o,i,s=e[0]*e[0],c=e[1]*e[1],u=e[2]*e[2],l=Math.sqrt(s+c+u);s>c&&s>u?(a=0,o=1,i=2):c>u?(a=1,o=2,i=0):(a=2,o=0,i=1);var d=e[a]/l,p=e[o]/l,f=e[i]/l,g=Math.sqrt(d*d+f*f);if(0!==r){var m=Math.sin(r),v=Math.cos(r);t&&(t[a]=(f*v-d*p*m)/g,t[o]=m*g,t[i]=(-d*v-p*f*m)/g),n&&(n[a]=(-f*m-d*p*v)/g,n[o]=v*g,n[i]=(d*m-p*f*v)/g)}else t&&(t[a]=f/g,t[o]=0,t[i]=-d/g),n&&(n[a]=-d*p/g,n[o]=g,n[i]=-p*f/g)},projectVector:function(e,t,n){var r=Cr(t,t);if(0===r)return n[0]=0,n[1]=0,n[2]=0,!1;for(var a=Cr(e,t)/r,o=0;o<3;o++)n[o]=t[o];return Sr(n,a),!0},projectVector2D:function(e,t,n){var r=Mr(t,t);if(0===r)return n[0]=0,n[1]=0,!1;for(var a=Mr(e,t)/r,o=0;o<2;o++)n[o]=t[o];return Pr(n,a),!0},distance2BetweenPoints:Rr,angleBetweenVectors:function(e,t){var n=[0,0,0];return Or(e,t,n),Math.atan2(Ar(n),Cr(e,t))},gaussianAmplitude:function(e,t,n){var r=Math.abs(e-n);return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-Math.pow(r,2)/(2*t))},gaussianWeight:function(e,t,n){var r=Math.abs(e-n);return Math.exp(-Math.pow(r,2)/(2*t))},dot2D:Mr,outer2D:function(e,t,n){n[0]=e[0]*t[0],n[1]=e[0]*t[1],n[2]=e[1]*t[0],n[3]=e[1]*t[1]},norm2D:Er,normalize2D:function(e){var t=Er(e);return 0!==t&&(e[0]/=t,e[1]/=t),t},determinant2x2:Dr,LUFactor3x3:function(e,t){for(var n,r,a,o=[0,0,0],i=0;i<3;i++)a=Math.abs(e[3*i]),(r=Math.abs(e[3*i+1]))>a&&(a=r),(r=Math.abs(e[3*i+2]))>a&&(a=r),o[i]=1/a;a=o[0]*Math.abs(e[0]),n=0,(r=o[1]*Math.abs(e[3]))>=a&&(a=r,n=1),(r=o[2]*Math.abs(e[6]))>=a&&(n=2),0!==n&&(ar(e,3,n,0),o[n]=o[0]),t[0]=n,e[3]/=e[0],e[6]/=e[0],e[4]-=e[3]*e[1],e[7]-=e[6]*e[1],a=o[1]*Math.abs(e[4]),n=1,(r=o[2]*Math.abs(e[7]))>=a&&(n=2,ar(e,3,1,2),o[2]=o[1]),t[1]=n,e[7]/=e[4],e[5]-=e[3]*e[2],e[8]-=e[6]*e[2]+e[7]*e[5],t[2]=2},LUSolve3x3:function(e,t,n){var r=n[t[0]];n[t[0]]=n[0],n[0]=r,r=n[t[1]],n[t[1]]=n[1],n[1]=r-e[3]*n[0],r=n[t[2]],n[t[2]]=n[2],n[2]=r-e[6]*n[0]-e[7]*n[1],n[2]/=e[8],n[1]=(n[1]-e[5]*n[2])/e[4],n[0]=(n[0]-e[1]*n[1]-e[2]*n[2])/e[0]},linearSolve3x3:function(e,t,n){var r=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],l=e[7],d=e[8],p=+Dr(s,l,c,d),f=-Dr(i,u,c,d),g=+Dr(i,u,s,l),m=-Dr(a,l,o,d),v=+Dr(r,u,o,d),h=-Dr(r,u,a,l),y=+Dr(a,s,o,c),b=-Dr(r,i,o,c),x=+Dr(r,i,a,s),T=r*p+a*f+o*g,S=p*t[0]+m*t[1]+y*t[2],P=f*t[0]+v*t[1]+b*t[2],w=g*t[0]+h*t[1]+x*t[2];n[0]=S/T,n[1]=P/T,n[2]=w/T},multiply3x3_vect3:Lr,multiply3x3_mat3:Br,multiplyMatrix:function(e,t,n,r,a,o,i){r!==a&&er("Number of columns of A must match number of rows of B.");for(var s=ve(e),c=ve(t),u=0;u<n;u++)for(var l=0;l<o;l++){i[u*o+l]=0;for(var d=0;d<r;d++)i[u*o+l]+=s[u*r+d]*c[l+o*d]}},transpose3x3:Nr,invert3x3:function(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],d=+Dr(i,u,s,l),p=-Dr(o,c,s,l),f=+Dr(o,c,i,u),g=-Dr(r,u,a,l),m=+Dr(n,c,a,l),v=-Dr(n,c,r,u),h=+Dr(r,i,a,s),y=-Dr(n,o,a,s),b=+Dr(n,o,r,i),x=n*d+r*p+a*f;0===x&&tr("Matrix has 0 determinant"),t[0]=d/x,t[3]=p/x,t[6]=f/x,t[1]=g/x,t[4]=m/x,t[7]=v/x,t[2]=h/x,t[5]=y/x,t[8]=b/x},identity3x3:Fr,identity:Gr,isIdentity:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn;return _r(e,Zn,t)},isIdentity3x3:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn;return _r(e,Qn,t)},determinant3x3:kr,quaternionToMatrix3x3:Ur,areEquals:Vr,areMatricesEqual:_r,roundNumber:jr,roundVector:zr,matrix3x3ToQuaternion:Hr,multiplyQuaternion:function(e,t,n){var r=e[0]*t[0],a=e[0]*t[1],o=e[0]*t[2],i=e[0]*t[3],s=e[1]*t[0],c=e[1]*t[1],u=e[1]*t[2],l=e[1]*t[3],d=e[2]*t[0],p=e[2]*t[1],f=e[2]*t[2],g=e[2]*t[3],m=e[3]*t[0],v=e[3]*t[1],h=e[3]*t[2],y=e[3]*t[3];n[0]=r-c-f-y,n[1]=a+s+g-h,n[2]=o-l+d+v,n[3]=i+u-p+m},orthogonalize3x3:Kr,diagonalize3x3:Xr,singularValueDecomposition3x3:function(e,t,n,r){var a,o=ve(e),i=kr(o);if(i<0)for(a=0;a<9;a++)o[a]=-o[a];Kr(o,t),Nr(o,o),Br(o,t,r),Xr(r,n,r),Br(t,r,t),Nr(r,r),i<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])},solveLinearSystem:Zr,invertMatrix:Qr,luFactorLinearSystem:qr,luSolveLinearSystem:Yr,estimateMatrixCondition:function(e,t){for(var n=+Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0;a<t;a++)for(var o=a;o<t;o++)Math.abs(e[a*t+o])>r&&(r=Math.abs(e[a*t+o]));for(var i=0;i<t;i++)Math.abs(e[i*t+i])<n&&(n=Math.abs(e[i*t+i]));return 0===n?Number.MAX_VALUE:r/n},jacobi:function(e,t,n){return Wr(e,3,t,n)},jacobiN:Wr,solveHomogeneousLeastSquares:Jr,solveLeastSquares:function(e,t,n,r,a,o){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<n||e<a)return tr("Insufficient number of samples. Underdetermined."),0;var s,c,u,l,d=ir(a),p=1,f=0,g=0;if(i){for(u=0;u<a;u++)d[u]=1;for(c=0;c<e;c++)for(u=0;u<a;u++)Math.abs(r[c*a+u])>$n&&(p=0,d[u]=0);if(p&&1===a)return tr("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),Jr(e,t,n,o);if(p)g=1;else for(u=0;u<a;u++)d[u]&&(g=1)}g&&(f=Jr(e,t,n,s=ir(n)));var m=ir(n*n),v=ir(n*n),h=ir(n*a);for(l=0;l<e;l++)for(c=0;c<n;c++){for(u=c;u<n;u++)m[c*n+u]+=t[l*n+c]*t[l*n+u];for(u=0;u<a;u++)h[c*a+u]+=t[l*n+c]*r[l*a+u]}for(c=0;c<n;c++)for(u=0;u<c;u++)m[c*n+u]=m[u*n+c];var y=Qr(m,v,n);if(y)for(c=0;c<n;c++)for(u=0;u<a;u++)for(o[c*a+u]=0,l=0;l<n;l++)o[c*a+u]+=v[c*n+l]*h[l*a+u];if(g)for(u=0;u<a;u++)if(d[u])for(c=0;c<n;c++)o[c*a+u]=s[c*a];return g?f&&y:y},hex2float:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,.5,1];switch(e.length){case 3:return t[0]=17*parseInt(e[0],16)/255,t[1]=17*parseInt(e[1],16)/255,t[2]=17*parseInt(e[2],16)/255,t;case 4:return t[0]=17*parseInt(e[1],16)/255,t[1]=17*parseInt(e[2],16)/255,t[2]=17*parseInt(e[3],16)/255,t;case 6:return t[0]=parseInt(e.substr(0,2),16)/255,t[1]=parseInt(e.substr(2,2),16)/255,t[2]=parseInt(e.substr(4,2),16)/255,t;case 7:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t;case 9:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t[3]=parseInt(e.substr(7,2),16)/255,t;default:return t}},rgb2hsv:$r,hsv2rgb:ea,lab2xyz:ta,xyz2lab:na,xyz2rgb:ra,rgb2xyz:aa,rgb2lab:oa,lab2rgb:ia,uninitializeBounds:sa,areBoundsInitialized:ca,computeBoundsFromPoints:function(e,t,n){return n[0]=Math.min(e[0],t[0]),n[1]=Math.max(e[0],t[0]),n[2]=Math.min(e[1],t[1]),n[3]=Math.max(e[1],t[1]),n[4]=Math.min(e[2],t[2]),n[5]=Math.max(e[2],t[2]),n},clampValue:ua,clampVector:la,clampAndNormalizeValue:function(e,t){var n=0;return t[0]!==t[1]&&(n=((n=e<t[0]?t[0]:e>t[1]?t[1]:e)-t[0])/(t[1]-t[0])),n},getScalarTypeFittingRange:da,getAdjustedScalarRange:pa,extentIsWithinOtherExtent:function(e,t){if(!e||!t)return 0;for(var n=0;n<6;n+=2)if(e[n]<t[n]||e[n]>t[n+1]||e[n+1]<t[n]||e[n+1]>t[n+1])return 0;return 1},boundsIsWithinOtherBounds:function(e,t,n){if(!e||!t)return 0;for(var r=0;r<6;r+=2)if(e[r]+n[r/2]<t[r]||e[r]-n[r/2]>t[r+1]||e[r+1]+n[r/2]<t[r]||e[r+1]-n[r/2]>t[r+1])return 0;return 1},pointIsWithinBounds:function(e,t,n){if(!e||!t||!n)return 0;for(var r=0;r<3;r++)if(e[r]+n[r]<t[2*r]||e[r]-n[r]>t[2*r+1])return 0;return 1},solve3PointCircle:function(e,t,n,r){for(var a=ir(3),o=ir(3),i=ir(3),s=ir(3),c=ir(3),u=ir(3),l=0;l<3;++l)a[l]=e[l]-t[l],o[l]=t[l]-n[l],i[l]=n[l]-e[l],s[l]=-a[l],c[l]=-o[l],u[l]=-i[l];var d=Ar(s),p=Ar(c),f=Ar(i),g=ir(3);Or(a,o,g);for(var m=Ar(g),v=d*p*f/(2*m),h=2*m*m,y=p*p*Cr(a,u)/h,b=f*f*Cr(s,o)/h,x=d*d*Cr(i,c)/h,T=0;T<3;++T)r[T]=y*e[T]+b*t[T]+x*n[T];return v},inf:1/0,negInf:-1/0,isInf:fa,isNan:ma,isNaN:ma,isFinite:ga,createUninitializedBounds:ha,getMajorAxisIndex:ya,floatToHex2:ba,floatRGB2HexCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";return"".concat(t).concat(e.map(ba).join(""))},float2CssRGBA:function(e){return 3===e.length?"rgb(".concat(e.map(xa).join(", "),")"):"rgba(".concat(xa(e[0]||0),", ").concat(xa(e[1]||0),", ").concat(xa(e[2]||0),", ").concat(e[3]||0,")")}};function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wa=Ke;function Ca(e,t,n){var r,a,o,i,s=e.length;if(0===s)return{min:Number.MAX_VALUE,max:-Number.MAX_VALUE};for(a=r=e[t],i=t;i<s;i+=n)(o=e[i])<r?r=o:o>a&&(a=o);return{min:r,max:a}}function Oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t<0&&n>1){for(var r=e.length,a=r/n,o=new Float64Array(a),i=0,s=0;i<a;++i){for(var c,u=s+n;s<u;++s)o[i]+=e[s]*e[s];o[c=i]=Math.pow(o[c],.5)}return Ca(o,0,1)}return Ca(e,t<0?0:t,n)}function Aa(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e||[];n.length<=t;)n.push(null);return n}function Ia(e){return Object.prototype.toString.call(e).slice(8,-1)}var Ma={computeRange:Oa,createRangeHelper:function(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,r=0;return{add:function(a){e>a&&(e=a),t<a&&(t=a),n++,r+=a},get:function(){return{min:e,max:t,count:n,sum:r,mean:r/n}},getRange:function(){return{min:e,max:t}}}},fastComputeRange:Ca,getDataType:Ia,getMaxNorm:function(e){for(var t=e.getNumberOfComponents(),n=0,r=new Array(t),a=0;a<e.getNumberOfTuples();++a){e.getTuple(a,r);var o=Ar(r,t);o>n&&(n=o)}return n}};function Ra(e,t){function n(n){if(n<0)return!1;var r=e.getNumberOfComponents(),a=t.values.length/(r>0?r:1);if(n===a)return!0;if(n>a){var o=t.values;return t.values=Ze(t.dataType,(n+a)*r),t.values.set(o),!0}return t.size>n*r&&(t.size=n*r,e.dataChange()),!0}t.classHierarchy.push("vtkDataArray"),e.dataChange=function(){t.ranges=null,e.modified()},e.resize=function(r){n(r);var a=r*e.getNumberOfComponents();return t.size!==a&&(t.size=a,e.dataChange(),!0)},e.initialize=function(){e.resize(0)},e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,r,a){a!==t.values[n*t.numberOfComponents+r]&&(t.values[n*t.numberOfComponents+r]=a,e.dataChange())},e.getValue=function(n){var r=n/t.numberOfComponents,a=n%t.numberOfComponents;return e.getComponent(r,a)},e.setValue=function(n,r){var a=n/t.numberOfComponents,o=n%t.numberOfComponents;e.setComponent(a,o,r)},e.getData=function(){return t.size===t.values.length?t.values:t.values.subarray(0,t.size)},e.getRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=n<0?t.numberOfComponents:n,a=null;return t.ranges||(t.ranges=Aa(t.ranges,t.numberOfComponents)),(a=t.ranges[r])?(t.rangeTuple[0]=a.min,t.rangeTuple[1]=a.max,t.rangeTuple):(a=Oa(e.getData(),n,t.numberOfComponents),t.ranges[r]=a,t.rangeTuple[0]=a.min,t.rangeTuple[1]=a.max,t.rangeTuple)},e.setRange=function(e,n){t.ranges||(t.ranges=Aa(t.ranges,t.numberOfComponents));var r={min:e.min,max:e.max};return t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple},e.setTuple=function(e,n){for(var r=e*t.numberOfComponents,a=0;a<t.numberOfComponents;a++)t.values[r+a]=n[a]},e.setTuples=function(e,n){for(var r=e*t.numberOfComponents,a=Math.min(n.length,t.size-r),o=0;o<a;)t.values[r++]=n[o++]},e.insertTuple=function(r,a){return t.size<=r*t.numberOfComponents&&(t.size=(r+1)*t.numberOfComponents,n(r+1)),e.setTuple(r,a),r},e.insertTuples=function(r,a){var o=r+a.length/t.numberOfComponents;return t.size<o*t.numberOfComponents&&(t.size=o*t.numberOfComponents,n(o)),e.setTuples(r,a),o},e.insertNextTuple=function(n){var r=t.size/t.numberOfComponents;return e.insertTuple(r,n)},e.insertNextTuples=function(n){var r=t.size/t.numberOfComponents;return e.insertTuples(r,n)},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.numberOfComponents||1,a=e*r;switch(r){case 4:n[3]=t.values[a+3];case 3:n[2]=t.values[a+2];case 2:n[1]=t.values[a+1];case 1:n[0]=t.values[a];break;default:for(var o=r-1;o>=0;--o)n[o]=t.values[a+o]}return n},e.getTuples=function(n,r){var a=(null!=n?n:0)*t.numberOfComponents,o=(null!=r?r:e.getNumberOfTuples())*t.numberOfComponents,i=e.getData().subarray(a,o);return i.length>0?i:null},e.getTupleLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.size},e.getNumberOfTuples=function(){return t.size/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return La({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name},e.setData=function(n,r){t.values=n,t.size=n.length,t.dataType=Ia(n),r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.dataChange()},e.getState=function(){if(t.deleted)return null;var n=Pa(Pa({},t),{},{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach((function(e){n[e]||delete n[e]}));var r={};return Object.keys(n).sort().forEach((function(e){r[e]=n[e]})),r.mtime&&delete r.mtime,r},e.deepCopy=function(t){e.shallowCopy(t),e.setData(t.getData().slice())},e.interpolateTuple=function(n,r,a,o,i,s){var c=t.numberOfComponents||1;c===r.getNumberOfComponents()&&c===o.getNumberOfComponents()||wa("numberOfComponents must match");var u=r.getTuple(a),l=o.getTuple(i),d=[];switch(d.length=c,c){case 4:d[3]=u[3]+(l[3]-u[3])*s;case 3:d[2]=u[2]+(l[2]-u[2])*s;case 2:d[1]=u[1]+(l[1]-u[1])*s;case 1:d[0]=u[0]+(l[0]-u[0])*s;break;default:for(var p=0;p<c;p++)d[p]=u[p]+(l[p]-u[p])*s}return e.insertTuple(n,d)}}var Ea={name:"",numberOfComponents:1,dataType:Xn.DefaultDataType,rangeTuple:[0,0]};function Da(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,Ea,r),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=Qe(t.dataType,t.values)):t.values=Ze(t.dataType,t.size),t.values&&(t.size=null!==(n=t.size)&&void 0!==n?n:t.values.length,t.dataType=Ia(t.values)),at(e,t),ut(e,t,["name","numberOfComponents"]),Ra(e,t)}var La=yt(Da,"vtkDataArray"),Ba=Pa(Pa({newInstance:La,extend:Da},Ma),Xn);function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Va(e){var t=0;return e.filter((function(e,n){return n===t&&(t+=e+1,!0)}))}function _a(e){for(var t=0,n=0;n<e.length;)n+=e[n]+1,t++;return t}var Fa={extractCellSizes:Va,getNumberOfCells:_a};function Ga(e,t){t.classHierarchy.push("vtkCellArray");var n=ka({},e);e.getNumberOfCells=function(n){return void 0===t.numberOfCells||n?(t.cellSizes?t.numberOfCells=t.cellSizes.length:t.numberOfCells=_a(e.getData()),t.numberOfCells):t.numberOfCells},e.getCellSizes=function(n){return void 0===t.cellSizes||n?(t.cellSizes=Va(e.getData()),t.cellSizes):t.cellSizes},e.resize=function(r){var a=e.getNumberOfTuples();n.resize(r);var o=e.getNumberOfTuples();o<a&&(0===o?(t.numberOfCells=0,t.cellSizes=[]):(t.numberOfCells=void 0,t.cellSizes=void 0))},e.setData=function(e){n.setData(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=function(e){var n=e,r=t.values[n++];return t.values.subarray(n,n+r)},e.insertNextCell=function(n){var r=e.getNumberOfCells();return e.insertNextTuples([n.length].concat(ve(n))),++t.numberOfCells,null!=t.cellSizes&&t.cellSizes.push(n.length),r}}function Ua(e){return ka({empty:!0,numberOfComponents:1,dataType:Kn.UNSIGNED_INT},e)}function ja(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ba.extend(e,t,Ua(n)),Ga(e,t)}var za=ka({newInstance:Ot.newInstance(ja,"vtkCellArray"),extend:ja},Fa),Wa=Ot.vtkErrorMacro,Ha=[1,-1,1,-1,1,-1];function Ka(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*r,t.values=Ot.newTypedArray(t.dataType,t.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.setTuple(t,r)},e.getPoint=e.getTuple,e.insertNextPoint=function(t,n,r){return e.insertNextTuple([t,n,r])},e.getBounds=function(){if(3===e.getNumberOfComponents()){var n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];var r=e.getRange(1);t.bounds[2]=r[0],t.bounds[3]=r[1];var a=e.getRange(2);return t.bounds[4]=a[0],t.bounds[5]=a[1],t.bounds}if(2!==e.getNumberOfComponents())return Wa("getBounds called on an array with components of\n        ".concat(e.getNumberOfComponents())),Ha;var o=e.getRange(0);t.bounds[0]=o[0],t.bounds[1]=o[1];var i=e.getRange(1);return t.bounds[2]=i[0],t.bounds[3]=i[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}var Xa={empty:!0,numberOfComponents:3,dataType:Kn.FLOAT,bounds:[1,-1,1,-1,1,-1]};function qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xa,n),Ba.extend(e,t,n),Ka(e,t)}var Ya={newInstance:Ot.newInstance(qa,"vtkPoints"),extend:qa};function Za(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){t.pointsIds=n;var r=t.points.getData();r.length!==3*t.pointsIds.length&&(r=Ot.newTypedArray(e.getDataType(),3*t.pointsIds.length));var a=e.getData();t.pointsIds.forEach((function(e,t){var n=3*e,o=3*t;r[o]=a[n],r[++o]=a[++n],r[++o]=a[++n]})),t.points.setData(r)}else{t.points=e,t.pointsIds=new Array(e.getNumberOfPoints());for(var o=e.getNumberOfPoints()-1;o>=0;--o)t.pointsIds[o]=o}},e.getBounds=function(){var e=t.points.getNumberOfPoints(),n=[];if(e){t.points.getPoint(0,n),t.bounds[0]=n[0],t.bounds[1]=n[0],t.bounds[2]=n[1],t.bounds[3]=n[1],t.bounds[4]=n[2],t.bounds[5]=n[2];for(var r=1;r<e;r++)t.points.getPoint(r,n),t.bounds[0]=n[0]<t.bounds[0]?n[0]:t.bounds[0],t.bounds[1]=n[0]>t.bounds[1]?n[0]:t.bounds[1],t.bounds[2]=n[1]<t.bounds[2]?n[1]:t.bounds[2],t.bounds[3]=n[1]>t.bounds[3]?n[1]:t.bounds[3],t.bounds[4]=n[2]<t.bounds[4]?n[2]:t.bounds[4],t.bounds[5]=n[2]>t.bounds[5]?n[2]:t.bounds[5]}else sa(t.bounds);return t.bounds},e.getLength2=function(){e.getBounds();for(var n=0,r=0,a=0;a<3;a++)n+=(r=t.bounds[2*a+1]-t.bounds[2*a])*r;return n},e.getParametricDistance=function(e){for(var t,n=0,r=0;r<3;r++)(t=e[r]<0?-e[r]:e[r]>1?e[r]-1:0)>n&&(n=t);return n},e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.deepCopy=function(e){e.initialize(t.points,t.pointsIds)},e.getCellDimension=function(){},e.intersectWithLine=function(e,t,n,r,a,o,i){},e.evaluatePosition=function(e,t,n,r,a,o){Ot.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}var Qa={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Ja(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qa,n),Ot.obj(e,t),t.points||(t.points=Ya.newInstance()),Ot.get(e,t,["points","pointsIds"]),Za(e,t)}var $a={newInstance:Ot.newInstance(Ja,"vtkCell"),extend:Ja};function eo(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=function(n){var r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),o=new Uint32Array(r);if(n.isA("vtkPolyData")){for(var i=0;i<a;++i)n.getCellPoints(i).cellPointIds.forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(r),t.maxId=r-1;for(var s=function(t){n.getCellPoints(t).cellPointIds.forEach((function(n){e.insertCellReference(n,o[n]++,t)}))},c=0;c<a;++c)s(c)}else{for(var u=0;u<a;u++)$a.newInstance().getPointsIds().forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(r),t.maxId=r-1;for(var l=function(t){$a.newInstance().getPointsIds().forEach((function(n){e.insertCellReference(n,o[n]++,t)}))},d=0;d<a;++d)l(d)}},e.allocate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.array=Array(e).fill().map((function(){return{ncells:0,cells:null}})),t.extend=n,t.maxId=-1},e.initialize=function(){t.array=null},e.getLink=function(e){return t.array[e]},e.getNcells=function(e){return t.array[e].ncells},e.getCells=function(e){return t.array[e].cells},e.insertNextPoint=function(e){t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=function(e,n){t.array[e].cells[t.array[e].ncells++]=n},e.deletePoint=function(e){t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=function(e,n){t.array[n].cells=t.array[n].cells.filter((function(t){return t!==e})),t.array[n].ncells=t.array[n].cells.length},e.addCellReference=function(e,n){t.array[n].cells[t.array[n].ncells++]=e},e.resizeCellList=function(e,n){t.array[e].cells.length=n},e.squeeze=function(){!function(e,t){var n=t;for(t>=e.array.length&&(n+=e.array.length);n>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=n}(t,t.maxId+1)},e.reset=function(){t.maxId=-1},e.deepCopy=function(e){t.array=ve(e.array),t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=function(e){++t.array[e].ncells},e.allocateLinks=function(e){for(var n=0;n<e;++n)t.array[n].cells=new Array(t.array[n].ncells)},e.insertCellReference=function(e,n,r){t.array[e].cells[n]=r}}var to={array:null,maxId:0,extend:0};function no(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,to,n),Ot.obj(e,t),eo(e,t)}var ro={newInstance:Ot.newInstance(no,"vtkCellLinks"),extend:no},ao=0,oo=1,io=2,so=3,co=4,uo=5,lo=6,po=7,fo=9,go=21,mo=41,vo=42,ho=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bo={getClassNameFromTypeId:function(e){return e<ho.length?ho[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return ho.findIndex(e)},isLinear:function(e){return e<go||e===mo||e===vo},hasSubCells:function(e){return e===lo||e===co||e===io}};function xo(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.size=e>0?e:1,t.extend=n>0?n:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=function(e,n,r){t.typeArray[e]=n,t.locationArray[e]=r,e>t.maxId&&(t.maxId=e)},e.insertNextCell=function(n,r){return e.insertCell(++t.maxId,n,r),t.maxId},e.setCellTypes=function(e,n,r){t.size=e,t.typeArray=n,t.locationArray=r,t.maxId=e-1},e.getCellLocation=function(e){return t.locationArray[e]},e.deleteCell=function(e){t.typeArray[e]=ao},e.getNumberOfTypes=function(){return t.maxId+1},e.isType=function(t){for(var n=e.getNumberOfTypes(),r=0;r<n;++r)if(t===e.getCellType(r))return!0;return!1},e.insertNextType=function(t){return e.insertNextCell(t,-1)},e.getCellType=function(e){return t.typeArray[e]},e.reset=function(){t.maxId=-1},e.deepCopy=function(n){e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}var To={size:0,maxId:-1,extend:1e3};function So(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,To,n),Ot.obj(e,t),Ot.get(e,t,["size","maxId","extend"]),Ot.getArray(e,t,["typeArray","locationArray"]),xo(e,t)}var Po=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(So,"vtkCellTypes"),extend:So},bo),wo={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ao=wo.IntersectionState;function Io(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o={t:Number.MIN_VALUE,distance:0},i=[];i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2];var s=i[0]*(e[0]-t[0])+i[1]*(e[1]-t[1])+i[2]*(e[2]-t[2]),c=Cr(i,i),u=1e-5*s;return 0!==c&&(o.t=s/c),u<0&&(u=-u),-u<c&&c<u||c<=0||o.t<0?r=t:o.t>1?r=n:(r=i,i[0]=t[0]+o.t*i[0],i[1]=t[1]+o.t*i[1],i[2]=t[2]+o.t*i[2]),a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2]),o.distance=Rr(r,e),o}function Mo(e,t,n,r,a,o){var i=[],s=[],c=[];a[0]=0,o[0]=0,Tr(t,e,i),Tr(r,n,s),Tr(n,e,c);var u=[Cr(i,i),-Cr(i,s),-Cr(i,s),Cr(s,s)],l=[];if(l[0]=Cr(i,c),l[1]=-Cr(s,c),0===Zr(u,l,2)){for(var d,p=Number.MAX_VALUE,f=[e,t,n,r],g=[n,n,e,e],m=[r,r,t,t],v=[o[0],o[0],a[0],a[0]],h=[a[0],a[0],o[0],o[0]],y=0;y<4;y++)(d=Io(f[y],g[y],m[y])).distance<p&&(p=d.distance,v[y]=d.t,h[y]=y%2);return Ao.ON_LINE}return a[0]=l[0],o[0]=l[1],a[0]>=0&&a[0]<=1&&o[0]>=0&&o[0]<=1?Ao.YES_INTERSECTION:Ao.NO_INTERSECTION}var Ro={distanceToLine:Io,intersection:Mo};function Eo(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=function(){return 1},e.intersectWithLine=function(e,n,r,a,o){var i={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};o[1]=0,o[2]=0;var s=[],c=[],u=[];t.points.getPoint(0,c),t.points.getPoint(1,u);var l,d=[],p=[],f=Mo(e,n,c,u,d,p);if(i.t=d[0],i.betweenPoints=(l=i.t)>=0&&l<=1,o[0]=p[0],f===Ao.YES_INTERSECTION){for(var g=0;g<3;g++)a[g]=c[g]+o[0]*(u[g]-c[g]),s[g]=e[g]+i.t*(n[g]-e[g]);if(Rr(a,s)<=r*r)return i.intersect=1,i}else{var m;if(i.t<0)return(m=Io(e,c,u,a)).distance<=r*r?(i.t=0,i.intersect=1,i.betweenPoints=!0,i):i;if(i.t>1)return(m=Io(n,c,u,a)).distance<=r*r?(i.t=1,i.intersect=1,i.betweenPoints=!0,i):i;if(o[0]<0)return o[0]=0,m=Io(c,e,n,a),i.t=m.t,m.distance<=r*r?(i.intersect=1,i):i;if(o[0]>1)return o[0]=1,m=Io(u,e,n,a),i.t=m.t,m.distance<=r*r?(i.intersect=1,i):i}return i},e.evaluateLocation=function(e,n,r){var a=[],o=[];t.points.getPoint(0,a),t.points.getPoint(1,o);for(var i=0;i<3;i++)n[i]=a[i]+e[0]*(o[i]-a[i]);r[0]=1-e[0],r[1]=e[0]}}var Do={};function Lo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Do,n),$a.extend(e,t,n),Eo(e,t)}var Bo=Oo(Oo({newInstance:Ot.newInstance(Lo,"vtkLine"),extend:Lo},Ro),wo),No=Ot.vtkErrorMacro,ko=Ot.vtkWarningMacro;function Vo(e,t){t.classHierarchy.push("vtkFieldData");var n=e.getState;t.arrays&&(t.arrays=t.arrays.map((function(e){return{data:Oe(e.data)}}))),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=function(n){e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map((function(e){return e})),t.arrays=n.arrays().map((function(e){return{array:e}}))},e.getNumberOfArrays=function(){return t.arrays.length},e.getNumberOfActiveArrays=function(){return t.arrays.length},e.addArray=function(n){var r=n.getName(),a=e.getArrayWithIndex(r),o=a.array,i=a.index;return null!=o?(t.arrays[i]={data:n},i):(t.arrays=[].concat(t.arrays,{data:n}),t.arrays.length-1)},e.removeAllArrays=function(){t.arrays=[]},e.removeArray=function(n){var r=t.arrays.findIndex((function(e){return e.getName()===n}));return e.removeArrayByIndex(r)},e.removeArrayByIndex=function(e){return-1!==e&&e<t.arrays.length&&(t.arrays.splice(e,1),!0)},e.getArrays=function(){return t.arrays.map((function(e){return e.data}))},e.getArray=function(t){return"number"==typeof t?e.getArrayByIndex(t):e.getArrayByName(t)},e.getArrayByName=function(e){return t.arrays.reduce((function(t,n,r){return n.data.getName()===e?n.data:t}),null)},e.getArrayWithIndex=function(e){var n=t.arrays.findIndex((function(t){return t.data.getName()===e}));return{array:-1!==n?t.arrays[n].data:null,index:n}},e.getArrayByIndex=function(e){return e>=0&&e<t.arrays.length?t.arrays[e].data:null},e.hasArray=function(t){return e.getArrayWithIndex(t).index>=0},e.getArrayName=function(e){var n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=function(){return t.copyFieldFlags},e.getFlag=function(e){return t.copyFieldFlags[e]},e.passData=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach((function(o){var i=e.getFlag(o.getName());if(!1!==i&&(!t.doCopyAllOff||!0===i)&&o){var s=e.getArrayByName(o.getName());if(s)if(o.getNumberOfComponents()===s.getNumberOfComponents())if(r>-1&&r<o.getNumberOfTuples()){var c=a>-1?a:r;s.insertTuple(c,o.getTuple(r))}else s.insertTuples(0,o.getTuples());else No("Unhandled case in passData");else if(r<0||r>o.getNumberOfTuples())e.addArray(o),n.getAttributes(o).forEach((function(t){e.setAttribute(o,t)}));else{var u=o.getNumberOfComponents(),l=o.getNumberOfValues(),d=a>-1?a:r;l<=d*u&&(l=(d+1)*u),(s=Ba.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:u,values:Ot.newTypedArray(o.getDataType(),l),size:0})).insertTuple(d,o.getTuple(r)),e.addArray(s),n.getAttributes(o).forEach((function(t){e.setAttribute(s,t)}))}}}))},e.interpolateData=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;n.getArrays().forEach((function(s){var c=e.getFlag(s.getName());if(!1!==c&&(!t.doCopyAllOff||!0===c)&&s){var u=e.getArrayByName(s.getName());if(u)if(s.getNumberOfComponents()===u.getNumberOfComponents())if(r>-1&&r<s.getNumberOfTuples()){var l=o>-1?o:r;u.interpolateTuple(l,s,r,s,a,i),ko("Unexpected case in interpolateData")}else u.insertTuples(s.getTuples());else No("Unhandled case in interpolateData");else if(r<0||a<0||r>s.getNumberOfTuples())e.addArray(s),n.getAttributes(s).forEach((function(t){e.setAttribute(s,t)}));else{var d=s.getNumberOfComponents(),p=s.getNumberOfValues(),f=o>-1?o:r;p<=f*d&&(p=(f+1)*d),(u=Ba.newInstance({name:s.getName(),dataType:s.getDataType(),numberOfComponents:d,values:Ot.newTypedArray(s.getDataType(),p),size:0})).interpolateTuple(f,s,r,s,a,i),e.addArray(u),n.getAttributes(s).forEach((function(t){e.setAttribute(u,t)}))}}}))},e.copyFieldOn=function(e){t.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){t.copyFieldFlags[e]=!1},e.copyAllOn=function(){t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){t.copyFieldFlags={}},e.deepCopy=function(e){t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.deepCopy(e),{data:t}}))},e.copyFlags=function(e){return e.getCopyFieldFlags().map((function(e){return e}))},e.reset=function(){return t.arrays.forEach((function(e){return e.data.reset()}))},e.getMTime=function(){return t.arrays.reduce((function(e,t){return t.data.getMTime()>e?t.data.getMTime():e}),t.mtime)},e.getNumberOfComponents=function(){return t.arrays.reduce((function(e,t){return e+t.data.getNumberOfComponents()}),0)},e.getNumberOfTuples=function(){return t.arrays.length>0?t.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=n();return e&&(e.arrays=t.arrays.map((function(e){return{data:e.data.getState()}}))),e}}var _o={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Fo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_o,n),Ot.obj(e,t),Vo(e,t)}var Go={newInstance:Ot.newInstance(Fo,"vtkFieldData"),extend:Fo},Uo={DEFAULT:0,SINGLE:1,DOUBLE:2},jo={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:{SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:Uo,PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ho=jo.AttributeTypes,Ko=jo.AttributeCopyOperations,Xo=Ot.vtkWarningMacro;function qo(e,t){var n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(e){var t=n.find((function(t){return Ho[t.toUpperCase()]===e||"number"!=typeof e&&t.toLowerCase()===e.toLowerCase()}));return void 0===t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes");var a=Wo({},e);e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(n,a){var o=r(a);if(n&&"PEDIGREEIDS"===o.toUpperCase()&&!n.isA("vtkDataArray"))return Xo("Cannot set attribute ".concat(o,". The attribute must be a vtkDataArray.")),-1;if(n&&!e.checkNumberOfComponents(n,o))return Xo("Cannot set attribute ".concat(o,". Incorrect number of components.")),-1;var i=t["active".concat(o)];if(i>=0&&i<t.arrays.length){if(t.arrays[i]===n)return i;e.removeArrayByIndex(i)}return n?(i=e.addArray(n),t["active".concat(o)]=i):t["active".concat(o)]=-1,e.modified(),t["active".concat(o)]},e.getAttributes=function(t){return n.filter((function(n){return e["get".concat(n)]()===t}))},e.setActiveAttributeByName=function(t,n){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e.setActiveAttributeByIndex=function(n,a){var o=r(a);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==o.toUpperCase()){var i=e.getArrayByIndex(n);if(!i.isA("vtkDataArray"))return Xo("Cannot set attribute ".concat(o,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(i,o))return Xo("Cannot set attribute ".concat(o,". Incorrect number of components.")),-1}return t["active".concat(o)]=n,e.modified(),n}return-1===n&&(t["active".concat(o)]=n,e.modified()),-1},e.getActiveAttribute=function(t){var n=r(t);return e["get".concat(n)]()},e.removeAllArrays=function(){n.forEach((function(e){t["active".concat(e)]=-1})),a.removeAllArrays()},e.removeArrayByIndex=function(e){return-1!==e&&n.forEach((function(n){e===t["active".concat(n)]?t["active".concat(n)]=-1:e<t["active".concat(n)]&&(t["active".concat(n)]-=1)})),a.removeArrayByIndex(e)},n.forEach((function(n){var r="active".concat(n);e["get".concat(n)]=function(){return e.getArrayByIndex(t[r])},e["set".concat(n)]=function(t){return e.setAttribute(t,n)},e["setActive".concat(n)]=function(t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e["copy".concat(n,"Off")]=function(){var e=n.toUpperCase();t.copyAttributeFlags[Ko.PASSDATA][Ho[e]]=!1},e["copy".concat(n,"On")]=function(){var e=n.toUpperCase();t.copyAttributeFlags[Ko.PASSDATA][Ho[e]]=!0}})),e.initializeAttributeCopyFlags=function(){t.copyAttributeFlags=[],Object.keys(Ko).filter((function(e){return"ALLCOPY"!==e})).forEach((function(e){t.copyAttributeFlags[Ko[e]]=Object.keys(Ho).filter((function(e){return"NUM_ATTRIBUTES"!==e})).reduce((function(e,t){return e[Ho[t]]=!0,e}),[])})),t.copyAttributeFlags[Ko.COPYTUPLE][Ho.GLOBALIDS]=!1,t.copyAttributeFlags[Ko.INTERPOLATE][Ho.GLOBALIDS]=!1,t.copyAttributeFlags[Ko.COPYTUPLE][Ho.PEDIGREEIDS]=!1},e.initialize=Ot.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach((function(n){t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(Ba.newInstance(t.dataArrays[n]))}));var o=e.shallowCopy;e.shallowCopy=function(e,n){o(e,n),t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.shallowCopy(e,n),{data:t}}))},e.initializeAttributeCopyFlags()}var Yo={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function Zo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yo,n),Go.extend(e,t,n),Ot.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),qo(e,t)}var Qo=Wo({newInstance:Ot.newInstance(Zo,"vtkDataSetAttributes"),extend:Zo},jo),Jo={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7},$o={FieldDataTypes:{UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},FieldAssociations:Jo};function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ti=["pointData","cellData","fieldData"];function ni(e,t){t.classHierarchy.push("vtkDataSet"),ti.forEach((function(e){t[e]?t[e]=Oe(t[e]):t[e]=Qo.newInstance()}));var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),ti.forEach((function(n){t[n]=Qo.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))}))}}var ri={};function ai(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ri,n),Ot.obj(e,t),Ot.setGet(e,t,ti),ni(e,t)}var oi=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(ai,"vtkDataSet"),extend:ai},$o);function ii(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=Oe(t.points):t.points=Ya.newInstance(),e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()};var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),t.points=Ya.newInstance(),t.points.shallowCopy(e.getPoints())}}var si={};function ci(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,si,n),oi.extend(e,t,n),Ot.setGet(e,t,["points"]),ii(e,t)}var ui={newInstance:Ot.newInstance(ci,"vtkPointSet"),extend:ci};function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var di=1e-6,pi="coincide",fi="disjoint";function gi(e,t,n){var r=n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]);return Math.abs(r)}function mi(e,t,n,r){var a=[];Tr(e,t,a);var o=Cr(n,a);r[0]=e[0]-o*n[0],r[1]=e[1]-o*n[1],r[2]=e[2]-o*n[2]}function vi(e,t,n){var r=Cr(e,t),a=Cr(t,t);return 0===a&&(a=1),n[0]=e[0]-r*t[0]/a,n[1]=e[1]-r*t[1]/a,n[2]=e[2]-r*t[2]/a,n}function hi(e,t,n,r){var a=[];Tr(e,t,a);var o=Cr(n,a),i=Cr(n,n);0!==i?(r[0]=e[0]-o*n[0]/i,r[1]=e[1]-o*n[1]/i,r[2]=e[2]-o*n[2]/i):(r[0]=e[0],r[1]=e[1],r[2]=e[2])}function yi(e,t,n,r){var a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},o=[],i=[];Tr(t,e,o),Tr(n,e,i);var s=Cr(r,i),c=Cr(r,o);return(c<0?-c:c)<=(s<0?-s*di:s*di)||(a.t=s/c,a.x[0]=e[0]+a.t*o[0],a.x[1]=e[1]+a.t*o[1],a.x[2]=e[2]+a.t*o[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function bi(e,t,n,r){var a={intersection:!1,l0:[],l1:[],error:null},o=[];Or(t,r,o);var i,s=o.map((function(e){return Math.abs(e)}));if(s[0]+s[1]+s[2]<di){var c=[];return Tr(e,n,c),0===Cr(t,c)?a.error=pi:a.error=fi,a}i=s[0]>s[1]&&s[0]>s[2]?"x":s[1]>s[2]?"y":"z";var u=[],l=-Cr(t,e),d=-Cr(r,n);switch(i){case"x":u[0]=0,u[1]=(d*t[2]-l*r[2])/o[0],u[2]=(l*r[1]-d*t[1])/o[0];break;case"y":u[0]=(l*r[2]-d*t[2])/o[1],u[1]=0,u[2]=(d*t[0]-l*r[0])/o[1];break;case"z":u[0]=(d*t[1]-l*r[1])/o[2],u[1]=(l*r[0]-d*t[0])/o[2],u[2]=0}return a.l0=u,xr(u,o,a.l1),a.intersection=!0,a}var xi={evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:gi,projectPoint:mi,projectVector:vi,generalizedProjectPoint:hi,intersectWithLine:yi,intersectWithPlane:bi,DISJOINT:fi,COINCIDE:pi};function Ti(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return gi(e,t.origin,t.normal)},e.projectPoint=function(e,n){mi(e,t.origin,t.normal,n)},e.projectVector=function(e,n){return vi(e,t.normal,n)},e.push=function(e){if(0!==e)for(var n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=function(e,n){hi(e,t.origin,t.normal,n)},e.evaluateFunction=function(e,n,r){return Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(r-t.origin[2])},e.evaluateGradient=function(e){return[t.normal[0],t.normal[1],t.normal[2]]},e.intersectWithLine=function(e,n){return yi(e,n,t.origin,t.normal)},e.intersectWithPlane=function(e,n){return bi(e,n,t.origin,t.normal)}}var Si={normal:[0,0,1],origin:[0,0,0]};function Pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Si,n),Ot.obj(e,t),Ot.setGetArray(e,t,["normal","origin"],3),Ti(e,t)}var wi=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Pi,"vtkPlane"),extend:Pi},xi);function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e,t,n,r){var a=n[0]-t[0],o=n[1]-t[1],i=n[2]-t[2],s=e[0]-t[0],c=e[1]-t[1],u=e[2]-t[2];r[0]=o*u-i*c,r[1]=i*s-a*u,r[2]=a*c-o*s}function Ai(e,t,n,r){Oi(e,t,n,r);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);0!==a&&(r[0]/=a,r[1]/=a,r[2]/=a)}var Ii={computeNormalDirection:Oi,computeNormal:Ai,intersectWithTriangle:function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1e-6,s=!1,c=[],u=[],l=[],d=[],p=[];Ai(e,t,n,d),Ai(r,a,o,p);var f=-Cr(d,e),g=-Cr(p,r),m=[Cr(p,e)+g,Cr(p,t)+g,Cr(p,n)+g];if(m[0]*m[1]>i&&m[0]*m[2]>i)return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:l};var v=[Cr(d,r)+f,Cr(d,a)+f,Cr(d,o)+f];if(v[0]*v[1]>i&&v[0]*v[2]>i)return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:l};if(Math.abs(d[0]-p[0])<1e-9&&Math.abs(d[1]-p[1])<1e-9&&Math.abs(d[2]-p[2])<1e-9&&Math.abs(f-g)<1e-9)return{intersect:!1,coplanar:s=!0,pt1:c,pt2:u,surfaceId:l};var h=[e,t,n],y=[r,a,o],b=Cr(d,p),x=(f-g*b)/(b*b-1),T=(g-f*b)/(b*b-1),S=[x*d[0]+T*p[0],x*d[1]+T*p[1],x*d[2]+T*p[2]],P=Or(d,p,[]);Ir(P);for(var w,C,O=0,A=0,I=[],M=[],R=50,E=50,D=0;D<3;D++){var L=D,B=(D+1)%3,N=wi.intersectWithLine(h[L],h[B],r,p);N.intersection&&N.t>0-i&&N.t<1+i&&(N.t<1+i&&N.t>1-i&&(R=O),I[O++]=Cr(N.x,P)-Cr(S,P));var k=wi.intersectWithLine(y[L],y[B],e,d);k.intersection&&k.t>0-i&&k.t<1+i&&(k.t<1+i&&k.t>1-i&&(E=A),M[A++]=Cr(k.x,P)-Cr(S,P))}if(O>2){O--;var V=I[2];I[2]=I[R],I[R]=V}if(A>2){A--;var _=M[2];M[2]=M[E],M[E]=_}if(2!==O||2!==A)return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:l};if(Number.isNaN(I[0])||Number.isNaN(I[1])||Number.isNaN(M[0])||Number.isNaN(M[1]))return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:l};if(I[0]>I[1]){var F=I[1];I[1]=I[0],I[0]=F}if(M[0]>M[1]){var G=M[1];M[1]=M[0],M[0]=G}return I[1]<M[0]||M[1]<I[0]?{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:l}:(I[0]<M[0]?I[1]<M[1]?(l[0]=2,l[1]=1,w=M[0],C=I[1]):(l[0]=2,l[1]=2,w=M[0],C=M[1]):I[1]<M[1]?(l[0]=1,l[1]=1,w=I[0],C=I[1]):(l[0]=1,l[1]=2,w=I[0],C=M[1]),wr(S,P,w,c),wr(S,P,C,u),{intersect:!0,coplanar:s,pt1:c,pt2:u,surfaceId:l})}};function Mi(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=function(){return 2},e.intersectWithLine=function(n,r,a,o,i){var s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};i[2]=0;var c=a*a,u=[],l=[],d=[];t.points.getPoint(0,u),t.points.getPoint(1,l),t.points.getPoint(2,d);var p=[];if(Ai(u,l,d,p),0!==p[0]||0!==p[1]||0!==p[2]){var f=wi.intersectWithLine(n,r,u,p);if(s.betweenPoints=f.betweenPoints,s.t=f.t,o[0]=f.x[0],o[1]=f.x[1],o[2]=f.x[2],!f.intersection)return i[0]=0,i[1]=0,s.intersect=0,s;var g=e.evaluatePosition(o,[],i,[]);if(g.evaluation>=0)return g.dist2<=c?(s.intersect=1,s):(s.intersect=g.evaluation,s)}var m=Rr(u,l),v=Rr(l,d),h=Rr(d,u);t.line||(t.line=Bo.newInstance()),m>v&&m>h?(t.line.getPoints().setPoint(0,u),t.line.getPoints().setPoint(1,l)):v>h&&v>m?(t.line.getPoints().setPoint(0,l),t.line.getPoints().setPoint(1,d)):(t.line.getPoints().setPoint(0,d),t.line.getPoints().setPoint(1,u));var y=t.line.intersectWithLine(n,r,a,o,i);if(s.betweenPoints=y.betweenPoints,s.t=y.t,y.intersect){for(var b=[],x=[],T=[],S=0;S<3;S++)b[S]=u[S]-d[S],x[S]=l[S]-d[S],T[S]=o[S]-d[S];return i[0]=Cr(T,b)/h,i[1]=Cr(T,x)/v,s.intersect=1,s}return i[0]=0,i[1]=0,s.intersect=0,s},e.evaluatePosition=function(e,n,r,a){var o,i,s,c,u,l,d,p={subId:0,dist2:0,evaluation:-1},f=[],g=[],m=[],v=[],h=[],y=[],b=[],x=0,T=[],S=[],P=[],w=[],C=[];p.subId=0,r[2]=0,t.points.getPoint(1,f),t.points.getPoint(2,g),t.points.getPoint(0,m),Oi(f,g,m,v),wi.generalizedProjectPoint(e,f,v,C);var O=0;for(o=0;o<3;o++)(s=v[o]<0?-v[o]:v[o])>O&&(O=s,x=o);for(i=0,o=0;o<3;o++)o!==x&&(T[i++]=o);for(o=0;o<2;o++)h[o]=C[T[o]]-m[T[o]],y[o]=f[T[o]]-m[T[o]],b[o]=g[T[o]]-m[T[o]];if(0===(c=Dr(y,b)))return r[0]=0,r[1]=0,p.evaluation=-1,p;if(r[0]=Dr(h,b)/c,r[1]=Dr(y,h)/c,a[0]=1-(r[0]+r[1]),a[1]=r[0],a[2]=r[1],a[0]>=0&&a[0]<=1&&a[1]>=0&&a[1]<=1&&a[2]>=0&&a[2]<=1)n&&(p.dist2=Rr(C,e),n[0]=C[0],n[1]=C[1],n[2]=C[2]),p.evaluation=1;else{var A;if(n)if(a[1]<0&&a[2]<0)for(u=Rr(e,m),l=Bo.distanceToLine(e,f,m,A,P),d=Bo.distanceToLine(e,m,g,A,w),u<l?(p.dist2=u,S=m):(p.dist2=l,S=P),d<p.dist2&&(p.dist2=d,S=w),o=0;o<3;o++)n[o]=S[o];else if(a[2]<0&&a[0]<0)for(u=Rr(e,f),l=Bo.distanceToLine(e,f,m,A,P),d=Bo.distanceToLine(e,f,g,A,w),u<l?(p.dist2=u,S=f):(p.dist2=l,S=P),d<p.dist2&&(p.dist2=d,S=w),o=0;o<3;o++)n[o]=S[o];else if(a[1]<0&&a[0]<0)for(u=Rr(e,g),l=Bo.distanceToLine(e,g,m,A,P),d=Bo.distanceToLine(e,f,g,A,w),u<l?(p.dist2=u,S=g):(p.dist2=l,S=P),d<p.dist2&&(p.dist2=d,S=w),o=0;o<3;o++)n[o]=S[o];else if(a[0]<0){var I=Bo.distanceToLine(e,f,g,n);p.dist2=I.distance}else if(a[1]<0){var M=Bo.distanceToLine(e,g,m,n);p.dist2=M.distance}else if(a[2]<0){var R=Bo.distanceToLine(e,f,m,n);p.dist2=R.distance}p.evaluation=0}return p},e.evaluateLocation=function(e,n,r){var a=[],o=[],i=[];t.points.getPoint(0,a),t.points.getPoint(1,o),t.points.getPoint(2,i);for(var s=1-e[0]-e[1],c=0;c<3;c++)n[c]=a[c]*s+o[c]*e[0]+i[c]*e[1];r[0]=s,r[1]=e[0],r[2]=e[1]},e.getParametricDistance=function(e){var t,n=0,r=[];r[0]=e[0],r[1]=e[1],r[2]=1-e[0]-e[1];for(var a=0;a<3;a++)(t=r[a]<0?-r[a]:r[a]>1?r[a]-1:0)>n&&(n=t);return n}}var Ri={};function Ei(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ri,n),$a.extend(e,t,n),Mi(e,t)}var Di,Li=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Ei,"vtkTriangle"),extend:Ei},Ii),Bi=["verts","lines","polys","strips"],Ni=Ot.vtkWarningMacro,ki=(me(Di={},so,Bo),me(Di,co,Bo),me(Di,uo,Li),Di);function Vi(e,t){t.classHierarchy.push("vtkPolyData"),Bi.forEach((function(n){e["getNumberOf".concat(function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e){return e.toUpperCase()})).replace(/\s+/g,"")}(n))]=function(){return t[n].getNumberOfCells()},t[n]?t[n]=Oe(t[n]):t[n]=za.newInstance()})),e.getNumberOfCells=function(){return Bi.reduce((function(e,n){return e+t[n].getNumberOfCells()}),0)};var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),Bi.forEach((function(n){t[n]=za.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))}))},e.buildCells=function(){var n=e.getNumberOfVerts(),r=e.getNumberOfLines(),a=e.getNumberOfPolys(),o=e.getNumberOfStrips(),i=n+r+a+o,s=new Uint8Array(i),c=s,u=new Uint32Array(i),l=u;if(n){var d=0;t.verts.getCellSizes().forEach((function(e,t){l[t]=d,c[t]=e>1?io:oo,d+=e+1})),l=l.subarray(n),c=c.subarray(n)}if(r){var p=0;t.lines.getCellSizes().forEach((function(e,t){l[t]=p,c[t]=e>2?co:so,1===e&&Ni("Building VTK_LINE ",t," with only one point, but VTK_LINE needs at least two points. Check the input."),p+=e+1})),l=l.subarray(r),c=c.subarray(r)}if(a){var f=0;t.polys.getCellSizes().forEach((function(e,t){switch(l[t]=f,e){case 3:c[t]=uo;break;case 4:c[t]=fo;break;default:c[t]=po}e<3&&Ni("Building VTK_TRIANGLE ",t," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),f+=e+1})),l+=l.subarray(a),c+=c.subarray(a)}if(o){var g=0;c.fill(lo,0,o),t.strips.getCellSizes().forEach((function(e,t){l[t]=g,g+=e+1}))}t.cells=Po.newInstance(),t.cells.setCellTypes(i,s,u)},e.buildLinks=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;void 0===t.cells&&e.buildCells(),t.links=ro.newInstance(),n>0?t.links.allocate(n):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellType=function(e){return t.cells.getCellType(e)},e.getCellPoints=function(n){var r=e.getCellType(n),a=null;switch(r){case oo:case io:a=t.verts;break;case so:case co:a=t.lines;break;case uo:case fo:case po:a=t.polys;break;case lo:a=t.strips;break;default:return a=null,{type:0,cellPointIds:null}}var o=t.cells.getCellLocation(n);return{cellType:r,cellPointIds:a.getCell(o)}},e.getPointCells=function(e){return t.links.getCells(e)},e.getCellEdgeNeighbors=function(e,n,r){var a=t.links.getLink(n),o=t.links.getLink(r);return a.cells.filter((function(t){return t!==e&&-1!==o.cells.indexOf(t)}))},e.getCell=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.getCellPoints(t),a=n||ki[r.cellType].newInstance();return a.initialize(e.getPoints(),r.cellPointIds),a}}var _i={};function Fi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_i,n),ui.extend(e,t,n),Ot.get(e,t,["cells","links"]),Ot.setGet(e,t,["verts","lines","polys","strips"]),Vi(e,t)}var Gi={newInstance:Ot.newInstance(Fi,"vtkPolyData"),extend:Fi},Ui=Ot.vtkErrorMacro,ji=function(){function e(){Ae(this,e),this.segmentMapping={},this.segments=[null],this.faces=[]}return Me(e,[{key:"addSegment",value:function(e){var t=e[0],n=e[e.length-1];if(!(t===n||e.length<2)){var r=this.segmentMapping[t],a=this.segmentMapping[n];if(void 0!==r&&void 0!==a)if(Math.abs(r)===Math.abs(a)){var o=r<a?a:r,i=this.segments[o];if(r>0)for(var s=1;s<e.length-1;s++)i.push(e[s]);else for(var c=1;c<e.length-1;c++)i.unshift(e[e.length-1-c]);this.faces.push(i),this.segments[o]=null,this.segmentMapping[t]=void 0,this.segmentMapping[n]=void 0}else{var u=Math.abs(r),l=Math.abs(a),d=this.segments[u],p=this.segments[l];this.segments[u]=null,this.segments[l]=null,this.segmentMapping[d[0]]=void 0,this.segmentMapping[p[0]]=void 0,this.segmentMapping[d[d.length-1]]=void 0,this.segmentMapping[p[p.length-1]]=void 0,this.addSegment(e),this.addSegment(d),this.addSegment(p)}else if(void 0!==r){if(r>0){for(var f=this.segments[r],g=1;g<e.length;g++)f.push(e[g]);this.segmentMapping[n]=r}else{var m=this.segments[-r];this.segmentMapping[n]=r;for(var v=1;v<e.length;v++)m.unshift(e[v])}this.segmentMapping[t]=void 0}else if(void 0!==a){if(a>0){for(var h=this.segments[a],y=1;y<e.length;y++)h.push(e[e.length-1-y]);this.segmentMapping[t]=a}else{var b=this.segments[-a];this.segmentMapping[t]=a;for(var x=1;x<e.length;x++)b.unshift(e[e.length-x-1])}this.segmentMapping[n]=void 0}else{var T=this.segments.length;this.segments.push(e),this.segmentMapping[t]=-T,this.segmentMapping[n]=T}}}}]),e}();function zi(e,t){t.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),e.requestData=function(e,t){var n=e[0];if(n){var r=Gi.newInstance();r.shallowCopy(n);for(var a=new ji,o=n.getLines().getData(),i=0;i<o.length;){for(var s=o[i++],c=[],u=0;u<s;u++)c.push(o[i+u]);a.addSegment(c),i+=s}for(var l=a.faces,d=l.length,p=0;p<l.length;p++)d+=l[p].length;var f=new Uint16Array(d);i=0;for(var g=0;g<l.length;g++){var m=l[g];f[i++]=m.length;for(var v=0;v<m.length;v++)f[i++]=m[v]}r.setPolys(za.newInstance({values:f,name:"faces"})),t[0]=r}else Ui("Invalid or missing input")}}var Wi={};function Hi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wi,n),Ot.obj(e,t),Ot.algo(e,t,1,1),zi(e,t)}var Ki={newInstance:Ot.newInstance(Hi,"vtkClosedPolyLineToSurfaceFilter"),extend:Hi},Xi=function(e){return e},qi=1e-6,Yi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ae(this,e),this.matrix=m(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=t?u:Xi}return Me(e,[{key:"rotateFromDirections",value:function(e,t){var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(16);en(n,e[0],e[1],e[2]),en(r,t[0],t[1],t[2]),yn(n,n),yn(r,r);var o=bn(n,r);return o>=1||(xn(this.tmp,n,r),Qt(this.tmp)<qi&&(xn(this.tmp,[1,0,0],e),Qt(this.tmp)<qi&&xn(this.tmp,[0,1,0],e)),M(a,Math.acos(o),this.tmp),x(this.matrix,this.matrix,a)),this}},{key:"rotate",value:function(e,t){return en.apply(a,[this.tmp].concat(ve(t))),yn(this.tmp,this.tmp),P(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}},{key:"rotateX",value:function(e){return w(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateY",value:function(e){return C(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateZ",value:function(e){return O(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"translate",value:function(e,t,n){return en(this.tmp,e,t,n),T(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(e,t,n){return en(this.tmp,e,t,n),S(this.matrix,this.matrix,this.tmp),this}},{key:"multiply",value:function(e){return x(this.matrix,this.matrix,e),this}},{key:"multiply3x3",value:function(e){return x(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}},{key:"invert",value:function(){return h(this.matrix,this.matrix),this}},{key:"identity",value:function(){return m(this.matrix),this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(_r(Zn,this.matrix))return this;for(var r=-1===n?e.length:t+3*n,a=t;a<r;a+=3)en(this.tmp,e[a],e[a+1],e[a+2]),Cn(this.tmp,this.tmp,this.matrix),e[a]=this.tmp[0],e[a+1]=this.tmp[1],e[a+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return e&&16===e.length&&p(this.matrix,e),this}}]),e}(),Zi=function(){return new Yi(!0)},Qi=function(){return new Yi(!1)};function Ji(e,t){t.classHierarchy.push("vtkCubeSource"),e.setBounds=function(){var e=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))e=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)e.push(n<0||arguments.length<=n?void 0:arguments[n]);6===e.length&&(t.xLength=e[1]-e[0],t.yLength=e[3]-e[2],t.zLength=e[5]-e[4],t.center=[(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2])},e.requestData=function(e,n){var r;if(!t.deleted){var a=Gi.newInstance();n[0]=a;var o=Ot.newTypedArray(t.pointType,72);a.getPoints().setData(o,3);var i=Ot.newTypedArray(t.pointType,72),s=Ba.newInstance({name:"Normals",values:i,numberOfComponents:3});a.getPointData().setNormals(s);var c=2;!0===t.generate3DTextureCoordinates&&(c=3);var u=Ot.newTypedArray(t.pointType,24*c),l=Ba.newInstance({name:"TextureCoordinates",values:u,numberOfComponents:c});a.getPointData().setTCoords(l);var d=[0,0,0],p=[0,0,0],f=[0,0],g=0;d[0]=-t.xLength/2,p[0]=-1,p[1]=0,p[2]=0;for(var m=0;m<2;m++){d[1]=-t.yLength/2;for(var v=0;v<2;v++){f[1]=d[1]+.5,d[2]=-t.zLength/2;for(var h=0;h<2;h++)f[0]=(d[2]+.5)*(1-2*m),o[3*g]=d[0],o[3*g+1]=d[1],o[3*g+2]=d[2],i[3*g]=p[0],i[3*g+1]=p[1],i[3*g+2]=p[2],2===c?(u[g*c]=f[0],u[g*c+1]=f[1]):(u[g*c]=2*m-1,u[g*c+1]=2*v-1,u[g*c+2]=2*h-1),g++,d[2]+=t.zLength;d[1]+=t.yLength}d[0]+=t.xLength,p[0]+=2}d[1]=-t.yLength/2,p[1]=-1,p[0]=0,p[2]=0;for(var y=0;y<2;y++){d[0]=-t.xLength/2;for(var b=0;b<2;b++){f[0]=(d[0]+.5)*(2*y-1),d[2]=-t.zLength/2;for(var x=0;x<2;x++)f[1]=-1*(d[2]+.5),o[3*g]=d[0],o[3*g+1]=d[1],o[3*g+2]=d[2],i[3*g]=p[0],i[3*g+1]=p[1],i[3*g+2]=p[2],2===c?(u[g*c]=f[0],u[g*c+1]=f[1]):(u[g*c]=2*b-1,u[g*c+1]=2*y-1,u[g*c+2]=2*x-1),g++,d[2]+=t.zLength;d[0]+=t.xLength}d[1]+=t.yLength,p[1]+=2}d[2]=-t.zLength/2,p[2]=-1,p[0]=0,p[1]=0;for(var T=0;T<2;T++){d[1]=-t.yLength/2;for(var S=0;S<2;S++){f[1]=d[1]+.5,d[0]=-t.xLength/2;for(var P=0;P<2;P++)f[0]=(d[0]+.5)*(2*T-1),o[3*g]=d[0],o[3*g+1]=d[1],o[3*g+2]=d[2],i[3*g]=p[0],i[3*g+1]=p[1],i[3*g+2]=p[2],2===c?(u[g*c]=f[0],u[g*c+1]=f[1]):(u[g*c]=2*P-1,u[g*c+1]=2*S-1,u[g*c+2]=2*T-1),g++,d[0]+=t.xLength;d[1]+=t.yLength}d[2]+=t.zLength,p[2]+=2}Zi().rotateX(t.rotations[0]).rotateY(t.rotations[1]).rotateZ(t.rotations[2]).apply(o).apply(i),(r=Qi()).translate.apply(r,ve(t.center)).apply(o);var w=new Uint16Array(30);a.getPolys().setData(w,1);var C=0;w[C++]=4,w[C++]=0,w[C++]=1,w[C++]=3,w[C++]=2,w[C++]=4,w[C++]=4,w[C++]=6,w[C++]=7,w[C++]=5,w[C++]=4,w[C++]=8,w[C++]=10,w[C++]=11,w[C++]=9,w[C++]=4,w[C++]=12,w[C++]=13,w[C++]=15,w[C++]=14,w[C++]=4,w[C++]=16,w[C++]=18,w[C++]=19,w[C++]=17,w[C++]=4,w[C++]=20,w[C++]=21,w[C++]=23,w[29]=22}}}var $i={xLength:1,yLength:1,zLength:1,center:[0,0,0],rotations:[0,0,0],pointType:"Float64Array",generate3DTextureCoordinates:!1};function es(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$i,n),Ot.obj(e,t),Ot.setGet(e,t,["xLength","yLength","zLength","generate3DTextureCoordinates"]),Ot.setGetArray(e,t,["center","rotations"],3),Ot.algo(e,t,0,1),Ji(e,t)}var ts={newInstance:Ot.newInstance(es,"vtkCubeSource"),extend:es};function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rs=Ke;function as(e,t){t.classHierarchy.push("vtkCutter");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getMTime=function(){var e=n.getMTime();return t.cutFunction?e=Math.max(e,t.cutFunction.getMTime()):e},e.requestData=function(e,n){var r=e[0];if(r)if(t.cutFunction){var a=Gi.newInstance();(function(e,n){var r=e.getPoints(),a=r.getData(),o=r.getNumberOfPoints(),i=[],s=[],c=[];(!t.cutScalars||t.cutScalars.length<o)&&(t.cutScalars=new Float32Array(o));for(var u=0,l=0;u<a.length;)t.cutScalars[l++]=t.cutFunction.evaluateFunction(a[u++],a[u++],a[u++]);for(var d=[],p=new Array(3),f=new Array(3),g=function(e){var t=e.getPolys().getData(),n=e.getStrips().getData(),r={done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next:function(){var e=null;if(r.polyIdx<t.length){var a=t[r.polyIdx],o=r.polyIdx+1,i=o+a;r.polyIdx=i,e=t.subarray(o,i)}else if(r.stripIdx<n.length){0===r.remainingStripLength&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);var s=r.stripIdx-2,c=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--,e=n.subarray(s,c)}else if(r.done)throw new Error("Iterator is done");return r.done=r.polyIdx>=t.length&&r.stripIdx>=n.length,e}};return r}(e);!g.done;){var m=g.next();if(!(m.length<=2)){for(var v=[],h=void 0,y=0;y<m.length;y++)h=m[y],v.push(t.cutScalars[h]);for(var b=v[0]>0,x=!0,T=1;T<v.length;T++)if(v[T]>0!==b){x=!1;break}if(!x){for(var S=[],P=0;P<m.length;P++){var w=P+1===m.length?0:P+1,C=v[P]>0;if(v[w]>0!==C){var O=P,A=w,I=v[A]-v[O];I<=0&&(O=w,A=P,I*=-1);var M=0;0!==I&&(M=(t.cutValue-v[O])/I);var R=m[O],E=m[A];p[0]=a[3*R],p[1]=a[3*R+1],p[2]=a[3*R+2],f[0]=a[3*E],f[1]=a[3*E+1],f[2]=a[3*E+2];var D=[p[0]+M*(f[0]-p[0]),p[1]+M*(f[1]-p[1]),p[2]+M*(f[2]-p[2])];S.push({pointEdge1:R,pointEdge2:E,intersectedPoint:D,newPointID:-1})}}for(var L=0;L<S.length;L++){for(var B=S[L],N=!1,k=0;k<d.length;k++){var V=d[k],_=B.pointEdge1===V.pointEdge1&&B.pointEdge2===V.pointEdge2,F=B.intersectedPoint[0]===V.intersectedPoint[0]&&B.intersectedPoint[1]===V.intersectedPoint[1]&&B.intersectedPoint[2]===V.intersectedPoint[2];if(_||F){N=!0,S[L].newPointID=d[k].newPointID;break}}N||(i.push(B.intersectedPoint[0]),i.push(B.intersectedPoint[1]),i.push(B.intersectedPoint[2]),S[L].newPointID=i.length/3-1,d.push(S[L]))}var G=S.length;2===G?s.push(G,S[0].newPointID,S[1].newPointID):G>2&&(c.push(G),S.forEach((function(e){c.push(e.newPointID)})))}}}n.getPoints().setData(Qe(r.getDataType(),i),3),0!==s.length&&n.getLines().setData(Uint16Array.from(s)),0!==c.length&&n.getPolys().setData(Uint16Array.from(c))})(r,a),n[0]=a}else rs("Missing cut function");else rs("Invalid or missing input")}}var os={cutFunction:null,cutScalars:null,cutValue:0};function is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,os,n),at(e,t),mt(e,t,1,1),lt(e,t,["cutFunction","cutValue"]),as(e,t)}var ss={newInstance:yt(is,"vtkCutter"),extend:is};function cs(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function us(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,e[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,e[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,e[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,e}function ls(){var e=new i(4);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ds(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function ps(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],c=n[1],u=n[2],l=n[3];return e[0]=r*l+i*s+a*u-o*c,e[1]=a*l+i*c+o*s-r*u,e[2]=o*l+i*u+r*c-a*s,e[3]=i*l-r*s-a*c-o*u,e}!function(){var e;e=new i(4),i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var fs,gs=function(e,t,n,r){var a=new i(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a},ms=(Yt(),Jt(1,0,0),Jt(0,1,0),ls(),ls(),fs=new i(9),i!=Float32Array&&(fs[1]=0,fs[2]=0,fs[3]=0,fs[5]=0,fs[6]=0,fs[7]=0),fs[0]=1,fs[4]=1,fs[8]=1,fs,{ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2}),vs={ObjectType:ms};function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bs=vs.ObjectType;function xs(e,t){function n(e){switch(e){case bs.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case bs.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;case bs.ARRAY_BUFFER:default:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var r=null,a=null,o=!0,i="";e.getType=function(){return r},e.setType=function(e){r=e},e.getHandle=function(){return a},e.isReady=function(){return!1===o},e.generateBuffer=function(e){var o=n(e);return null===a&&(a=t.context.createBuffer(),r=e),n(r)===o},e.upload=function(s,c){return e.generateBuffer(c)?(t.context.bindBuffer(n(r),a),t.context.bufferData(n(r),s,t.context.STATIC_DRAW),o=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!a&&(t.context.bindBuffer(n(r),a),!0)},e.release=function(){return!!a&&(t.context.bindBuffer(n(r),null),!0)},e.releaseGraphicsResources=function(){null!==a&&(t.context.bindBuffer(n(r),null),t.context.deleteBuffer(a),a=null)},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.getError=function(){return i}}var Ts={objectType:bs.ARRAY_BUFFER,context:null};function Ss(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ts,n),Ot.obj(e,t),Ot.get(e,t,["_openGLRenderWindow"]),Ot.moveToProtected(e,t,["openGLRenderWindow"]),xs(e,t)}var Ps=ys(ys({newInstance:Ot.newInstance(Ss),extend:Ss},{}),vs),ws={FLAT:0,GOURAUD:1,PHONG:2},Cs={POINTS:0,WIREFRAME:1,SURFACE:2},Os={Shading:ws,Representation:Cs,Interpolation:ws},As=Ot.vtkErrorMacro;function Is(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(ms.ARRAY_BUFFER),e.createVBO=function(n,r,a,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];var s=o.points.getData(),c=null,u=null,l=null,d=o.colors?o.colors.getNumberOfComponents():0,p=o.tcoords?o.tcoords.getNumberOfComponents():0;o.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,c=o.normals.getData()),o.customAttributes&&o.customAttributes.forEach((function(e){e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())})),o.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=p,t.blockSize+=p,u=o.tcoords.getData()),o.colors?(t.colorComponents=o.colors.getNumberOfComponents(),t.colorOffset=0,l=o.colors.getData(),t.colorBO||(t.colorBO=Ps.newInstance()),t.colorBO.setOpenGLRenderWindow(t._openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;var f,g=0,m=0,v=0,h=0,y=0,b=0,x={anythingToPoints:function(e,t,n){for(var r=0;r<e;++r)f(t[n+r])},linesToWireframe:function(e,t,n){for(var r=0;r<e-1;++r)f(t[n+r]),f(t[n+r+1])},polysToWireframe:function(e,t,n){if(e>2)for(var r=0;r<e;++r)f(t[n+r]),f(t[n+(r+1)%e])},stripsToWireframe:function(e,t,n){if(e>2){for(var r=0;r<e-1;++r)f(t[n+r]),f(t[n+r+1]);for(var a=0;a<e-2;a++)f(t[n+a]),f(t[n+a+2])}},polysToSurface:function(e,t,n){for(var r=0;r<e-2;r++)f(t[n+0]),f(t[n+r+1]),f(t[n+r+2])},stripsToSurface:function(e,t,n){for(var r=0;r<e-2;r++)f(t[n+r]),f(t[n+r+1+r%2]),f(t[n+r+1+(r+1)%2])}},T={anythingToPoints:function(e,t){return e},linesToWireframe:function(e,t){return e>1?2*(e-1):0},polysToWireframe:function(e,t){return e>2?2*e:0},stripsToWireframe:function(e,t){return e>2?4*e-6:0},polysToSurface:function(e,t){return e>2?3*(e-2):0},stripsToSurface:function(e,t,n){return e>2?3*(e-2):0}},S=null,P=null;a===Cs.POINTS||"verts"===r?(S=x.anythingToPoints,P=T.anythingToPoints):a===Cs.WIREFRAME||"lines"===r?(S=x["".concat(r,"ToWireframe")],P=T["".concat(r,"ToWireframe")]):(S=x["".concat(r,"ToSurface")],P=T["".concat(r,"ToSurface")]);for(var w=n.getData(),C=w.length,O=0,A=0;A<C;)O+=P(w[A],w),A+=w[A]+1;var I=null,M=new Float32Array(O*t.blockSize);l&&(I=new Uint8Array(4*O));for(var R=0,E=0,D=0,L=0,B=0;B<3;++B){var N=o.points.getRange(B),k=N[1]-N[0];D+=k*k;var V=.5*(N[1]+N[0]);L+=V*V}var _=D>0&&(Math.abs(L)/D>1e6||Math.abs(Math.log10(D))>3||0===D&&L>1e6);if(_){for(var F=new Float64Array(3),G=new Float64Array(3),U=0;U<3;++U){var j=o.points.getRange(U),z=j[1]-j[0];F[U]=.5*(j[1]+j[0]),G[U]=z>0?1/z:1}e.setCoordShiftAndScale(F,G)}else!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null);if(i)if(i.points||i.cells){var W=new Int32Array(O+i.points.length);W.set(i.points),i.points=W;var H=new Int32Array(O+i.cells.length);H.set(i.cells),i.cells=H}else i.points=new Int32Array(O),i.cells=new Int32Array(O);var K=o.vertexOffset;f=function(e){if(i&&(i.points[K]=e,i.cells[K]=b+o.cellOffset),++K,g=3*e,t.coordShiftAndScaleEnabled?(M[R++]=(s[g++]-t.coordShift[0])*t.coordScale[0],M[R++]=(s[g++]-t.coordShift[1])*t.coordScale[1],M[R++]=(s[g++]-t.coordShift[2])*t.coordScale[2]):(M[R++]=s[g++],M[R++]=s[g++],M[R++]=s[g++]),null!==c&&(m=o.haveCellNormals?3*(b+o.cellOffset):3*e,M[R++]=c[m++],M[R++]=c[m++],M[R++]=c[m++]),t.customData.forEach((function(t){y=e*t.components;for(var n=0;n<t.components;++n)M[R++]=t.data[y++]})),null!==u){v=e*p;for(var n=0;n<p;++n)M[R++]=u[v++]}null!==l&&(h=o.haveCellScalars?(b+o.cellOffset)*d:e*d,I[E++]=l[h++],I[E++]=l[h++],I[E++]=l[h++],I[E++]=4===d?l[h++]:255)};for(var X=0;X<C;)S(w[X],w,X+1),X+=w[X]+1,b++;return t.elementCount=O,e.upload(M,ms.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(I,ms.ARRAY_BUFFER)),b},e.setCoordShiftAndScale=function(e,n){null===e||e.constructor===Float64Array&&3===e.length?null===n||n.constructor===Float64Array&&3===n.length?(null!==t.coordShift&&null!==e&&Nn(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==n&&Nn(n,t.coordScale)||(t.coordScale=n),t.coordShiftAndScaleEnabled=function(e,t){return null!==e&&null!==t&&!(Bn(e,[0,0,0])&&Bn(t,[1,1,1]))}(t.coordShift,t.coordScale),t.coordShiftAndScaleEnabled?t.inverseShiftAndScaleMatrix=function(e,t){var n=new Float64Array(3);hn(n,t);var r=new Float64Array(16);return _(r,ls(),e,n),r}(t.coordShift,t.coordScale):t.inverseShiftAndScaleMatrix=null):As("Wrong type for coordScale, expected vec3 or null"):As("Wrong type for coordShift, expected vec3 or null")}}var Ms={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function Rs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ms,n),Ps.extend(e,t,n),Ot.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),Ot.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),Is(e,t)}var Es={newInstance:Ot.newInstance(Rs),extend:Rs},Ds=Ot.vtkErrorMacro;function Ls(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;if(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),e="Fragment"===t.shaderType?t.context.FRAGMENT_SHADER:t.context.VERTEX_SHADER,t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){var n=t.context.getShaderInfoLog(t.handle);return Ds("Error compiling shader '".concat(t.source,"': ").concat(n)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}var Bs={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function Ns(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bs,n),Ot.obj(e,t),Ot.setGet(e,t,["shaderType","source","error","handle","context"]),Ls(e,t)}var ks={newInstance:Ot.newInstance(Ns,"vtkShader"),extend:Ns},Vs=Ot.vtkErrorMacro;function _s(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(Vs("Links failed: ".concat(t.error)),0):(Vs(t.error),0):(Vs(t.fragmentShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),Vs(t.fragmentShader.getError()),0):(Vs(t.vertexShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),Vs(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!e.link()||(t.context.useProgram(t.handle),e.setBound(!0),0))},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.linked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){var n=t.context.getProgramInfoLog(t.handle);return Vs("Error linking shader ".concat(n)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=function(n,r){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var o=new Float32Array(r);return t.context.uniformMatrix4fv(a,!1,o),!0},e.setUniformMatrix3x3=function(n,r){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var o=new Float32Array(r);return t.context.uniformMatrix3fv(a,!1,o),!0},e.setUniformf=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1f(a,r),!0)},e.setUniformfv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1fv(a,r),!0)},e.setUniformi=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1i(a,r),!0)},e.setUniformiv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1iv(a,r),!0)},e.setUniform2f=function(n,r,a){var o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(o,r,a),!0},e.setUniform2fv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2fv(a,r),!0)},e.setUniform2i=function(n,r,a){var o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(o,r,a),!0},e.setUniform2iv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2iv(a,r),!0)},e.setUniform3f=function(n,r,a,o){var i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(i,r,a,o),!0},e.setUniform3fArray=function(n,r){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(r)||3!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(a,r[0],r[1],r[2]),!0},e.setUniform3fv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3fv(a,r),!0)},e.setUniform3i=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var s=o;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),3!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(r,s[0],s[1],s[2]),!0},e.setUniform3iv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3iv(a,r),!0)},e.setUniform4f=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var s=o;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),4!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(r,s[0],s[1],s[2],s[3]),!0},e.setUniform4fv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(a,r),!0)},e.setUniform4i=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var s=o;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),4!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(r,s[0],s[1],s[2],s[3]),!0},e.setUniform4iv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4iv(a,r),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var n=t.uniformLocs[e];return void 0!==n?n:null===(n=t.context.getUniformLocation(t.handle,e))?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n)},e.isUniformUsed=function(e){if(!e)return!1;var n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(Vs("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;if(e in t.attributeLocs)return!0;if(!t.linked)return Vs("attempt to find uniform when the shader program is not linked"),!1;var n=t.context.getAttribLocation(t.handle,e);return-1!==n&&(t.attributeLocs[e]=n,!0)},e.attachShader=function(n){if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var r=t.context.createProgram();if(0===r)return t.error="Could not create shader program.",!1;t.handle=r,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){t.lastCameraMTime=e}}var Fs={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function Gs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fs,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=ks.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=ks.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=ks.newInstance(),t.geometryShader.setShaderType("Geometry"),Ot.obj(e,t),Ot.get(e,t,["lastCameraMTime"]),Ot.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),_s(e,t)}var Us={newInstance:Ot.newInstance(Gs,"vtkShaderProgram"),extend:Gs,substitute:function(e,t,n,r){var a="string"==typeof n?n:n.join("\n"),o=!1===r?t:new RegExp(t,"g"),i=e.replace(o,a);return{replace:i!==a,result:i}}};function js(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.instancingExtension=null,t._openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t._openGLRenderWindow&&t._openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=function(){return 0!==t.handleVAO||!1===t.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady())for(var n=t.context,r=0;r<t.buffers.length;++r){var a=t.buffers[r];t.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(var o=0;o<a.attributes.length;++o)for(var i=a.attributes[o],s=i.isMatrix?i.size:1,c=0;c<s;++c)n.enableVertexAttribArray(i.index+c),n.vertexAttribPointer(i.index+c,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*c/i.size),i.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index+c,1):n.vertexAttribDivisor(i.index+c,1))}},e.release=function(){if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady())for(var n=t.context,r=0;r<t.buffers.length;++r){var a=t.buffers[r];t.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(var o=0;o<a.attributes.length;++o)for(var i=a.attributes[o],s=i.isMatrix?i.size:1,c=0;c<s;++c)n.enableVertexAttribArray(i.index+c),n.vertexAttribPointer(i.index+c,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*c/i.size),i.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index+c,0):n.vertexAttribDivisor(i.index+c,0)),n.disableVertexAttribArray(i.index+c)}},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,n,r,a,o,i,s,c){return e.addAttributeArrayWithDivisor(t,n,r,a,o,i,s,c,0,!1)},e.addAttributeArrayWithDivisor=function(n,r,a,o,i,s,c,u,l,d){if(!n)return!1;if(!n.isBound()||0===r.getHandle()||r.getType()!==ms.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;var p=t.context,f={};if(f.name=a,f.index=p.getAttribLocation(t.handleProgram,a),f.offset=o,f.stride=i,f.type=s,f.size=c,f.normalize=u,f.isMatrix=d,f.divisor=l,-1===f.Index)return!1;if(r.bind(),p.enableVertexAttribArray(f.index),p.vertexAttribPointer(f.index,f.size,f.type,f.normalize,f.stride,f.offset),l>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(f.index,1):p.vertexAttribDivisor(f.index,1)),f.buffer=r.getHandle(),!t.supported){for(var g=!1,m=0;m<t.buffers.length;++m){var v=t.buffers[m];if(v.buffer===f.buffer){g=!0;for(var h=!1,y=0;y<v.attributes.length;++y)v.attributes[y].name===a&&(h=!0,v.attributes[y]=f);h||v.attributes.push(f)}}g||t.buffers.push({buffer:f.buffer,attributes:[f]})}return!0},e.addAttributeMatrixWithDivisor=function(n,r,a,o,i,s,c,u,l){var d=e.addAttributeArrayWithDivisor(n,r,a,o,i,s,c,u,l,!0);if(!d)return d;for(var p=t.context,f=p.getAttribLocation(t.handleProgram,a),g=1;g<c;g++)p.enableVertexAttribArray(f+g),p.vertexAttribPointer(f+g,c,s,u,i,o+i*g/c),l>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(f+g,1):p.vertexAttribDivisor(f+g,1));return!0},e.removeAttributeArray=function(n){if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(var r=0;r<t.buffers.length;++r)for(var a=t.buffers[r],o=0;o<a.attributes.length;++o)if(a.attributes[o].name===n)return a.attributes.splice(o,1),a.attributes.length||t.buffers.splice(r,1),!0;return!0},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))}}var zs={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function Ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zs,n),t.buffers=[],Ot.obj(e,t),Ot.get(e,t,["supported"]),Ot.setGet(e,t,["forceEmulation"]),js(e,t)}var Hs={newInstance:Ot.newInstance(Ws,"vtkOpenGLVertexArrayObject"),extend:Ws},Ks={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function Xs(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){t.context=e.getContext(),t.program.setContext(t.context),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)},e.drawArrays=function(n,r,a,o){if(t.CABO.getElementCount()){var i=e.getOpenGLMode(a),s=e.haveWideLines(n,r),c=t.context,u=c.getParameter(c.DEPTH_WRITEMASK);t.pointPicking&&c.depthMask(!1),i===c.LINES&&s?(e.updateShaders(n,r,o),c.drawArraysInstanced(i,0,t.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(c.lineWidth(r.getProperty().getLineWidth()),e.updateShaders(n,r,o),c.drawArrays(i,0,t.CABO.getElementCount()),c.lineWidth(1));var l=(i===c.POINTS?1:0)||(i===c.LINES?2:3);return t.pointPicking&&c.depthMask(u),t.CABO.getElementCount()/l}return 0},e.getOpenGLMode=function(e){if(t.pointPicking)return t.context.POINTS;var n=t.primitiveType;return e===Cs.POINTS||n===Ks.Points?t.context.POINTS:e===Cs.WIREFRAME||n===Ks.Lines||n===Ks.TrisEdges||n===Ks.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.haveWideLines=function(e,n){return n.getProperty().getLineWidth()>1&&!(t.CABO.getOpenGLRenderWindow()&&t.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=n.getProperty().getLineWidth())},e.getNeedToRebuildShaders=function(t,n,r){return!!(r.getNeedToRebuildShaders(e,t,n)||0===e.getProgram()||e.getShaderSourceTime().getMTime()<r.getMTime()||e.getShaderSourceTime().getMTime()<n.getMTime())},e.updateShaders=function(n,r,a){if(e.getNeedToRebuildShaders(n,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};a.buildShaders(o,n,r);var i=t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==e.getProgram()&&(e.setProgram(i),e.getVAO().releaseGraphicsResources()),e.getShaderSourceTime().modified()}else t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(e.getProgram());e.getVAO().bind(),a.setMapperShaderParameters(e,n,r),a.setPropertyShaderParameters(e,n,r),a.setCameraShaderParameters(e,n,r),a.setLightingShaderParameters(e,n,r),a.invokeShaderCallbacks(e,n,r)},e.setMapperShaderParameters=function(n,r,a){if(e.haveWideLines(n,r)){e.getProgram().setUniform2f("viewportSize",a.usize,a.vsize);var o=parseFloat(r.getProperty().getLineWidth()),i=o/2;e.getProgram().setUniformf("lineWidthStepSize",o/Math.ceil(o)),e.getProgram().setUniformf("halfLineWidth",i)}t.primitiveType===Ks.Points||r.getProperty().getRepresentation()===Cs.POINTS?e.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):t.pointPicking&&e.getProgram().setUniformf("pointSize",e.getPointPickingPrimitiveSize())},e.replaceShaderPositionVC=function(n,r,a){var o=n.Vertex;o=Us.substitute(o,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,o=Us.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,e.getOpenGLMode(a.getProperty().getRepresentation())===t.context.LINES&&e.haveWideLines(r,a)&&(o=Us.substitute(o,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,o=Us.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=o},e.getPointPickingPrimitiveSize=function(){return t.primitiveType===Ks.Points?2:t.primitiveType===Ks.Lines?4:6}}var qs={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function Ys(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qs,n),Ot.obj(e,t),t.shaderSourceTime={},Ot.obj(t.shaderSourceTime),t.attributeUpdateTime={},Ot.obj(t.attributeUpdateTime),Ot.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),t.program=Us.newInstance(),t.VAO=Hs.newInstance(),t.CABO=Es.newInstance(),Xs(e,t)}var Zs={newInstance:Ot.newInstance(Ys),extend:Ys,primTypes:Ks},Qs={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Js={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},$s={Wrap:Qs,Filter:Js},ec=new Float32Array(1),tc=new Int32Array(ec.buffer),nc=function(e){var t=(32768&e)>>15,n=(31744&e)>>10,r=1023&e;return 0===n?(t?-1:1)*Math.pow(2,-14)*(r/Math.pow(2,10)):31===n?r?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,n-15)*(1+r/Math.pow(2,10))},rc=function(e){ec[0]=e;var t=tc[0],n=t>>16&32768,r=t>>12&2047,a=t>>23&255;return a<103?n:a>142?(n|=31744,n|=(255===a?0:1)&&8388607&t):a<113?n|=((r|=2048)>>114-a)+(r>>113-a&1):(n|=a-112<<10|r>>1,n+=1&r)};function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oc=$s.Wrap,ic=$s.Filter,sc=Ba.VtkDataTypes,cc=He,uc=Ke,lc=Xe,dc=rc;function pc(e,t){function n(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],o=t.width*t.height*t.components;if(r&&(o*=t.depth),e!==sc.FLOAT&&t.openGLDataType===t.context.FLOAT)for(var i=0;i<n.length;i++)if(n[i]){var s=n[i].length>o?n[i].subarray(0,o):n[i];a.push(new Float32Array(s))}else a.push(null);if(e!==sc.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(var c=0;c<n.length;c++)if(n[c]){var u=n[c].length>o?n[c].subarray(0,o):n[c];a.push(new Uint8Array(u))}else a.push(null);var l=!1;if(t._openGLRenderWindow.getWebgl2())l=t.openGLDataType===t.context.HALF_FLOAT;else{var d=t.context.getExtension("OES_texture_half_float");l=d&&t.openGLDataType===d.HALF_FLOAT_OES}if(l)for(var p=0;p<n.length;p++)if(n[p]){for(var f=new Uint16Array(o),g=n[p],m=0;m<o;m++)f[m]=dc(g[m]);a.push(f)}else a.push(null);if(0===a.length)for(var v=0;v<n.length;v++)a.push(n[v]);return a}function r(e){if(t._openGLRenderWindow.getWebgl2())return e;var n=[],r=t.width,a=t.height,o=t.components;if(e&&(!yr(r)||!yr(a)))for(var i=t.context.getExtension("OES_texture_half_float"),s=hr(r),c=hr(a),u=s*c*t.components,l=0;l<e.length;l++)if(null!==e[l]){var d=null,p=a/c,f=r/s,g=!1;t.openGLDataType===t.context.FLOAT?d=new Float32Array(u):i&&t.openGLDataType===i.HALF_FLOAT_OES?(d=new Uint16Array(u),g=!0):d=new Uint8Array(u);for(var m=0;m<c;m++){var v=m*s*o,h=m*p,y=Math.floor(h),b=Math.ceil(h);b>=a&&(b=a-1);var x=h-y,T=1-x;y=y*r*o,b=b*r*o;for(var S=0;S<s;S++){var P=S*o,w=S*f,C=Math.floor(w),O=Math.ceil(w);O>=r&&(O=r-1);var A=w-C;C*=o,O*=o;for(var I=0;I<o;I++)d[v+P+I]=g?rc(nc(e[l][y+C+I])*T*(1-A)+nc(e[l][y+O+I])*T*A+nc(e[l][b+C+I])*x*(1-A)+nc(e[l][b+O+I])*x*A):e[l][y+C+I]*T*(1-A)+e[l][y+O+I]*T*A+e[l][b+C+I]*x*(1-A)+e[l][b+O+I]*x*A}}n.push(d),t.width=s,t.height=c}else n.push(null);if(0===n.length)for(var M=0;M<e.length;M++)n.push(e[M]);return n}function a(e){var n;return!(!t._openGLRenderWindow||t.resizable||null!==(n=t.renderable)&&void 0!==n&&n.getResizable()||!t._openGLRenderWindow.getWebgl2()||t._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&t.oglNorm16Ext&&(e===sc.UNSIGNED_SHORT||e===sc.SHORT))}function o(n,r){for(var a=n.getNumberOfComponents(),o=n.getDataType(),i=n.getData(),s=new Array(a),c=new Array(a),u=0;u<a;++u){var l=fe(n.getRange(u),2),d=l[0],p=l[1];s[u]=d,c[u]=p}var f=function(e,t,n){for(var r=new Array(n),a=new Array(n),o=0;o<n;++o)r[o]=e[o],a[o]=t[o]-e[o]||1;return{scale:a,offset:r}}(s,c,a);return function(n,r,a,o){e.getOpenGLDataType(n);var i=!1;if(t._openGLRenderWindow.getWebgl2())i=t.openGLDataType===t.context.HALF_FLOAT;else{var s=t.context.getExtension("OES_texture_half_float");i=s&&t.openGLDataType===s.HALF_FLOAT_OES}var c=i&&(function(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=t[n]+r;if(r<-2048||r>2048||a<-2048||a>2048)return!1}return!0}(r,a)||o);t.useHalfFloat=c}(o,f.offset,f.scale,r),t.useHalfFloat||e.getOpenGLDataType(o,!0),{numComps:a,dataType:o,data:i,scaleOffsets:f}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n?t._openGLRenderWindow=n:(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent()),t.context=t._openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(ic.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(ic.LINEAR),e.setMagnificationFilter(ic.LINEAR)):(e.setMinificationFilter(ic.NEAREST),e.setMagnificationFilter(ic.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(oc.REPEAT),e.setWrapS(oc.REPEAT),e.setWrapT(oc.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){if(null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(ic.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified())),null!==t.renderable.getCanvas()){t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(ic.LINEAR_MIPMAP_LINEAR));var r=t.renderable.getCanvas();e.create2DFromRaw(r.width,r.height,4,sc.UNSIGNED_CHAR,r,!0),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}if(null!==t.renderable.getJsImageData()){var a=t.renderable.getJsImageData();t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(ic.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw(a.width,a.height,4,sc.UNSIGNED_CHAR,a.data,!0),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}var o=t.renderable.getInputData(0);if(o&&o.getPointData().getScalars()){for(var i=o.getExtent(),s=o.getPointData().getScalars(),c=[],u=0;u<t.renderable.getNumberOfInputPorts();++u){var l=t.renderable.getInputData(u),d=l?l.getPointData().getScalars().getData():null;d&&c.push(d)}t.renderable.getInterpolate()&&4===s.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(ic.LINEAR_MIPMAP_LINEAR)),c.length%6==0?e.createCubeFromRaw(i[1]-i[0]+1,i[3]-i[2]+1,s.getNumberOfComponents(),s.getDataType(),c):e.create2DFromRaw(i[1]-i[0]+1,i[3]-i[2]+1,s.getNumberOfComponents(),s.getDataType(),s.getData()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t._openGLRenderWindow?t._openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){t._openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){t._openGLRenderWindow&&t._openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(n){n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(t.context&&t.handle){var n=0;t.target===t.context.TEXTURE_2D?n=t.context.TEXTURE_BINDING_2D:lc("impossible case"),e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t._openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=function(n,r){return t._forceInternalFormat||(t.internalFormat=e.getDefaultInternalFormat(n,r)),t.internalFormat||cc("Unable to find suitable internal format for T=".concat(n," NC= ").concat(r)),t.internalFormat},e.getDefaultInternalFormat=function(e,n){var r;return(r=t._openGLRenderWindow.getDefaultTextureInternalFormat(e,n,t.oglNorm16Ext,t.useHalfFloat))||r||(cc("Unsupported internal texture type!"),cc("Unable to find suitable internal format for T=".concat(e," NC= ").concat(n))),r},e.setInternalFormat=function(n){t._forceInternalFormat=!0,n!==t.internalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=function(n,r){return t.format=e.getDefaultFormat(n,r),t.format},e.getDefaultFormat=function(e,n){if(t._openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}else switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t._forceInternalFormat=!1,t.openGLDataType=0},e.getDefaultDataType=function(e){if(t._openGLRenderWindow.getWebgl2())switch(e){case sc.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case t.oglNorm16Ext&&!t.useHalfFloat&&sc.SHORT:return t.context.SHORT;case t.oglNorm16Ext&&!t.useHalfFloat&&sc.UNSIGNED_SHORT:return t.context.UNSIGNED_SHORT;case t.useHalfFloat&&sc.SHORT:case t.useHalfFloat&&sc.UNSIGNED_SHORT:return t.context.HALF_FLOAT;case sc.FLOAT:case sc.VOID:default:return t.context.FLOAT}switch(e){case sc.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case sc.FLOAT:case sc.VOID:default:if(t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))return t.context.FLOAT;var n=t.context.getExtension("OES_texture_half_float");return n&&t.context.getExtension("OES_texture_half_float_linear")?n.HALF_FLOAT_OES:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.openGLDataType&&!r||(t.openGLDataType=e.getDefaultDataType(n)),t.openGLDataType},e.getShiftAndScale=function(){var e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:e=(n=127.5)-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:e=(n=32767.5)-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:e=(n=2147483647.5)-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=function(e){switch(e){case ic.NEAREST:return t.context.NEAREST;case ic.LINEAR:return t.context.LINEAR;case ic.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case ic.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case ic.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case ic.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case oc.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case oc.REPEAT:return t.context.REPEAT;case oc.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(o,i,s,c,u){var l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.getOpenGLDataType(c,!0),e.getInternalFormat(c,s),e.getFormat(c,s),!t.internalFormat||!t.format||!t.openGLDataType)return uc("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=s,t.width=o,t.height=i,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var d=[u],p=n(c,d),f=r(p);return t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,l),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(c)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=f[0]&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,f[0])):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,f[0]),t.generateMipmap&&t.context.generateMipmap(t.target),l&&t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,!1),e.deactivate(),!0},e.createCubeFromRaw=function(o,i,s,c,u){if(e.getOpenGLDataType(c),e.getInternalFormat(c,s),e.getFormat(c,s),!t.internalFormat||!t.format||!t.openGLDataType)return uc("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=s,t.width=o,t.height=i,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),t.maxLevel=u.length/6-1,e.createTexture(),e.bind();for(var l=r(n(c,u)),d=[],p=t.width,f=t.height,g=0;g<l.length;g++){g%6==0&&0!==g&&(p/=2,f/=2),d[g]=Ze(c,f*p*t.components);for(var m=0;m<f;++m){var v=m*p*t.components,h=(f-m-1)*p*t.components;d[g].set(l[g].slice(h,h+p*t.components),v)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(c)&&t.context.texStorage2D(t.target,6,t.internalFormat,t.width,t.height);for(var y=0;y<6;y++)for(var b=0,x=t.width,T=t.height;x>=1&&T>=1;){var S=null;b<=t.maxLevel&&(S=d[6*b+y]),a(c)?null!=S&&t.context.texSubImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+y,b,0,0,x,T,t.format,t.openGLDataType,S):t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+y,b,t.internalFormat,x,T,0,t.format,t.openGLDataType,S),b++,x/=2,T/=2}return e.deactivate(),!0},e.createDepthFromRaw=function(n,r,o,i){return e.getOpenGLDataType(o),t.format=t.context.DEPTH_COMPONENT,t._openGLRenderWindow.getWebgl2()?o===sc.FLOAT?t.internalFormat=t.context.DEPTH_COMPONENT32F:t.internalFormat=t.context.DEPTH_COMPONENT16:t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=n,t.height=r,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(o)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=i&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,i)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,i),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(uc("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(n){if(e.getOpenGLDataType(sc.UNSIGNED_CHAR),e.getInternalFormat(sc.UNSIGNED_CHAR,4),e.getFormat(sc.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return uc("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);var r=!(t._openGLRenderWindow.getWebgl2()||yr(n.width)&&yr(n.height)),o=document.createElement("canvas");o.width=r?hr(n.width):n.width,o.height=r?hr(n.height):n.height,t.width=o.width,t.height=o.height;var i=o.getContext("2d");i.translate(0,o.height),i.scale(1,-1),i.drawImage(n,0,0,n.width,n.height,0,0,o.width,o.height);var s=o;return a(sc.UNSIGNED_CHAR)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=s&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,s)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,s),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create2DFilterableFromRaw=function(t,n,r,a,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return e.create2DFilterableFromDataArray(t,n,Ba.newInstance({numberOfComponents:r,dataType:a,values:o}),i)},e.create2DFilterableFromDataArray=function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=o(r,a),s=i.numComps,c=i.dataType,u=i.data;e.create2DFromRaw(t,n,s,c,u)},e.create3DFromRaw=function(o,i,s,c,u,l){if(e.getOpenGLDataType(u),e.getInternalFormat(u,c),e.getFormat(u,c),!t.internalFormat||!t.format||!t.openGLDataType)return uc("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_3D,t.components=c,t.width=o,t.height=i,t.depth=s,t.numberOfDimensions=3,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var d=r(n(u,[l],!0));return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(u)?(t.context.texStorage3D(t.target,1,t.internalFormat,t.width,t.height,t.depth),null!=d[0]&&t.context.texSubImage3D(t.target,0,0,0,0,t.width,t.height,t.depth,t.format,t.openGLDataType,d[0])):t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,d[0]),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create3DFilterableFromRaw=function(t,n,r,a,o,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return e.create3DFilterableFromDataArray(t,n,r,Ba.newInstance({numberOfComponents:a,dataType:o,values:i}),s)},e.create3DFilterableFromDataArray=function(n,r,i,s){for(var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=o(s,c),l=u.numComps,d=u.dataType,p=u.data,f=u.scaleOffsets,g=n*r*i,m=[],v=[],h=0;h<l;++h)m[h]=0,v[h]=1;t.volumeInfo={scale:v,offset:m,dataComputedScale:f.scale,dataComputedOffset:f.offset,width:n,height:r,depth:i};var y=structuredClone(f);if(t._openGLRenderWindow.getWebgl2()){if(t.oglNorm16Ext&&!t.useHalfFloat&&d===sc.SHORT){for(var b=0;b<l;++b)t.volumeInfo.scale[b]=32767;return e.create3DFromRaw(n,r,i,l,d,p)}if(t.oglNorm16Ext&&!t.useHalfFloat&&d===sc.UNSIGNED_SHORT){for(var x=0;x<l;++x)t.volumeInfo.scale[x]=65535;return e.create3DFromRaw(n,r,i,l,d,p)}if(d===sc.FLOAT||t.useHalfFloat&&(d===sc.SHORT||d===sc.UNSIGNED_SHORT))return e.create3DFromRaw(n,r,i,l,d,p);if(d===sc.UNSIGNED_CHAR){for(var T=0;T<l;++T)t.volumeInfo.scale[T]=255;return e.create3DFromRaw(n,r,i,l,d,p)}var S=new Float32Array(g*l);t.volumeInfo.offset=y.offset,t.volumeInfo.scale=y.scale;for(var P=0,w=y.scale.map((function(e){return 1/e})),C=0;C<g;C++)for(var O=0;O<l;O++)S[P]=(p[P]-y.offset[O])*w[O],P++;return e.create3DFromRaw(n,r,i,l,sc.FLOAT,S)}var A=function(e,t,n,r,a){e[t]=n},I=sc.UNSIGNED_CHAR;if(d===sc.UNSIGNED_CHAR)for(var M=0;M<l;++M)y.offset[M]=0,y.scale[M]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(I=sc.FLOAT,A=function(e,t,n,r,a){e[t]=(n-r)/a}):(I=sc.UNSIGNED_CHAR,A=function(e,t,n,r,a){e[t]=255*(n-r)/a});if(e.getOpenGLDataType(I),e.getInternalFormat(I,l),e.getFormat(I,l),!t.internalFormat||!t.format||!t.openGLDataType)return uc("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=l,t.depth=1,t.numberOfDimensions=2;var R=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);R>4096&&(I===sc.FLOAT||l>=3)&&(R=4096);var E=1,D=1;g>R*R&&(D=E=Math.ceil(Math.sqrt(g/(R*R))));var L=Math.sqrt(g)/E;L=hr(L);var B,N=Math.floor(L*E/n),k=Math.ceil(i/N),V=hr(r*k/D);t.width=L,t.height=V,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=N,t.volumeInfo.yreps=k,t.volumeInfo.xstride=E,t.volumeInfo.ystride=D,t.volumeInfo.offset=y.offset,t.volumeInfo.scale=y.scale;var _=L*V*l;B=I===sc.FLOAT?new Float32Array(_):new Uint8Array(_);for(var F=0,G=Math.floor(n/E),U=Math.floor(r/D),j=0;j<k;j++)for(var z=Math.min(N,i-j*N),W=l*(t.width-z*Math.floor(n/E)),H=0;H<U;H++){for(var K=0;K<z;K++)for(var X=l*((j*N+K)*n*r+D*H*n),q=0;q<G;q++)for(var Y=0;Y<l;Y++)A(B,F,p[X+E*q*l+Y],y.offset[Y],y.scale[Y]),F++;F+=W}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(I)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=B&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,B)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,B),e.deactivate(),!0},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}var fc={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:oc.CLAMP_TO_EDGE,wrapT:oc.CLAMP_TO_EDGE,wrapR:oc.CLAMP_TO_EDGE,minificationFilter:ic.NEAREST,magnificationFilter:ic.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,useHalfFloat:!0,oglNorm16Ext:null};function gc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fc,n),Et.extend(e,t,n),t.sendParametersTime={},at(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},at(t.textureBuildTime,{mtime:0}),ut(e,t,["format","openGLDataType"]),lt(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),it(e,t,["width","height","volumeInfo","components","handle","target"]),gt(0,t,["openGLRenderWindow"]),pc(e,t)}var mc=yt(gc,"vtkOpenGLTexture"),vc=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:mc,extend:gc},$s);Vt("vtkTexture",mc);var hc=function(e,t){e.replaceShaderCoincidentOffset=function(n,r,a){var o=e.getCoincidentParameters(r,a);if(o&&(0!==o.factor||0!==o.offset)){var i=n.Fragment;i=Us.substitute(i,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==o.factor?(i=Us.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=Us.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=Us.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t._openGLRenderWindow.getWebgl2()&&(0!==o.factor?(i=Us.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=Us.substitute(i,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=Us.substitute(i,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=i}}},yc=function(e,t){e.applyShaderReplacements=function(e,t,n){var r=null;if(t&&(r=t.ShaderReplacements),r)for(var a=0;a<r.length;a++){var o=r[a];if(n&&o.replaceFirst||!n&&!o.replaceFirst){var i=o.shaderType,s=e[i],c=Us.substitute(s,o.originalValue,o.replacementValue,o.replaceAll);e[i]=c.result}}},e.buildShaders=function(n,r,a){e.getReplacedShaderTemplate(n,r,a),t.lastRenderPassShaderReplacement=t.currentRenderPass?t.currentRenderPass.getShaderReplacement():null,t.lastRenderPassShaderReplacement&&t.lastRenderPassShaderReplacement(n);var o=t.renderable.getViewSpecificProperties().OpenGL;e.applyShaderReplacements(n,o,!0),e.replaceShaderValues(n,r,a),e.applyShaderReplacements(n,o)},e.getReplacedShaderTemplate=function(n,r,a){var o=t.renderable.getViewSpecificProperties().OpenGL;e.getShaderTemplate(n,r,a);var i=n.Vertex;if(o){var s=o.VertexShaderCode;void 0!==s&&""!==s&&(i=s)}n.Vertex=i;var c=n.Fragment;if(o){var u=o.FragmentShaderCode;void 0!==u&&""!==u&&(c=u)}n.Fragment=c;var l=n.Geometry;if(o){var d=o.GeometryShaderCode;void 0!==d&&(l=d)}n.Geometry=l}},bc={NEAREST:0,LINEAR:1},xc={InterpolationType:bc},Tc=Ke;function Sc(e,t,n){if(t.apply(e)){var r=e.getIndependentComponents();return"".concat(e.getMTime(),"-").concat(r,"-").concat(n)}return"0"}function Pc(e,t,n){return t.identity(n),e.reduce((function(e,n,r){return 0===r?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e}),n)}function wc(e,t){t.classHierarchy.push("vtkOpenGLImageResliceMapper"),e.buildPass=function(n){if(n){t.currentRenderPass=null,t._openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var r=t._openGLRenderer.getRenderable();t._openGLCamera=t._openGLRenderer.getViewNodeFor(r.getActiveCamera()),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLTexture||(t.openGLTexture=vc.newInstance()),t.openGLTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.pwfTexture.setOpenGLRenderWindow(t._openGLRenderWindow)}},e.translucentPass=function(n,r){n&&(t.currentRenderPass=r,e.render())},e.zBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.opaquePass=function(t){t&&e.render()},e.getCoincidentParameters=function(e,n){return t.renderable.getResolveCoincidentTopology()?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null},e.render=function(){var n=t._openGLImageSlice.getRenderable(),r=t._openGLRenderer.getRenderable();e.renderPiece(r,n)},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),t.currentInput?(e.updateResliceGeometry(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r),e.invokeEvent({type:"EndEvent"})):Tc("No input!")},e.renderPieceStart=function(n,r){e.updateBufferObjects(n,r),r.getProperty().getInterpolationType()===xc.NEAREST?(t.openGLTexture.setMinificationFilter(Js.NEAREST),t.openGLTexture.setMagnificationFilter(Js.NEAREST),t.colorTexture.setMinificationFilter(Js.NEAREST),t.colorTexture.setMagnificationFilter(Js.NEAREST),t.pwfTexture.setMinificationFilter(Js.NEAREST),t.pwfTexture.setMagnificationFilter(Js.NEAREST)):(t.openGLTexture.setMinificationFilter(Js.LINEAR),t.openGLTexture.setMagnificationFilter(Js.LINEAR),t.colorTexture.setMinificationFilter(Js.LINEAR),t.colorTexture.setMagnificationFilter(Js.LINEAR),t.pwfTexture.setMinificationFilter(Js.LINEAR),t.pwfTexture.setMagnificationFilter(Js.LINEAR)),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var a=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),t.pwfTexture.activate(),e.updateShaders(t.tris,n,r),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),t.pwfTexture.deactivate()},e.renderPieceFinish=function(e,t){},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()||t.VBOBuildTime.getMTime()<t.resliceGeom.getMTime()},e.buildBufferObjects=function(e,n){var r,a=t.currentInput;if(a){var o=null===(r=a.getPointData())||void 0===r?void 0:r.getScalars();if(o){var i=o.getNumberOfComponents();if(!t._externalOpenGLTexture){var s="".concat(a.getMTime(),"A").concat(o.getMTime());if(t.openGLTextureString!==s){var c=a.getDimensions();t.openGLTexture.getOglNorm16Ext(t.context.getExtension("EXT_texture_norm16")),t.openGLTexture.releaseGraphicsResources(t._openGLRenderWindow),t.openGLTexture.resetFormatAndType(),t.openGLTexture.create3DFilterableFromDataArray(c[0],c[1],c[2],o),t.openGLTextureString=s}}var u=n.getProperty(),l=u.getIndependentComponents(),d=l?i:1,p=l?2*d:1,f=Sc(u,u.getRGBTransferFunction,d);if(t.colorTextureString!==f){var g=1024,m=new Uint8Array(g*p*3),v=u.getRGBTransferFunction();if(v){for(var h=new Float32Array(3072),y=0;y<d;y++){var b=(v=u.getRGBTransferFunction(y)).getRange();if(v.getTable(b[0],b[1],g,h,1),l)for(var x=0;x<3072;x++)m[y*g*6+x]=255*h[x],m[y*g*6+x+3072]=255*h[x];else for(var T=0;T<3072;T++)m[y*g*6+T]=255*h[T]}t.colorTexture.releaseGraphicsResources(t._openGLRenderWindow),t.colorTexture.resetFormatAndType(),t.colorTexture.create2DFromRaw(g,p,3,Kn.UNSIGNED_CHAR,m)}else{for(var S=0;S<3072;++S)m[S]=255*S/3069,m[S+1]=255*S/3069,m[S+2]=255*S/3069;t.colorTexture.create2DFromRaw(g,1,3,Kn.UNSIGNED_CHAR,m)}t.colorTextureString=f}var P=Sc(u,u.getPiecewiseFunction,d);if(t.pwfTextureString!==P){var w=1024,C=w*p,O=new Uint8Array(C),A=u.getPiecewiseFunction();if(t.pwfTexture.releaseGraphicsResources(t._openGLRenderWindow),t.pwfTexture.resetFormatAndType(),A){for(var I=new Float32Array(C),M=new Float32Array(w),R=0;R<d;++R)if(null===(A=u.getPiecewiseFunction(R)))I.fill(1);else{var E=A.getRange();if(A.getTable(E[0],E[1],w,M,1),l)for(var D=0;D<w;D++)I[R*w*2+D]=M[D],I[R*w*2+D+w]=M[D];else for(var L=0;L<w;L++)I[R*w*2+L]=M[L]}t.pwfTexture.create2DFromRaw(w,p,1,Kn.FLOAT,I)}else O.fill(255),t.pwfTexture.create2DFromRaw(w,1,1,Kn.UNSIGNED_CHAR,O);t.pwfTextureString=P}var B="".concat(t.resliceGeom.getMTime(),"A").concat(t.renderable.getSlabThickness());if(!t.tris.getCABO().getElementCount()||t.VBOBuildString!==B){var N=Ba.newInstance({numberOfComponents:3,values:t.resliceGeom.getPoints().getData()});N.setName("points");var k=Ba.newInstance({numberOfComponents:1,values:t.resliceGeom.getPolys().getData()}),V={points:N,cellOffset:0};if(t.renderable.getSlabThickness()>0){var _=t.resliceGeom.getPointData().getNormals();_?V.normals=_:Tc("Slab mode requested without normals")}t.tris.getCABO().createVBO(k,"polys",Cs.SURFACE,V)}t.VBOBuildString=B,t.VBOBuildTime.modified()}}},e.updateShaders=function(n,r,a){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a)},e.setMapperShaderParameters=function(n,r,a){var o=n.getProgram();if(n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){o.isUniformUsed("texture1")&&o.setUniformi("texture1",t.openGLTexture.getTextureUnit()),o.isAttributeUsed("vertexWC")&&(n.getVAO().addAttributeArray(o,n.getCABO(),"vertexWC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Tc("Error setting vertexWC in shader VAO.")),o.isAttributeUsed("normalWC")&&(n.getVAO().addAttributeArray(o,n.getCABO(),"normalWC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Tc("Error setting normalWC in shader VAO.")),o.isUniformUsed("slabThickness")&&o.setUniformf("slabThickness",t.renderable.getSlabThickness()),o.isUniformUsed("spacing")&&o.setUniform3fv("spacing",t.currentInput.getSpacing()),o.isUniformUsed("slabType")&&o.setUniformi("slabType",t.renderable.getSlabType()),o.isUniformUsed("slabType")&&o.setUniformi("slabType",t.renderable.getSlabType()),o.isUniformUsed("slabTrapezoid")&&o.setUniformi("slabTrapezoid",t.renderable.getSlabTrapezoidIntegration());var i=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null;if(o.isUniformUsed("WCTCMatrix")){var s=t.currentInput;m(t.tmpMat4);var c=s.getBounds(),u=[c[1]-c[0],c[3]-c[2],c[5]-c[4]],l=[c[0],c[2],c[4]];_(t.tmpMat4,[0,0,0,1],l,u),h(t.tmpMat4,t.tmpMat4),i&&x(t.tmpMat4,t.tmpMat4,i),o.setUniformMatrix("WCTCMatrix",t.tmpMat4)}n.getAttributeUpdateTime().modified()}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var d=e.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",d.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",d.factor)}},e.setCameraShaderParameters=function(e,n,a){var o=t._openGLCamera.getKeyMatrices(n),i=t._openGLImageSlice.getKeyMatrices(),s=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,c=e.getProgram();c.isUniformUsed("MCPCMatrix")&&(m(t.tmpMat4),c.setUniformMatrix("MCPCMatrix",Pc([o.wcpc,i.mcwc,s],r,t.tmpMat4))),c.isUniformUsed("MCVCMatrix")&&(m(t.tmpMat4),c.setUniformMatrix("MCVCMatrix",Pc([o.wcvc,i.mcwc,s],r,t.tmpMat4)))},e.setPropertyShaderParameters=function(e,n,r){var a=e.getProgram(),o=r.getProperty(),i=o.getOpacity();a.setUniformf("opacity",i);var s=t.openGLTexture.getComponents(),c=o.getIndependentComponents();if(c)for(var u=0;u<s;++u)a.setUniformf("mix".concat(u),o.getComponentWeight(u));for(var l=t.openGLTexture.getVolumeInfo(),d=0;d<s;d++){var p=o.getColorWindow(),f=o.getColorLevel(),g=c?d:0,m=o.getRGBTransferFunction(g);if(m&&o.getUseLookupTableScalarRange()){var v=m.getRange();p=v[1]-v[0],f=.5*(v[1]+v[0])}var h=l.scale[d]/p,y=(l.offset[d]-f)/p+.5;a.setUniformf("cshift".concat(d),y),a.setUniformf("cscale".concat(d),h)}var b=t.colorTexture.getTextureUnit();a.setUniformi("colorTexture1",b);for(var x=0;x<s;x++){var T=1,S=0,P=c?x:0,w=o.getPiecewiseFunction(P);if(w){var C=w.getRange(),O=C[1]-C[0],A=.5*(C[0]+C[1]);T=l.scale[x]/O,S=(l.offset[x]-A)/O+.5}a.setUniformf("pwfshift".concat(x),S),a.setUniformf("pwfscale".concat(x),T)}var I=t.pwfTexture.getTextureUnit();a.setUniformi("pwfTexture1",I),a.setUniform4fv("backgroundColor",t.renderable.getBackgroundColor())},e.getNeedToRebuildShaders=function(e,n,r){var a=t.openGLTexture.getComponents(),o=r.getProperty().getIndependentComponents(),i=t.renderable.getSlabThickness(),s=t.renderable.getSlabType(),c=t.renderable.getSlabTrapezoidIntegration(),u=!1;return(!t.currentRenderPass&&t.lastRenderPassShaderReplacement||t.currentRenderPass&&t.currentRenderPass.getShaderReplacement()!==t.lastRenderPassShaderReplacement)&&(u=!0),!(!u&&t.lastHaveSeenDepthRequest===t.haveSeenDepthRequest&&0!==e.getProgram()&&t.lastTextureComponents===a&&t.lastIndependentComponents===o&&t.lastSlabThickness===i&&t.lastSlabType===s&&t.lastSlabTrapezoidIntegration===c||(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=a,t.lastIndependentComponents=o,t.lastSlabThickness=i,t.lastSlabType=s,t.lastSlabTrapezoidIntegration=c,0))},e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkImageResliceMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model coordinates\n// WC - World coordinates\n// VC - View coordinates\n// DC - Display coordinates\n// TC - Texture coordinates\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvoid main()\n{\n  //VTK::PositionVC::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Picking::Impl\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkImageResliceMapperFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the gpu image mapper fragment shader\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n\n  //VTK::RenderPassFragmentShader::Impl\n}\n",e.Geometry=""},e.replaceShaderValues=function(n,r,a){if(e.replaceShaderTCoord(n,r,a),e.replaceShaderPositionVC(n,r,a),t.haveSeenDepthRequest){var o=n.Fragment;o=Us.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=Us.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=o}e.replaceShaderCoincidentOffset(n,r,a)},e.replaceShaderTCoord=function(e,n,r){var a=e.Vertex,o=e.Geometry,i=e.Fragment,s=t.renderable.getSlabThickness();a=Us.substitute(a,"//VTK::TCoord::Dec",["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"]).result,a=Us.substitute(a,"//VTK::TCoord::Impl",["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"]).result;var c=t.openGLTexture.getComponents(),u=r.getProperty().getIndependentComponents(),l=["in vec3 fragTexCoord;","uniform highp sampler3D texture1;","uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(u){for(var d=1;d<c;d++)l=l.concat(["uniform float cshift".concat(d,";"),"uniform float cscale".concat(d,";"),"uniform float pwfshift".concat(d,";"),"uniform float pwfscale".concat(d,";")]);switch(c){case 1:l=l.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:l=l.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:l=l.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:l=l.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Tc("Unsupported number of independent coordinates.")}}s>0&&(l=(l=l.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;"])).concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),i=Us.substitute(i,"//VTK::TCoord::Dec",l).result;var p=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(texture1, fragTexCoord);"];if(s>0&&(p=p.concat(["// Get the first and last samples","int numSlices = 1;","vec3 normalxspacing = normalWCVSOutput * spacing * 0.5;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),u){for(var f=["r","g","b","a"],g=0;g<c;++g)p=p.concat(["vec3 tcolor".concat(g," = mix").concat(g," * texture2D(colorTexture1, vec2(tvalue.").concat(f[g]," * cscale").concat(g," + cshift").concat(g,", height").concat(g,")).rgb;"),"float compWeight".concat(g," = mix").concat(g," * texture2D(pwfTexture1, vec2(tvalue.").concat(f[g]," * pwfscale").concat(g," + pwfshift").concat(g,", height").concat(g,")).r;")]);switch(c){case 1:p=p.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:p=p.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Tc("Unsupported number of independent coordinates.")}}else switch(c){case 1:p=p.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:p=p.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:p=p.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:p=p.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}i=Us.substitute(i,"//VTK::TCoord::Impl",p).result,e.Vertex=a,e.Fragment=i,e.Geometry=o},e.replaceShaderPositionVC=function(n,r,a){var o=n.Vertex,i=n.Geometry,s=n.Fragment,c=t.renderable.getSlabThickness(),u=["attribute vec4 vertexWC;"];u=u.concat(["//".concat(e.getMTime()).concat(t.resliceGeomUpdateString)]),c>0&&(u=u.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),o=Us.substitute(o,"//VTK::PositionVC::Dec",u).result;var l=["gl_Position = MCPCMatrix * vertexWC;"];c>0&&(l=l.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),o=Us.substitute(o,"//VTK::PositionVC::Impl",l).result,o=Us.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;var d=[];c>0&&(d=d.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),s=Us.substitute(s,"//VTK::PositionVC::Dec",d).result,n.Vertex=o,n.Geometry=i,n.Fragment=s},e.updateResliceGeometry=function(){var e="",n=t.currentInput,r=null==n?void 0:n.getBounds(),a=!0,o=2;if(t.renderable.getSlicePolyData())e=e.concat("PolyData".concat(t.renderable.getSlicePolyData().getMTime()));else if(t.renderable.getSlicePlane()){e=e.concat("Plane".concat(t.renderable.getSlicePlane().getMTime())),n&&(e=e.concat("Image".concat(n.getMTime())));var i=function(e){Ta.normalize(e);for(var t=[0,0,0],n=0;n<3;++n){Dn(t),t[n]=1;var r=Ta.dot(e,t);if(r<-.999||r>.999)return[!0,n]}return[!1,2]}(t.renderable.getSlicePlane().getNormal()),s=fe(i,2);a=s[0],o=s[1]}else{var c,u=wi.newInstance();u.setNormal(0,0,1);var l=[0,1,0,1,0,1];n&&(l=r),u.setOrigin(l[0],l[2],.5*(l[5]+l[4])),t.renderable.setSlicePlane(u),e=e.concat("Plane".concat(null===(c=t.renderable.getSlicePlane())||void 0===c?void 0:c.getMTime())),n&&(e=e.concat("Image".concat(n.getMTime())))}if(!t.resliceGeom||t.resliceGeomUpdateString!==e){if(t.renderable.getSlicePolyData())t.resliceGeom=t.renderable.getSlicePolyData();else if(t.renderable.getSlicePlane()){var d=n?r:[0,1,0,1,0,1];if(a){for(var p=new Float32Array(12),f=t.renderable.getSlicePlane().getOrigin(),g=[(o+1)%3,(o+2)%3].sort(),m=0,v=0;v<2;++v)for(var h=0;h<2;++h)p[m+o]=f[o],p[m+g[0]]=d[2*g[0]+h],p[m+g[1]]=d[2*g[1]+v],m+=3;var y=new Uint16Array(8);y[0]=3,y[1]=0,y[2]=1,y[3]=3,y[4]=3,y[5]=0,y[6]=3,y[7]=2;var b=t.renderable.getSlicePlane().getNormal();Ta.normalize(b);for(var x=new Float32Array(12),T=0;T<4;++T)x[3*T]=b[0],x[3*T+1]=b[1],x[3*T+2]=b[2];t.resliceGeom||(t.resliceGeom=Gi.newInstance()),t.resliceGeom.getPoints().setData(p,3),t.resliceGeom.getPolys().setData(y,1);var S=Ba.newInstance({numberOfComponents:3,values:x,name:"Normals"});t.resliceGeom.getPointData().setNormals(S),t.resliceGeom.modified()}else{var P=ts.newInstance();P.setCenter(.5*(d[0]+d[1]),.5*(d[2]+d[3]),.5*(d[4]+d[5])),P.setXLength(d[1]-d[0]),P.setYLength(d[3]-d[2]),P.setZLength(d[5]-d[4]);var w=ss.newInstance();w.setInputConnection(P.getOutputPort()),w.setCutFunction(t.renderable.getSlicePlane());var C=Ki.newInstance();C.setInputConnection(w.getOutputPort()),C.update(),t.resliceGeom=C.getOutputData();var O=t.renderable.getSlicePlane().getNormal(),A=t.resliceGeom.getNumberOfPoints();Ta.normalize(O);for(var I=new Float32Array(3*A),M=0;M<A;++M)I[3*M]=O[0],I[3*M+1]=O[1],I[3*M+2]=O[2];var R=Ba.newInstance({numberOfComponents:3,values:I,name:"Normals"});t.resliceGeom.getPointData().setNormals(R)}}else Tc("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");t.resliceGeomUpdateString=e}},e.setOpenGLTexture=function(e){e&&(t.openGLTexture=e,t._externalOpenGLTexture=!0)}}var Cc={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastTextureComponents:0,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,openGLTexture:null,openGLTextureString:null,colorTextureString:null,pwfTextureString:null,resliceGeom:null,resliceGeomUpdateString:null,tris:null,colorTexture:null,pwfTexture:null,_externalOpenGLTexture:!1};var Oc=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cc,n),Et.extend(e,t,n),hc(e,t,n),yc(e,t,n),t.tris=Zs.newInstance(),t.openGLTexture=vc.newInstance(),t.colorTexture=vc.newInstance(),t.pwfTexture=vc.newInstance(),t.VBOBuildTime={},at(t.VBOBuildTime),t.tmpMat4=m(new Float64Array(16)),it(e,t,["openGLTexture"]),wc(e,t)}),"vtkOpenGLImageResliceMapper");Vt("vtkImageResliceMapper",Oc);var Ac={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}},Ic=Ke,Mc=Ac.SlicingMode;function Rc(e,t,n){if(t.apply(e)){var r=e.getIndependentComponents();return"".concat(e.getMTime(),"-").concat(r,"-").concat(n)}return"0"}function Ec(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=function(n){if(n){t.currentRenderPass=null,t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.pwfTexture.setOpenGLRenderWindow(t._openGLRenderWindow);var r=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(r.getActiveCamera()),t.renderable.isA("vtkImageMapper")&&t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(r.getActiveCamera())}},e.translucentPass=function(n,r){n&&(t.currentRenderPass=r,e.render())},e.zBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.opaquePass=function(t){t&&e.render()},e.getCoincidentParameters=function(e,n){return t.renderable.getResolveCoincidentTopology()?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null},e.render=function(){var n=t.openGLImageSlice.getRenderable(),r=t._openGLRenderer.getRenderable();e.renderPiece(r,n)},e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Light::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n\n  //VTK::RenderPassFragmentShader::Impl\n}\n",e.Geometry=""},e.replaceShaderValues=function(n,r,a){var o=n.Vertex,i=n.Fragment;o=Us.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Us.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Us.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,o=Us.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;var s=t.openGLTexture.getComponents(),c=a.getProperty().getIndependentComponents(),u=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(c){for(var l=1;l<s;l++)u=u.concat(["uniform float cshift".concat(l,";"),"uniform float cscale".concat(l,";"),"uniform float pwfshift".concat(l,";"),"uniform float pwfscale".concat(l,";")]);switch(s){case 1:u=u.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:u=u.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Ic("Unsupported number of independent coordinates.")}}if(i=Us.substitute(i,"//VTK::TCoord::Dec",u).result,c){for(var d=["r","g","b","a"],p=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"],f=0;f<s;f++)p=p.concat(["vec3 tcolor".concat(f," = mix").concat(f," * texture2D(colorTexture1, vec2(tvalue.").concat(d[f]," * cscale").concat(f," + cshift").concat(f,", height").concat(f,")).rgb;"),"float compWeight".concat(f," = mix").concat(f," * texture2D(pwfTexture1, vec2(tvalue.").concat(d[f]," * pwfscale").concat(f," + pwfshift").concat(f,", height").concat(f,")).r;")]);switch(s){case 1:p=p.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:p=p.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Ic("Unsupported number of independent coordinates.")}i=Us.substitute(i,"//VTK::TCoord::Impl",p).result}else switch(s){case 1:i=Us.substitute(i,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]).result;break;case 2:i=Us.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:i=Us.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:i=Us.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}t.haveSeenDepthRequest&&(i=Us.substitute(i,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,i=Us.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=o,n.Fragment=i,e.replaceShaderClip(n,r,a),e.replaceShaderCoincidentOffset(n,r,a)},e.replaceShaderClip=function(e,n,r){var a=e.Vertex,o=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var i=t.renderable.getNumberOfClippingPlanes();i>6&&(Ke("OpenGL has a limit of 6 clipping planes"),i=6),a=Us.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,a=Us.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=Us.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,o=Us.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=a,e.Fragment=o},e.getNeedToRebuildShaders=function(e,n,r){var a=t.openGLTexture.getComponents(),o=r.getProperty().getIndependentComponents(),i=!1;return(!t.currentRenderPass&&t.lastRenderPassShaderReplacement||t.currentRenderPass&&t.currentRenderPass.getShaderReplacement()!==t.lastRenderPassShaderReplacement)&&(i=!0),!(!i&&t.lastHaveSeenDepthRequest===t.haveSeenDepthRequest&&0!==e.getProgram()&&t.lastTextureComponents===a&&t.lastIndependentComponents===o||(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=a,t.lastIndependentComponents=o,0))},e.updateShaders=function(n,r,a){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a)},e.setMapperShaderParameters=function(n,r,a){n.getCABO().getElementCount()&&(t.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Ic("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),t.context.FALSE)||Ic("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());var o=t.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",o);var i=t.openGLTexture.getComponents(),s=a.getProperty().getIndependentComponents();if(s)for(var c=0;c<i;c++)n.getProgram().setUniformf("mix".concat(c),a.getProperty().getComponentWeight(c));for(var u=t.openGLTexture.getShiftAndScale(),l=0;l<i;l++){var d=a.getProperty().getColorWindow(),f=a.getProperty().getColorLevel(),g=s?l:0,m=a.getProperty().getRGBTransferFunction(g);if(m&&a.getProperty().getUseLookupTableScalarRange()){var h=m.getRange();d=h[1]-h[0],f=.5*(h[1]+h[0])}var y=u.scale/d,b=(u.shift-f)/d+.5;n.getProgram().setUniformf("cshift".concat(l),b),n.getProgram().setUniformf("cscale".concat(l),y)}for(var T=0;T<i;T++){var S=1,P=0,w=s?T:0,C=a.getProperty().getPiecewiseFunction(w);if(C){var O=C.getRange(),A=O[1]-O[0],I=.5*(O[0]+O[1]);S=u.scale/A,P=(u.shift-I)/A+.5}n.getProgram().setUniformf("pwfshift".concat(T),P),n.getProgram().setUniformf("pwfscale".concat(T),S)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var M=e.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",M.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",M.factor)}var R=t.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",R);var E=t.pwfTexture.getTextureUnit();if(n.getProgram().setUniformi("pwfTexture1",E),t.renderable.getNumberOfClippingPlanes()){var D=t.renderable.getNumberOfClippingPlanes();D>6&&(Ke("OpenGL has a limit of 6 clipping planes"),D=6);var L=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,B=L?p(t.imagematinv,a.getMatrix()):a.getMatrix();L&&(v(B,B),x(B,B,L),v(B,B)),v(t.imagemat,t.currentInput.getIndexToWorld()),x(t.imagematinv,B,t.imagemat);for(var N=[],k=0;k<D;k++){var V=[];t.renderable.getClippingPlaneInDataCoords(t.imagematinv,k,V);for(var _=0;_<4;_++)N.push(V[_])}n.getProgram().setUniformi("numClipPlanes",D),n.getProgram().setUniform4fv("clipPlanes",N)}},e.setCameraShaderParameters=function(e,n,r){var a=e.getProgram(),o=t.openGLImageSlice.getKeyMatrices(),i=t.currentInput.getIndexToWorld();x(t.imagemat,o.mcwc,i);var s=t.openGLCamera.getKeyMatrices(n);if(x(t.imagemat,s.wcpc,t.imagemat),e.getCABO().getCoordShiftAndScaleEnabled()){var c=e.getCABO().getInverseShiftAndScaleMatrix();x(t.imagemat,t.imagemat,c)}a.setUniformMatrix("MCPCMatrix",t.imagemat)},e.setPropertyShaderParameters=function(e,t,n){var r=e.getProgram(),a=n.getProperty().getOpacity();r.setUniformf("opacity",a)},e.renderPieceStart=function(n,r){e.updateBufferObjects(n,r),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var a=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),t.pwfTexture.activate(),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,r),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release()),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),t.pwfTexture.deactivate()},e.renderPieceFinish=function(e,t){},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getCurrentImage(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):Ic("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():sa(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(n,r){var a=t.currentInput;if(a){var o=a.getPointData()&&a.getPointData().getScalars();if(o){var i=o.getDataType(),s=o.getNumberOfComponents(),c=r.getProperty(),u=c.getInterpolationType();u===bc.NEAREST?(t.colorTexture.setMinificationFilter(Js.NEAREST),t.colorTexture.setMagnificationFilter(Js.NEAREST),t.pwfTexture.setMinificationFilter(Js.NEAREST),t.pwfTexture.setMagnificationFilter(Js.NEAREST)):(t.colorTexture.setMinificationFilter(Js.LINEAR),t.colorTexture.setMagnificationFilter(Js.LINEAR),t.pwfTexture.setMinificationFilter(Js.LINEAR),t.pwfTexture.setMagnificationFilter(Js.LINEAR));var l=c.getIndependentComponents(),d=l?s:1,p=l?2*d:1,f=Rc(c,c.getRGBTransferFunction,d);if(t.colorTextureString!==f){var g=1024,m=new Uint8Array(g*p*3),v=c.getRGBTransferFunction();if(v){for(var h=new Float32Array(3072),y=0;y<d;y++){var b=(v=c.getRGBTransferFunction(y)).getRange();if(v.getTable(b[0],b[1],g,h,1),l)for(var x=0;x<3072;x++)m[y*g*6+x]=255*h[x],m[y*g*6+x+3072]=255*h[x];else for(var T=0;T<3072;T++)m[y*g*6+T]=255*h[T]}t.colorTexture.create2DFromRaw(g,p,3,Kn.UNSIGNED_CHAR,m)}else{for(var S=0;S<3072;++S)m[S]=255*S/3069,m[S+1]=255*S/3069,m[S+2]=255*S/3069;t.colorTexture.create2DFromRaw(g,1,3,Kn.UNSIGNED_CHAR,m)}t.colorTextureString=f}var P=Rc(c,c.getPiecewiseFunction,d);if(t.pwfTextureString!==P){var w=1024,C=w*p,O=new Uint8Array(C),A=c.getPiecewiseFunction();if(t.pwfTexture.resetFormatAndType(),A){for(var I=new Float32Array(C),M=new Float32Array(w),R=0;R<d;++R)if(null===(A=c.getPiecewiseFunction(R)))I.fill(1);else{var E=A.getRange();if(A.getTable(E[0],E[1],w,M,1),l)for(var D=0;D<w;D++)I[R*w*2+D]=M[D],I[R*w*2+D+w]=M[D];else for(var L=0;L<w;L++)I[R*w*2+L]=M[L]}t.pwfTexture.create2DFromRaw(w,p,1,Kn.FLOAT,I)}else O.fill(255),t.pwfTexture.create2DFromRaw(w,1,1,Kn.UNSIGNED_CHAR,O);t.pwfTextureString=P}var B=t.renderable.getClosestIJKAxis().ijkMode,N=t.renderable.getSlice();B!==t.renderable.getSlicingMode()&&(N=t.renderable.getSliceAtPosition(N));var k,V=t.renderable.isA("vtkImageArrayMapper")?t.renderable.getSubSlice():Math.round(N),_=a.getExtent();B===Mc.I&&(k=V-_[0]),B===Mc.J&&(k=V-_[2]),B!==Mc.K&&B!==Mc.NONE||(k=V-_[4]);var F="".concat(N,"A").concat(a.getMTime(),"A").concat(o.getMTime(),"B").concat(e.getMTime(),"C").concat(t.renderable.getSlicingMode(),"D").concat(r.getProperty().getInterpolationType());if(t.VBOBuildString!==F){var G,U,j=a.getDimensions();u===bc.NEAREST?(new Set([1,3,4]).has(s)&&i===Kn.UNSIGNED_CHAR&&!l?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Js.NEAREST)):t.openGLTexture.setMinificationFilter(Js.NEAREST),t.openGLTexture.setMagnificationFilter(Js.NEAREST)):(4!==s||i!==Kn.UNSIGNED_CHAR||l?t.openGLTexture.setMinificationFilter(Js.LINEAR):(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Js.LINEAR_MIPMAP_LINEAR)),t.openGLTexture.setMagnificationFilter(Js.LINEAR)),t.openGLTexture.setWrapS(Qs.CLAMP_TO_EDGE),t.openGLTexture.setWrapT(Qs.CLAMP_TO_EDGE);for(var z=j[0]*j[1]*s,W=new Float32Array(12),H=new Float32Array(8),K=0;K<4;K++)H[2*K]=K%2?1:0,H[2*K+1]=K>1?1:0;var X=[Mc.X,Mc.Y,Mc.Z].includes(t.renderable.getSlicingMode())?N:V,q=a.getSpatialExtent(),Y=o.getData(),Z=null;if(B===Mc.I){Z=new Y.constructor(j[2]*j[1]*s);for(var Q=0,J=0;J<j[2];J++)for(var $=0;$<j[1];$++){var ee=(k+$*j[0]+J*j[0]*j[1])*s;Q=(J*j[1]+$)*s,Z.set(Y.subarray(ee,ee+s),Q)}j[0]=j[1],j[1]=j[2],W[0]=X,W[1]=q[2],W[2]=q[4],W[3]=X,W[4]=q[3],W[5]=q[4],W[6]=X,W[7]=q[2],W[8]=q[5],W[9]=X,W[10]=q[3],W[11]=q[5]}else if(B===Mc.J){Z=new Y.constructor(j[2]*j[0]*s);for(var te=0,ne=0;ne<j[2];ne++)for(var re=0;re<j[0];re++){var ae=(re+k*j[0]+ne*j[0]*j[1])*s;te=(ne*j[0]+re)*s,Z.set(Y.subarray(ae,ae+s),te)}j[1]=j[2],W[0]=q[0],W[1]=X,W[2]=q[4],W[3]=q[1],W[4]=X,W[5]=q[4],W[6]=q[0],W[7]=X,W[8]=q[5],W[9]=q[1],W[10]=X,W[11]=q[5]}else B===Mc.K||B===Mc.NONE?(Z=Y.subarray(k*z,(k+1)*z),W[0]=q[0],W[1]=q[2],W[2]=X,W[3]=q[1],W[4]=q[2],W[5]=X,W[6]=q[0],W[7]=q[3],W[8]=X,W[9]=q[1],W[10]=q[3],W[11]=X):Ic("Reformat slicing not yet supported.");t.openGLTexture.create2DFilterableFromRaw(j[0],j[1],s,o.getDataType(),Z,null===(G=(U=t.renderable).getPreferSizeOverAccuracy)||void 0===G?void 0:G.call(U)),t.openGLTexture.activate(),t.openGLTexture.sendParameters(),t.openGLTexture.deactivate();var oe=Ba.newInstance({numberOfComponents:3,values:W});oe.setName("points");var ie=Ba.newInstance({numberOfComponents:2,values:H});ie.setName("tcoords");var se=new Uint16Array(8);se[0]=3,se[1]=0,se[2]=1,se[3]=3,se[4]=3,se[5]=0,se[6]=3,se[7]=2;var ce=Ba.newInstance({numberOfComponents:1,values:se});t.tris.getCABO().createVBO(ce,"polys",Cs.SURFACE,{points:oe,tcoords:ie,cellOffset:0}),t.VBOBuildTime.modified(),t.VBOBuildString=F}}}}}var Dc={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};var Lc=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dc,n),Et.extend(e,t,n),hc(e,t,n),yc(e,t,n),t.tris=Zs.newInstance(),t.openGLTexture=vc.newInstance({resizable:!0}),t.colorTexture=vc.newInstance({resizable:!0}),t.pwfTexture=vc.newInstance({resizable:!0}),t.imagemat=m(new Float64Array(16)),t.imagematinv=m(new Float64Array(16)),lt(e,t,[]),t.VBOBuildTime={},at(t.VBOBuildTime),Ec(e,t)}),"vtkOpenGLImageMapper");function Bc(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=function(n){if(t.renderable&&t.renderable.getVisibility()&&n){if(!t.renderable)return;t._openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseZBufferPass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.traverseOpaqueZBufferPass=function(t){return e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t._openGLRenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.zBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(e,n){e&&t.context.depthMask(!0)},e.translucentPass=function(e,n){t.context.depthMask(!e)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(p(t.keyMatrices.mcwc,t.renderable.getMatrix()),v(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.keyMatrixTime.modified()),t.keyMatrices}}Vt("vtkAbstractImageMapper",Lc);var Nc={context:null,keyMatrixTime:null,keyMatrices:null};var kc=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nc,n),Et.extend(e,t,n),t.keyMatrixTime={},at(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:m(new Float64Array(16))},lt(e,t,["context"]),Bc(e,t)}),"vtkOpenGLImageSlice");function Vc(e,t){t.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t._openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementVolumeCount()}},e.traverseVolumePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children[0].traverse(n),e.apply(n,!1))},e.volumePass=function(e){t.renderable&&t.renderable.getVisibility()&&t.context.depthMask(!e)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),p(t.MCWCMatrix,t.renderable.getMatrix()),v(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?ce(t.normalMatrix):(se(t.normalMatrix,t.MCWCMatrix),ue(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}Vt("vtkImageSlice",kc);var _c={};var Fc=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_c,n),Et.extend(e,t,n),t.keyMatrixTime={},at(t.keyMatrixTime,{mtime:0}),t.normalMatrix=new Float64Array(9),t.MCWCMatrix=new Float64Array(16),lt(e,t,["context"]),Vc(e,t)}),"vtkOpenGLVolume");function Gc(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return t.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=function(e){if(t.context){var n=t.context;t.previousDrawBinding=n.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t._openGLRenderWindow.getActiveFramebuffer()}else Ke("you must set the OpenGLRenderWindow before calling saveCurrentBindings")},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=function(e){if(t.context){var n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t._openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)}else Ke("you must set the OpenGLRenderWindow before calling restorePreviousBindings")},e.restorePreviousBuffers=function(e){},e.bind=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=n;null===r&&(r=t.context.FRAMEBUFFER),t.context.bindFramebuffer(r,t.glFramebuffer);for(var a=0;a<t.colorBuffers.length;a++)t.colorBuffers[a].bind();t._openGLRenderWindow.setActiveFramebuffer(e)},e.create=function(e,n){t.context?(t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n):Ke("you must set the OpenGLRenderWindow before calling create")},e.setColorBuffer=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.context;if(r){var a=r.COLOR_ATTACHMENT0;if(n>0){if(!t._openGLRenderWindow.getWebgl2())return void Ke("Using multiple framebuffer attachments requires WebGL 2");a+=n}t.colorBuffers[n]=e,r.framebufferTexture2D(r.FRAMEBUFFER,a,r.TEXTURE_2D,e.getHandle(),0)}else Ke("you must set the OpenGLRenderWindow before calling setColorBuffer")},e.removeColorBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.context;if(n){var r=n.COLOR_ATTACHMENT0;if(e>0){if(!t._openGLRenderWindow.getWebgl2())return void Ke("Using multiple framebuffer attachments requires WebGL 2");r+=e}n.framebufferTexture2D(n.FRAMEBUFFER,r,n.TEXTURE_2D,null,0),t.colorBuffers=t.colorBuffers.splice(e,1)}else Ke("you must set the OpenGLRenderWindow before calling removeColorBuffer")},e.setDepthBuffer=function(e){if(t.context)if(t._openGLRenderWindow.getWebgl2()){var n=t.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,e.getHandle(),0)}else Ke("Attaching depth buffer textures to fbo requires WebGL 2");else Ke("you must set the OpenGLRenderWindow before calling setDepthBuffer")},e.removeDepthBuffer=function(){if(t.context)if(t._openGLRenderWindow.getWebgl2()){var e=t.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,null,0)}else Ke("Attaching depth buffer textures to framebuffers requires WebGL 2");else Ke("you must set the OpenGLRenderWindow before calling removeDepthBuffer")},e.getGLFramebuffer=function(){return t.glFramebuffer},e.setOpenGLRenderWindow=function(n){t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer)},e.getSize=function(){var e=[0,0];return null!==t.glFramebuffer&&(e[0]=t.glFramebuffer.width,e[1]=t.glFramebuffer.height),e},e.populateFramebuffer=function(){if(t.context){e.bind();var n=t.context,r=vc.newInstance();r.setOpenGLRenderWindow(t._openGLRenderWindow),r.setMinificationFilter(Js.LINEAR),r.setMagnificationFilter(Js.LINEAR),r.create2DFromRaw(t.glFramebuffer.width,t.glFramebuffer.height,4,Kn.UNSIGNED_CHAR,null),e.setColorBuffer(r),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)}else Ke("you must set the OpenGLRenderWindow before calling populateFrameBuffer")},e.getColorTexture=function(){return t.colorBuffers[0]}}Vt("vtkVolume",Fc);var Uc={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function jc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Uc,n),at(e,t),t.colorBuffers&&Ke("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),t.colorBuffers=[],dt(e,t,["colorBuffers"]),Gc(e,t)}var zc={newInstance:yt(jc,"vtkFramebuffer"),extend:jc},Wc={NEAREST:0,LINEAR:1,FAST_LINEAR:2},Hc={FRACTIONAL:0,PROPORTIONAL:1},Kc={InterpolationType:Wc,OpacityMode:Hc},Xc={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5},qc=Xc;function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Zc=Xe,Qc=Ke;function Jc(e,t){t.classHierarchy.push("vtkOpenGLVolumeMapper"),e.buildPass=function(){t.zBufferTexture=null},e.zBufferPass=function(e,n){if(e){var r=n.getZBufferTexture();r!==t.zBufferTexture&&(t.zBufferTexture=r)}},e.opaqueZBufferPass=function(t,n){return e.zBufferPass(t,n)},e.volumePass=function(n,r){if(n){t._openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.jitterTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.scalarTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.opacityTexture.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");var a=t.openGLVolume.getRenderable();t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var o=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(o.getActiveCamera()),e.renderPiece(o,a)}},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 PCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = PCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkVolumeFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the volume mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// first declare the settings from the mapper\n// that impact the code paths in here\n\n// always set vtkNumComponents 1,2,3,4\n//VTK::NumComponents\n\n// possibly define vtkTrilinearOn\n//VTK::TrilinearOn\n\n// possibly define vtkIndependentComponents\n//VTK::IndependentComponentsOn\n\n// possibly define any \"proportional\" components\n//VTK::vtkProportionalComponents\n\n// Define the blend mode to use\n#define vtkBlendMode //VTK::BlendMode\n\n// Possibly define vtkImageLabelOutlineOn\n//VTK::ImageLabelOutlineOn\n\n#ifdef vtkImageLabelOutlineOn\nuniform int outlineThickness;\nuniform float outlineOpacity;\nuniform float vpWidth;\nuniform float vpHeight;\nuniform float vpOffsetX;\nuniform float vpOffsetY;\nuniform mat4 PCWCMatrix;\nuniform mat4 vWCtoIDX;\n#endif\n\n// define vtkLightComplexity\n//VTK::LightComplexity\n#if vtkLightComplexity > 0\nuniform float vSpecularPower;\nuniform float vAmbient;\nuniform float vDiffuse;\nuniform float vSpecular;\n//VTK::Light::Dec\n#endif\n\n//VTK::VolumeShadowOn\n//VTK::SurfaceShadowOn\n//VTK::localAmbientOcclusionOn\n//VTK::LAO::Dec\n//VTK::VolumeShadow::Dec\n\n// define vtkComputeNormalFromOpacity\n//VTK::vtkComputeNormalFromOpacity\n\n// possibly define vtkGradientOpacityOn\n//VTK::GradientOpacityOn\n#ifdef vtkGradientOpacityOn\nuniform float goscale0;\nuniform float goshift0;\nuniform float gomin0;\nuniform float gomax0;\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\nuniform float goscale1;\nuniform float goshift1;\nuniform float gomin1;\nuniform float gomax1;\n#if vtkNumComponents >= 3\nuniform float goscale2;\nuniform float goshift2;\nuniform float gomin2;\nuniform float gomax2;\n#endif\n#if vtkNumComponents >= 4\nuniform float goscale3;\nuniform float goshift3;\nuniform float gomin3;\nuniform float gomax3;\n#endif\n#endif\n#endif\n\n// if you want to see the raw tiled\n// data in webgl1 uncomment the following line\n// #define debugtile\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\nuniform int cameraParallel;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSpacing;\nuniform ivec3 volumeDimensions; // 3d texture dimensions\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n//VTK::ClipPlane::Dec\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift0;\nuniform float oscale0;\nuniform sampler2D ctexture;\nuniform float cshift0;\nuniform float cscale0;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\n\n// the heights defined below are the locations\n// for the up to four components of the tfuns\n// the tfuns have a height of 2XnumComps pixels so the\n// values are computed to hit the middle of the two rows\n// for that component\n#ifdef vtkIndependentComponentsOn\n#if vtkNumComponents == 2\nuniform float mix0;\nuniform float mix1;\n#define height0 0.25\n#define height1 0.75\n#endif\n#if vtkNumComponents == 3\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\n#define height0 0.17\n#define height1 0.5\n#define height2 0.83\n#endif\n#if vtkNumComponents == 4\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\nuniform float mix3;\n#define height0 0.125\n#define height1 0.375\n#define height2 0.625\n#define height3 0.875\n#endif\n#endif\n\n#if vtkNumComponents >= 2\nuniform float oshift1;\nuniform float oscale1;\nuniform float cshift1;\nuniform float cscale1;\n#endif\n#if vtkNumComponents >= 3\nuniform float oshift2;\nuniform float oscale2;\nuniform float cshift2;\nuniform float cscale2;\n#endif\n#if vtkNumComponents >= 4\nuniform float oshift3;\nuniform float oscale3;\nuniform float cshift3;\nuniform float cscale3;\n#endif\n\nuniform vec4 ipScalarRangeMin;\nuniform vec4 ipScalarRangeMax;\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n//=======================================================================\n// global and custom variables (a temporary section before photorealistics rendering module is complete)\nvec3 rayDirVC;\nfloat sampleDistanceISVS;\nfloat sampleDistanceIS;\n\n#define SQRT3    1.7321\n#define INV4PI   0.0796\n#define EPSILON  0.001\n#define PI       3.1415\n#define PI2      9.8696\n\n//=======================================================================\n// Webgl2 specific version of functions\n#if __VERSION__ == 300\n\nuniform highp sampler3D texture1;\n\nvec4 getTextureValue(vec3 pos)\n{\n  vec4 tmp = texture(texture1, pos);\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.a = tmp.g;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n//=======================================================================\n// WebGL1 specific version of functions\n#else\n\nuniform sampler2D texture1;\n\nuniform float texWidth;\nuniform float texHeight;\nuniform int xreps;\nuniform int xstride;\nuniform int ystride;\n\n// if computing trilinear values from multiple z slices\n#ifdef vtkTrilinearOn\nvec4 getTextureValue(vec3 ijk)\n{\n  float zoff = 1.0/float(volumeDimensions.z);\n  vec4 val1 = getOneTextureValue(ijk);\n  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));\n\n  float indexZ = float(volumeDimensions)*ijk.z;\n  float zmix =  indexZ - floor(indexZ);\n\n  return mix(val1, val2, zmix);\n}\n\nvec4 getOneTextureValue(vec3 ijk)\n#else // nearest or fast linear\nvec4 getTextureValue(vec3 ijk)\n#endif\n{\n  vec3 tdims = vec3(volumeDimensions);\n\n#ifdef debugtile\n  vec2 tpos = vec2(ijk.x, ijk.y);\n  vec4 tmp = texture2D(texture1, tpos);\n  tmp.a = 1.0;\n\n#else\n  int z = int(ijk.z * tdims.z);\n  int yz = z / xreps;\n  int xz = z - yz*xreps;\n\n  int tileWidth = volumeDimensions.x/xstride;\n  int tileHeight = volumeDimensions.y/ystride;\n\n  xz *= tileWidth;\n  yz *= tileHeight;\n\n  float ni = float(xz) + (ijk.x*float(tileWidth));\n  float nj = float(yz) + (ijk.y*float(tileHeight));\n\n  vec2 tpos = vec2(ni/texWidth, nj/texHeight);\n\n  vec4 tmp = texture2D(texture1, tpos);\n\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.g = tmp.a;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n#endif\n\n  return tmp;\n}\n\n// End of Webgl1 specific code\n//=======================================================================\n#endif\n\n//=======================================================================\n// transformation between VC and IS space\n\n// convert vector position from idx to vc\n#if vtkLightComplexity > 0\nvec3 IStoVC(vec3 posIS){\n  vec3 posVC = posIS / vVCToIJK;\n  return posVC.x * vPlaneNormal0 +\n         posVC.y * vPlaneNormal2 +\n         posVC.z * vPlaneNormal4 +\n         vOriginVC;\n}\n\n// convert vector position from vc to idx\nvec3 VCtoIS(vec3 posVC){\n  posVC = posVC - vOriginVC;\n  posVC = vec3(\n    dot(posVC, vPlaneNormal0),\n    dot(posVC, vPlaneNormal2),\n    dot(posVC, vPlaneNormal4));\n  return posVC * vVCToIJK;\n}\n#endif\n\n//Rotate vector to view coordinate\n#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)\nvoid rotateToViewCoord(inout vec3 dirIS){\n  dirIS.xyz =\n    dirIS.x * vPlaneNormal0 +\n    dirIS.y * vPlaneNormal2 +\n    dirIS.z * vPlaneNormal4;\n}\n\n//Rotate vector to idx coordinate\nvec3 rotateToIDX(vec3 dirVC){\n  vec3 dirIS;\n  dirIS.xyz = vec3(\n    dot(dirVC, vPlaneNormal0),\n    dot(dirVC, vPlaneNormal2),\n    dot(dirVC, vPlaneNormal4));\n  return dirIS;\n}\n#endif\n\n//=======================================================================\n// Given a normal compute the gradient opacity factors\nfloat computeGradientOpacityFactor(\n  float normalMag, float goscale, float goshift, float gomin, float gomax)\n{\n#if defined(vtkGradientOpacityOn)\n  return clamp(normalMag * goscale + goshift, gomin, gomax);\n#else\n  return 1.0;\n#endif\n}\n\n//=======================================================================\n// compute the normal and gradient magnitude for a position, uses forward difference\n#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)\n#ifdef vtkClippingPlanesOn\n  void adjustClippedVoxelValues(vec3 pos, vec3 texPos[3], inout vec3 g1)\n  {\n    vec3 g1VC[3];\n    for (int i = 0; i < 3; ++i)\n    {\n      g1VC[i] = IStoVC(texPos[i]);\n    }\n    vec3 posVC = IStoVC(pos);\n    for (int i = 0; i < clip_numPlanes; ++i)\n    {\n      for (int j = 0; j < 3; ++j)\n      {\n        if(dot(vec3(vClipPlaneOrigins[i] - g1VC[j].xyz), vClipPlaneNormals[i]) > 0.0)\n        {\n          g1[j] = 0.0;\n        }\n      }\n    }\n  }\n#endif\n\n  #ifdef vtkComputeNormalFromOpacity\n    #ifdef vtkGradientOpacityOn\n      vec4 computeDensityNormal(float gradientMag, vec3 scalarInterp[2])\n      {\n    #else\n      //if gradient opacity not on but using density gradient\n      vec4 computeDensityNormal(vec3 scalarInterp[2])\n      {\n    #endif\n        vec3 opacityG1, opacityG2;\n        opacityG1.x = texture2D(otexture, vec2(scalarInterp[0].x * oscale0 + oshift0, 0.5)).r;\n        opacityG1.y = texture2D(otexture, vec2(scalarInterp[0].y * oscale0 + oshift0, 0.5)).r;\n        opacityG1.z = texture2D(otexture, vec2(scalarInterp[0].z * oscale0 + oshift0, 0.5)).r;\n        opacityG2.x = texture2D(otexture, vec2(scalarInterp[1].x * oscale0 + oshift0, 0.5)).r;\n        opacityG2.y = texture2D(otexture, vec2(scalarInterp[1].y * oscale0 + oshift0, 0.5)).r;\n        opacityG2.z = texture2D(otexture, vec2(scalarInterp[1].z * oscale0 + oshift0, 0.5)).r;\n    #ifdef vtkGradientOpacityOn\n        float gradOpacityFactor = 1.0f;\n        if (gradientMag >= 0.0){\n          gradOpacityFactor = computeGradientOpacityFactor(gradientMag, goscale0, goshift0, gomin0, gomax0);\n        }\n        opacityG1.xyz *= gradOpacityFactor;\n        opacityG2.xyz *= gradOpacityFactor;\n    #endif\n\n        vec4 opacityG = vec4(opacityG1 - opacityG2, 1.0f);\n        // divide by spacing\n        opacityG.xyz /= vSpacing;\n        opacityG.w = length(opacityG.xyz);\n        // rotate to View Coords\n        rotateToViewCoord(opacityG.xyz);\n        if (length(opacityG.xyz) > 0.0) {\n          return vec4(normalize(opacityG.xyz),opacityG.w);\n        } else {\n          return vec4(0.0);\n        }\n      }\n\n      vec4 computeNormalForDensity(vec3 pos, vec3 tstep, out vec3 scalarInterp[2])\n      {\n        vec3 xvec = vec3(tstep.x, 0.0, 0.0);\n        vec3 yvec = vec3(0.0, tstep.y, 0.0);\n        vec3 zvec = vec3(0.0, 0.0, tstep.z);\n        vec3 texPosPVec[3];\n        texPosPVec[0] = pos + xvec;\n        texPosPVec[1] = pos + yvec;\n        texPosPVec[2] = pos + zvec;\n        vec3 texPosNVec[3];\n        texPosNVec[0] = pos - xvec;\n        texPosNVec[1] = pos - yvec;\n        texPosNVec[2] = pos - zvec;\n        vec3 g1, g2;\n\n        scalarInterp[0].x = getTextureValue(texPosPVec[0]).a;\n        scalarInterp[0].y = getTextureValue(texPosPVec[1]).a;\n        scalarInterp[0].z = getTextureValue(texPosPVec[2]).a;\n        scalarInterp[1].x = getTextureValue(texPosNVec[0]).a;\n        scalarInterp[1].y = getTextureValue(texPosNVec[1]).a;\n        scalarInterp[1].z = getTextureValue(texPosNVec[2]).a;\n\n        #ifdef vtkClippingPlanesOn\n          adjustClippedVoxelValues(pos, texPosPVec, scalarInterp[0]);\n          adjustClippedVoxelValues(pos, texPosNVec, scalarInterp[1]);\n        #endif\n        vec4 result;\n        result.x = scalarInterp[0].x - scalarInterp[1].x;\n        result.y = scalarInterp[0].y - scalarInterp[1].y;\n        result.z = scalarInterp[0].z - scalarInterp[1].z;\n        // divide by spacing\n        result.xyz /= vSpacing;\n        result.w = length(result.xyz);\n        // rotate to View Coords\n        rotateToViewCoord(result.xyz);\n        if (length(result.xyz) > 0.0) {\n          return vec4(normalize(result.xyz),result.w);\n        } else {\n          return vec4(0.0);\n        }\n      }\n  #endif\n\n  vec4 computeNormal(vec3 pos, vec3 tstep)\n  {\n    vec3 xvec = vec3(tstep.x, 0.0, 0.0);\n    vec3 yvec = vec3(0.0, tstep.y, 0.0);\n    vec3 zvec = vec3(0.0, 0.0, tstep.z);\n    vec3 texPosPVec[3];\n    texPosPVec[0] = pos + xvec;\n    texPosPVec[1] = pos + yvec;\n    texPosPVec[2] = pos + zvec;\n    vec3 texPosNVec[3];\n    texPosNVec[0] = pos - xvec;\n    texPosNVec[1] = pos - yvec;\n    texPosNVec[2] = pos - zvec;\n    vec3 g1, g2;\n    g1.x = getTextureValue(texPosPVec[0]).a;\n    g1.y = getTextureValue(texPosPVec[1]).a;\n    g1.z = getTextureValue(texPosPVec[2]).a;\n    g2.x = getTextureValue(texPosNVec[0]).a;\n    g2.y = getTextureValue(texPosNVec[1]).a;\n    g2.z = getTextureValue(texPosNVec[2]).a;\n    #ifdef vtkClippingPlanesOn\n      adjustClippedVoxelValues(pos, texPosPVec, g1);\n      adjustClippedVoxelValues(pos, texPosNVec, g2);\n    #endif\n    vec4 result;\n    result = vec4(g1 - g2, -1.0);\n    // divide by spacing\n    result.xyz /= vSpacing;\n    result.w = length(result.xyz);\n    if (result.w > 0.0){\n      // rotate to View Coords\n      rotateToViewCoord(result.xyz);\n      return vec4(normalize(result.xyz),result.w);\n    } else {\n      return vec4(0.0);\n    }\n  }\n#endif\n\n#ifdef vtkImageLabelOutlineOn\nvec3 fragCoordToIndexSpace(vec4 fragCoord) {\n  vec4 pcPos = vec4(\n    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,\n    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,\n    (fragCoord.z - 0.5) * 2.0,\n    1.0);\n\n  vec4 worldCoord = PCWCMatrix * pcPos;\n  vec4 vertex = (worldCoord/worldCoord.w);\n\n  vec3 index = (vWCtoIDX * vertex).xyz;\n\n  // half voxel fix for labelmapOutline\n  return (index + vec3(0.5)) / vec3(volumeDimensions);\n}\n#endif\n\n//=======================================================================\n// compute the normals and gradient magnitudes for a position\n// for independent components\nmat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)\n{\n  mat4 result;\n  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;\n  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;\n  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;\n\n  // divide by spacing\n  distX /= vSpacing.x;\n  distY /= vSpacing.y;\n  distZ /= vSpacing.z;\n\n  mat3 rot;\n  rot[0] = vPlaneNormal0;\n  rot[1] = vPlaneNormal2;\n  rot[2] = vPlaneNormal4;\n\n#if !defined(vtkComponent0Proportional)\n  result[0].xyz = vec3(distX.r, distY.r, distZ.r);\n  result[0].a = length(result[0].xyz);\n  result[0].xyz *= rot;\n  if (result[0].w > 0.0)\n  {\n    result[0].xyz /= result[0].w;\n  }\n#endif\n\n// optionally compute the 2nd component\n#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)\n  result[1].xyz = vec3(distX.g, distY.g, distZ.g);\n  result[1].a = length(result[1].xyz);\n  result[1].xyz *= rot;\n  if (result[1].w > 0.0)\n  {\n    result[1].xyz /= result[1].w;\n  }\n#endif\n\n// optionally compute the 3rd component\n#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)\n  result[2].xyz = vec3(distX.b, distY.b, distZ.b);\n  result[2].a = length(result[2].xyz);\n  result[2].xyz *= rot;\n  if (result[2].w > 0.0)\n  {\n    result[2].xyz /= result[2].w;\n  }\n#endif\n\n// optionally compute the 4th component\n#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)\n  result[3].xyz = vec3(distX.a, distY.a, distZ.a);\n  result[3].a = length(result[3].xyz);\n  result[3].xyz *= rot;\n  if (result[3].w > 0.0)\n  {\n    result[3].xyz /= result[3].w;\n  }\n#endif\n\n  return result;\n}\n\n//=======================================================================\n// global shadow - secondary ray\n#if defined(VolumeShadowOn) || defined(localAmbientOcclusionOn)\nfloat random()\n{\n  float rand = fract(sin(dot(gl_FragCoord.xy,vec2(12.9898,78.233)))*43758.5453123);\n  float jitter=texture2D(jtexture,gl_FragCoord.xy/32.).r;\n  uint pcg_state = floatBitsToUint(jitter);\n  uint state = pcg_state;\n  pcg_state = pcg_state * uint(747796405) + uint(2891336453);\n  uint word = ((state >> ((state >> uint(28)) + uint(4))) ^ state) * uint(277803737);\n  return (float((((word >> uint(22)) ^ word) >> 1 ))/float(2147483647) + rand)/2.0;\n}\n#endif\n\n#ifdef VolumeShadowOn\n// henyey greenstein phase function\nfloat phase_function(float cos_angle)\n{\n  // divide by 2.0 instead of 4pi to increase intensity\n  return ((1.0-anisotropy2)/pow(1.0+anisotropy2-2.0*anisotropy*cos_angle, 1.5))/2.0;\n}\n\n// Computes the intersection between a ray and a box\nstruct Hit\n{\n  float tmin;\n  float tmax;\n};\n\nstruct Ray\n{\n  vec3 origin;\n  vec3 dir;\n  vec3 invDir;\n};\n\nbool BBoxIntersect(vec3 boundMin, vec3 boundMax, const Ray r, out Hit hit)\n{\n  vec3 tbot = r.invDir * (boundMin - r.origin);\n  vec3 ttop = r.invDir * (boundMax - r.origin);\n  vec3 tmin = min(ttop, tbot);\n  vec3 tmax = max(ttop, tbot);\n  vec2 t = max(tmin.xx, tmin.yz);\n  float t0 = max(t.x, t.y);\n  t = min(tmax.xx, tmax.yz);\n  float t1 = min(t.x, t.y);\n  hit.tmin = t0;\n  hit.tmax = t1;\n  return t1 > max(t0,0.0);\n}\n\n// As BBoxIntersect requires the inverse of the ray coords,\n// this function is used to avoid numerical issues\nvoid safe_0_vector(inout Ray ray)\n{\n  if(abs(ray.dir.x) < EPSILON) ray.dir.x = sign(ray.dir.x) * EPSILON;\n  if(abs(ray.dir.y) < EPSILON) ray.dir.y = sign(ray.dir.y) * EPSILON;\n  if(abs(ray.dir.z) < EPSILON) ray.dir.z = sign(ray.dir.z) * EPSILON;\n}\n\nfloat volume_shadow(vec3 posIS, vec3 lightDirNormIS)\n{\n  float shadow = 1.0;\n  float opacity = 0.0;\n\n  // modify sample distance with a random number between 1.5 and 3.0\n  float sampleDistanceISVS_jitter = sampleDistanceISVS * mix(1.5, 3.0, random());\n  float opacityPrev = texture2D(otexture, vec2(getTextureValue(posIS).r * oscale0 + oshift0, 0.5)).r;\n\n  // in case the first sample near surface has a very tiled light ray, we need to offset start position\n  posIS += sampleDistanceISVS_jitter * lightDirNormIS;\n\n  // compute the start and end points for the ray\n  Ray ray;\n  Hit hit;\n  ray.origin = posIS;\n  ray.dir = lightDirNormIS;\n  safe_0_vector(ray);\n  ray.invDir = 1.0/ray.dir;\n\n  if(!BBoxIntersect(vec3(0.0),vec3(1.0), ray, hit))\n  {\n    return 1.0;\n  }\n  float maxdist = hit.tmax;\n\n  // interpolate shadow ray length between: 1 unit of sample distance in IS to SQRT3, based on globalIlluminationReach\n  float maxgi = mix(sampleDistanceISVS_jitter,SQRT3,giReach);\n  maxdist = min(maxdist,maxgi);\n  if(maxdist < EPSILON) {\n    return 1.0;\n  }\n\n  // support gradient opacity\n  #ifdef vtkGradientOpacityOn\n    vec4 normal;\n  #endif\n\n  float current_dist = 0.0;\n  float current_step = length(sampleDistanceISVS_jitter * lightDirNormIS);\n  float clamped_step = 0.0;\n\n  vec4 scalar = vec4(0.0);\n  while(current_dist < maxdist)\n  {\n    scalar = getTextureValue(posIS);\n    opacity = texture2D(otexture, vec2(scalar.r * oscale0 + oshift0, 0.5)).r;\n    #ifdef vtkGradientOpacityOn\n      normal = computeNormal(posIS, vec3(1.0/vec3(volumeDimensions)));\n      opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);\n    #endif\n    shadow *= 1.0 - opacity;\n\n    // optimization: early termination\n    if (shadow < EPSILON){\n      return 0.0;\n    }\n\n    clamped_step = min(maxdist - current_dist, current_step);\n    posIS += clamped_step * lightDirNormIS;\n    current_dist += current_step;\n  }\n\n  return shadow;\n}\n\nvec3 applyShadowRay(vec3 tColor, vec3 posIS, vec3 viewDirectionVC)\n{\n  vec3 vertLight = vec3(0.0);\n  vec3 secondary_contrib = vec3(0.0);\n  // here we assume only positional light, no effect of cones\n  for (int i = 0; i < lightNum; i++)\n  {\n    #if(vtkLightComplexity==3)\n      if (lightPositional[i] == 1){\n        vertLight = lightPositionVC[i] - IStoVC(posIS);\n      }else{\n        vertLight = - lightDirectionVC[i];\n      }\n    #else\n      vertLight = - lightDirectionVC[i];\n    #endif\n    // here we assume achromatic light, only intensity\n    float dDotL = dot(viewDirectionVC, normalize(vertLight));\n    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity\n    float phase_attenuation = 0.5;\n    if (abs(anisotropy) > EPSILON){\n      phase_attenuation = phase_function(dDotL);\n    }\n    float vol_shadow = volume_shadow(posIS, normalize(rotateToIDX(vertLight)));\n    secondary_contrib += tColor * vDiffuse * lightColor[i] * vol_shadow * phase_attenuation;\n    secondary_contrib += tColor * vAmbient;\n  }\n  return secondary_contrib;\n}\n#endif\n\n//=======================================================================\n// local ambient occlusion\n#ifdef localAmbientOcclusionOn\nvec3 sample_direction_uniform(int i)\n{\n  float rand = random() * 0.5;\n  float theta = PI2 * (kernelSample[i][0] + rand);\n  float phi = acos(2.0 * (kernelSample[i][1] + rand) -1.0) / 2.5;\n  return normalize(vec3(cos(theta)*sin(phi), sin(theta)*sin(phi), cos(phi)));\n}\n\n// return a matrix that transform startDir into z axis; startDir should be normalized\nmat3 zBaseRotationalMatrix(vec3 startDir){\n  vec3 axis = cross(startDir, vec3(0.0,0.0,1.0));\n  float cosA = startDir.z;\n  float k = 1.0 / (1.0 + cosA);\n  mat3 matrix = mat3((axis.x * axis.x * k) + cosA, (axis.y * axis.x * k) - axis.z, (axis.z * axis.x * k) + axis.y,\n              (axis.x * axis.y * k) + axis.z, (axis.y * axis.y * k) + cosA, (axis.z * axis.y * k) - axis.x,\n              (axis.x * axis.z * k) - axis.y, (axis.y * axis.z * k) + axis.x, (axis.z * axis.z * k) + cosA);\n  return matrix;\n}\n\nfloat computeLAO(vec3 posIS, float op, vec3 lightDir, vec4 normal){\n  // apply LAO only at selected locations, otherwise return full brightness\n  if (normal.w > 0.0 && op > 0.05){\n    float total_transmittance = 0.0;\n    mat3 inverseRotateBasis = inverse(zBaseRotationalMatrix(normalize(-normal.xyz)));\n    vec3 currPos, randomDirStep;\n    float weight, transmittance, opacity;\n    for (int i = 0; i < kernelSize; i++)\n    {\n      randomDirStep = inverseRotateBasis * sample_direction_uniform(i) * sampleDistanceIS;\n      weight = 1.0 - dot(normalize(lightDir), normalize(randomDirStep));\n      currPos = posIS;\n      transmittance = 1.0;\n      for (int j = 0; j < kernelRadius ; j++){\n        currPos += randomDirStep;\n        // check if it's at clipping plane, if so return full brightness\n        if (all(greaterThan(currPos, vec3(EPSILON))) && all(lessThan(currPos,vec3(1.0-EPSILON)))){\n          opacity = texture2D(otexture, vec2(getTextureValue(currPos).r * oscale0 + oshift0, 0.5)).r;\n          #ifdef vtkGradientOpacityOn\n             opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);\n          #endif\n          transmittance *= 1.0 - opacity;\n        }\n        else{\n          break;\n        }\n      }\n      total_transmittance += transmittance / float(kernelRadius) * weight;\n\n      // early termination if fully translucent\n      if (total_transmittance > 1.0 - EPSILON){\n        return 1.0;\n      }\n    }\n    // average transmittance and reduce variance\n    return clamp(total_transmittance / float(kernelSize), 0.3, 1.0);\n  } else {\n    return 1.0;\n  }\n}\n#endif\n\n//=======================================================================\n// surface light contribution\n#if vtkLightComplexity > 0\n  void applyLighting(inout vec3 tColor, vec4 normal)\n  {\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    float df, sf = 0.0;\n    for (int i = 0; i < lightNum; i++){\n        df = abs(dot(normal.rgb, -lightDirectionVC[i]));\n        diffuse += df * lightColor[i];\n        sf = pow( abs(dot(lightHalfAngleVC[i],normal.rgb)), vSpecularPower);\n        specular += sf * lightColor[i];\n    }\n    tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;\n  }\n  #ifdef SurfaceShadowOn\n  #if vtkLightComplexity < 3\n    vec3 applyLightingDirectional(vec3 posIS, vec4 tColor, vec4 normal)\n    {\n      // everything in VC\n      vec3 diffuse = vec3(0.0);\n      vec3 specular = vec3(0.0);\n      #ifdef localAmbientOcclusionOn\n        vec3 ambient = vec3(0.0);\n      #endif\n      vec3 vertLightDirection;\n      for (int i = 0; i < lightNum; i++){\n        float ndotL,vdotR;\n        vertLightDirection = lightDirectionVC[i];\n        ndotL = dot(normal.xyz, vertLightDirection);\n        if (ndotL < 0.0 && twoSidedLighting)\n        {\n          ndotL = -ndotL;\n        }\n        if (ndotL > 0.0)\n        {\n          diffuse += ndotL * lightColor[i];\n          //specular\n          vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));\n          if (vdotR > 0.0)\n          {\n            specular += pow(vdotR, vSpecularPower) * lightColor[i];\n          }\n        }\n        #ifdef localAmbientOcclusionOn\n            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);\n        #endif\n      }\n      #ifdef localAmbientOcclusionOn\n        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;\n      #else\n        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;\n      #endif\n    }\n  #else\n    vec3 applyLightingPositional(vec3 posIS, vec4 tColor, vec4 normal, vec3 posVC)\n    {\n      // everything in VC\n      vec3 diffuse = vec3(0.0);\n      vec3 specular = vec3(0.0);\n      #ifdef localAmbientOcclusionOn\n        vec3 ambient = vec3(0.0);\n      #endif\n      vec3 vertLightDirection;\n      for (int i = 0; i < lightNum; i++){\n        float distance,attenuation,ndotL,vdotR;\n        vec3 lightDir;\n        if (lightPositional[i] == 1){\n          lightDir = lightDirectionVC[i];\n          vertLightDirection = posVC - lightPositionVC[i];\n          distance = length(vertLightDirection);\n          vertLightDirection = normalize(vertLightDirection);\n          attenuation = 1.0 / (lightAttenuation[i].x\n                              + lightAttenuation[i].y * distance\n                              + lightAttenuation[i].z * distance * distance);\n          // per OpenGL standard cone angle is 90 or less for a spot light\n          if (lightConeAngle[i] <= 90.0){\n            float coneDot = dot(vertLightDirection, lightDir);\n            if (coneDot >= cos(radians(lightConeAngle[i]))){  // if inside cone\n              attenuation = attenuation * pow(coneDot, lightExponent[i]);\n            }\n            else {\n              attenuation = 0.0;\n            }\n          }\n          ndotL = dot(normal.xyz, vertLightDirection);\n          if (ndotL < 0.0 && twoSidedLighting)\n          {\n            ndotL = -ndotL;\n          }\n          if (ndotL > 0.0)\n          {\n            diffuse += ndotL * attenuation * lightColor[i];\n            //specular\n            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));\n            if (vdotR > 0.0)\n            {\n              specular += pow(vdotR, vSpecularPower) * attenuation * lightColor[i];\n            }\n          }\n          #ifdef localAmbientOcclusionOn\n            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);\n          #endif\n        } else {\n          vertLightDirection = lightDirectionVC[i];\n          ndotL = dot(normal.xyz, vertLightDirection);\n          if (ndotL < 0.0 && twoSidedLighting)\n          {\n            ndotL = -ndotL;\n          }\n          if (ndotL > 0.0)\n          {\n            diffuse += ndotL * lightColor[i];\n            //specular\n            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));\n            if (vdotR > 0.0)\n            {\n              specular += pow(vdotR, vSpecularPower) * lightColor[i];\n            }\n          }\n          #ifdef localAmbientOcclusionOn\n            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);\n          #endif\n        }\n      }\n      #ifdef localAmbientOcclusionOn\n        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;\n      #else\n        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;\n      #endif\n    }\n  #endif\n  #endif\n#endif\n\n//=======================================================================\n// Given a texture value compute the color and opacity\n//\nvec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)\n{\n#ifdef vtkImageLabelOutlineOn\n  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space\n  vec4 centerValue = getTextureValue(centerPosIS);\n  bool pixelOnBorder = false;\n  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));\n\n  // Get alpha of segment from opacity function.\n  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;\n\n  // Only perform outline check on fragments rendering voxels that aren't invisible.\n  // Saves a bunch of needless checks on the background.\n  // TODO define epsilon when building shader?\n  if (float(tColor.a) > 0.01) {\n    for (int i = -outlineThickness; i <= outlineThickness; i++) {\n      for (int j = -outlineThickness; j <= outlineThickness; j++) {\n        if (i == 0 || j == 0) {\n          continue;\n        }\n\n        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),\n          gl_FragCoord.y + float(j),\n          gl_FragCoord.z, gl_FragCoord.w);\n\n        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n        vec4 value = getTextureValue(neighborPosIS);\n\n        // If any of my neighbours are not the same value as I\n        // am, this means I am on the border of the segment.\n        // We can break the loops\n        if (any(notEqual(value, centerValue))) {\n          pixelOnBorder = true;\n          break;\n        }\n      }\n\n      if (pixelOnBorder == true) {\n        break;\n      }\n    }\n\n    // If I am on the border, I am displayed at full opacity\n    if (pixelOnBorder == true) {\n      tColor.a = outlineOpacity;\n    }\n  }\n\n#else\n  // compute the normal and gradient magnitude if needed\n  // We compute it as a vec4 if possible otherwise a mat4\n  //\n  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);\n\n  // compute the normal vectors as needed\n  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)\n    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n      mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);\n      #if !defined(vtkComponent0Proportional)\n        vec4 normal0 = normalMat[0];\n      #endif\n      #if !defined(vtkComponent1Proportional)\n        vec4 normal1 = normalMat[1];\n      #endif\n      #if vtkNumComponents > 2\n        #if !defined(vtkComponent2Proportional)\n          vec4 normal2 = normalMat[2];\n        #endif\n        #if vtkNumComponents > 3\n          #if !defined(vtkComponent3Proportional)\n            vec4 normal3 = normalMat[3];\n          #endif\n        #endif\n      #endif\n    #else\n      vec4 normalLight;\n      #ifdef vtkComputeNormalFromOpacity\n        vec3 scalarInterp[2];\n        vec4 normal0 = computeNormalForDensity(posIS, tstep, scalarInterp);\n        if (length(normal0)>0.0){\n          #ifdef vtkGradientOpacityOn\n            normalLight = computeDensityNormal(normal0.w, scalarInterp);\n          #else\n            normalLight = computeDensityNormal(scalarInterp);\n          #endif\n          if (length(normalLight) == 0.0){\n            normalLight = normal0;\n          }\n        }\n      #else\n        vec4 normal0 = computeNormal(posIS, tstep);\n        normalLight = normal0;\n      #endif\n    #endif\n  #endif\n\n  // compute gradient opacity factors as needed\n  #if defined(vtkGradientOpacityOn)\n    #if !defined(vtkComponent0Proportional)\n      goFactor.x =\n        computeGradientOpacityFactor(normal0.a, goscale0, goshift0, gomin0, gomax0);\n    #endif\n    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n      #if !defined(vtkComponent1Proportional)\n        goFactor.y =\n          computeGradientOpacityFactor(normal1.a, goscale1, goshift1, gomin1, gomax1);\n      #endif\n      #if vtkNumComponents > 2\n        #if !defined(vtkComponent2Proportional)\n          goFactor.z =\n            computeGradientOpacityFactor(normal2.a, goscale2, goshift2, gomin2, gomax2);\n        #endif\n        #if vtkNumComponents > 3\n          #if !defined(vtkComponent3Proportional)\n            goFactor.w =\n              computeGradientOpacityFactor(normal3.a, goscale3, goshift3, gomin3, gomax3);\n          #endif\n        #endif\n      #endif\n    #endif\n  #endif\n\n  // single component is always independent\n  #if vtkNumComponents == 1\n    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n    if (tColor.a < EPSILON){\n      return vec4(0.0);\n    }\n  #endif\n\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));\n    #if !defined(vtkComponent0Proportional)\n      tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n    #else\n      float pwfValue = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n      tColor *= pwfValue;\n      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix0));\n    #endif\n\n    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;\n    #if !defined(vtkComponent1Proportional)\n      tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n    #else\n      float pwfValue = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n      tColor1 *= pwfValue;\n      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix1));\n    #endif\n\n    #if vtkNumComponents >= 3\n      vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;\n      #if !defined(vtkComponent2Proportional)\n        tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n      #else\n        float pwfValue = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n        tColor2 *= pwfValue;\n        tColor.a *= mix(pwfValue, 1.0, (1.0 - mix2));\n      #endif\n\n      #if vtkNumComponents >= 4\n        vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;\n        #if !defined(vtkComponent3Proportional)\n          tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n        #else\n          float pwfValue = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n          tColor3 *= pwfValue;\n          tColor.a *= mix(pwfValue, 1.0, (1.0 - mix3));\n        #endif\n      #endif\n    #endif\n  #else // then not independent\n\n  #if vtkNumComponents == 2\n    float lum = tValue.r * cscale0 + cshift0;\n    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;\n    vec4 tColor = vec4(lum, lum, lum, alpha);\n  #endif\n  #if vtkNumComponents == 3\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;\n  #endif\n  #if vtkNumComponents == 4\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;\n  #endif\n  #endif // dependent\n\n  // apply lighting if requested as appropriate\n  #if vtkLightComplexity > 0\n    #if !defined(vtkComponent0Proportional)\n      #if vtkNumComponents == 1\n        #ifdef SurfaceShadowOn\n            #if vtkLightComplexity < 3\n                vec3 tColorS = applyLightingDirectional(posIS, tColor, normalLight);\n            #else\n                vec3 tColorS = applyLightingPositional(posIS, tColor, normalLight, IStoVC(posIS));\n            #endif\n        #endif\n\n        #ifdef VolumeShadowOn\n          vec3 tColorVS = applyShadowRay(tColor.rgb, posIS, rayDirVC);\n          #ifdef SurfaceShadowOn\n            float vol_coef = volumetricScatteringBlending * (1.0 - tColor.a / 2.0) * (1.0 - atan(normalLight.w) * INV4PI);\n            tColor.rgb = (1.0-vol_coef) * tColorS + vol_coef * tColorVS;\n          #else\n            tColor.rgb = tColorVS;\n          #endif\n        #else\n            tColor.rgb = tColorS;\n        #endif\n\n      #else\n        applyLighting(tColor.rgb, normal0);\n      #endif\n    #endif\n\n    #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n      #if !defined(vtkComponent1Proportional)\n        applyLighting(tColor1, normal1);\n      #endif\n    #if vtkNumComponents >= 3\n      #if !defined(vtkComponent2Proportional)\n        applyLighting(tColor2, normal2);\n      #endif\n    #if vtkNumComponents >= 4\n      #if !defined(vtkComponent3Proportional)\n        applyLighting(tColor3, normal3);\n      #endif\n    #endif\n    #endif\n    #endif\n  #endif\n\n// perform final independent blend as needed\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  tColor.rgb += tColor1;\n#if vtkNumComponents >= 3\n  tColor.rgb += tColor2;\n#if vtkNumComponents >= 4\n  tColor.rgb += tColor3;\n#endif\n#endif\n#endif\n\n#endif\nreturn tColor;\n}\n\nbool valueWithinScalarRange(vec4 val, vec4 min, vec4 max) {\n  bool withinRange = false;\n  #if vtkNumComponents == 1\n    if (val.r >= min.r && val.r <= max.r) {\n      withinRange = true;\n    }\n  #endif\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents == 2\n     if (val.r >= min.r && val.r <= max.r &&\n        val.g >= min.g && val.g <= max.g) {\n      withinRange = true;\n    }\n  #endif\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 3\n    if (all(greaterThanEqual(val, ipScalarRangeMin)) &&\n        all(lessThanEqual(val, ipScalarRangeMax))) {\n      withinRange = true;\n    }\n  #endif\n  return withinRange;\n}\n\n//=======================================================================\n// Apply the specified blend mode operation along the ray's path.\n//\nvoid applyBlend(vec3 posIS, vec3 endIS, vec3 tdims)\n{\n  vec3 tstep = 1.0/tdims;\n\n  // start slightly inside and apply some jitter\n  vec3 delta = endIS - posIS;\n  vec3 stepIS = normalize(delta)*sampleDistanceIS;\n  float raySteps = length(delta)/sampleDistanceIS;\n\n  // avoid 0.0 jitter\n  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n  float stepsTraveled = jitter;\n\n  // local vars for the loop\n  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 tValue;\n  vec4 tColor;\n\n  // if we have less than one step then pick the middle point\n  // as our value\n  // if (raySteps <= 1.0)\n  // {\n  //   posIS = (posIS + endIS)*0.5;\n  // }\n\n  // Perform initial step at the volume boundary\n  // compute the scalar\n  tValue = getTextureValue(posIS);\n\n  #if vtkBlendMode == 0 // COMPOSITE_BLEND\n    // now map through opacity and color\n    tColor = getColorForValue(tValue, posIS, tstep);\n\n    // handle very thin volumes\n    if (raySteps <= 1.0)\n    {\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);\n      gl_FragData[0] = tColor;\n      return;\n    }\n\n    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);\n    color = vec4(tColor.rgb*tColor.a, tColor.a);\n    posIS += (jitter*stepIS);\n\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n\n      float mix = (1.0 - color.a);\n\n      // this line should not be needed but nvidia seems to not handle\n      // the break correctly on windows/chrome 58 angle\n      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));\n\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n      stepsTraveled++;\n      posIS += stepIS;\n      if (color.a > 0.99) { color.a = 1.0; break; }\n    }\n\n    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)\n    {\n      posIS = endIS;\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);\n\n      float mix = (1.0 - color.a);\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n    }\n\n    gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n  #endif\n  #if vtkBlendMode == 1 || vtkBlendMode == 2\n    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND\n    // Find maximum/minimum intensity along the ray.\n\n    // Define the operation we will use (min or max)\n    #if vtkBlendMode == 1\n    #define OP max\n    #else\n    #define OP min\n    #endif\n\n    // If the clipping range is shorter than the sample distance\n    // we can skip the sampling loop along the ray.\n    if (raySteps <= 1.0)\n    {\n      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);\n      return;\n    }\n\n    vec4 value = tValue;\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // Update the maximum value if necessary\n      value = OP(tValue, value);\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n    tValue = getTextureValue(posIS);\n    value = OP(tValue, value);\n\n    // Now map through opacity and color\n    gl_FragData[0] = getColorForValue(value, posIS, tstep);\n  #endif\n  #if vtkBlendMode == 3 || vtkBlendMode == 4 //AVERAGE_INTENSITY_BLEND || ADDITIVE_BLEND\n    vec4 sum = vec4(0.);\n\n    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {\n      sum += tValue;\n    }\n\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n      return;\n    }\n\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.\n      // Notes:\n      // - We are comparing all values in the texture to see if any of them\n      //   are outside of the scalar range. In the future we might want to allow\n      //   scalar ranges for each component.\n      if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {\n        // Sum the values across each step in the path\n        sum += tValue;\n      }\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n\n    // compute the scalar\n    tValue = getTextureValue(posIS);\n\n    // One can control the scalar range by setting the IPScalarRange to disregard scalar values, not in the range of interest, from the average computation\n    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {\n      sum += tValue;\n\n      stepsTraveled++;\n    }\n\n    #if vtkBlendMode == 3 // Average\n      sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);\n    #endif\n\n    gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n  #endif\n  #if vtkBlendMode == 5 // RADON\n    float normalizedRayIntensity = 1.0;\n\n    // handle very thin volumes\n    if (raySteps <= 1.0)\n    {\n      tValue = getTextureValue(posIS);\n      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n      gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity, 0.5));\n      return;\n    }\n\n    posIS += (jitter*stepIS);\n\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar value\n      tValue = getTextureValue(posIS);\n\n      // Convert scalar value to normalizedRayIntensity coefficient and accumulate normalizedRayIntensity\n      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n\n      posIS += stepIS;\n      stepsTraveled++;\n    }\n\n    // map normalizedRayIntensity to color\n    gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity , 0.5));\n\n  #endif\n}\n\n//=======================================================================\n// Compute a new start and end point for a given ray based\n// on the provided bounded clipping plane (aka a rectangle)\nvoid getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (abs(result) < 1e-6)\n  {\n    return;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  tbounds = mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\n//=======================================================================\n// given a\n// - ray direction (rayDir)\n// - starting point (vertexVCVSOutput)\n// - bounding planes of the volume\n// - optionally depth buffer values\n// - far clipping plane\n// compute the start/end distances of the ray we need to cast\nvec2 computeRayDistances(vec3 rayDir, vec3 tdims)\n{\n  vec2 dists = vec2(100.0*camFar, -1.0);\n\n  vec3 vSize = vSpacing*tdims;\n\n  // all this is in View Coordinates\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  //VTK::ClipPlane::Impl\n\n  // do not go behind front clipping plane\n  dists.x = max(0.0,dists.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  dists.y = min(farDist,dists.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  return dists;\n}\n\n//=======================================================================\n// Compute the index space starting position (pos) and end\n// position\n//\nvoid computeIndexSpaceValues(out vec3 pos, out vec3 endPos, vec3 rayDir, vec2 dists)\n{\n  // compute starting and ending values in volume space\n  pos = vertexVCVSOutput + dists.x*rayDir;\n  pos = pos - vOriginVC;\n  // convert to volume basis and origin\n  pos = vec3(\n    dot(pos, vPlaneNormal0),\n    dot(pos, vPlaneNormal2),\n    dot(pos, vPlaneNormal4));\n\n  endPos = vertexVCVSOutput + dists.y*rayDir;\n  endPos = endPos - vOriginVC;\n  endPos = vec3(\n    dot(endPos, vPlaneNormal0),\n    dot(endPos, vPlaneNormal2),\n    dot(endPos, vPlaneNormal4));\n\n  float delta = length(endPos - pos);\n\n  pos *= vVCToIJK;\n  endPos *= vVCToIJK;\n\n  float delta2 = length(endPos - pos);\n  sampleDistanceIS = sampleDistance*delta2/delta;\n  #ifdef VolumeShadowOn\n    sampleDistanceISVS = sampleDistanceIS * volumeShadowSamplingDistFactor;\n  #endif\n}\n\nvoid main()\n{\n\n  if (cameraParallel == 1)\n  {\n    // Camera is parallel, so the rayDir is just the direction of the camera.\n    rayDirVC = vec3(0.0, 0.0, -1.0);\n  } else {\n    // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n    rayDirVC = normalize(vertexVCVSOutput);\n  }\n\n  vec3 tdims = vec3(volumeDimensions);\n\n  // compute the start and end points for the ray\n  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);\n\n  // do we need to composite? aka does the ray have any length\n  // If not, bail out early\n  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)\n  {\n    discard;\n  }\n\n  // IS = Index Space\n  vec3 posIS;\n  vec3 endIS;\n  computeIndexSpaceValues(posIS, endIS, rayDirVC, rayStartEndDistancesVC);\n\n  // Perform the blending operation along the ray\n  applyBlend(posIS, endIS, tdims);\n}\n",e.Geometry=""},e.replaceShaderValues=function(n,r,a){var o=n.Fragment;a.getProperty().getInterpolationType()===Wc.LINEAR&&(o=Us.substitute(o,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),!0===a.getProperty().getUseLabelOutline()&&(o=Us.substitute(o,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);var i=t.scalarTexture.getComponents();o=Us.substitute(o,"//VTK::NumComponents","#define vtkNumComponents ".concat(i)).result;var s=a.getProperty().getIndependentComponents();if(s){o=Us.substitute(o,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result;for(var c=[],u=0;u<i;u++)a.getProperty().getOpacityMode(u)===Hc.PROPORTIONAL&&c.push("#define vtkComponent".concat(u,"Proportional"));c.length>0&&(o=Us.substitute(o,"//VTK::vtkProportionalComponents",c.join("\n")).result)}var l=t.currentInput.getSpatialExtent(),d=t.currentInput.getSpacing(),p=new Float64Array(3);en(p,(l[1]-l[0])*d[0],(l[3]-l[2])*d[1],(l[5]-l[4])*d[2]);var f=Qt(p)/t.renderable.getSampleDistance();o=Us.substitute(o,"//VTK::MaximumSamplesValue","".concat(Math.ceil(f))).result,o=Us.substitute(o,"//VTK::LightComplexity","#define vtkLightComplexity ".concat(t.lastLightComplexity)).result,t.lastLightComplexity>0&&(t.renderable.getVolumetricScatteringBlending()>0&&(o=Us.substitute(o,"//VTK::VolumeShadowOn","#define VolumeShadowOn").result),t.renderable.getVolumetricScatteringBlending()<1&&(o=Us.substitute(o,"//VTK::SurfaceShadowOn","#define SurfaceShadowOn").result),t.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0&&(o=Us.substitute(o,"//VTK::localAmbientOcclusionOn","#define localAmbientOcclusionOn").result)),t.gopacity=a.getProperty().getUseGradientOpacity(0);for(var g=1;s&&!t.gopacity&&g<i;++g)a.getProperty().getUseGradientOpacity(g)&&(t.gopacity=!0);t.gopacity&&(o=Us.substitute(o,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),t.renderable.getComputeNormalFromOpacity()&&(o=Us.substitute(o,"//VTK::vtkComputeNormalFromOpacity","#define vtkComputeNormalFromOpacity").result),null!==t.zBufferTexture&&(o=Us.substitute(o,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,o=Us.substitute(o,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {","zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}\n","zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),o=Us.substitute(o,"//VTK::BlendMode","".concat(t.renderable.getBlendMode())).result,n.Fragment=o,e.replaceShaderLight(n,r,a),e.replaceShaderClippingPlane(n,r,a)},e.replaceShaderLight=function(e,n,r){if(0!==t.lastLightComplexity){var a=e.Fragment,o=0;n.getLights().forEach((function(e){e.getSwitch()&&(o+=1)})),a=Us.substitute(a,"//VTK::Light::Dec",["uniform int lightNum;","uniform bool twoSidedLighting;","uniform vec3 lightColor[".concat(o,"];"),"uniform vec3 lightDirectionVC[".concat(o,"]; // normalized"),"uniform vec3 lightHalfAngleVC[".concat(o,"];"),"//VTK::Light::Dec"],!1).result,3===t.lastLightComplexity&&(a=Us.substitute(a,"//VTK::Light::Dec",["uniform vec3 lightPositionVC[".concat(o,"];"),"uniform vec3 lightAttenuation[".concat(o,"];"),"uniform float lightConeAngle[".concat(o,"];"),"uniform float lightExponent[".concat(o,"];"),"uniform int lightPositional[".concat(o,"];")],!1).result),t.renderable.getVolumetricScatteringBlending()>0&&(a=Us.substitute(a,"//VTK::VolumeShadow::Dec",["uniform float volumetricScatteringBlending;","uniform float giReach;","uniform float volumeShadowSamplingDistFactor;","uniform float anisotropy;","uniform float anisotropy2;"],!1).result),t.renderable.getLocalAmbientOcclusion()&&r.getProperty().getAmbient()>0&&(a=Us.substitute(a,"//VTK::LAO::Dec",["uniform int kernelRadius;","uniform vec2 kernelSample[".concat(t.renderable.getLAOKernelRadius(),"];"),"uniform int kernelSize;"],!1).result),e.Fragment=a}},e.replaceShaderClippingPlane=function(e,n,r){var a=e.Fragment;if(t.renderable.getClippingPlanes().length>0){var o=t.renderable.getClippingPlanes().length;a=Us.substitute(a,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,a=Us.substitute(a,"//VTK::ClipPlane::Impl",["for(int i = 0; i < ".concat(o,"; i++) {"),"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}e.Fragment=a},e.getNeedToRebuildShaders=function(n,r,a){var o=0;a.getProperty().getShade()&&t.renderable.getBlendMode()===Xc.COMPOSITE_BLEND&&(o=0,t.numberOfLights=0,r.getLights().forEach((function(e){e.getSwitch()>0&&(t.numberOfLights++,0===o&&(o=1)),1===o&&(t.numberOfLights>1||1!==e.getIntensity()||!e.lightTypeIsHeadLight())&&(o=2),o<3&&e.getPositional()&&(o=3)})));var i=!1;t.lastLightComplexity!==o&&(t.lastLightComplexity=o,i=!0);var s=t.scalarTexture.getComponents(),c=a.getProperty().getIndependentComponents(),u=!1,l=[];if(c){for(var d=0;d<s;d++)l.push(a.getProperty().getOpacityMode(d));l.length>0&&(u=!0)}var p=t.currentInput.getSpatialExtent(),f=t.currentInput.getSpacing(),g=new Float64Array(3);en(g,(p[1]-p[0])*f[0],(p[3]-p[2])*f[1],(p[5]-p[4])*f[2]);var m=Qt(g)/t.renderable.getSampleDistance(),v={interpolationType:a.getProperty().getInterpolationType(),useLabelOutline:a.getProperty().getUseLabelOutline(),numComp:s,usesProportionalComponents:u,iComps:c,maxSamples:m,useGradientOpacity:a.getProperty().getUseGradientOpacity(0),blendMode:t.renderable.getBlendMode(),proportionalComponents:l};return t.previousState&&t.previousState.interpolationType===v.interpolationType&&t.previousState.useLabelOutline===v.useLabelOutline&&t.previousState.numComp===v.numComp&&t.previousState.usesProportionalComponents===v.usesProportionalComponents&&t.previousState.iComps===v.iComps&&t.previousState.maxSamples===v.maxSamples&&t.previousState.useGradientOpacity===v.useGradientOpacity&&t.previousState.blendMode===v.blendMode&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(t.previousState.proportionalComponents,v.proportionalComponents)?!!(0===n.getProgram()||i||t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||!!t.lastZBufferTexture!=!!t.zBufferTexture||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime())&&(t.lastZBufferTexture=t.zBufferTexture,!0):(t.previousState=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v),!0)},e.updateShaders=function(n,r,a){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a),e.getClippingPlaneShaderParameters(n,r,a)},e.setMapperShaderParameters=function(e,n,r){var a=e.getProgram();e.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(a.isAttributeUsed("vertexDC")&&(e.getVAO().addAttributeArray(a,e.getCABO(),"vertexDC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Qc("Error setting vertexDC in shader VAO.")),e.getAttributeUpdateTime().modified()),a.setUniformi("texture1",t.scalarTexture.getTextureUnit()),a.setUniformf("sampleDistance",t.renderable.getSampleDistance());for(var o=t.scalarTexture.getVolumeInfo(),i=t.renderable.getIpScalarRange(),s=[],c=[],u=0;u<4;u++)s[u]=i[0]*o.dataComputedScale[u]+o.dataComputedOffset[u],c[u]=i[1]*o.dataComputedScale[u]+o.dataComputedOffset[u],s[u]=(s[u]-o.offset[u])/o.scale[u],c[u]=(c[u]-o.offset[u])/o.scale[u];if(a.setUniform4f("ipScalarRangeMin",s[0],s[1],s[2],s[3]),a.setUniform4f("ipScalarRangeMax",c[0],c[1],c[2],c[3]),null!==t.zBufferTexture){a.setUniformi("zBufferTexture",t.zBufferTexture.getTextureUnit());var l=t._useSmallViewport?[t._smallViewportWidth,t._smallViewportHeight]:t._openGLRenderWindow.getFramebufferSize();a.setUniformf("vpWidth",l[0]),a.setUniformf("vpHeight",l[1])}},e.setCameraShaderParameters=function(n,r,a){var o=t.openGLCamera.getKeyMatrices(r),i=t.openGLVolume.getKeyMatrices();x(t.modelToView,o.wcvc,i.mcwc);var s=n.getProgram(),c=t.openGLCamera.getRenderable(),u=c.getClippingRange();s.setUniformf("camThick",u[1]-u[0]),s.setUniformf("camNear",u[0]),s.setUniformf("camFar",u[1]);for(var l=t.currentInput.getBounds(),d=t.currentInput.getDimensions(),p=new Float64Array(3),f=new Float64Array(3),g=1,m=-1,v=1,y=-1,b=0;b<8;++b)en(p,l[b%2],l[2+Math.floor(b/2)%2],l[4+Math.floor(b/4)]),Cn(p,p,t.modelToView),c.getParallelProjection()||(yn(f,p),dn(p,f,-u[0]/p[2])),Cn(p,p,o.vcpc),g=Math.min(p[0],g),m=Math.max(p[0],m),v=Math.min(p[1],v),y=Math.max(p[1],y);s.setUniformf("dcxmin",g),s.setUniformf("dcxmax",m),s.setUniformf("dcymin",v),s.setUniformf("dcymax",y),s.isUniformUsed("cameraParallel")&&s.setUniformi("cameraParallel",c.getParallelProjection());var T=t.currentInput.getSpatialExtent(),S=t.currentInput.getSpacing(),P=new Float64Array(3);en(P,(T[1]-T[0])*S[0],(T[3]-T[2])*S[1],(T[5]-T[4])*S[2]),s.setUniform3f("vSpacing",S[0],S[1],S[2]),en(p,T[0],T[2],T[4]),t.currentInput.indexToWorldVec3(p,p),Cn(p,p,t.modelToView),s.setUniform3f("vOriginVC",p[0],p[1],p[2]);var w=t.currentInput.getIndexToWorld();x(t.idxToView,t.modelToView,w),le(t.idxNormalMatrix,o.normalMatrix,i.normalMatrix),le(t.idxNormalMatrix,t.idxNormalMatrix,t.currentInput.getDirectionByReference());var C=Qt(P)/t.renderable.getSampleDistance();C>t.renderable.getMaximumSamplesPerRay()&&Zc("The number of steps required ".concat(Math.ceil(C)," is larger than the\n        specified maximum number of steps ").concat(t.renderable.getMaximumSamplesPerRay(),".\n        Please either change the\n        volumeMapper sampleDistance or its maximum number of samples."));var O=new Float64Array(3);if(en(O,1,1,1),an(O,O,P),s.setUniform3f("vVCToIJK",O[0],O[1],O[2]),s.setUniform3i("volumeDimensions",d[0],d[1],d[2]),!t._openGLRenderWindow.getWebgl2()){var A=t.scalarTexture.getVolumeInfo();s.setUniformf("texWidth",t.scalarTexture.getWidth()),s.setUniformf("texHeight",t.scalarTexture.getHeight()),s.setUniformi("xreps",A.xreps),s.setUniformi("xstride",A.xstride),s.setUniformi("ystride",A.ystride)}for(var I=new Float64Array(3),M=new Float64Array(3),R=0;R<6;++R){switch(R){case 1:en(I,-1,0,0),en(M,T[0],T[2],T[4]);break;case 2:en(I,0,1,0),en(M,T[1],T[3],T[5]);break;case 3:en(I,0,-1,0),en(M,T[0],T[2],T[4]);break;case 4:en(I,0,0,1),en(M,T[1],T[3],T[5]);break;case 5:en(I,0,0,-1),en(M,T[0],T[2],T[4]);break;default:en(I,1,0,0),en(M,T[1],T[3],T[5])}On(I,I,t.idxNormalMatrix),Cn(M,M,t.idxToView);var E=-1*bn(M,I);s.setUniform3f("vPlaneNormal".concat(R),I[0],I[1],I[2]),s.setUniformf("vPlaneDistance".concat(R),E)}if(a.getProperty().getUseLabelOutline()){var D=t.currentInput.getWorldToIndex();s.setUniformMatrix("vWCtoIDX",D);var L=r.getActiveCamera(),B=fe(L.getClippingRange(),2),N=B[0],k=B[1],V=L.getDistance();L.setClippingRange(V,V+.1);var _=t.openGLCamera.getKeyMatrices(r);h(t.projectionToWorld,_.wcpc),L.setClippingRange(N,k),t.openGLCamera.getKeyMatrices(r),s.setUniformMatrix("PCWCMatrix",t.projectionToWorld);var F=e.getRenderTargetSize();s.setUniformf("vpWidth",F[0]),s.setUniformf("vpHeight",F[1]);var G=e.getRenderTargetOffset();s.setUniformf("vpOffsetX",G[0]/F[0]),s.setUniformf("vpOffsetY",G[1]/F[1])}if(h(t.projectionToView,o.vcpc),s.setUniformMatrix("PCVCMatrix",t.projectionToView),0!==t.lastLightComplexity){var U=0,j=[],z=[],W=[];if(r.getLights().forEach((function(e){if(e.getSwitch()>0){var t=e.getColor(),n=e.getIntensity();j[0+3*U]=t[0]*n,j[1+3*U]=t[1]*n,j[2+3*U]=t[2]*n;var r=e.getDirection();en(I,r[0],r[1],r[2]),On(I,I,o.normalMatrix),yn(I,I),z[0+3*U]=I[0],z[1+3*U]=I[1],z[2+3*U]=I[2],W[0+3*U]=-.5*I[0],W[1+3*U]=-.5*I[1],W[2+3*U]=-.5*(I[2]-1),U++}})),s.setUniformi("twoSidedLighting",r.getTwoSidedLighting()),s.setUniformi("lightNum",U),s.setUniform3fv("lightColor",j),s.setUniform3fv("lightDirectionVC",z),s.setUniform3fv("lightHalfAngleVC",W),3===t.lastLightComplexity){U=0;var H=[],K=[],X=[],q=[],Y=[];r.getLights().forEach((function(e){if(e.getSwitch()>0){var n=e.getAttenuationValues();K[0+3*U]=n[0],K[1+3*U]=n[1],K[2+3*U]=n[2],q[U]=e.getExponent(),X[U]=e.getConeAngle(),Y[U]=e.getPositional();var r=e.getTransformedPosition();Cn(r,r,t.modelToView),H[0+3*U]=r[0],H[1+3*U]=r[1],H[2+3*U]=r[2],U+=1}})),s.setUniform3fv("lightPositionVC",H),s.setUniform3fv("lightAttenuation",K),s.setUniformfv("lightConeAngle",X),s.setUniformfv("lightExponent",q),s.setUniformiv("lightPositional",Y)}if(t.renderable.getVolumetricScatteringBlending()>0&&(s.setUniformf("giReach",t.renderable.getGlobalIlluminationReach()),s.setUniformf("volumetricScatteringBlending",t.renderable.getVolumetricScatteringBlending()),s.setUniformf("volumeShadowSamplingDistFactor",t.renderable.getVolumeShadowSamplingDistFactor()),s.setUniformf("anisotropy",t.renderable.getAnisotropy()),s.setUniformf("anisotropy2",Math.pow(t.renderable.getAnisotropy(),2))),t.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0){var Z=t.renderable.getLAOKernelSize();s.setUniformi("kernelSize",Z);for(var Q=[],J=0;J<Z;J++)Q[2*J]=.5*Math.random(),Q[2*J+1]=.5*Math.random();s.setUniform2fv("kernelSample",Q),s.setUniformi("kernelRadius",t.renderable.getLAOKernelRadius())}}},e.setPropertyShaderParameters=function(e,n,r){var a=e.getProgram();a.setUniformi("ctexture",t.colorTexture.getTextureUnit()),a.setUniformi("otexture",t.opacityTexture.getTextureUnit()),a.setUniformi("jtexture",t.jitterTexture.getTextureUnit());var o=t.scalarTexture.getVolumeInfo(),i=r.getProperty(),s=t.scalarTexture.getComponents(),c=r.getProperty().getIndependentComponents();if(c&&s>=2)for(var u=0;u<s;u++)a.setUniformf("mix".concat(u),r.getProperty().getComponentWeight(u));for(var l=0;l<s;l++){var d=c?l:0,p=o.scale[l],f=i.getScalarOpacity(d).getRange(),g=p/(f[1]-f[0]),m=(o.offset[l]-f[0])/(f[1]-f[0]);a.setUniformf("oshift".concat(l),m),a.setUniformf("oscale".concat(l),g);var v=i.getRGBTransferFunction(d).getRange(),h=(o.offset[l]-v[0])/(v[1]-v[0]),y=p/(v[1]-v[0]);a.setUniformf("cshift".concat(l),h),a.setUniformf("cscale".concat(l),y)}if(t.gopacity)if(c)for(var b=0;b<s;++b){var x=o.scale[b];if(i.getUseGradientOpacity(b)){var T=i.getGradientOpacityMinimumOpacity(b),S=i.getGradientOpacityMaximumOpacity(b);a.setUniformf("gomin".concat(b),T),a.setUniformf("gomax".concat(b),S);var P=[i.getGradientOpacityMinimumValue(b),i.getGradientOpacityMaximumValue(b)];a.setUniformf("goscale".concat(b),x*(S-T)/(P[1]-P[0])),a.setUniformf("goshift".concat(b),-P[0]*(S-T)/(P[1]-P[0])+T)}else a.setUniformf("gomin".concat(b),1),a.setUniformf("gomax".concat(b),1),a.setUniformf("goscale".concat(b),0),a.setUniformf("goshift".concat(b),1)}else{var w=o.scale[s-1],C=i.getGradientOpacityMinimumOpacity(0),O=i.getGradientOpacityMaximumOpacity(0);a.setUniformf("gomin0",C),a.setUniformf("gomax0",O);var A=[i.getGradientOpacityMinimumValue(0),i.getGradientOpacityMaximumValue(0)];a.setUniformf("goscale0",w*(O-C)/(A[1]-A[0])),a.setUniformf("goshift0",-A[0]*(O-C)/(A[1]-A[0])+C)}if(!0===r.getProperty().getUseLabelOutline()){var I=r.getProperty().getLabelOutlineThickness(),M=r.getProperty().getLabelOutlineOpacity();a.setUniformi("outlineThickness",I),a.setUniformf("outlineOpacity",M)}t.lastLightComplexity>0&&(a.setUniformf("vAmbient",i.getAmbient()),a.setUniformf("vDiffuse",i.getDiffuse()),a.setUniformf("vSpecular",i.getSpecular()),a.setUniformf("vSpecularPower",i.getSpecularPower()))},e.getClippingPlaneShaderParameters=function(e,n,r){if(t.renderable.getClippingPlanes().length>0){for(var a=t.openGLCamera.getKeyMatrices(n),o=[],i=[],s=[],c=t.renderable.getClippingPlanes(),u=c.length,l=0;l<u;++l){var d=c[l].getNormal(),p=c[l].getOrigin();On(d,d,a.normalMatrix),Cn(p,p,a.wcvc);var f=-1*bn(p,d);o.push(d[0]),o.push(d[1]),o.push(d[2]),i.push(f),s.push(p[0]),s.push(p[1]),s.push(p[2])}var g=e.getProgram();g.setUniform3fv("vClipPlaneNormals",o),g.setUniformfv("vClipPlaneDistances",i),g.setUniform3fv("vClipPlaneOrigins",s),g.setUniformi("clip_numPlanes",u)}},e.delete=bt((function(){t._animationRateSubscription&&(t._animationRateSubscription.unsubscribe(),t._animationRateSubscription=null)}),e.delete),e.getRenderTargetSize=function(){if(t._useSmallViewport)return[t._smallViewportWidth,t._smallViewportHeight];var e=t._openGLRenderer.getTiledSizeAndOrigin();return[e.usize,e.vsize]},e.getRenderTargetOffset=function(){var e=t._openGLRenderer.getTiledSizeAndOrigin();return[e.lowerLeftU,e.lowerLeftV]},e.renderPieceStart=function(n,r){var a=n.getVTKWindow().getInteractor();if(t._useSmallViewport=!1,a.isAnimating()&&t._lastScale>1.5&&(t._useSmallViewport=!0),t._animationRateSubscription||(t._animationRateSubscription=a.onAnimationFrameRateUpdate((function(){if(t.renderable.getAutoAdjustSampleDistances()){var e=a.getRecentAnimationFrameRate(),n=a.getDesiredUpdateRate()/e;(n>1.15||n<.85)&&(t._lastScale*=n),t._lastScale>400&&(t._lastScale=400),t._lastScale<1.5&&(t._lastScale=1.5)}else t._lastScale=t.renderable.getImageSampleDistance()*t.renderable.getImageSampleDistance();var r=t._openGLRenderWindow.getFramebufferSize();t._smallViewportWidth=Math.ceil(r[0]/Math.sqrt(t._lastScale)),t._smallViewportHeight=Math.ceil(r[1]/Math.sqrt(t._lastScale))}))),t._useSmallViewport){var o=t._openGLRenderWindow.getFramebufferSize();if(t._smallViewportHeight>o[1]&&(t._smallViewportHeight=o[1]),t._smallViewportWidth>o[0]&&(t._smallViewportWidth=o[0]),t.framebuffer.saveCurrentBindingsAndBuffers(),null===t.framebuffer.getGLFramebuffer())t.framebuffer.create(o[0],o[1]),t.framebuffer.populateFramebuffer();else{var i=t.framebuffer.getSize();i[0]===o[0]&&i[1]===o[1]||(t.framebuffer.create(o[0],o[1]),t.framebuffer.populateFramebuffer())}t.framebuffer.bind();var s=t.context;s.clearColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clear(s.COLOR_BUFFER_BIT),s.viewport(0,0,t._smallViewportWidth,t._smallViewportHeight),t.fvp=[t._smallViewportWidth/o[0],t._smallViewportHeight/o[1]]}t.context.disable(t.context.DEPTH_TEST),e.updateBufferObjects(n,r),r.getProperty().getInterpolationType()===Wc.NEAREST?(t.scalarTexture.setMinificationFilter(Js.NEAREST),t.scalarTexture.setMagnificationFilter(Js.NEAREST)):(t.scalarTexture.setMinificationFilter(Js.LINEAR),t.scalarTexture.setMagnificationFilter(Js.LINEAR)),t.lastBoundBO=null,null!==t.zBufferTexture&&t.zBufferTexture.activate()},e.renderPieceDraw=function(n,r){var a=t.context;t.scalarTexture.activate(),t.opacityTexture.activate(),t.colorTexture.activate(),t.jitterTexture.activate(),e.updateShaders(t.tris,n,r),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.scalarTexture.deactivate(),t.colorTexture.deactivate(),t.opacityTexture.deactivate(),t.jitterTexture.deactivate()},e.renderPieceFinish=function(e,n){if(null!==t.zBufferTexture&&t.zBufferTexture.deactivate(),t._useSmallViewport){if(t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader){t.copyShader=t._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join("\n"),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join("\n"),"");var r=t.copyShader;t.copyVAO=Hs.newInstance(),t.copyVAO.setOpenGLRenderWindow(t._openGLRenderWindow),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(r,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Qc("Error setting vertexDC in copy shader VAO.")}else t._openGLRenderWindow.getShaderCache().readyShaderProgram(t.copyShader);var a=t._openGLRenderWindow.getFramebufferSize();t.context.viewport(0,0,a[0],a[1]);var o=t.framebuffer.getColorTexture();o.activate(),t.copyShader.setUniformi("texture",o.getTextureUnit()),t.copyShader.setUniform2f("tfactor",t.fvp[0],t.fvp[1]);var i=t.context;i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),o.deactivate(),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):Qc("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():sa(t.Bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(r){var a=r.getPointData()&&r.getPointData().getScalars();if(a){var o=n.getProperty();if(!t.jitterTexture.getHandle()){for(var i=new Uint8Array(1024),s=0;s<1024;++s)i[s]=255*Math.random();t.jitterTexture.setMinificationFilter(Js.LINEAR),t.jitterTexture.setMagnificationFilter(Js.LINEAR),t.jitterTexture.create2DFromRaw(32,32,1,Kn.UNSIGNED_CHAR,i)}var c=a.getNumberOfComponents(),u=o.getIndependentComponents()?c:1,l="".concat(o.getMTime());if(t.opacityTextureString!==l){for(var d=1024,p=2048*u,f=new Float32Array(p),g=new Float32Array(d),m=0;m<u;++m){var v=o.getScalarOpacity(m),h=t.renderable.getSampleDistance()/o.getScalarOpacityUnitDistance(m),y=v.getRange();v.getTable(y[0],y[1],d,g,1);for(var b=0;b<d;++b)f[m*d*2+b]=1-Math.pow(1-g[b],h),f[m*d*2+b+d]=f[m*d*2+b]}if(t.opacityTexture.releaseGraphicsResources(t._openGLRenderWindow),t.opacityTexture.setMinificationFilter(Js.LINEAR),t.opacityTexture.setMagnificationFilter(Js.LINEAR),t._openGLRenderWindow.getWebgl2()||t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))t.opacityTexture.create2DFromRaw(d,2*u,1,Kn.FLOAT,f);else{for(var x=new Uint8Array(p),T=0;T<p;++T)x[T]=255*f[T];t.opacityTexture.create2DFromRaw(d,2*u,1,Kn.UNSIGNED_CHAR,x)}t.opacityTextureString=l}if(l="".concat(o.getMTime()),t.colorTextureString!==l){for(var S=1024,P=new Uint8Array(2048*u*3),w=new Float32Array(3072),C=0;C<u;++C){var O=o.getRGBTransferFunction(C),A=O.getRange();O.getTable(A[0],A[1],S,w,1);for(var I=0;I<3072;++I)P[C*S*6+I]=255*w[I],P[C*S*6+I+3072]=255*w[I]}t.colorTexture.releaseGraphicsResources(t._openGLRenderWindow),t.colorTexture.setMinificationFilter(Js.LINEAR),t.colorTexture.setMagnificationFilter(Js.LINEAR),t.colorTexture.create2DFromRaw(S,2*u,3,Kn.UNSIGNED_CHAR,P),t.colorTextureString=l}if(l="".concat(r.getMTime()),t.scalarTextureString!==l){var M=r.getDimensions();t.scalarTexture.setOglNorm16Ext(t.context.getExtension("EXT_texture_norm16")),t.scalarTexture.releaseGraphicsResources(t._openGLRenderWindow),t.scalarTexture.resetFormatAndType(),t.scalarTexture.create3DFilterableFromDataArray(M[0],M[1],M[2],a,t.renderable.getPreferSizeOverAccuracy()),t.scalarTextureString=l}if(!t.tris.getCABO().getElementCount()){for(var R=new Float32Array(12),E=0;E<4;E++)R[3*E]=E%2*2-1,R[3*E+1]=E>1?1:-1,R[3*E+2]=-1;var D=new Uint16Array(8);D[0]=3,D[1]=0,D[2]=1,D[3]=3,D[4]=3,D[5]=0,D[6]=3,D[7]=2;var L=Ba.newInstance({numberOfComponents:3,values:R});L.setName("points");var B=Ba.newInstance({numberOfComponents:1,values:D});t.tris.getCABO().createVBO(B,"polys",Cs.SURFACE,{points:L,cellOffset:0})}t.VBOBuildTime.modified()}}}}var $c={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};var eu=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$c,n),Et.extend(e,t,n),t.VBOBuildTime={},at(t.VBOBuildTime,{mtime:0}),t.tris=Zs.newInstance(),t.scalarTexture=vc.newInstance(),t.opacityTexture=vc.newInstance(),t.colorTexture=vc.newInstance(),t.jitterTexture=vc.newInstance(),t.jitterTexture.setWrapS(Qs.REPEAT),t.jitterTexture.setWrapT(Qs.REPEAT),t.framebuffer=zc.newInstance(),t.idxToView=m(new Float64Array(16)),t.idxNormalMatrix=ce(new Float64Array(9)),t.modelToView=m(new Float64Array(16)),t.projectionToView=m(new Float64Array(16)),t.projectionToWorld=m(new Float64Array(16)),t._lastScale=1,lt(e,t,["context"]),Jc(e,t)}),"vtkOpenGLVolumeMapper");Vt("vtkVolumeMapper",eu);var tu=He;function nu(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(n,r){t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent();var a=t._openGLRenderer.getAspectRatio(),o=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,i=t._openGLRenderer.getTiledSizeAndOrigin(),s=null;if(t.renderable.getUseZValues()){var c=r.getZBufferTexture(),u=Math.floor(c.getWidth()),l=Math.floor(c.getHeight()),d=t._openGLRenderWindow.getContext();c.bind();var p=r.getFramebuffer();p?p.saveCurrentBindingsAndBuffers():tu("No framebuffer to save/restore");var f=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,f),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c.getHandle(),0),d.checkFramebufferStatus(d.FRAMEBUFFER)===d.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(u*l*4),d.viewport(0,0,u,l),d.readPixels(0,0,u,l,d.RGBA,d.UNSIGNED_BYTE,s)),p&&p.restorePreviousBindingsAndBuffers(),d.deleteFramebuffer(f)}t.renderable.invokeCallback(t.renderable.getInputData(),o,a,i,s)},e.queryPass=function(e,n){e&&t.renderable.getUseZValues()&&n.requestDepth()}}var ru={};var au=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ru,n),Et.extend(e,t,n),nu(e,t)}),"vtkOpenGLPixelSpaceCallbackMapper");Vt("vtkPixelSpaceCallbackMapper",au);var ou=Object.create(null);function iu(e,t){ou[e]=t}function su(e,t){t.classHierarchy.push("vtkWebGPUViewNodeFactory")}var cu={};function uu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cu,n),t.overrides=ou,Nt.extend(e,t,n),su(0,t)}var lu={newInstance:Ot.newInstance(uu,"vtkWebGPUViewNodeFactory"),extend:uu};function du(e,t){t.classHierarchy.push("vtkWebGPUCamera"),e.getProjectionMatrix=function(e,n,r,a){if(m(e),t.renderable.getParallelProjection()){var o=t.renderable.getParallelScale(),i=o*n,s=o,c=(a[0]-1)*i,u=(a[0]+1)*i,l=(a[1]-1)*s,d=(a[1]+1)*s,p=1/(u-c),f=1/(d-l);e[0]=2*p,e[5]=2*f,e[10]=1/(r[1]-r[0]),e[12]=(u+c)*p,e[13]=(d+l)*f,e[14]=r[1]/(r[1]-r[0])}else{var g,v,h=Math.tan(Math.PI*t.renderable.getViewAngle()/360);!0===t.renderable.getUseHorizontalViewAngle()?(g=r[0]*h,v=r[0]*h/n):(g=r[0]*h*n,v=r[0]*h);var y=(a[0]-1)*g,b=(a[0]+1)*g,x=(a[1]-1)*v,T=(a[1]+1)*v;e[0]=2*r[0]/(b-y),e[5]=2*r[0]/(T-x),e[12]=(y+b)/(b-y),e[13]=(x+T)/(T-x),e[10]=0,e[14]=r[0],e[11]=-1,e[15]=0}},e.convertToOpenGLDepth=function(e){if(t.renderable.getParallelProjection())return 1-e;var n=t.renderable.getClippingRangeByReference(),r=-n[0]/e;return.5*(r=(n[0]+n[1])/(n[1]-n[0])+2*n[0]*n[1]/(r*(n[1]-n[0])))+.5},e.getKeyMatrices=function(n){var r=n.getRenderable(),a=n.getParent();if(Math.max(a.getMTime(),e.getMTime(),r.getMTime(),t.renderable.getMTime(),n.getStabilizedTime())>t.keyMatrixTime.getMTime()){var o=t.renderable.getViewMatrix();p(t.keyMatrices.normalMatrix,o),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,h(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),v(t.keyMatrices.wcvc,o);var i=n.getStabilizedCenterByReference();T(t.keyMatrices.scvc,t.keyMatrices.wcvc,i);var s=n.getAspectRatio(),c=t.renderable.getClippingRangeByReference();e.getProjectionMatrix(t.keyMatrices.vcpc,s,c,t.renderable.getWindowCenterByReference()),x(t.keyMatrices.scpc,t.keyMatrices.vcpc,t.keyMatrices.scvc),h(t.keyMatrices.pcsc,t.keyMatrices.scpc),t.keyMatrixTime.modified()}return t.keyMatrices}}var pu={keyMatrixTime:null,keyMatrices:null};var fu=Ot.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pu,n),Et.extend(e,t,n),t.keyMatrixTime={},Ot.obj(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},Ot.setGet(e,t,["keyMatrixTime"]),du(e,t)}));function gu(e,t){t.classHierarchy.push("vtkWebGPUBindGroup"),e.setBindables=function(n){if(t.bindables.length===n.length){for(var r=!0,a=0;a<t.bindables.length;a++)t.bindables[a]!==n[a]&&(r=!1);if(r)return}t.bindables=n,e.modified()},e.getBindGroupLayout=function(e){for(var n=[],r=0;r<t.bindables.length;r++){var a=t.bindables[r].getBindGroupLayoutEntry();a.binding=r,n.push(a)}return e.getBindGroupLayout({entries:n})},e.getBindGroup=function(n){for(var r=e.getMTime(),a=0;a<t.bindables.length;a++){var o=t.bindables[a].getBindGroupTime().getMTime();r=o>r?o:r}if(r<t.bindGroupTime.getMTime())return t.bindGroup;for(var i=[],s=0;s<t.bindables.length;s++){var c=t.bindables[s].getBindGroupEntry();c.binding=s,i.push(c)}return t.bindGroup=n.getHandle().createBindGroup({layout:e.getBindGroupLayout(n),entries:i,label:t.label}),t.bindGroupTime.modified(),t.bindGroup},e.getShaderCode=function(e){for(var n=[],r=e.getBindGroupLayoutCount(t.label),a=0;a<t.bindables.length;a++)n.push(t.bindables[a].getShaderCode(a,r));return n.join("\n")}}iu("vtkCamera",fu);var mu={device:null,handle:null,label:null};function vu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mu,n),Ot.obj(e,t),t.bindables=[],t.bindGroupTime={},Ot.obj(t.bindGroupTime,{mtime:0}),Ot.get(e,t,["bindGroupTime","handle","sizeInBytes","usage"]),Ot.setGet(e,t,["label","device","arrayInformation"]),gu(e,t)}var hu={newInstance:Ot.newInstance(vu),extend:vu};function yu(e,t){t.classHierarchy.push("vtkWebGPUShaderModule"),e.initialize=function(e,n){t.device=e,t.handle=t.device.getHandle().createShaderModule({code:n.getCode()})}}var bu={device:null,handle:null};function xu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bu,n),Ot.obj(e,t),Ot.get(e,t,["lastCameraMTime"]),Ot.setGet(e,t,["device","handle"]),yu(e,t)}var Tu={newInstance:Ot.newInstance(xu,"vtkWebGPUShaderModule"),extend:xu};function Su(e,t){t.classHierarchy.push("vtkWebGPUShaderCache"),e.getShaderModule=function(e){for(var n=e.getType(),r=e.getHash(),a=t._shaderModules.keys(),o=0;o<a.length;o++){var i=a[o];if(i.getHash()===r&&i.getType()===n)return t._shaderModules.get(i)}var s=Tu.newInstance();return s.initialize(t.device,e),t._shaderModules.set(e,s),s}}var Pu={shaderModules:null,device:null,window:null};function wu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pu,n),t._shaderModules=new Map,Ot.obj(e,t),Ot.setGet(e,t,["device","window"]),Su(e,t)}var Cu={newInstance:Ot.newInstance(wu,"vtkWebGPUShaderCache"),extend:wu,substitute:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Array.isArray(n)?n.join("\n"):n,o=!1;-1!==e.search(t)&&(o=!0);var i="";r&&(i="g");var s=new RegExp(t,i),c=e.replace(s,a);return{replace:o,result:c}}};function Ou(e,t){t.classHierarchy.push("vtkWebGPUPipeline"),e.getShaderDescriptions=function(){return t.shaderDescriptions},e.initialize=function(e,n){t.pipelineDescription=t.renderEncoder.getPipelineSettings(),t.pipelineDescription.primitive.topology=t.topology,t.pipelineDescription.vertex=t.vertexState,t.pipelineDescription.label=n;for(var r=[],a=0;a<t.layouts.length;a++)r.push(t.layouts[a].layout);t.pipelineLayout=e.getHandle().createPipelineLayout({bindGroupLayouts:r}),t.pipelineDescription.layout=t.pipelineLayout;for(var o=0;o<t.shaderDescriptions.length;o++){var i=t.shaderDescriptions[o],s=e.getShaderModule(i);"vertex"===i.getType()&&(t.pipelineDescription.vertex.module=s.getHandle(),t.pipelineDescription.vertex.entryPoint="main"),"fragment"===i.getType()&&(t.pipelineDescription.fragment.module=s.getHandle(),t.pipelineDescription.fragment.entryPoint="main")}t.handle=e.getHandle().createRenderPipeline(t.pipelineDescription)},e.getShaderDescription=function(e){for(var n=0;n<t.shaderDescriptions.length;n++)if(t.shaderDescriptions[n].getType()===e)return t.shaderDescriptions[n];return null},e.addBindGroupLayout=function(e){e&&t.layouts.push({layout:e.getBindGroupLayout(t.device),label:e.getLabel()})},e.getBindGroupLayout=function(e){return t.layouts[e].layout},e.getBindGroupLayoutCount=function(e){for(var n=0;n<t.layouts.length;n++)if(t.layouts[n].label===e)return n;return 0},e.bindVertexInput=function(e,t){t.bindBuffers(e)}}var Au={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function Iu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Au,n),at(e,t),t.layouts=[],t.shaderDescriptions=[],it(e,t,["handle","pipelineDescription"]),lt(e,t,["device","renderEncoder","topology","vertexState"]),Ou(e,t)}var Mu={newInstance:yt(Iu,"vtkWebGPUPipeline"),extend:Iu};function Ru(e,t){t.classHierarchy.push("vtkWebGPUShaderDescription"),e.hasOutput=function(e){return t.outputNames.includes(e)},e.addOutput=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;t.outputTypes.push(e),t.outputNames.push(n),t.outputInterpolations.push(r)},e.addBuiltinOutput=function(e,n){t.builtinOutputTypes.push(e),t.builtinOutputNames.push(n)},e.addBuiltinInput=function(e,n){t.builtinInputTypes.push(e),t.builtinInputNames.push(n)},e.replaceShaderCode=function(e,n){var r=[],a=[];if(n&&r.push(n.getShaderCode()),e||t.builtinInputNames.length){var o=[];if(o.push("struct ".concat(t.type,"Input\n{")),e)for(var i=e.getOutputNamesByReference(),s=e.getOutputTypesByReference(),c=e.getOutputInterpolationsByReference(),u=0;u<i.length;u++)void 0!==c[u]?o.push("  @location(".concat(u,") @interpolate(").concat(c[u],") ").concat(i[u]," : ").concat(s[u],",")):o.push("  @location(".concat(u,") ").concat(i[u]," : ").concat(s[u],","));for(var l=0;l<t.builtinInputNames.length;l++)o.push("  ".concat(t.builtinInputNames[l]," : ").concat(t.builtinInputTypes[l],","));o.length>1&&(o.push("};"),a=o,r[r.length-1]+=",",r.push("input: ".concat(t.type,"Input")))}if(r.length&&(t.code=Cu.substitute(t.code,"//VTK::IOStructs::Input",r).result),t.outputNames.length+t.builtinOutputNames.length){for(var d=["struct ".concat(t.type,"Output\n{")],p=0;p<t.outputNames.length;p++)void 0!==t.outputInterpolations[p]?d.push("  @location(".concat(p,") @interpolate(").concat(t.outputInterpolations[p],") ").concat(t.outputNames[p]," : ").concat(t.outputTypes[p],",")):d.push("  @location(".concat(p,") ").concat(t.outputNames[p]," : ").concat(t.outputTypes[p],","));for(var f=0;f<t.builtinOutputNames.length;f++)d.push("  ".concat(t.builtinOutputNames[f]," : ").concat(t.builtinOutputTypes[f],","));d.push("};"),a=a.concat(d),t.code=Cu.substitute(t.code,"//VTK::IOStructs::Output",["-> ".concat(t.type,"Output")]).result}t.code=Cu.substitute(t.code,"//VTK::IOStructs::Dec",a).result}}var Eu={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function Du(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Eu,n),t.outputNames=[],t.outputTypes=[],t.outputInterpolations=[],t.builtinOutputNames=[],t.builtinOutputTypes=[],t.builtinInputNames=[],t.builtinInputTypes=[],Ot.obj(e,t),Ot.setGet(e,t,["type","hash","code"]),Ot.getArray(e,t,["outputTypes","outputNames","outputInterpolations"]),Ru(e,t)}var Lu={newInstance:Ot.newInstance(Du,"vtkWebGPUShaderDescription"),extend:Du},Bu={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}},Nu=function(e){return!e||e.length<6?0:e in Bu==1?Bu[e]:(Ke("unknown format ".concat(e)),null)},ku=function(e){if(!e||e.length<5)return 0;var t=1;"x"===e[e.length-2]&&(t=Number(e[e.length-1]));var n=1===t?e.length-1:e.length-3,r=Number(e[n]);return Number.isNaN(r)?(Ke("unknown format ".concat(e)),0):t*(5-r/2)},Vu=function(e){if(!e||e.length<5)return 0;var t;if("f"===e[0])t="Float";else if("s"===e[0])t="Int";else{if("u"!==e[0])return void Ke("unknown format ".concat(e));t="Uint"}var n=e.split("x")[0],r=Number(n[n.length-1]);if(!Number.isNaN(r))return(t+=8*(5-r/2))+"Array";Ke("unknown format ".concat(e))},_u=function(e){var t;if("f"===e[0]||"n"===e[1])t="f32";else if("s"===e[0]&&"i"===e[1])t="i32";else{if("u"!==e[0]||"i"!==e[1])return void Ke("unknown format ".concat(e));t="u32"}var n=1;return"x"===e[e.length-2]&&(n=Number(e[e.length-1])),4===n?"vec4<".concat(t,">"):3===n?"vec3<".concat(t,">"):2===n?"vec2<".concat(t,">"):t},Fu=function(e){if(!e)return 0;var t=1;return"vec"===e.substring(0,3)?t=Number(e[3]):"mat"===e.substring(0,3)&&(t=e[3]*e[5]),4*t},Gu=function(e){if(e)return e.includes("f32")?"Float32Array":e.includes("i32")?"Int32Array":e.includes("u32")?"Uint32Array":void Ke("unknown format ".concat(e))};function Uu(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!t.includes(e[n]))return!1;return!0}function ju(e,t){t.classHierarchy.push("vtkWebGPUVertexInput"),e.addBuffer=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertex",a=n;Array.isArray(a)||(a=[a]);for(var o=0;o<t.inputs.length;o++)if(Uu(t.inputs[o].names,a)){if(t.inputs[o].buffer===e)return;return void(t.inputs[o].buffer=e)}t.inputs.push({buffer:e,stepMode:r,names:a}),t.inputs=t.inputs.sort((function(e,t){return e.names[0]<t.names[0]?-1:e.names[0]>t.names[0]?1:0}))},e.removeBufferIfPresent=function(e){for(var n=0;n<t.inputs.length;n++)t.inputs[n].names.includes(e)&&t.inputs.splice(n,1)},e.getBuffer=function(e){for(var n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return t.inputs[n].buffer;return null},e.hasAttribute=function(e){for(var n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return!0;return!1},e.getAttributeTime=function(e){for(var n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return t.inputs[n].buffer.getSourceTime();return 0},e.getShaderCode=function(){for(var e="",n=0,r=0;r<t.inputs.length;r++)for(var a=0;a<t.inputs[r].names.length;a++){var o=t.inputs[r].buffer.getArrayInformation()[a],i=_u(o.format);n>0&&(e+=",\n"),e="".concat(e,"  @location(").concat(n,") ").concat(t.inputs[r].names[a]," : ").concat(i),n++}return e},e.getVertexInputInformation=function(){var e={};if(t.inputs.length){for(var n=[],r=0,a=0;a<t.inputs.length;a++){for(var o=t.inputs[a].buffer,i={arrayStride:o.getStrideInBytes(),stepMode:t.inputs[a].stepMode,attributes:[]},s=o.getArrayInformation(),c=0;c<t.inputs[a].names.length;c++)i.attributes.push({shaderLocation:r,offset:s[c].offset,format:s[c].format}),r++;n.push(i)}e.buffers=n}return e},e.bindBuffers=function(e){for(var n=0;n<t.inputs.length;n++)e.setVertexBuffer(n,t.inputs[n].buffer.getHandle());t.indexBuffer&&e.setIndexBuffer(t.indexBuffer.getHandle(),t.indexBuffer.getArrayInformation()[0].format)},e.getReady=function(){},e.releaseGraphicsResources=function(){t.created&&(t.inputs=[],t.bindingDescriptions=[],t.attributeDescriptions=[])}}var zu={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function Wu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zu,n),at(e,t),t.bindingDescriptions=[],t.attributeDescriptions=[],t.inputs=[],lt(e,t,["created","device","handle","indexBuffer"]),ju(e,t)}var Hu={newInstance:yt(Wu,"vtkWebGPUVertexInput"),extend:Wu},Ku="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  // var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",Xu="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n";function qu(e,t){t.classHierarchy.push("vtkWebGPUSimpleMapper"),e.generateShaderDescriptions=function(n,r,a){var o=Lu.newInstance({type:"vertex",hash:n,code:t.vertexShaderTemplate}),i=Lu.newInstance({type:"fragment",hash:n,code:t.fragmentShaderTemplate}),s=r.getShaderDescriptions();s.push(o),s.push(i);for(var c=t.vertexShaderTemplate+t.fragmentShaderTemplate,u=new RegExp("//VTK::[^:]*::","g"),l=c.match(u).filter((function(e,t,n){return n.indexOf(e)===t})),d=l.map((function(e){return"replaceShader".concat(e.substring(7,e.length-2))})),p=0;p<d.length;p++){var f=d[p];"replaceShaderIOStructs"!==f&&t.shaderReplacements.has(f)&&t.shaderReplacements.get(f)(n,r,a)}e.replaceShaderIOStructs(n,r,a)},e.replaceShaderIOStructs=function(e,t,n){var r=t.getShaderDescription("vertex");r.replaceShaderCode(null,n),t.getShaderDescription("fragment").replaceShaderCode(r)},e.replaceShaderRenderEncoder=function(e,n,r){t.renderEncoder.replaceShaderCode(n)},t.shaderReplacements.set("replaceShaderRenderEncoder",e.replaceShaderRenderEncoder),e.replaceShaderRenderer=function(e,n,r){if(t.WebGPURenderer){var a=t.WebGPURenderer.getBindGroup().getShaderCode(n),o=n.getShaderDescription("vertex"),i=o.getCode();i=Cu.substitute(i,"//VTK::Renderer::Dec",[a]).result,o.setCode(i);var s=n.getShaderDescription("fragment");i=s.getCode(),i=Cu.substitute(i,"//VTK::Renderer::Dec",[a]).result,s.setCode(i)}},t.shaderReplacements.set("replaceShaderRenderer",e.replaceShaderRenderer),e.replaceShaderMapper=function(e,n,r){var a=t.bindGroup.getShaderCode(n),o=n.getShaderDescription("vertex"),i=o.getCode();i=Cu.substitute(i,"//VTK::Mapper::Dec",[a]).result,o.setCode(i);var s=n.getShaderDescription("fragment");s.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),i=s.getCode(),i=Cu.substitute(i,"//VTK::Mapper::Dec",[a]).result,s.setCode(i)},t.shaderReplacements.set("replaceShaderMapper",e.replaceShaderMapper),e.replaceShaderPosition=function(e,t,n){var r=t.getShaderDescription("vertex");r.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var a=r.getCode();a=Cu.substitute(a,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,r.setCode(a)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderTCoord=function(e,t,n){t.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.addTextureView=function(e){t.textureViews.includes(e)||t.textureViews.push(e)},e.prepareToDraw=function(n){t.renderEncoder=n,e.updateInput(),e.updateBuffers(),e.updateBindings(),e.updatePipeline()},e.updateInput=function(){},e.updateBuffers=function(){},e.updateBindings=function(){t.bindGroup.setBindables(e.getBindables())},e.computePipelineHash=function(){},e.registerDrawCallback=function(n){n.registerDrawCallback(t.pipeline,e.draw)},e.prepareAndDraw=function(n){e.prepareToDraw(n),n.setPipeline(t.pipeline),e.draw(n)},e.draw=function(e){var n=e.getBoundPipeline();e.activateBindGroup(t.bindGroup),t.WebGPURenderer&&t.WebGPURenderer.bindUBO(e),n.bindVertexInput(e,t.vertexInput);var r=t.vertexInput.getIndexBuffer();r?e.drawIndexed(r.getIndexCount(),t.numberOfInstances,0,0,0):e.draw(t.numberOfVertices,t.numberOfInstances,0,0)},e.getBindables=function(){var e=ve(t.additionalBindables);t.UBO&&e.push(t.UBO),t.SSBO&&e.push(t.SSBO);for(var n=0;n<t.textureViews.length;n++){e.push(t.textureViews[n]);var r=t.textureViews[n].getSampler();r&&e.push(r)}return e},e.updatePipeline=function(){e.computePipelineHash(),t.pipeline=t.device.getPipeline(t.pipelineHash),t.pipeline||(t.pipeline=Mu.newInstance(),t.pipeline.setDevice(t.device),t.WebGPURenderer&&t.pipeline.addBindGroupLayout(t.WebGPURenderer.getBindGroup()),t.pipeline.addBindGroupLayout(t.bindGroup),e.generateShaderDescriptions(t.pipelineHash,t.pipeline,t.vertexInput),t.pipeline.setTopology(t.topology),t.pipeline.setRenderEncoder(t.renderEncoder),t.pipeline.setVertexState(t.vertexInput.getVertexInputInformation()),t.device.createPipeline(t.pipelineHash,t.pipeline))}}var Yu={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function Zu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yu,n),Et.extend(e,t,n),t.textureViews=[],t.vertexInput=Hu.newInstance(),t.bindGroup=hu.newInstance({label:"mapperBG"}),t.additionalBindables=[],t.fragmentShaderTemplate=t.fragmentShaderTemplate||Xu,t.vertexShaderTemplate=t.vertexShaderTemplate||Ku,t.shaderReplacements=new Map,Ot.get(e,t,["pipeline","vertexInput"]),Ot.setGet(e,t,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),qu(e,t)}var Qu={newInstance:Ot.newInstance(Zu,"vtkWebGPUSimpleMapper"),extend:Zu};function Ju(e,t){t.classHierarchy.push("vtkWebGPUFullScreenQuad"),e.replaceShaderPosition=function(e,t,n){var r=t.getShaderDescription("vertex");r.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),r.addOutput("vec4<f32>","vertexVC");var a=r.getCode();a=Cu.substitute(a,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,r.setCode(a)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.updateBuffers=function(){var e=t.device.getBufferManager().getFullScreenQuadBuffer();t.vertexInput.addBuffer(e,["vertexBC"]),t.numberOfVertices=6}}var $u={};function el(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$u,n),Qu.extend(e,t,n),Ju(e,t)}var tl={newInstance:Ot.newInstance(el,"vtkWebGPUFullScreenQuad"),extend:el},nl={BufferUsage:{Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},PrimitiveTypes:{Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6}};function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var al=["getMappedRange","mapAsync","unmap"];function ol(e,t){t.classHierarchy.push("vtkWebGPUBuffer"),e.create=function(e,n){t.handle=t.device.getHandle().createBuffer({size:e,usage:n,label:t.label}),t.sizeInBytes=e,t.usage=n},e.write=function(e){!function(e,t,n,r){var a=r.byteLength,o=e.createBuffer({size:a,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),i=o.getMappedRange(0,a);new Uint8Array(i).set(new Uint8Array(r)),o.unmap();var s=e.createCommandEncoder();s.copyBufferToBuffer(o,0,t,0,a);var c=s.finish();e.queue.submit([c]),o.destroy()}(t.device.getHandle(),t.handle,0,e.buffer)},e.createAndWrite=function(e,n){t.handle=t.device.getHandle().createBuffer({size:e.byteLength,usage:n,mappedAtCreation:!0,label:t.label}),t.sizeInBytes=e.byteLength,t.usage=n,new Uint8Array(t.handle.getMappedRange()).set(new Uint8Array(e.buffer)),t.handle.unmap()};for(var n=function(n){e[al[n]]=function(){var e;return(e=t.handle)[al[n]].apply(e,arguments)}},r=0;r<al.length;r++)n(r)}var il={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function sl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,il,n),Ot.obj(e,t),Ot.get(e,t,["handle","sizeInBytes","usage"]),Ot.setGet(e,t,["strideInBytes","device","arrayInformation","label","sourceTime"]),ol(e,t)}var cl=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(sl),extend:sl},nl);function ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ll=Os.Representation,dl=Os.Interpolation;function pl(e){return function(){return Ot.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}}function fl(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=function(n,r,a){Array.isArray(n)?t.color[0]===n[0]&&t.color[1]===n[1]&&t.color[2]===n[2]||(t.color[0]=n[0],t.color[1]=n[1],t.color[2]=n[2],e.modified()):t.color[0]===n&&t.color[1]===r&&t.color[2]===a||(t.color[0]=n,t.color[1]=r,t.color[2]=a,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=pl("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.setSpecularPower=function(n){var r=1/Math.max(1,n);t.roughness===r&&t.specularPower===n||(t.specularPower=n,t.roughness=r,e.modified())},e.addShaderVariable=pl("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(dl.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(dl.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(dl.PHONG)},e.getInterpolationAsString=function(){return Ot.enumToString(dl,t.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(ll.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(ll.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(ll.POINTS)},e.getRepresentationAsString=function(){return Ot.enumToString(ll,t.representation)}}var gl={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:dl.GOURAUD,representation:ll.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function ml(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gl,n),Ot.obj(e,t),Ot.setGet(e,t,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),Ot.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),fl(e,t)}var vl=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(ml,"vtkProperty"),extend:ml},Os);function hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yl,bl=vl.Representation,xl=nl.PrimitiveTypes,Tl=function(){function e(){Ae(this,e),this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}return Me(e,[{key:"clear",value:function(){this.count=0}},{key:"has",value:function(e){for(var t=0;t<this.count;t++)if(this.keys[t]===e)return!0}},{key:"get",value:function(e){for(var t=0;t<this.count;t++)if(this.keys[t]===e)return this.values[t]}},{key:"set",value:function(e,t){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=t)}}]),e}();function Sl(e,t,n){var r=e.pointIdToFlatId[t];return r<0&&(r=e.flatId,e.pointIdToFlatId[t]=r,e.flatIdToPointId[e.flatId]=t,e.flatIdToCellId[e.flatId]=n,e.flatId++),r}function Pl(e,t,n){for(var r=e.length,a=0;a<r;a++){var o=e[a];if(n.cellProvokedMap.has(o)){n.ibo[n.iboId++]=n.cellProvokedMap.get(o);for(var i=a+1;i<a+r;i++){var s=Sl(n,o=e[i%r],t);n.ibo[n.iboId++]=s}return}}for(var c=0;c<r;c++){var u=e[c];if(!n.provokedPointIds[u]){var l=Sl(n,u,t);n.provokedPointIds[u]=1,n.cellProvokedMap.set(u,l),n.flatIdToCellId[l]=t,n.ibo[n.iboId++]=l;for(var d=c+1;d<c+r;d++)l=Sl(n,u=e[d%r],t),n.ibo[n.iboId++]=l;return}}var p=e[0],f=n.flatId;n.cellProvokedMap.set(p,f),n.flatIdToPointId[n.flatId]=p,n.flatIdToCellId[n.flatId]=t,n.flatId++,n.ibo[n.iboId++]=f;for(var g=1;g<r;g++)f=Sl(n,p=e[g],t),n.ibo[n.iboId++]=f}function wl(e,t,n){var r=e.length;n.iboSize+=r;for(var a=0;a<r;a++){var o=e[a];if(n.cellProvokedMap.has(o))return}for(var i=0;i<r;i++){var s=e[i];if(!n.provokedPointIds[s])return n.provokedPointIds[s]=1,void n.cellProvokedMap.set(s,1)}n.cellProvokedMap.set(e[0],1),n.extraPoints++}var Cl=new Uint32Array(1),Ol=new Uint32Array(2),Al=new Uint32Array(3),Il={anythingToPoints:function(e,t,n,r,a){for(var o=0;o<e;++o)Cl[0]=t[n+o],yl(Cl,r,a)},linesToWireframe:function(e,t,n,r,a){for(var o=0;o<e-1;++o)Ol[0]=t[n+o],Ol[1]=t[n+o+1],yl(Ol,r,a)},polysToWireframe:function(e,t,n,r,a){if(e>2)for(var o=0;o<e;++o)Ol[0]=t[n+o],Ol[1]=t[n+(o+1)%e],yl(Ol,r,a)},stripsToWireframe:function(e,t,n,r,a){if(e>2){for(var o=0;o<e-1;++o)Ol[0]=t[n+o],Ol[1]=t[n+o+1],yl(Ol,r,a);for(var i=0;i<e-2;i++)Ol[0]=t[n+i],Ol[1]=t[n+i+2],yl(Ol,r,a)}},polysToSurface:function(e,t,n,r,a){for(var o=0;o<e-2;o++)Al[0]=t[n],Al[1]=t[n+o+1],Al[2]=t[n+o+2],yl(Al,r,a)},stripsToSurface:function(e,t,n,r,a){for(var o=0;o<e-2;o++)Al[0]=t[n+o],Al[1]=t[n+o+1+o%2],Al[2]=t[n+o+1+(o+1)%2],yl(Al,r,a)}};function Ml(e,t){t.classHierarchy.push("vtkWebGPUIndexBuffer"),e.buildIndexBuffer=function(e){var n=e.cells,r=e.primitiveType,a=e.representation,o=e.cellOffset,i=n.getData(),s=i.length,c=function(e){switch(e){case xl.Points:return"points";case xl.Lines:return"lines";case xl.Triangles:case xl.TriangleEdges:return"polys";case xl.TriangleStripEdges:case xl.TriangleStrips:return"strips";default:return""}}(r),u=e.numberOfPoints,l={provokedPointIds:new Uint8Array(u),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new Tl},d=null;d=a===bl.POINTS||r===xl.Points?Il.anythingToPoints:a===bl.WIREFRAME||r===xl.Lines?Il["".concat(c,"ToWireframe")]:Il["".concat(c,"ToSurface")],yl=wl;for(var p=o||0,f=0;f<s;)l.cellProvokedMap.clear(),d(i[f],i,f+1,p,l),f+=i[f]+1,p++;l.flatIdToPointId=u<=65535?new Uint16Array(u+l.extraPoints):new Uint32Array(u+l.extraPoints),u+l.extraPoints<36863?l.pointIdToFlatId=new Int16Array(u):l.pointIdToFlatId=new Int32Array(u),u+l.extraPoints<=65535?(l.ibo=new Uint16Array(l.iboSize),e.format="uint16"):(l.ibo=new Uint32Array(l.iboSize),e.format="uint32"),l.flatIdToCellId=p<=65535?new Uint16Array(u+l.extraPoints):new Uint32Array(u+l.extraPoints),l.pointIdToFlatId.fill(-1),l.provokedPointIds.fill(0),yl=Pl,p=o||0;for(var g=0;g<s;)l.cellProvokedMap.clear(),d(i[g],i,g+1,p,l),g+=i[g]+1,p++;delete l.provokedPointIds,delete l.pointIdToFlatId,e.nativeArray=l.ibo,t.flatIdToPointId=l.flatIdToPointId,t.flatIdToCellId=l.flatIdToCellId,t.flatSize=l.flatId,t.indexCount=l.iboId}}var Rl={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function El(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rl,n),cl.extend(e,t,n),Ot.setGet(e,t,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),Ml(e,t)}var Dl=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(El),extend:El},nl);function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nl=nl.BufferUsage,kl=Ke,Vl=Ba.VtkDataTypes;function _l(e,t,n,r,a){var o={},i=e.getFlatSize();if(!i)return o;var s=[0,0,0,0];a.shift&&(a.shift.length?s=a.shift:s.fill(a.shift));var c=[1,1,1,1];a.scale&&(a.scale.length?c=a.scale:c.fill(a.scale));var u,l=!!Object.prototype.hasOwnProperty.call(a,"packExtra")&&a.packExtra,d=0,p=Ze(r,i*(n+(l?1:0))),f=e.getFlatIdToPointId();a.cellData&&(f=e.getFlatIdToCellId()),1===n?u=function(e){p[d++]=c[0]*t[e]+s[0]}:2===n?u=function(e){p[d++]=c[0]*t[e]+s[0],p[d++]=c[1]*t[e+1]+s[1]}:3!==n||l?3===n&&l?u=function(e){p[d++]=c[0]*t[e]+s[0],p[d++]=c[1]*t[e+1]+s[1],p[d++]=c[2]*t[e+2]+s[2],p[d++]=1*c[3]+s[3]}:4===n&&(u=function(e){p[d++]=c[0]*t[e]+s[0],p[d++]=c[1]*t[e+1]+s[1],p[d++]=c[2]*t[e+2]+s[2],p[d++]=c[3]*t[e+3]+s[3]}):u=function(e){p[d++]=c[0]*t[e]+s[0],p[d++]=c[1]*t[e+1]+s[1],p[d++]=c[2]*t[e+2]+s[2]};for(var g=0;g<i;g++)u(n*f[g]);return o.nativeArray=p,o}function Fl(e,t,n,r){var a=[];return Or([e[3*r]-e[3*n],e[3*r+1]-e[3*n+1],e[3*r+2]-e[3*n+2]],[e[3*t]-e[3*n],e[3*t+1]-e[3*n+1],e[3*t+2]-e[3*n+2]],a),Ir(a),a}function Gl(e,t){function n(e){var n,r;if(e.dataArray&&!e.nativeArray&&(e.nativeArray=e.dataArray.getData()),e.usage===Nl.Index&&((n=Dl.newInstance({label:e.label})).setDevice(t.device),r=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,n.buildIndexBuffer(e),n.createAndWrite(e.nativeArray,r),n.setArrayInformation([{format:e.format}])),n||(n=cl.newInstance({label:e.label})).setDevice(t.device),e.usage===Nl.UniformArray&&(r=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,n.createAndWrite(e.nativeArray,r)),e.usage===Nl.Storage&&(r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,n.createAndWrite(e.nativeArray,r)),e.usage===Nl.Texture&&(r=GPUBufferUsage.COPY_SRC,n.createAndWrite(e.nativeArray,r)),e.usage===Nl.PointArray){r=GPUBufferUsage.VERTEX;var a=Vu(e.format),o=_l(e.indexBuffer,e.dataArray.getData(),e.dataArray.getNumberOfComponents(),a,{packExtra:e.packExtra,shift:e.shift,scale:e.scale,cellData:e.cellData,cellOffset:e.cellOffset});n.createAndWrite(o.nativeArray,r),n.setStrideInBytes(ku(e.format)),n.setArrayInformation([{offset:0,format:e.format,interpolation:e.cellData?"flat":"perspective"}])}if(e.usage===Nl.NormalsFromPoints){r=GPUBufferUsage.VERTEX;var i=Vu(e.format),s=function(e,t){var n=t.getData(),r=e.getData();if(!r||!n)return null;for(var a=new Int8Array(4*e.getNumberOfCells()),o=r.length,i=0,s=0;s<o;){var c=Fl(n,r[s+1],r[s+2],r[s+3]);a[i++]=127*c[0],a[i++]=127*c[1],a[i++]=127*c[2],a[i++]=127,s+=r[s]+1}return a}(e.cells,e.dataArray),c=_l(e.indexBuffer,s,4,i,{cellData:!0});n.createAndWrite(c.nativeArray,r),n.setStrideInBytes(ku(e.format)),n.setArrayInformation([{offset:0,format:e.format,interpolation:"flat"}])}return e.usage===Nl.RawVertex&&(r=GPUBufferUsage.VERTEX,n.createAndWrite(e.nativeArray,r),n.setStrideInBytes(ku(e.format)),n.setArrayInformation([{offset:0,format:e.format}])),n.setSourceTime(e.time),n}t.classHierarchy.push("vtkWebGPUBufferManager"),e.hasBuffer=function(e){return t.device.hasCachedObject(e)},e.getBuffer=function(e){return e.hash?t.device.getCachedObject(e.hash,n,e):n(e)},e.getBufferForPointArray=function(t,n){var r=function(e){var t;switch(e.getDataType()){case Vl.UNSIGNED_CHAR:t="uint8";break;case Vl.FLOAT:t="float32";break;case Vl.UNSIGNED_INT:t="uint32";break;case Vl.INT:t="sint32";break;case Vl.DOUBLE:t="float32";break;case Vl.UNSIGNED_SHORT:t="uint16";break;case Vl.SHORT:t="sin16";break;default:t="float32"}switch(e.getNumberOfComponents()){case 2:t+="x2";break;case 3:t.includes("32")||kl("unsupported x3 type for ".concat(t)),t+="x3";break;case 4:t+="x4"}return t}(t),a={hash:"".concat(t.getMTime(),"I").concat(n.getMTime()).concat(r),usage:Nl.PointArray,format:r,dataArray:t,indexBuffer:n};return e.getBuffer(a)},e.getFullScreenQuadBuffer=function(){if(t.fullScreenQuadBuffer)return t.fullScreenQuadBuffer;t.fullScreenQuadBuffer=cl.newInstance(),t.fullScreenQuadBuffer.setDevice(t.device);var e=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return t.fullScreenQuadBuffer.createAndWrite(e,GPUBufferUsage.VERTEX),t.fullScreenQuadBuffer.setStrideInBytes(12),t.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),t.fullScreenQuadBuffer}}var Ul={device:null,fullScreenQuadBuffer:null};function jl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ul,n),at(e,t),lt(e,t,["device"]),Gl(e,t)}var zl=Bl(Bl({newInstance:yt(jl),extend:jl},{}),nl),Wl=zl.BufferUsage,Hl=Ot.vtkErrorMacro;function Kl(e,t){t.classHierarchy.push("vtkWebGPUStorageBuffer"),e.addEntry=function(e,n){if(t._bufferEntryNames.has(e))Hl("entry named ".concat(e," already exists"));else{t._bufferEntryNames.set(e,t.bufferEntries.length);var r=Fu(n);t.bufferEntries.push({name:e,type:n,sizeInBytes:r,offset:t.sizeInBytes,nativeType:Gu(n)}),t.sizeInBytes+=r}},e.send=function(e){if(!t._buffer){var n={nativeArray:t.Float32Array,usage:Wl.Storage,label:t.label};return t._buffer=e.getBufferManager().getBuffer(n),t.bindGroupTime.modified(),void t._sendTime.modified()}e.getHandle().queue.writeBuffer(t._buffer.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes*t.numberOfInstances),t._sendTime.modified()},e.createView=function(e){e in t==0&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes*t.numberOfInstances)),t[e]=Ot.newTypedArray(e,t.arrayBuffer))},e.setValue=function(n,r,a){var o=t._bufferEntryNames.get(n);if(void 0!==o){var i=t.bufferEntries[o];e.createView(i.nativeType);var s=t[i.nativeType];s[(i.offset+r*t.sizeInBytes)/s.BYTES_PER_ELEMENT]=a}else Hl("entry named ".concat(n," not found in UBO"))},e.setArray=function(n,r,a){var o=t._bufferEntryNames.get(n);if(void 0!==o){var i=t.bufferEntries[o];e.createView(i.nativeType);for(var s=t[i.nativeType],c=(i.offset+r*t.sizeInBytes)/s.BYTES_PER_ELEMENT,u=0;u<a.length;u++)s[c+u]=a[u]}else Hl("entry named ".concat(n," not found in UBO"))},e.setAllInstancesFromArray=function(n,r){var a=t._bufferEntryNames.get(n);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],s=r.length/t.numberOfInstances,c=0;c<t.numberOfInstances;c++)for(var u=(o.offset+c*t.sizeInBytes)/i.BYTES_PER_ELEMENT,l=0;l<s;l++)i[u+l]=r[c*s+l]}else Hl("entry named ".concat(n," not found in UBO"))},e.setAllInstancesFromArrayColorToFloat=function(n,r){var a=t._bufferEntryNames.get(n);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],s=r.length/t.numberOfInstances,c=0;c<t.numberOfInstances;c++)for(var u=(o.offset+c*t.sizeInBytes)/i.BYTES_PER_ELEMENT,l=0;l<s;l++)i[u+l]=r[c*s+l]/255}else Hl("entry named ".concat(n," not found in UBO"))},e.setAllInstancesFromArray3x3To4x4=function(n,r){var a=t._bufferEntryNames.get(n);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],s=0;s<t.numberOfInstances;s++)for(var c=(o.offset+s*t.sizeInBytes)/i.BYTES_PER_ELEMENT,u=0;u<3;u++)for(var l=0;l<3;l++)i[c+4*u+l]=r[9*s+3*u+l]}else Hl("entry named ".concat(n," not found in UBO"))},e.getSendTime=function(){return t._sendTime.getMTime()},e.getShaderCode=function(e,n){for(var r=["struct ".concat(t.label,"StructEntry\n{")],a=0;a<t.bufferEntries.length;a++){var o=t.bufferEntries[a];r.push("  ".concat(o.name,": ").concat(o.type,","))}return r.push("\n};\nstruct ".concat(t.label,"Struct\n{\n  values: array<").concat(t.label,"StructEntry>,\n};\n@binding(").concat(e,") @group(").concat(n,") var<storage, read> ").concat(t.label,": ").concat(t.label,"Struct;\n")),r.join("\n")},e.getBindGroupEntry=function(){return{resource:{buffer:t._buffer.getHandle()}}},e.clearData=function(){t.numberOfInstances=0,t.sizeInBytes=0,t.bufferEntries=[],t._bufferEntryNames=new Map,t._buffer=null,delete t.arrayBuffer,delete t.Float32Array}}var Xl={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function ql(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xl,n),Ot.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t._sendTime={},Ot.obj(t._sendTime,{mtime:0}),t.bindGroupTime={},Ot.obj(t.bindGroupTime,{mtime:0}),t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},Ot.get(e,t,["bindGroupTime"]),Ot.setGet(e,t,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),Kl(e,t)}var Yl={newInstance:Ot.newInstance(ql,"vtkWebGPUStorageBuffer"),extend:ql},Zl=zl.BufferUsage,Ql=Ot.vtkErrorMacro;function Jl(e,t){t.classHierarchy.push("vtkWebGPUUniformBuffer"),e.addEntry=function(e,n){t._bufferEntryNames.has(e)?Ql("entry named ".concat(e," already exists")):(t.sortDirty=!0,t._bufferEntryNames.set(e,t.bufferEntries.length),t.bufferEntries.push({name:e,type:n,sizeInBytes:Fu(n),offset:-1,nativeType:Gu(n),packed:!1}))},e.sortBufferEntries=function(){if(t.sortDirty){for(var e=0,n=[],r=4,a=0;a<t.bufferEntries.length;a++){var o=t.bufferEntries[a];o.sizeInBytes%16==0&&(r=Math.max(16,r)),o.sizeInBytes%8==0&&(r=Math.max(8,r))}for(var i=0;i<t.bufferEntries.length;i++){var s=t.bufferEntries[i];!1===s.packed&&s.sizeInBytes%16==0&&(s.packed=!0,s.offset=e,n.push(s),e+=s.sizeInBytes)}for(var c=0;c<t.bufferEntries.length;c++){var u=t.bufferEntries[c];if(!1===u.packed&&12===u.sizeInBytes)for(var l=0;l<t.bufferEntries.length;l++){var d=t.bufferEntries[l];if(!1===d.packed&&4===d.sizeInBytes){u.packed=!0,u.offset=e,n.push(u),e+=u.sizeInBytes,d.packed=!0,d.offset=e,n.push(d),e+=d.sizeInBytes;break}}}for(var p=0;p<t.bufferEntries.length;p++){var f=t.bufferEntries[p];if(!f.packed&&f.sizeInBytes%8==0)for(var g=p+1;g<t.bufferEntries.length;g++){var m=t.bufferEntries[g];if(!m.packed&&m.sizeInBytes%8==0){f.packed=!0,f.offset=e,n.push(f),e+=f.sizeInBytes,m.packed=!0,m.offset=e,n.push(m),e+=m.sizeInBytes;break}}}for(var v=0;v<t.bufferEntries.length;v++){var h=t.bufferEntries[v];if(!h.packed&&h.sizeInBytes%8==0)for(var y=!1,b=0;!y&&b<t.bufferEntries.length;b++){var x=t.bufferEntries[b];if(!x.packed&&4===x.sizeInBytes)for(var T=b+1;T<t.bufferEntries.length;T++){var S=t.bufferEntries[T];if(!S.packed&&4===S.sizeInBytes){h.packed=!0,h.offset=e,n.push(h),e+=h.sizeInBytes,x.packed=!0,x.offset=e,n.push(x),e+=x.sizeInBytes,S.packed=!0,S.offset=e,n.push(S),e+=S.sizeInBytes,y=!0;break}}}}for(var P=0;P<t.bufferEntries.length;P++){var w=t.bufferEntries[P];!w.packed&&w.sizeInBytes>4&&(w.packed=!0,w.offset=e,n.push(w),e+=w.sizeInBytes)}for(var C=0;C<t.bufferEntries.length;C++){var O=t.bufferEntries[C];O.packed||(O.packed=!0,O.offset=e,n.push(O),e+=O.sizeInBytes)}t.bufferEntries=n,t._bufferEntryNames.clear();for(var A=0;A<t.bufferEntries.length;A++)t._bufferEntryNames.set(t.bufferEntries[A].name,A);t.sizeInBytes=e,t.sizeInBytes=r*Math.ceil(t.sizeInBytes/r),t.sortDirty=!1}},e.sendIfNeeded=function(e){if(!t.UBO){var n={nativeArray:t.Float32Array,usage:Zl.UniformArray,label:t.label};t.UBO=e.getBufferManager().getBuffer(n),t.bindGroupTime.modified(),t.sendDirty=!1}t.sendDirty&&(e.getHandle().queue.writeBuffer(t.UBO.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes),t.sendDirty=!1),t.sendTime.modified()},e.createView=function(e){e in t==0&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes)),t[e]=Ot.newTypedArray(e,t.arrayBuffer))},e.setValue=function(n,r){e.sortBufferEntries();var a=t._bufferEntryNames.get(n);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);var i=t[o.nativeType];o.lastValue!==r&&(i[o.offset/i.BYTES_PER_ELEMENT]=r,t.sendDirty=!0),o.lastValue=r}else Ql("entry named ".concat(n," not found in UBO"))},e.setArray=function(n,r){e.sortBufferEntries();var a=t._bufferEntryNames.get(n);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],s=!1,c=0;c<r.length;c++)o.lastValue&&o.lastValue[c]===r[c]||(i[o.offset/i.BYTES_PER_ELEMENT+c]=r[c],s=!0);s&&(t.sendDirty=!0,o.lastValue=ve(r))}else Ql("entry named ".concat(n," not found in UBO"))},e.getBindGroupEntry=function(){return{resource:{buffer:t.UBO.getHandle()}}},e.getSendTime=function(){return t.sendTime.getMTime()},e.getShaderCode=function(n,r){e.sortBufferEntries();for(var a=["struct ".concat(t.label,"Struct\n{")],o=0;o<t.bufferEntries.length;o++){var i=t.bufferEntries[o];a.push("  ".concat(i.name,": ").concat(i.type,","))}return a.push("};\n@binding(".concat(n,") @group(").concat(r,") var<uniform> ").concat(t.label,": ").concat(t.label,"Struct;")),a.join("\n")}}var $l={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function ed(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$l,n),Ot.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"uniform"}},t.sendTime={},Ot.obj(t.sendTime,{mtime:0}),t.bindGroupTime={},Ot.obj(t.bindGroupTime,{mtime:0}),t.sendDirty=!0,t.sortDirty=!0,Ot.get(e,t,["binding","bindGroupTime"]),Ot.setGet(e,t,["bindGroupLayoutEntry","device","label","sizeInBytes"]),Jl(e,t)}var td={newInstance:Ot.newInstance(ed,"vtkWebGPUUniformBuffer"),extend:ed},nd=He,rd="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",ad=new Float64Array(16),od=new Float64Array(16);function id(e,t){t.classHierarchy.push("vtkWebGPURenderer"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.camera=t.renderable.getActiveCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.camera),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes(),t.webgpuCamera=e.getViewNodeFor(t.camera),e.updateStabilizedMatrix()}},e.updateStabilizedMatrix=function(){var e=t.camera.getClippingRange(),n=t.camera.getPositionByReference(),r=[],a=[];dn(a,t.camera.getDirectionOfProjectionByReference(),.5*(e[0]+e[1])),tn(r,n,a),Vn(a,r,t.stabilizedCenter),jn(a)/(e[1]-e[0])>t.recenterThreshold&&(t.stabilizedCenter=r,t.stabilizedTime.modified())},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),r=0;r<n.length;++r)n[r].getSwitch()>0&&e++;return e||(nd("No lights are on, creating one."),t.renderable.createLight()),e},e.updateUBO=function(){var n=t.UBO.getSendTime();if(t._parent.getMTime()>n||e.getMTime()>n||t.camera.getMTime()>n||t.renderable.getMTime()>n){var r,a=t.webgpuCamera.getKeyMatrices(e);t.UBO.setArray("WCVCMatrix",a.wcvc),t.UBO.setArray("SCPCMatrix",a.scpc),t.UBO.setArray("PCSCMatrix",a.pcsc),t.UBO.setArray("SCVCMatrix",a.scvc),t.UBO.setArray("VCPCMatrix",a.vcpc),t.UBO.setArray("WCVCNormals",a.normalMatrix),t.UBO.setValue("LightCount",t.renderable.getLights().length),t.UBO.setValue("MaxEnvironmentMipLevel",null===(r=t.renderable.getEnvironmentTexture())||void 0===r?void 0:r.getMipLevel()),t.UBO.setValue("BackgroundDiffuseStrength",t.renderable.getEnvironmentTextureDiffuseStrength()),t.UBO.setValue("BackgroundSpecularStrength",t.renderable.getEnvironmentTextureSpecularStrength());var o=e.getYInvertedTiledSizeAndOrigin();t.UBO.setArray("viewportSize",[o.usize,o.vsize]),t.UBO.setValue("cameraParallel",t.camera.getParallelProjection());var i=t._parent.getDevice();t.UBO.sendIfNeeded(i)}},e.updateSSBO=function(){for(var n,r=t.renderable.getLights(),a=t.webgpuCamera.getKeyMatrices(e),o="".concat(t.renderable.getMTime()),i=0;i<r.length;i++)o+=r[i].getMTime();if(o!==t.lightTimeString){for(var s=new Float32Array(4*r.length),c=new Float32Array(4*r.length),u=new Float32Array(4*r.length),l=new Float32Array(4*r.length),d=0;d<r.length;d++){var p=4*d,f=r[d].getPosition();Cn(f,f,a.wcvc),s[p]=f[0],s[p+1]=f[1],s[p+2]=f[2],s[p+3]=0,c[p]=-r[d].getDirection()[0],c[p+1]=-r[d].getDirection()[1],c[p+2]=-r[d].getDirection()[2],c[p+3]=0,u[p]=r[d].getColor()[0],u[p+1]=r[d].getColor()[1],u[p+2]=r[d].getColor()[2],u[p+3]=5*r[d].getIntensity(),l[p]=(n=r[d]).getPositional()?n.getConeAngle()>=90?0:2:1,l[p+1]=Math.cos(sr(r[d].getConeAngle())),l[p+2]=Math.cos(sr(r[d].getConeAngle()+r[d].getConeFalloff())),l[p+3]=0}t.SSBO.clearData(),t.SSBO.setNumberOfInstances(r.length),t.SSBO.addEntry("LightPos","vec4<f32>"),t.SSBO.addEntry("LightDir","vec4<f32>"),t.SSBO.addEntry("LightColor","vec4<f32>"),t.SSBO.addEntry("LightData","vec4<f32>"),t.SSBO.setAllInstancesFromArray("LightPos",s),t.SSBO.setAllInstancesFromArray("LightDir",c),t.SSBO.setAllInstancesFromArray("LightColor",u),t.SSBO.setAllInstancesFromArray("LightData",l);var g=t._parent.getDevice();t.SSBO.send(g)}t.lightTimeString=o},e.scissorAndViewport=function(t){var n=e.getYInvertedTiledSizeAndOrigin();t.getHandle().setViewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize,0,1),t.getHandle().setScissorRect(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)},e.bindUBO=function(e){e.activateBindGroup(t.bindGroup)},e.opaquePass=function(n){n?(t.renderEncoder.begin(t._parent.getCommandEncoder()),e.updateUBO(),e.updateSSBO()):(e.scissorAndViewport(t.renderEncoder),e.clear(),t.renderEncoder.end())},e.clear=function(){var n;if(!t.renderable.getTransparent()&&!t.suppressClear){var r=t._parent.getDevice();if(!t.clearFSQ){t.clearFSQ=tl.newInstance(),t.clearFSQ.setDevice(r),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(rd);var a=td.newInstance({label:"mapperUBO"});a.addEntry("FSQMatrix","mat4x4<f32>"),a.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(a),t.backgroundTex=t.renderable.getEnvironmentTexture()}if("clearfsqwithtexture"!==t.clearFSQ.getPipelineHash()&&t.renderable.getUseEnvironmentTextureAsBackground()&&null!==(n=t.backgroundTex)&&void 0!==n&&n.getImageLoaded()){t.clearFSQ.setFragmentShaderTemplate("\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);\n  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);\n  // textureSampleLevel gets rid of some ugly artifacts\n  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0);\n  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n");var o=td.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(o);var i=r.getTextureManager().getTextureForVTKTexture(t.backgroundTex);if(i.getReady()){var s=i.createView("EnvironmentTexture");t.clearFSQ.setTextureViews([s]),t.backgroundTexLoaded=!0;var c=t.backgroundTex.getInterpolate()?"linear":"nearest";s.addSampler(r,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:c,magFilter:c,mipmapFilter:"linear"})}t.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if("clearfsqwithtexture"===t.clearFSQ.getPipelineHash()&&!t.renderable.getUseEnvironmentTextureAsBackground()){t.clearFSQ=tl.newInstance(),t.clearFSQ.setDevice(r),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(rd);var u=td.newInstance({label:"mapperUBO"});u.addEntry("FSQMatrix","mat4x4<f32>"),u.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(u)}var l=t.webgpuCamera.getKeyMatrices(e),d=t.renderable.getBackgroundByReference();t.clearFSQ.getUBO().setArray("BackgroundColor",d),v(od,l.normalMatrix),oe(ad,l.scvc,l.pcsc),oe(ad,od,ad),t.clearFSQ.getUBO().setArray("FSQMatrix",ad),t.clearFSQ.getUBO().sendIfNeeded(r),t.clearFSQ.prepareAndDraw(t.renderEncoder)}},e.translucentPass=function(n){n?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.volumeDepthRangePass=function(n){n?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.getAspectRatio=function(){var e=t._parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.convertToOpenGLDepth=function(e){return t.webgpuCamera.convertToOpenGLDepth(e)},e.getYInvertedTiledSizeAndOrigin=function(){var n=e.getTiledSizeAndOrigin(),r=t._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=e[0]-n[0],a=e[1]-n[1],o=t._parent.normalizedDisplayToDisplay(r,a),i=Math.round(o[0]),s=Math.round(o[1]),c=e[2]-n[0],u=e[3]-n[1],l=t._parent.normalizedDisplayToDisplay(c,u),d=Math.round(l[0])-i,p=Math.round(l[1])-s;return d<0&&(d=0),p<0&&(p=0),{usize:d,vsize:p,lowerLeftU:i,lowerLeftV:s}},e.getPropFromID=function(e){for(var n=0;n<t.children.length;n++)if((t.children[n].getPropID?t.children[n].getPropID():-1)===e)return t.children[n];return null},e.getStabilizedTime=function(){return t.stabilizedTime.getMTime()},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()}}var sd={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};var cd=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sd,n),Et.extend(e,t,n),t.UBO=td.newInstance({label:"rendererUBO"}),t.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("WCVCNormals","mat4x4<f32>"),t.UBO.addEntry("viewportSize","vec2<f32>"),t.UBO.addEntry("LightCount","i32"),t.UBO.addEntry("MaxEnvironmentMipLevel","f32"),t.UBO.addEntry("BackgroundDiffuseStrength","f32"),t.UBO.addEntry("BackgroundSpecularStrength","f32"),t.UBO.addEntry("cameraParallel","u32"),t.SSBO=Yl.newInstance({label:"rendererLightSSBO"}),t.lightTimeString="",t.bindGroup=hu.newInstance({label:"rendererBG"}),t.bindGroup.setBindables([t.UBO,t.SSBO]),t.tmpMat4=m(new Float64Array(16)),t.stabilizedTime={},at(t.stabilizedTime,{mtime:0}),it(e,t,["bindGroup","stabilizedTime"]),dt(e,t,["stabilizedCenter"]),lt(e,t,["renderEncoder","selector","suppressClear","UBO"]),id(e,t)}),"vtkWebGPURenderer");function ud(e,t){t.classHierarchy.push("vtkWebGPUSampler"),e.create=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.device=e,t.options.addressModeU=n.addressModeU?n.addressModeU:"clamp-to-edge",t.options.addressModeV=n.addressModeV?n.addressModeV:"clamp-to-edge",t.options.addressModeW=n.addressModeW?n.addressModeW:"clamp-to-edge",t.options.magFilter=n.magFilter?n.magFilter:"nearest",t.options.minFilter=n.minFilter?n.minFilter:"nearest",t.options.mipmapFilter=n.mipmapFilter?n.mipmapFilter:"nearest",t.options.label=t.label,t.handle=t.device.getHandle().createSampler(t.options),t.bindGroupTime.modified()},e.getShaderCode=function(e,n){return"@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": sampler;")},e.getBindGroupEntry=function(){return{resource:t.handle}}}iu("vtkRenderer",cd);var ld={device:null,handle:null,label:null,options:null};function dd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ld,n),Ot.obj(e,t),t.options={},t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},t.bindGroupTime={},Ot.obj(t.bindGroupTime,{mtime:0}),Ot.get(e,t,["bindGroupTime","handle","options"]),Ot.setGet(e,t,["bindGroupLayoutEntry","device","label"]),ud(e,t)}var pd={newInstance:Ot.newInstance(dd),extend:dd},fd=Ac.SlicingMode,gd="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Image::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  //VTK::Image::Sample\n\n  // var computedColor: vec4<f32> = vec4<f32>(1.0,0.7, 0.5, 1.0);\n\n//VTK::RenderEncoder::Impl\n\n  return output;\n}\n",md=new Float64Array(16),vd=new Float64Array(16),hd=new Float64Array(16),yd=new Float64Array(4),bd=new Float64Array(4);function xd(e,t){t.classHierarchy.push("vtkWebGPUImageMapper"),e.buildPass=function(n){if(n){t.WebGPUImageSlice=e.getFirstAncestorOfType("vtkWebGPUImageSlice"),t.WebGPURenderer=t.WebGPUImageSlice.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.device=t.WebGPURenderWindow.getDevice();var r=t.WebGPURenderer.getRenderable();t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(r.getActiveCamera())}},e.translucentPass=function(t){t&&e.render()},e.opaquePass=function(t){t&&e.render()},e.render=function(){t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw)},e.computePipelineHash=function(){var e=t.currentInput.getExtent();e[0]===e[1]||e[2]===e[3]||e[4]===e[5]?(t.dimensions=2,t.pipelineHash="img2"):(t.dimensions=3,t.pipelineHash="img3")},e.updateUBO=function(){var n=t.UBO.getSendTime(),r=t.WebGPUImageSlice.getRenderable(),a=r.getMapper();if(e.getMTime()>n||t.renderable.getMTime()>n||r.getProperty().getMTime()>n){var o=a.getInputData(),i=t.WebGPURenderer.getStabilizedCenterByReference();m(md),T(md,md,i);var s=r.getMatrix();v(vd,s),h(vd,vd),x(md,vd,md);var c=o.getWorldToIndex();x(md,c,md),h(hd,md),A(vd,[.5,.5,.5]),x(md,vd,md);var u=o.getDimensions();m(vd),S(vd,vd,[1/u[0],1/u[1],1/u[2]]),x(md,vd,md),t.UBO.setArray("SCTCMatrix",md);var l=t.currentInput.getExtent(),d=t.renderable.getClosestIJKAxis().ijkMode,p=t.renderable.getSlice();d!==t.renderable.getSlicingMode()&&(p=t.renderable.getSliceAtPosition(p));var f=2,g=0,y=1;d===fd.I?(f=0,g=1,y=2):d===fd.J&&(f=1,g=2,y=0),yd[f]=p,yd[g]=l[2*g]-.5,yd[y]=l[2*y]-.5,yd[3]=1,us(yd,yd,hd),t.UBO.setArray("Origin",yd),bd[f]=p,bd[g]=l[2*g+1]+.5,bd[y]=l[2*y]-.5,bd[3]=1,us(bd,bd,hd),cs(bd,bd,yd),bd[3]=1,t.UBO.setArray("Axis1",bd),bd[f]=p,bd[g]=l[2*g]-.5,bd[y]=l[2*y+1]+.5,bd[3]=1,us(bd,bd,hd),cs(bd,bd,yd),bd[3]=1,t.UBO.setArray("Axis2",bd);for(var b=[1,1,1,1],P=[0,0,0,0],w=t.textureViews[0],C=w.getTexture().getScale(),O=w.getTexture().getNumberOfComponents(),I=0;I<O;I++){var M=r.getProperty().getColorWindow(),R=r.getProperty().getColorLevel(),E=r.getProperty().getRGBTransferFunction(0);if(E){var D=E.getRange();M=D[1]-D[0],R=.5*(D[1]+D[0])}b[I]=C/M,P[I]=-R/M+.5}t.UBO.setArray("cScale",b),t.UBO.setArray("cShift",P),t.UBO.sendIfNeeded(t.device)}},e.updateLUTImage=function(){var n=t.WebGPUImageSlice.getRenderable().getProperty();e.getTextureViews()[0].getTexture().getNumberOfComponents();var r=function(e,t,n){if(t.apply(e)){var r=e.getIndependentComponents();return"".concat(e.getMTime(),"-").concat(r,"-").concat(1)}return"0"}(n,n.getRGBTransferFunction);if(t.colorTextureString!==r){t.numRows=1;var a=new Uint8Array(2*t.numRows*t.rowLength*4),o=n.getRGBTransferFunction();if(o)for(var i=new Float32Array(3*t.rowLength),s=0;s<1;s++){var c=(o=n.getRGBTransferFunction(s)).getRange();o.getTable(c[0],c[1],t.rowLength,i,1);for(var u=0;u<t.rowLength;u++){var l=s*t.rowLength*8+4*u;a[l]=255*i[3*u],a[l+1]=255*i[3*u+1],a[l+2]=255*i[3*u+2],a[l+3]=255;for(var d=0;d<4;d++)a[l+4*t.rowLength+d]=a[l+d]}}else for(var p=0;p<t.rowLength;++p){var f=255*p/(t.rowLength-1);a[4*p]=f,a[4*p+1]=f,a[4*p+2]=f,a[4*p+3]=255;for(var g=0;g<4;g++)a[4*p+4*t.rowLength+g]=a[4*p+g]}var m={nativeArray:a,width:t.rowLength,height:2*t.numRows,depth:1,format:"rgba8unorm"},v=t.device.getTextureManager().getTexture(m).createView("tfunTexture");t.textureViews[1]=v,t.colorTextureString=r}};var n=e.updateBuffers;e.updateBuffers=function(){n();var r=t.device.getTextureManager().getTextureForImageData(t.currentInput),a=t.textureViews;if(!a[0]||a[0].getTexture()!==r){var o=r.createView("imgTexture");a[0]=o}e.updateLUTImage(),e.updateUBO();var i=t.WebGPUImageSlice.getRenderable().getProperty().getInterpolationType()===bc.NEAREST?"nearest":"linear";t.clampSampler&&i===t.clampSampler.getOptions().minFilter||(t.clampSampler=pd.newInstance({label:"clampSampler"}),t.clampSampler.create(t.device,{minFilter:i,magFilter:i}),t.additionalBindables=[t.clampSampler])};var r=e.getShaderReplacements();e.replaceShaderPosition=function(e,n,r){var a=n.getShaderDescription("vertex");a.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var o=a.getCode(),i=["var pos: vec4<f32> = mapperUBO.Origin +","   (vertexBC.x * 0.5 + 0.5) * mapperUBO.Axis1 + (vertexBC.y * 0.5 + 0.5) * mapperUBO.Axis2;","pos.w = 1.0;"];2===t.dimensions?i.push("var tcoord : vec2<f32> = (mapperUBO.SCTCMatrix * pos).xy;"):i.push("var tcoord : vec3<f32> = (mapperUBO.SCTCMatrix * pos).xyz;"),i.push("output.tcoordVS = tcoord;","output.Position = rendererUBO.SCPCMatrix * pos;"),o=Cu.substitute(o,"//VTK::Position::Impl",i).result,a.setCode(o)},r.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderTCoord=function(e,n,r){var a=n.getShaderDescription("vertex");2===t.dimensions?a.addOutput("vec2<f32>","tcoordVS"):a.addOutput("vec3<f32>","tcoordVS")},r.set("replaceShaderTCoord",e.replaceShaderTCoord),e.replaceShaderImage=function(e,n,r){var a=n.getShaderDescription("fragment"),o=a.getCode();t.dimensions,o=Cu.substitute(o,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result,o=Cu.substitute(o,"//VTK::Image::Sample",["    var coord: vec2<f32> =","      vec2<f32>(computedColor.r * mapperUBO.cScale.r + mapperUBO.cShift.r, 0.5);","    computedColor = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);"]).result,a.setCode(o)},r.set("replaceShaderImage",e.replaceShaderImage)}var Td={rowLength:1024};var Sd=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Td,n),tl.extend(e,t,n),e.setFragmentShaderTemplate(gd),t.UBO=td.newInstance({label:"mapperUBO"}),t.UBO.addEntry("SCTCMatrix","mat4x4<f32>"),t.UBO.addEntry("Origin","vec4<f32>"),t.UBO.addEntry("Axis2","vec4<f32>"),t.UBO.addEntry("Axis1","vec4<f32>"),t.UBO.addEntry("cScale","vec4<f32>"),t.UBO.addEntry("cShift","vec4<f32>"),t.lutBuildTime={},at(t.lutBuildTime,{mtime:0}),t.imagemat=m(new Float64Array(16)),t.imagematinv=m(new Float64Array(16)),t.VBOBuildTime={},at(t.VBOBuildTime),xd(e,t)}),"vtkWebGPUImageMapper");function Pd(e,t){t.classHierarchy.push("vtkWebGPUImageSlice"),e.buildPass=function(n){if(t.renderable&&t.renderable.getVisibility()&&n){if(!t.renderable)return;t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.getBufferShift=function(n){return e.getKeyMatrices(n),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var n=t.renderable.getMatrix(),r=e.getStabilizedCenterByReference();t.bufferShift[0]=n[3]-r[0],t.bufferShift[1]=n[7]-r[1],t.bufferShift[2]=n[11]-r[2],v(t.keyMatrices.bcwc,n),t.renderable.getIsIdentity()?m(t.keyMatrices.normalMatrix):(p(t.keyMatrices.normalMatrix,t.keyMatrices.bcwc),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,h(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),v(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),T(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),T(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]),t.keyMatricesTime.modified()}return t.keyMatrices}}iu("vtkImageMapper",Sd);var wd={bufferShift:void 0,keyMatrixTime:null,keyMatrices:null,propID:void 0};var Cd=yt((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wd,n),Et.extend(e,t,n),t.keyMatricesTime={},at(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},t.keyMatrixTime={},at(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:m(new Float64Array(16))},t.bufferShift=[0,0,0,0],it(e,t,["propID","keyMatricesTime"]),Pd(e,t)}),"vtkWebGPUImageSlice");function Od(e,t){t.classHierarchy.push("vtkWebGPUVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),t.renderable.getMapper().update())},e.queryPass=function(n,r){if(n){if(!t.renderable||!t.renderable.getVisibility())return;var a=t.renderable.getMapper().getBounds();if(!a||6!==a.length||a[0]>a[1])return;r.addVolume(e)}};var n=new Float64Array(3),r=new Float64Array(3);e.getBoundingCubePoints=function(e,a){var o=t.renderable.getMapper().getInputData();if(o)for(var i=o.getExtent(),s=t.renderable.getMatrix(),c=0,u=4;u<6;u++){n[2]=i[u];for(var l=2;l<4;l++){n[1]=i[l];for(var d=0;d<2;d++){n[0]=i[d],o.indexToWorld(n,r);var p=a+3*c;e[p++]=s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3],e[p++]=s[4]*r[0]+s[5]*r[1]+s[6]*r[2]+s[7],e[p++]=s[8]*r[0]+s[9]*r[1]+s[10]*r[2]+s[11],c++}}}},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var n=t.renderable.getMatrix(),r=e.getStabilizedCenterByReference();v(t.keyMatrices.bcwc,n),T(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]),t.keyMatricesTime.modified()}return t.keyMatrices}}iu("vtkImageSlice",Cd);var Ad={propID:void 0,keyMatricesTime:null};var Id=Ot.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ad,n),Et.extend(e,t,n),t.keyMatricesTime={},Ot.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={bcwc:new Float64Array(16),bcsc:new Float64Array(16)},Ot.get(e,t,["propID","keyMatricesTime"]),Od(e,t)}),"vtkWebGPUVolume");function Md(e,t){t.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),e.opaquePass=function(n,r){t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent();var a=t.WebGPURenderer.getAspectRatio(),o=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,i=t.WebGPURenderer.getTiledSizeAndOrigin();t.renderable.getUseZValues(),t.renderable.invokeCallback(t.renderable.getInputData(),o,a,i,null)}}iu("vtkVolume",Id);var Rd={};var Ed=Ot.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rd,n),Et.extend(e,t,n),Md(e,t)}),"vtkWebGPUPixelSpaceCallbackMapper");iu("vtkPixelSpaceCallbackMapper",Ed);var Dd=Uint8Array,Ld=Uint16Array,Bd=Uint32Array,Nd=new Dd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kd=new Dd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vd=new Dd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_d=function(e,t){for(var n=new Ld(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new Bd(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return[n,a]},Fd=_d(Nd,2),Gd=Fd[0],Ud=Fd[1];Gd[28]=258,Ud[258]=28;for(var jd=_d(kd,0),zd=jd[0],Wd=(jd[1],new Ld(32768)),Hd=0;Hd<32768;++Hd){var Kd=(43690&Hd)>>>1|(21845&Hd)<<1;Kd=(61680&(Kd=(52428&Kd)>>>2|(13107&Kd)<<2))>>>4|(3855&Kd)<<4,Wd[Hd]=((65280&Kd)>>>8|(255&Kd)<<8)>>>1}var Xd=function(e,t,n){for(var r=e.length,a=0,o=new Ld(t);a<r;++a)e[a]&&++o[e[a]-1];var i,s=new Ld(t);for(a=0;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new Ld(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],l=t-e[a],d=s[e[a]-1]++<<l,p=d|(1<<l)-1;d<=p;++d)i[Wd[d]>>>c]=u}else for(i=new Ld(r),a=0;a<r;++a)e[a]&&(i[a]=Wd[s[e[a]-1]++]>>>15-e[a]);return i},qd=new Dd(288);for(Hd=0;Hd<144;++Hd)qd[Hd]=8;for(Hd=144;Hd<256;++Hd)qd[Hd]=9;for(Hd=256;Hd<280;++Hd)qd[Hd]=7;for(Hd=280;Hd<288;++Hd)qd[Hd]=8;var Yd=new Dd(32);for(Hd=0;Hd<32;++Hd)Yd[Hd]=5;var Zd=Xd(qd,9,1),Qd=Xd(Yd,5,1),Jd=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},$d=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},ep=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},tp=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(2==e.BYTES_PER_ELEMENT?Ld:4==e.BYTES_PER_ELEMENT?Bd:Dd)(n-t);return r.set(e.subarray(t,n)),r},np=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rp=function(e,t,n){var r=new Error(t||np[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,rp),!n)throw r;return r},ap=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new Dd(0);var a=!t||n,o=!n||n.i;n||(n={}),t||(t=new Dd(3*r));var i,s=function(e){var n=t.length;if(e>n){var r=new Dd(Math.max(2*n,e));r.set(t),t=r}},c=n.f||0,u=n.p||0,l=n.b||0,d=n.l,p=n.d,f=n.m,g=n.n,m=8*r;do{if(!d){c=$d(e,u,1);var v=$d(e,u+1,3);if(u+=3,!v){var h=e[(i=u,(I=4+((i+7)/8|0))-4)]|e[I-3]<<8,y=I+h;if(y>r){o&&rp(0);break}a&&s(l+h),t.set(e.subarray(I,y),l),n.b=l+=h,n.p=u=8*y,n.f=c;continue}if(1==v)d=Zd,p=Qd,f=9,g=5;else if(2==v){var b=$d(e,u,31)+257,x=$d(e,u+10,15)+4,T=b+$d(e,u+5,31)+1;u+=14;for(var S=new Dd(T),P=new Dd(19),w=0;w<x;++w)P[Vd[w]]=$d(e,u+3*w,7);u+=3*x;var C=Jd(P),O=(1<<C)-1,A=Xd(P,C,1);for(w=0;w<T;){var I,M=A[$d(e,u,O)];if(u+=15&M,(I=M>>>4)<16)S[w++]=I;else{var R=0,E=0;for(16==I?(E=3+$d(e,u,3),u+=2,R=S[w-1]):17==I?(E=3+$d(e,u,7),u+=3):18==I&&(E=11+$d(e,u,127),u+=7);E--;)S[w++]=R}}var D=S.subarray(0,b),L=S.subarray(b);f=Jd(D),g=Jd(L),d=Xd(D,f,1),p=Xd(L,g,1)}else rp(1);if(u>m){o&&rp(0);break}}a&&s(l+131072);for(var B=(1<<f)-1,N=(1<<g)-1,k=u;;k=u){var V=(R=d[ep(e,u)&B])>>>4;if((u+=15&R)>m){o&&rp(0);break}if(R||rp(2),V<256)t[l++]=V;else{if(256==V){k=u,d=null;break}var _=V-254;if(V>264){var F=Nd[w=V-257];_=$d(e,u,(1<<F)-1)+Gd[w],u+=F}var G=p[ep(e,u)&N],U=G>>>4;if(G||rp(3),u+=15&G,L=zd[U],U>3&&(F=kd[U],L+=ep(e,u)&(1<<F)-1,u+=F),u>m){o&&rp(0);break}a&&s(l+131072);for(var j=l+_;l<j;l+=4)t[l]=t[l-L],t[l+1]=t[l+1-L],t[l+2]=t[l+2-L],t[l+3]=t[l+3-L];l=j}}n.l=d,n.p=k,n.b=l,n.f=c,d&&(c=1,n.m=f,n.d=p,n.n=g)}while(!c);return l==t.length?t:tp(t,0,l)},op=new Dd(0);function ip(e,t){return ap(e.subarray(function(e){31==e[0]&&139==e[1]&&8==e[2]||rp(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)}(e),-8),t||new Dd((r=(n=e).length,(n[r-4]|n[r-3]<<8|n[r-2]<<16|n[r-1]<<24)>>>0)));var n,r}function sp(e,t){return ap(((8!=(15&(n=e)[0])||n[0]>>>4>7||(n[0]<<8|n[1])%31)&&rp(6,"invalid zlib data"),32&n[1]&&rp(6,"invalid zlib data: preset dictionaries not supported"),e.subarray(2,-4)),t);var n}function cp(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?ip(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?function(e,t){return ap(e,t)}(e,t):sp(e,t)}var up="undefined"!=typeof TextDecoder&&new TextDecoder;try{up.decode(op,{stream:!0})}catch(e){}function lp(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(up)return up.decode(e);var a=function(e){for(var t="",n=0;;){var r=e[n++],a=(r>127)+(r>223)+(r>239);if(n+a>e.length)return[t,tp(e,n-1)];a?3==a?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&a?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}}(e),o=a[0];return a[1].length&&rp(8),o}function dp(){var e=new ArrayBuffer(4),t=new Uint8Array(e),n=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===n[0]?"LittleEndian":2712847316===n[0]?"BigEndian":null}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var pp=dp(),fp=function(e,t){if(!(t<2))for(var n=new Int8Array(e),r=n.length,a=[],o=0;o<r;o+=t){for(var i=0;i<t;i++)a.push(n[o+i]);for(var s=0;s<t;s++)n[o+s]=a.pop()}},gp={};function mp(e){return!!gp[e]}function vp(e,t){gp[e]=t}var hp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gp[e](t)},yp=Ot.vtkErrorMacro,bp=Ot.vtkDebugMacro,xp=0;function Tp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest;return r.open(e,t,!0),n.headers&&Object.entries(n.headers).forEach((function(e){var t=fe(e,2),n=t[0],a=t[1];return r.setRequestHeader(n,a)})),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}var Sp={fetchArray:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise((function(a,o){var i=Tp("GET",n.ref.url?n.ref.url:[t,n.ref.basepath,r.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/"),r);i.onreadystatechange=function(t){1===i.readyState&&(n.ref.pending=!0,1==++xp&&null!=e&&e.invokeBusy&&e.invokeBusy(!0)),4===i.readyState&&(n.ref.pending=!1,200===i.status||0===i.status?(n.buffer=i.response,r.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=lp(cp(new Uint8Array(n.buffer))):n.buffer=cp(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(pp!==n.ref.encode&&pp&&(bp("Swap bytes of ".concat(n.name)),fp(n.buffer,Hn[n.dataType])),n.values=Ot.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&yp("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,0==--xp&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),null!=e&&e.modified&&e.modified(),a(n)):o({xhr:i,e:t}))},i.responseType=r.compression||"string"!==n.dataType?"arraybuffer":"text",i.send()})):Promise.resolve(n)},fetchJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,a){var o=Tp("GET",t,n);o.onreadystatechange=function(t){1===o.readyState&&1==++xp&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0==--xp&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?n.compression?r(JSON.parse(lp(cp(new Uint8Array(o.response))))):r(JSON.parse(o.responseText)):a({xhr:o,e:t}))},o.responseType=n.compression?"arraybuffer":"text",o.send()}))},fetchText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression&&"gz"!==n.compression&&(yp("Supported algorithms are: [gz]"),yp("Unkown compression algorithm: ".concat(n.compression))),new Promise((function(r,a){var o=Tp("GET",t,n);o.onreadystatechange=function(t){1===o.readyState&&1==++xp&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0==--xp&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?n.compression?r(lp(cp(new Uint8Array(o.response)))):r(o.responseText):a({xhr:o,e:t}))},o.responseType=n.compression?"arraybuffer":"text",o.send()}))},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&t.compression&&"gz"!==t.compression&&(yp("Supported algorithms are: [gz]"),yp("Unkown compression algorithm: ".concat(t.compression))),new Promise((function(n,r){var a=Tp("GET",e,t);a.onreadystatechange=function(e){4===a.readyState&&(200===a.status||0===a.status?t.compression?n(cp(new Uint8Array(a.response)).buffer):n(a.response):r({xhr:a,e:e}))},a.responseType="arraybuffer",a.send()}))},fetchImage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(e,r){var a=new Image;n.crossOrigin&&(a.crossOrigin=n.crossOrigin),a.onload=function(){return e(a)},a.onerror=r,a.src=t}))}};function Pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}vp("http",(function(e){return Sp}));var wp=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function Cp(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Op(e){return(null==e?void 0:e.length)>=6&&e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function Ap(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ip(e){return Ap(e,wp)}function Mp(e,t,n,r){var a=fe(e,6),o=a[0],i=a[1],s=a[2],c=a[3],u=a[4],l=a[5];return e[0]=o<t?o:t,e[1]=i>t?i:t,e[2]=s<n?s:n,e[3]=c>n?c:n,e[4]=u<r?u:r,e[5]=l>r?l:r,e}function Rp(e,t){if(0===t.length)return e;if(Array.isArray(t[0]))for(var n=0;n<t.length;++n)Mp.apply(void 0,[e].concat(ve(t[n])));else for(var r=0;r<t.length;r+=3)Mp.apply(void 0,[e].concat(ve(t.slice(r,r+3))));return e}function Ep(e,t,n,r,a,o,i){var s=fe(e,6),c=s[0],u=s[1],l=s[2],d=s[3],p=s[4],f=s[5];return void 0===i?(e[0]=Math.min(t[0],c),e[1]=Math.max(t[1],u),e[2]=Math.min(t[2],l),e[3]=Math.max(t[3],d),e[4]=Math.min(t[4],p),e[5]=Math.max(t[5],f)):(e[0]=Math.min(t,c),e[1]=Math.max(n,u),e[2]=Math.min(r,l),e[3]=Math.max(a,d),e[4]=Math.min(o,p),e[5]=Math.max(i,f)),e}function Dp(e,t,n,r){var a=fe(e,6),o=a[0],i=a[1],s=a[2],c=a[3],u=a[4],l=a[5];return e[0]=t,e[1]=t>i?t:i,e[2]=n,e[3]=n>c?n:c,e[4]=r,e[5]=r>l?r:l,o!==t||s!==n||u!==r}function Lp(e,t,n,r){var a=fe(e,6),o=a[0],i=a[1],s=a[2],c=a[3],u=a[4],l=a[5];return e[0]=t<o?t:o,e[1]=t,e[2]=n<s?n:s,e[3]=n,e[4]=r<u?r:u,e[5]=r,i!==t||c!==n||l!==r}function Bp(e,t){return e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t,e}function Np(e,t,n,r){return!!Op(e)&&(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),n>=0?(e[2]*=n,e[3]*=n):(e[2]=n*e[3],e[3]=n*e[2]),r>=0?(e[4]*=r,e[5]*=r):(e[4]=r*e[5],e[5]=r*e[4]),!0)}function kp(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function Vp(e,t){return e[2*t+1]-e[2*t]}function _p(e){return[Vp(e,0),Vp(e,1),Vp(e,2)]}function Fp(e){return e.slice(0,2)}function Gp(e){return e.slice(2,4)}function Up(e){return e.slice(4,6)}function jp(e){var t=_p(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function zp(e){if(Op(e)){var t=_p(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function Wp(e){return[e[0],e[2],e[4]]}function Hp(e){return[e[1],e[3],e[5]]}function Kp(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Xp(e,t){for(var n=0,r=0;r<2;r++)for(var a=2;a<4;a++)for(var o=4;o<6;o++)t[n++]=[e[r],e[a],e[o]];return t}function qp(e,t,n){return t[0]=e[0],t[1]=e[2],t[2]=e[4],n[0]=e[1],n[1]=e[3],n[2]=e[5],t}function Yp(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Xp(e,[]),a=0;a<r.length;++a)Cn(r[a],r[a],t);return Ip(n),Rp(n,r)}function Zp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=.5*(e[1]-e[0]),t[1]=.5*(e[3]-e[2]),t[2]=.5*(e[5]-e[4]),t}function Qp(e,t,n,r){for(var a=[].concat(wp),o=e.getData(),i=0;i<o.length;i+=3){var s=[o[i],o[i+1],o[i+2]],c=Cr(s,t);a[0]=Math.min(c,a[0]),a[1]=Math.max(c,a[1]);var u=Cr(s,n);a[2]=Math.min(u,a[2]),a[3]=Math.max(u,a[3]);var l=Cr(s,r);a[4]=Math.min(l,a[4]),a[5]=Math.max(l,a[5])}return a}function Jp(e,t,n,r,a){for(var o=!0,i=[],s=0,c=[],u=[0,0,0],l=0;l<3;l++)t[l]<e[2*l]?(i[l]=1,u[l]=e[2*l],o=!1):t[l]>e[2*l+1]?(i[l]=0,u[l]=e[2*l+1],o=!1):i[l]=2;if(o)return r[0]=t[0],r[1]=t[1],r[2]=t[2],a[0]=0,1;for(var d=0;d<3;d++)2!==i[d]&&0!==n[d]?c[d]=(u[d]-t[d])/n[d]:c[d]=-1;for(var p=0;p<3;p++)c[s]<c[p]&&(s=p);if(c[s]>1||c[s]<0)return 0;a[0]=c[s];for(var f=0;f<3;f++)if(s!==f){if(r[f]=t[f]+c[s]*n[f],r[f]<e[2*f]||r[f]>e[2*f+1])return 0}else r[f]=u[f];return 1}function $p(e,t,n){for(var r=[],a=0,o=1,i=1,s=4;s<=5;++s){r[2]=e[s];for(var c=2;c<=3;++c){r[1]=e[c];for(var u=0;u<=1;++u)if(r[0]=e[u],a=wi.evaluate(n,t,r),i&&(o=a>=0?1:-1,i=0),0===a||o>0&&a<0||o<0&&a>0)return 1}}return 0}function ef(e,t){if(!Op(e)||!Op(t))return!1;for(var n,r=[0,0,0,0,0,0],a=0;a<3;a++)if(n=!1,t[2*a]>=e[2*a]&&t[2*a]<=e[2*a+1]?(n=!0,r[2*a]=t[2*a]):e[2*a]>=t[2*a]&&e[2*a]<=t[2*a+1]&&(n=!0,r[2*a]=e[2*a]),t[2*a+1]>=e[2*a]&&t[2*a+1]<=e[2*a+1]?(n=!0,r[2*a+1]=t[2*a+1]):e[2*a+1]>=t[2*a]&&e[2*a+1]<=t[2*a+1]&&(n=!0,r[2*a+1]=e[2*a+1]),!n)return!1;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],!0}function tf(e,t){if(!Op(e)||!Op(t))return!1;for(var n=0;n<3;n++)if(!(t[2*n]>=e[2*n]&&t[2*n]<=e[2*n+1]||e[2*n]>=t[2*n]&&e[2*n]<=t[2*n+1]||t[2*n+1]>=e[2*n]&&t[2*n+1]<=e[2*n+1]||e[2*n+1]>=t[2*n]&&e[2*n+1]<=t[2*n+1]))return!1;return!0}function nf(e,t,n,r){return!(t<e[0]||t>e[1]||n<e[2]||n>e[3]||r<e[4]||r>e[5])}function rf(e,t,n){for(var r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],o=0,i=0;i<2;i++)for(var s=2;s<4;s++)for(var c=4;c<6;c++){var u=[e[i],e[s],e[c]];a[o++]=wi.evaluate(n,t,u)}for(var l=2;l--&&!(Kp(a[r[l][0]],a[r[l][4]])&&Kp(a[r[l][1]],a[r[l][5]])&&Kp(a[r[l][2]],a[r[l][6]])&&Kp(a[r[l][3]],a[r[l][7]])););if(l<0)return!1;for(var d=Math.sign(n[l]),p=Math.abs((e[2*l+1]-e[2*l])*n[l]),f=d>0?1:0,g=0;g<4;g++)if(0!==p){var m=Math.abs(a[r[l][g]])/p;d>0&&m<f&&(f=m),d<0&&m>f&&(f=m)}var v=(1-f)*e[2*l]+f*e[2*l+1];return d>0?e[2*l]=v:e[2*l+1]=v,!0}var af=function(){function e(t){Ae(this,e),this.bounds=t,this.bounds||(this.bounds=new Float64Array(wp))}return Me(e,[{key:"getBounds",value:function(){return this.bounds}},{key:"equals",value:function(e){return Cp(this.bounds,e)}},{key:"isValid",value:function(){return Op(this.bounds)}},{key:"setBounds",value:function(e){return Ap(this.bounds,e)}},{key:"reset",value:function(){return Ip(this.bounds)}},{key:"addPoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mp.apply(void 0,[this.bounds].concat(t))}},{key:"addPoints",value:function(e){return Rp(this.bounds,e)}},{key:"addBounds",value:function(e,t,n,r,a,o){return Ep(this.bounds,e,t,n,r,a,o)}},{key:"setMinPoint",value:function(e,t,n){return Dp(this.bounds,e,t,n)}},{key:"setMaxPoint",value:function(e,t,n){return Lp(this.bounds,e,t,n)}},{key:"inflate",value:function(e){return Bp(this.bounds,e)}},{key:"scale",value:function(e,t,n){return Np(this.bounds,e,t,n)}},{key:"getCenter",value:function(){return kp(this.bounds)}},{key:"getLength",value:function(e){return Vp(this.bounds,e)}},{key:"getLengths",value:function(){return _p(this.bounds)}},{key:"getMaxLength",value:function(){return jp(this.bounds)}},{key:"getDiagonalLength",value:function(){return zp(this.bounds)}},{key:"getMinPoint",value:function(){return Wp(this.bounds)}},{key:"getMaxPoint",value:function(){return Hp(this.bounds)}},{key:"getXRange",value:function(){return Fp(this.bounds)}},{key:"getYRange",value:function(){return Gp(this.bounds)}},{key:"getZRange",value:function(){return Up(this.bounds)}},{key:"getCorners",value:function(e){return Xp(this.bounds,e)}},{key:"computeCornerPoints",value:function(e,t){return qp(this.bounds,e,t)}},{key:"computeLocalBounds",value:function(e,t,n){return Qp(this.bounds,e,t,n)}},{key:"transformBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Yp(this.bounds,e,t)}},{key:"computeScale3",value:function(e){return Zp(this.bounds,e)}},{key:"cutWithPlane",value:function(e,t){return rf(this.bounds,e,t)}},{key:"intersectBox",value:function(e,t,n,r){return Jp(this.bounds,e,t,n,r)}},{key:"intersectPlane",value:function(e,t){return $p(this.bounds,e,t)}},{key:"intersect",value:function(e){return ef(this.bounds,e)}},{key:"intersects",value:function(e){return tf(this.bounds,e)}},{key:"containsPoint",value:function(e,t,n){return nf(this.bounds,e,t,n)}},{key:"contains",value:function(e){return tf(this.bounds,e)}}]),e}(),of=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:function(e){var t=e&&e.bounds;return new af(t)}},{equals:Cp,isValid:Op,setBounds:Ap,reset:Ip,addPoint:Mp,addPoints:Rp,addBounds:Ep,setMinPoint:Dp,setMaxPoint:Lp,inflate:Bp,scale:Np,scaleAboutCenter:function(e,t,n,r){if(!Op(e))return!1;var a=kp(e);return e[0]-=a[0],e[1]-=a[0],e[2]-=a[1],e[3]-=a[1],e[4]-=a[2],e[5]-=a[2],Np(e,t,n,r),e[0]+=a[0],e[1]+=a[0],e[2]+=a[1],e[3]+=a[1],e[4]+=a[2],e[5]+=a[2],!0},getCenter:kp,getLength:Vp,getLengths:_p,getMaxLength:jp,getDiagonalLength:zp,getMinPoint:Wp,getMaxPoint:Hp,getXRange:Fp,getYRange:Gp,getZRange:Up,getCorners:Xp,computeCornerPoints:qp,computeLocalBounds:Qp,transformBounds:Yp,computeScale3:Zp,cutWithPlane:rf,intersectBox:Jp,intersectPlane:$p,intersect:ef,intersects:tf,containsPoint:nf,contains:function(e,t){return!!tf(e,t)&&!!nf.apply(void 0,[e].concat(ve(Wp(t))))&&!!nf.apply(void 0,[e].concat(ve(Hp(t))))},INIT_BOUNDS:wp}),sf={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9},cf={StructuredType:sf};function uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var lf=cf.StructuredType,df=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uf(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getDataDescriptionFromExtent:function(e){for(var t=0,n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?lf.EMPTY:3===t?lf.XYZ_GRID:2===t?e[0]===e[1]?lf.YZ_PLANE:e[2]===e[3]?lf.XZ_PLANE:lf.XY_PLANE:1===t?e[0]<e[1]?lf.X_LINE:e[2]<e[3]?lf.Y_LINE:lf.Z_LINE:lf.SINGLE_POINT}},cf),pf=Ot.vtkErrorMacro;function ff(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return pf("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=1===r.length?r[0]:r;if(6!==o.length)return!1;var i=t.extent.some((function(e,t){return e!==o[t]}));return i&&(t.extent=o.slice(),t.dataDescription=df.getDataDescriptionFromExtent(t.extent),e.modified()),i},e.setDimensions=function(){var n,r,a;if(t.deleted)pf("instance deleted - cannot call any method");else{if(1===arguments.length){var o=arguments.length<=0?void 0:arguments[0];n=o[0],r=o[1],a=o[2]}else{if(3!==arguments.length)return void pf("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,r-1,0,a-1)}},e.getDimensions=function(){return[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1]},e.getNumberOfCells=function(){for(var t=e.getDimensions(),n=1,r=0;r<3;r++){if(0===t[r])return 0;t[r]>1&&(n*=t[r]-1)}return n},e.getNumberOfPoints=function(){var t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=function(n){var r=e.getDimensions();if(0===r[0]||0===r[1]||0===r[2])return pf("Requesting a point from an empty image."),null;var a=new Float64Array(3);switch(t.dataDescription){case sf.EMPTY:return null;case sf.SINGLE_POINT:break;case sf.X_LINE:a[0]=n;break;case sf.Y_LINE:a[1]=n;break;case sf.Z_LINE:a[2]=n;break;case sf.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case sf.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case sf.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case sf.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:pf("Invalid dataDescription")}var o=[0,0,0];return e.indexToWorld(a,o),o},e.getBounds=function(){return e.extentToBounds(e.getSpatialExtent())},e.extentToBounds=function(e){return of.transformBounds(e,t.indexToWorld)},e.getSpatialExtent=function(){return of.inflate(ve(t.extent),.5)},e.computeTransforms=function(){A(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],S(t.indexToWorld,t.indexToWorld,t.spacing),h(t.worldToIndex,t.indexToWorld)},e.indexToWorld=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Cn(n,e,t.indexToWorld),n},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Cn(n,e,t.worldToIndex),n},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return of.transformBounds(e,t.indexToWorld,n)},e.worldToIndexBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return of.transformBounds(e,t.worldToIndex,n)},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=function(){return of.getCenter(e.getBounds())},e.computeHistogram=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[0,0,0,0,0,0];e.worldToIndexBounds(t,r);var a=[0,0,0],o=[0,0,0];of.computeCornerPoints(r,a,o),zr(a,a),zr(o,o);var i=e.getDimensions();la(a,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],a),la(o,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],o);for(var s=i[0],c=i[0]*i[1],u=e.getPointData().getScalars().getData(),l=-1/0,d=1/0,p=0,f=0,g=0,m=a[2];m<=o[2];m++)for(var v=a[1];v<=o[1];v++)for(var h=a[0]+v*s+m*c,y=a[0];y<=o[0];y++){if(!n||n([y,v,m],r)){var b=u[h];b>l&&(l=b),b<d&&(d=b),p+=b*b,f+=b,g+=1}++h}var x=g>0?f/g:0,T=g?Math.abs(p/g-x*x):0,S=Math.sqrt(T);return{minimum:d,maximum:l,average:x,variance:T,sigma:S,count:g}},e.computeIncrements=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=t,a=0;a<3;++a)n[a]=r,r*=e[2*a+1]-e[2*a]+1;return n},e.computeOffsetIndex=function(t){var n=fe(t,3),r=n[0],a=n[1],o=n[2],i=e.getExtent(),s=e.getPointData().getScalars().getNumberOfComponents(),c=e.computeIncrements(i,s);return Math.floor((Math.round(r)-i[0])*c[0]+(Math.round(a)-i[2])*c[1]+(Math.round(o)-i[4])*c[2])},e.getOffsetIndexFromWorld=function(t){for(var n=e.getExtent(),r=e.worldToIndex(t),a=0;a<3;++a)if(r[a]<n[2*a]||r[a]>n[2*a+1])return pf("GetScalarPointer: Pixel ".concat(r," is not in memory. Current extent = ").concat(n)),NaN;return e.computeOffsetIndex(r)},e.getScalarValueFromWorld=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return pf("GetScalarPointer: Scalar Component ".concat(n," is not within bounds. Current Scalar numberOfComponents: ").concat(r)),NaN;var a=e.getOffsetIndexFromWorld(t);return Number.isNaN(a)?a:e.getPointData().getScalars().getComponent(a,n)}}var gf={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:sf.EMPTY};function mf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gf,n),oi.extend(e,t,n),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=ce(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),Ot.get(e,t,["indexToWorld","worldToIndex"]),Ot.setGetArray(e,t,["origin","spacing"],3),Ot.setGetArray(e,t,["direction"],9),Ot.getArray(e,t,["extent"],6),ff(e,t)}var vf={newInstance:Ot.newInstance(mf,"vtkImageData"),extend:mf};function hf(e,t){t.classHierarchy.push("vtkStringArray"),e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,r,a){a!==t.values[n*t.numberOfComponents+r]&&(t.values[n*t.numberOfComponents+r]=a,e.modified())},e.getData=function(){return t.values},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.numberOfComponents||1;n.length&&(n.length=r);for(var a=e*r,o=0;o<r;o++)n[o]=t.values[a+o];return n},e.getTupleLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return xf({name:t.name,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkStringArray".concat(e.getMTime())),t.name},e.setData=function(n,r){t.values=n,t.size=n.length,r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.modified()}}var yf={name:"",numberOfComponents:1,size:0,dataType:"string"};function bf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,yf,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=ve(t.values)):t.values=[],t.values&&(t.size=t.values.length),Ot.obj(e,t),Ot.set(e,t,["name"]),hf(e,t)}var xf=Ot.newInstance(bf,"vtkStringArray"),Tf={newInstance:xf,extend:bf},Sf=Ot.vtkErrorMacro,Pf=Ot.vtkDebugMacro,wf=function(){return Sf("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."))},Cf=0;function Of(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest;return r.open(e,t,!0),n.headers&&Object.entries(n.headers).forEach((function(e){var t=fe(e,2),n=t[0],a=t[1];return r.setRequestHeader(n,a)})),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}var Af={fetchArray:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r&&r.compression?wf():n.ref&&!n.ref.pending?new Promise((function(a,o){var i=Of("GET",[t,n.ref.basepath,n.ref.id].join("/"),r);i.onreadystatechange=function(t){1===i.readyState&&(n.ref.pending=!0,1==++Cf&&null!=e&&e.invokeBusy&&e.invokeBusy(!0)),4===i.readyState&&(n.ref.pending=!1,200===i.status||0===i.status?(n.buffer=i.response,"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(pp!==n.ref.encode&&pp&&(Pf("Swap bytes of ".concat(n.name)),fp(n.buffer,Hn[n.dataType])),n.values=Ot.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&Sf("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,0==--Cf&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),null!=e&&e.modified&&e.modified(),a(n)):o({xhr:i,e:t}))},i.responseType="string"!==n.dataType?"arraybuffer":"text",i.send()})):Promise.resolve(n)},fetchJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression?wf():new Promise((function(r,a){var o=Of("GET",t,n);o.onreadystatechange=function(t){1===o.readyState&&1==++Cf&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0==--Cf&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?r(JSON.parse(o.responseText)):a({xhr:o,e:t}))},o.responseType="text",o.send()}))},fetchText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression?wf():new Promise((function(r,a){var o=Of("GET",t,n);o.onreadystatechange=function(t){1===o.readyState&&1==++Cf&&null!=e&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0==--Cf&&null!=e&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?r(o.responseText):a({xhr:o,e:t}))},o.responseType="text",o.send()}))},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var a=Of("GET",e,t);a.onreadystatechange=function(e){4===a.readyState&&(200===a.status||0===a.status?n(a.response):r({xhr:a,e:e}))},a.responseType="arraybuffer",a.send()}))},fetchImage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(e,r){var a=new Image;n.crossOrigin&&(a.crossOrigin=n.crossOrigin),a.onload=function(){return e(a)},a.onerror=r,a.src=t}))}};mp("http")||vp("http",(function(e){return Af}));var If=["pointData","cellData","fieldData"],Mf={vtkDataArray:Ba,vtkStringArray:Tf},Rf={},Ef={vtkPolyData:function(e){var t=[];return t.push(e.points),["verts","lines","polys","strips"].forEach((function(n){e[n]&&t.push(e[n])})),t},vtkImageData:function(e){return[]},vtkUnstructuredGrid:function(e){var t=[];return t.push(e.points),t.push(e.cells),t.push(e.cellTypes),t},vtkRectilinearGrid:function(e){var t=[];return t.push(e.xCoordinates),t.push(e.yCoordinates),t.push(e.zCoordinates),t}};function Df(e,t){function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(n.ref.id,"|").concat(n.vtkClass);return Rf[a]?Promise.resolve(Rf[a]).then((function(e){n!==e&&(Object.assign(n,e),delete n.ref)})):Rf[a]=t.dataAccessHelper.fetchArray(e,t.baseURL,n,r).then((function(e){return Rf[a]=e,e})),Promise.resolve(Rf[a])}t.classHierarchy.push("vtkHttpDataSetReader"),t.output[0]=Oe({vtkClass:"vtkPolyData"}),t.dataAccessHelper||(t.dataAccessHelper=hp("http")),e.updateMetadata=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"zip"===t.compression?new Promise((function(r,a){hp("http").fetchBinary(t.url).then((function(o){t.dataAccessHelper=hp("zip",{zipContent:o,callback:function(o){t.baseURL="",t.dataAccessHelper.fetchJSON(e,"index.json").then((function(t){e.parseObject(t,{loadData:n,deepCopy:!1}).then(r,a)}),(function(e){a(e)}))}})}),(function(e){a(e)}))})):new Promise((function(r,a){t.dataAccessHelper.fetchJSON(e,t.url).then((function(t){e.parseObject(t,{loadData:n,deepCopy:!1}).then(r,a)}),(function(e){a(e)}))}))},e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf("index.json")||r.fullpath){t.url=n;var a=n.split("/");a.pop(),t.baseURL=a.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.json");return t.compression=r.compression,e.updateMetadata(!!r.loadData)},e.parseObject=function(r,a){var o=a.loadData,i=a.baseUrl,s=a.deepCopy,c=void 0===s||s;i&&(t.baseURL=i);var u=c?structuredClone(r):r;return new Promise((function(r,a){!function(e,t,n,r,a,o,i){var s=t.enableArray;t.arrays=[],If.forEach((function(e){n[e]&&(n[e].arrays.map((function(e){return e.data})).forEach((function(n){t.arrays.push({name:n.name,enable:s,location:e,array:n,registration:n.ref.registration||"addArray"})})),n[e].arrays=[])}));var c=[],u=t.progressCallback,l=t.fetchGzip?"gz":null;function d(){t.dataset=Oe(n),i?e.loadData().then((function(){t.output[0]=t.dataset,a(e,t.output[0])})):(t.output[0]=t.dataset,a(e,t.output[0]))}Ef[n.vtkClass](n).forEach((function(e){c.push(r(e,{compression:l,progressCallback:u}))})),c.length?Promise.all(c).then(d,(function(e){o(e)})):d()}(e,t,u,n,r,a,o)}))},e.loadData=function(){var r=t.dataset,a=t.arrays.filter((function(e){return e.enable})).filter((function(e){return e.array.ref})).map((function(e){return e.array}));return new Promise((function(o,i){var s=function(e){i(e)};!function i(){if(a.length){var c=t.progressCallback,u=t.fetchGzip?"gz":null;n(a.pop(),{compression:u,progressCallback:c}).then(i,s)}else r&&(t.arrays.filter((function(e){return e.registration&&!e.array.ref})).forEach((function(e){var t=Mf[e.array.vtkClass].newInstance(e.array);r["get".concat(Ot.capitalize(e.location))]()[e.registration](t),delete e.registration})),r.modified(),o(e,r))}()}))},e.requestData=function(e,t){},e.enableArray=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.arrays.filter((function(t){return t.name===n&&t.location===e}));1===a.length&&(a[0].enable=r)},e.isBusy=function(){return!!t.requestCount}}var Lf={enableArray:!0,fetchGzip:!1,arrays:[],url:null,baseURL:null,requestCount:0};function Bf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lf,n),Ot.obj(e,t),Ot.get(e,t,["enableArray","fetchGzip","url","baseURL","dataAccessHelper"]),Ot.set(e,t,["dataAccessHelper","progressCallback"]),Ot.getArray(e,t,["arrays"]),Ot.algo(e,t,0,1),Ot.event(e,t,"busy"),Df(e,t),void 0===t.progressCallback&&(t.progressCallback=null)}var Nf={newInstance:Ot.newInstance(Bf,"vtkHttpDataSetReader"),extend:Bf};function kf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kf(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _f=Ot.vtkErrorMacro;function Ff(e,t){function n(n){var r=n.getProxyId?n.getProxyId():n,a=t.proxyIdMapping[r];return Object.keys(t.proxyByGroup).forEach((function(e){var n=t.proxyByGroup[e],r=n.indexOf(a);-1!==r&&n.splice(r,1)})),delete t.proxyIdMapping[r],a.gcPropertyLinks("application"),a.gcPropertyLinks("source"),a.setProxyManager(null),e.invokeProxyRegistrationChange({action:"unregister",proxyId:r,proxyName:a.getProxyName(),proxyGroup:a.getProxyGroup(),proxy:a}),a}e.setActiveSource=function(n){t.activeSource!==n&&(t.activeSourceSubscription&&(t.activeSourceSubscription.unsubscribe(),t.activeSourceSubscription=null),t.activeSource=n,n&&(t.activeSourceSubscription=n.onModified(e.modified)),e.modified(),e.invokeActiveSourceChange(n))},e.setActiveView=function(n){t.activeView!==n&&(t.activeViewSubscription&&(t.activeViewSubscription.unsubscribe(),t.activeViewSubscription=null),t.activeView=n,n&&(t.activeViewSubscription=n.onModified(e.modified)),e.modified(),e.invokeActiveViewChange(n))},e.getProxyById=function(e){return t.proxyIdMapping[e]},e.getProxyGroups=function(){return Object.keys(t.proxyByGroup)},e.getProxyInGroup=function(e){return[].concat(t.proxyByGroup[e]||[])},e.getSources=function(){return[].concat(t.proxyByGroup.Sources||[])},e.getRepresentations=function(){return[].concat(t.proxyByGroup.Representations||[])},e.getViews=function(){return[].concat(t.proxyByGroup.Views||[])},e.createProxy=function(n,r,a){var o=t.proxyConfiguration.definitions;if(!o[n]||!o[n][r])return null;var i=o[n][r],s=Vf(Vf({},i.options),a),c=i.class.newInstance(Vf(Vf({},s),{},{proxyGroup:n,proxyName:r,proxyManager:e}));if(i.proxyProps){var u={};Object.keys(i.proxyProps).forEach((function(t){var n=i.proxyProps[t];u[t]=e.createProxy(n.group,n.name,n.options)})),c.set(u)}return i.props&&c.set(i.props),function(n){if(n){t.proxyIdMapping[n.getProxyId()]=n;var r=n.getProxyGroup();t.proxyByGroup[r]||(t.proxyByGroup[r]=[]),-1===t.proxyByGroup[r].indexOf(n)&&t.proxyByGroup[r].push(n),n.setProxyManager(e),Ot.setImmediate((function(){e.invokeProxyRegistrationChange({action:"register",proxyId:n.getProxyId(),proxyName:n.getProxyName(),proxyGroup:n.getProxyGroup(),proxy:n})}))}}(c),s.activateOnCreate&&c.activate(),c},e.getRepresentation=function(n,r){var a=n||e.getActiveSource(),o=r||e.getActiveView();if(!a||!o||!a.getType())return null;var i=a.getProxyId(),s=o.getProxyId(),c=t.sv2rMapping[i];c||(c={},t.sv2rMapping[i]=c);var u=c[s];if(!u){var l=o.getProxyName(),d=a.getType(),p=t.proxyConfiguration.representations[l][d];if(!p)return _f("No definition for representation of ".concat(d," in view ").concat(l)),null;u=e.createProxy("Representations",p.name,p.options),t.r2svMapping[u.getProxyId()]={sourceId:i,viewId:s},c[s]=u,u.setInput(a),o.addRepresentation(u)}return u},e.deleteProxy=function(r){var a=r.getProxyGroup().toLowerCase();if("views"===a)r.getRepresentations().forEach((function(t){e.deleteProxy(t)})),r.setContainer(null),n(r),e.getActiveView()===r&&e.setActiveView(e.getViews()[0]);else if("representations"===a){var o=t.r2svMapping[r.getProxyId()],i=o.sourceId,s=o.viewId;e.getProxyById(s).removeRepresentation(r),delete t.r2svMapping[r.getProxyId()],delete t.sv2rMapping[i][s],n(r)}else if("sources"===a){var c=t.sv2rMapping[r.getProxyId()];Object.keys(c).forEach((function(t){e.deleteProxy(c[t])})),n(r),e.getActiveSource()===r&&e.setActiveSource(e.getSources()[0])}else n(r);r.delete()}}var Gf=Ot.vtkErrorMacro;function Uf(e,t){t.classHierarchy.push("vtkPiecewiseFunction"),e.getSize=function(){return t.nodes.length},e.getType=function(){var e,n=0,r=0;t.nodes.length>0&&(n=t.nodes[0].y);for(var a=1;a<t.nodes.length;a++){if((e=t.nodes[a].y)!==n)if(e>n)switch(r){case 0:case 1:r=1;break;default:r=3}else switch(r){case 0:case 2:r=2;break;default:r=3}if(n=e,3===r)break}switch(r){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";default:return"Varied"}},e.getDataPointer=function(){var e=t.nodes.length;if(t.function=null,e>0){t.function=[];for(var n=0;n<e;n++)t.function[2*n]=t.nodes[n].x,t.function[2*n+1]=t.nodes[n].y}return t.function},e.getFirstNonZeroValue=function(){if(0===t.nodes.length)return 0;for(var e=1,n=0;n<t.nodes.length;n++)if(0!==t.nodes[n].y){e=0;break}return e?Number.MAX_VALUE:n>0?t.nodes[n-1].x:t.clamping?-Number.MAX_VALUE:t.nodes[0].x},e.getNodeValue=function(e,n){var r=t.nodes.length;return e<0||e>=r?(Gf("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].y,n[2]=t.nodes[e].midpoint,n[3]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,r){var a=t.nodes.length;if(n<0||n>=a)return Gf("Index out of range!"),-1;var o=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].y=r[1],t.nodes[n].midpoint=r[2],t.nodes[n].sharpness=r[3],o!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.addPoint=function(t,n){return e.addPointLong(t,n,.5,0)},e.addPointLong=function(n,r,a,o){if(a<0||a>1)return Gf("Midpoint outside range [0.0, 1.0]"),-1;if(o<0||o>1)return Gf("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var i,s={x:n,y:r,midpoint:a,sharpness:o};for(t.nodes.push(s),e.sortAndUpdateRange(),i=0;i<t.nodes.length&&t.nodes[i].x!==n;i++);return i<t.nodes.length?i:-1},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort((function(e,t){return e.x-t.x})),e.updateRange()||e.modified()},e.updateRange=function(){var n=t.range.slice(),r=t.nodes.length;return r?(t.range[0]=t.nodes[0].x,t.range[1]=t.nodes[r-1].x):(t.range[0]=0,t.range[1]=0),(n[0]!==t.range[0]||n[1]!==t.range[1])&&(e.modified(),!0)},e.removePoint=function(n){var r;for(r=0;r<t.nodes.length&&t.nodes[r].x!==n;r++);if(r>=t.nodes.length)return-1;var a=r,o=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(o=e.updateRange()),o||e.modified(),a},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addSegment=function(n,r,a,o){e.sortAndUpdateRange();for(var i=0;i<t.nodes.length;)t.nodes[i].x>=n&&t.nodes[i].x<=a?t.nodes.splice(i,1):i++;e.addPoint(n,r,.5,0),e.addPoint(a,o,.5,0)},e.getValue=function(t){var n=[];return e.getTable(t,t,1,n),n[0]},e.adjustRange=function(n){if(n.length<2)return 0;var r=e.getRange();r[0]<n[0]?e.addPoint(n[0],e.getValue(n[0])):e.addPoint(n[0],e.getValue(r[0])),r[1]>n[1]?e.addPoint(n[1],e.getValue(n[1])):e.addPoint(n[1],e.getValue(r[1])),e.sortAndUpdateRange();for(var a=0;a<t.nodes.length;)t.nodes[a].x>=n[0]&&t.nodes[a].x<=n[1]?t.nodes.splice(a,1):++a;return e.sortAndUpdateRange(),1},e.estimateMinNumberOfSamples=function(t,n){var r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=function(){var e=t.nodes.length;if(e<2)return-1;for(var n=t.nodes[1].x-t.nodes[0].x,r=0;r<e-1;r++){var a=t.nodes[r+1].x-t.nodes[r].x;a<n&&(n=a)}return n},e.getTable=function(e,n,r,a){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=0,c=t.nodes.length,u=0;0!==c&&(u=t.nodes[c-1].y);var l=0,d=0,p=0,f=0,g=0,m=0,v=0;for(o=0;o<r;o++){var h=i*o;for(l=r>1?e+o/(r-1)*(n-e):.5*(e+n);s<c&&l>t.nodes[s].x;)++s<c&&(d=t.nodes[s-1].x,p=t.nodes[s].x,f=t.nodes[s-1].y,g=t.nodes[s].y,m=t.nodes[s-1].midpoint,v=t.nodes[s-1].sharpness,m<1e-5&&(m=1e-5),m>.99999&&(m=.99999));if(s>=c)a[h]=t.clamping?u:0;else if(0===s)a[h]=t.clamping?t.nodes[0].y:0;else{var y=(l-d)/(p-d);if(y=y<m?.5*y/m:.5+.5*(y-m)/(1-m),v>.99){if(y<.5){a[h]=f;continue}a[h]=g;continue}if(v<.01){a[h]=(1-y)*f+y*g;continue}y<.5?y=.5*Math.pow(2*y,1+10*v):y>.5&&(y=1-.5*Math.pow(2*(1-y),1+10*v));var b=y*y,x=b*y,T=2*x-3*b+1,S=-2*x+3*b,P=x-2*b+y,w=x-b,C=g-f,O=(1-v)*C;a[h]=T*f+S*g+P*O+w*O;var A=f<g?f:g,I=f>g?f:g;a[h]=a[h]<A?A:a[h],a[h]=a[h]>I?I:a[h]}}}}var jf={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function zf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jf,n),Ot.obj(e,t),t.nodes=[],Ot.setGet(e,t,["allowDuplicateScalars","clamping"]),Ot.setArray(e,t,["range"],2),Ot.getArray(e,t,["range"]),Uf(e,t)}var Wf,Hf,Kf={newInstance:Ot.newInstance(zf,"vtkPiecewiseFunction"),extend:zf},Xf=n(57),qf=n.n(Xf),Yf=(Wf=function(){!function(){var e={exports:{}},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return t(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=!0,o=!1,i=void 0;try{for(var s,c=this.__listeners[e][Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;u.apply(void 0,n)}}catch(e){o=!0,i=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw i}}return this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)}))}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}(),r=n,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=r,d="main",p=function e(t,n){c(this,e),this.payload=t,this.transferable=n};e.exports=function(e){var t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e.main=n,e}({},d,e),n=self.postMessage.bind(self),r=new(function(e){function r(){return c(this,r),u(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),a(r,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return 1==r.length&&r[0]instanceof p?n({eventName:e,args:r},r[0].transferable):n({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var t,n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];(t=o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"emit",this)).call.apply(t,[this,e].concat(a))}},{key:"operation",value:function(e,n){return t[e]=n,this}}]),r}(l)),f=function(e,t,n){var r,a=function(t){t&&t instanceof p?m(e,1,t.payload,t.transferable):m(e,1,t)},o=function(t){m(e,0,{message:t.message,stack:t.stack})};try{var s=g(e,t,n);"object"===(void 0===(r=s)?"undefined":i(r))&&null!==r&&"function"==typeof r.then&&"function"==typeof r.catch?s.then(a).catch(o):a(s)}catch(e){o(e)}},g=function(e,n,r){var a=t[r||d];if(!a)throw new Error("Not found handler for this request");return a(n,v.bind(null,e))},m=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];n([0,e,t,r],a)},v=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");n([1,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?f.apply(void 0,s(t)):t&&t.eventName&&r.emitLocally.apply(r,[t.eventName].concat(s(t.args)))})),r},e.exports.TransferableResponse=p;var f=e.exports;f((function(e,t){var n=e.array,r=e.min,a=e.max,o=e.component||0,i=e.numberOfComponents||1,s=e.numberOfBins,c=a-r,u=new Float32Array(s);u.fill(0);for(var l=n.length,d=o;d<l;d+=i)u[Math.floor((s-1)*(Number(n[d])-r)/c)]+=1;return Promise.resolve(new f.TransferableResponse(u,[u.buffer]))}))}()},null,function(e){return Hf=Hf||function(e,t){var n=function(e,t){var n=[],r=e.toString();return r=r.replace(/(['"])__worker_loader_strict__(['"])/g,"$1use strict$2"),n.push("("+r+")()"),n}(e),r=new Blob(n,{type:"application/javascript"});return URL.createObjectURL(r)}(Wf),new Worker(Hf,e)});function Zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zf(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jf=.001,$f={adjustPosition:"-webkit-grab",adjustHeight:"row-resize",adjustBias:"crosshair",adjustWidth:"col-resize",adjustZoom:"col-resize"},eg=[],tg={adjustPosition:function(e,t,n){var r=n.originalXY,a=n.gaussian,o=n.originalGaussian.position-r[0];return a.position=e+o,!0},adjustHeight:function(e,t,n){var r=n.model,a=n.gaussian;return a.height=1-t,a.height=Math.min(1,Math.max(r.gaussianMinimumHeight,a.height)),!0},adjustBias:function(e,t,n){var r=n.originalXY,a=n.gaussian,o=n.originalGaussian;return a.xBias=o.xBias-(r[0]-e)/a.height,a.yBias=o.yBias+4*(r[1]-t)/a.height,a.xBias=Math.max(-1,Math.min(1,a.xBias)),a.yBias=Math.max(0,Math.min(2,a.yBias)),!0},adjustWidth:function(e,t,n){var r=n.originalXY,a=n.gaussian,o=n.originalGaussian,i=n.gaussianSide;return a.width=i<0?o.width-(r[0]-e):o.width+(r[0]-e),a.width<Jf&&(a.width=Jf),!0},adjustZoom:function(e,t,n){var r=n.rangeZoom,a=n.publicAPI,o=r[1]-r[0],i=(e-r[0])/o,s=Math.abs(i-r[0]),c=Math.abs(i-r[1]);if(Math.abs(i-.5*(r[0]+r[1]))<Math.min(s,c)){var u=.5*o;r[0]=Math.min(Math.max(i-u,0),r[1]-.1),r[1]=Math.max(Math.min(i+u,1),r[0]+.1)}else s<c?r[0]=Math.min(Math.max(i,0),r[1]-.1):r[1]=Math.max(Math.min(i,1),r[0]+.1);return a.invokeZoomChange(r),!1}};function ng(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=[];n.length<t;)n.push(0);for(var r=e.length;r--;)for(var a=e[r],o=a.position,i=a.height,s=a.width,c=a.xBias,u=a.yBias,l=0;l<t;l++){var d=l/(t-1);if(d>o+s||d<o-s)n[l]<0&&(n[l]=0);else{var p=s<Jf?Jf:s,f=((0===c||d===o+c?d:d>o+c?p===c?o:o+p/(p-c)*(d-o-c):-p===c?o:o-p/(p+c)*(d-o-c))-o)/p,g=Math.exp(-4*f*f),m=1-f*f,v=1,h=i*(u<1?u*m+(1-u)*g:(2-u)*m+(u-1)*v);h>n[l]&&(n[l]=h)}}return n}function rg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{lineWidth:1,strokeStyle:"#000"},a=t[3],o=t[2]/(n.length-1),i=!!r.fillStyle,s=a+t[1];e.lineWidth=r.lineWidth,e.strokeStyle=r.strokeStyle,e.beginPath(),e.moveTo(t[0],t[1]+t[3]);for(var c=0;c<n.length;c++)e.lineTo(t[0]+c*o,Math.max(t[1],s-n[c]*a));if(i){if(e.fillStyle=r.fillStyle,e.lineTo(t[0]+t[2],t[1]+t[3]),r.clip)return void e.clip();e.fill()}e.stroke()}function ag(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1];return[r[0]+(e-n[0])/n[2]*(r[1]-r[0]),(t-n[1])/n[3]]}function og(e,t){var n=t.map((function(t){return Math.abs(t.position-e)})),r=Math.min.apply(Math,ve(n));return n.indexOf(r)}function ig(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var r=n.offsetX,a=n.offsetY;t&&n.preventDefault(),e(r,a)}}function sg(){eg.filter((function(e){return e.ready})).forEach((function(e){e.callbacks.forEach((function(t){t.touches===e.touches&&t.clicks===e.count&&t.action.apply(t,ve(e.singleTouche))})),e.ts=0,e.count=0,e.touches=0,e.ready=!1}))}function cg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(a){var o=a.target.getBoundingClientRect(),i=Array.prototype.map.call(a.touches,(function(e){return[e.pageX-o.left,e.pageY-o.top]})).reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(e){return e/a.touches.length}));"touchstart"===a.type?(clearTimeout(eg[e].timeout),eg[e].ts=a.timeStamp,eg[e].singleTouche=i,eg[e].touches=a.touches.length):"touchmove"===a.type?(eg[e].ts=0,eg[e].count=0,eg[e].ready=!1):"touchend"===a.type&&(a.timeStamp-eg[e].ts<eg[e].deltaT?(eg[e].count+=1,eg[e].ready=!0,r&&a.preventDefault(),eg[e].timeout=setTimeout(sg,eg[e].deltaT)):eg[e].ready=!1),a.touches.length===n&&(t.apply(void 0,ve(i)),r&&a.preventDefault())}}function ug(e,t,n){return function(r){return e()?t(r):n(r)}}function lg(e,t){if(!t)return e;var n=e.length-1,r=t.map((function(e){return Math.round(e*n)}));return e.slice(r[0],r[1]+1)}var dg={applyGaussianToPiecewiseFunction:function(e,t,n,r){for(var a=ng(e,t),o=[],i=(n[1]-n[0])/(a.length-1),s=0;s<a.length;s++){var c=n[0]+i*s,u=a[s];o.push({x:c,y:u,midpoint:.5,sharpness:0})}r.setNodes(o)},computeOpacities:ng,createListener:ig,drawChart:rg,findGaussian:og,listenerSelector:ug,normalizeCoordinates:ag};function pg(e,t){t.classHierarchy.push("vtkPiecewiseGaussianWidget"),t.canvas||(t.canvas=document.createElement("canvas")),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.canvas),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.canvas),e.modified())},e.setGaussians=function(n){t.gaussians!==n&&(t.gaussians=n,t.opacities=ng(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified())},e.addGaussian=function(n,r,a,o,i){var s=t.gaussians.length;return t.gaussians.push({position:n,height:r,width:a,xBias:o,yBias:i}),t.opacities=ng(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified(),s},e.removeGaussian=function(n){t.gaussians.splice(n,1),t.opacities=ng(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified()},e.setSize=function(n,r){t.canvas.setAttribute("width",n),t.canvas.setAttribute("height",r),t.size[0]===n&&t.size[1]===r||(t.size=[n,r],t.colorCanvasMTime=0,e.modified())},e.updateStyle=function(n){t.style=Qf(Qf({},t.style),n),e.modified()},e.setDataArray=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.numberOfBinToConsiders,o=void 0===a?1:a,i=r.numberOfBinsToSkip,s=void 0===i?1:i,c=r.numberOfComponents,u=void 0===c?1:c,l=r.component,d=void 0===l?0:l;t.histogram=null,t.histogramArray=n,t.dataRange=gr(n,d,u);var p=fe(t.dataRange,2),f=p[0],g=p[1],m=4,v=Math.floor(n.length/m)||1;v+=v%u;for(var h=0,y=[],b=[];h<n.length;){var x=new Yf;b.push(x);var T=new(qf())(x),S=h,P=Math.min(h+v,n.length-1),w=new n.constructor(n.slice(S,P+1));y.push(T.postMessage({array:w,component:d,numberOfComponents:u,min:f,max:g,numberOfBins:t.numberOfBins},[w.buffer])),h+=v}Promise.all(y).then((function(n){b.forEach((function(e){return e.terminate()})),t.histogram=new Float32Array(t.numberOfBins),t.histogram.fill(0),n.forEach((function(e){for(var n=0,r=e.length;n<r;++n)t.histogram[n]+=e[n]}));var r=Math.min(o,t.histogram.length-s),a=Array.from(t.histogram);a.sort((function(e,t){return Number(e)-Number(t)}));for(var i=0;i<s;i++)a.pop();for(;a.length>r;)a.shift();for(var c=a.reduce((function(e,t){return e+t}),0)/r,u=0,l=t.histogram.length;u<l;++u)t.histogram[u]/=c;e.modified(),setTimeout(e.render,0)})),e.modified()},e.onClick=function(n,r){var a=fe(ag(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),o=a[0],i=a[1];if(o<0&&t.style.iconSize>1){for(var s=t.style.iconSize+t.style.padding,c=s,u=0;r>c;)u+=1,c+=s;switch(u){case 0:var l=e.addGaussian(0,1,.1,0,0),d=t.gaussians[l],p=Qf({},d),f=tg.adjustPosition;t.activeGaussian=l,t.selectedGaussian=l,Ot.setImmediate((function(){e.onDown(n,r),t.dragAction={originalXY:[0,0],action:f,gaussian:d,originalGaussian:p}}));break;case 1:-1!==t.selectedGaussian&&e.removeGaussian(t.selectedGaussian);break;default:t.selectedGaussian=-1,t.dragAction=null}}else if(o<0||o>1||i<0||i>1)t.selectedGaussian=-1,t.dragAction=null;else{var g=og(o,t.gaussians);g!==t.selectedGaussian&&(t.selectedGaussian=g,e.modified())}return!0},e.onHover=function(n,r){var a=20/t.canvas.height,o=fe(ag(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),i=o[0],s=o[1],c=fe(ag(n,r,t.graphArea),1)[0],u=i<0?t.selectedGaussian:og(i,t.gaussians);t.canvas.style.cursor="default";var l=t.gaussians[u];if(t.enableRangeZoom&&c>=0&&r<t.graphArea[1]-6){var d=(t.rangeZoom[1]-t.rangeZoom[0])/3;c<t.rangeZoom[0]+d||c>t.rangeZoom[1]-d?t.canvas.style.cursor=$f.adjustZoom:t.canvas.style.cursor=$f.adjustPosition,t.dragAction={rangeZoom:t.rangeZoom,action:tg.adjustZoom}}else if(l&&c>=0){var p,f=1-s;p=f>l.height+a?"adjustPosition":f>l.height-a?Math.abs(i-l.position)<a?"adjustHeight":"adjustPosition":f>.5*l.height+a?"adjustPosition":f>.5*l.height-a?Math.abs(i-l.position)<a?"adjustBias":"adjustPosition":f>a?"adjustPosition":"adjustWidth",t.canvas.style.cursor=$f[p];var g=tg[p],m=Qf({},l);t.dragAction={originalXY:[i,s],action:g,gaussian:l,originalGaussian:m}}return u!==t.activeGaussian&&(t.activeGaussian=u,e.modified()),!0},e.onDown=function(n,r){t.mouseIsDown||e.invokeAnimation(!0),t.mouseIsDown=!0;var a=ag(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],o=og(a,t.gaussians);t.gaussianSide=0;var i=t.gaussians[o];return i&&(t.gaussianSide=i.position-a),o!==t.selectedGaussian&&a>0&&(t.selectedGaussian=o,e.modified()),!0},e.onDrag=function(n,r){if(t.dragAction){var a=fe(ag(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),o=a[0],i=a[1];(0,t.dragAction.action)(o,i,Qf({gaussianSide:t.gaussianSide,model:t,publicAPI:e},t.dragAction))&&(t.opacities=ng(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e,!0)),e.modified()}return!0},e.onUp=function(n,r){return t.mouseIsDown&&e.invokeAnimation(!1),t.mouseIsDown=!1,!0},e.onLeave=function(n,r){return e.onUp(n,r),t.canvas.style.cursor="default",t.activeGaussian=-1,e.modified(),!0},e.onAddGaussian=function(n,r){var a=fe(ag(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),2),o=a[0],i=a[1];return o>=0&&e.addGaussian(o,1-i,.1,0,0),!0},e.onRemoveGaussian=function(n,r){var a=ag(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],o=og(a,t.gaussians);return a>=0&&-1!==o&&e.removeGaussian(o),!0},e.bindMouseListeners=function(){if(!t.listeners){var n=function(){return!!t.mouseIsDown},r=function(){for(var e=eg.length,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eg.push({callbacks:n,timeout:0,deltaT:200,count:0,ready:!1}),e}({clicks:1,touches:1,action:e.onClick},{clicks:2,touches:1,action:e.onAddGaussian},{clicks:2,touches:2,action:e.onRemoveGaussian});t.listeners={mousemove:ug(n,ig(e.onDrag),ig(e.onHover)),dblclick:ig(e.onAddGaussian),contextmenu:ig(e.onRemoveGaussian),click:ig(e.onClick),mouseup:ig(e.onUp),mousedown:ig(e.onDown),mouseout:ig(e.onLeave),touchstart:cg(r,Ot.chain(e.onHover,e.onDown)),touchmove:ug(n,cg(r,e.onDrag),cg(r,e.onHover)),touchend:cg(r,e.onUp,0)},Object.keys(t.listeners).forEach((function(e){t.canvas.addEventListener(e,t.listeners[e],!1)}))}},e.unbindMouseListeners=function(){t.listeners&&(Object.keys(t.listeners).forEach((function(e){t.canvas.removeEventListener(e,t.listeners[e])})),delete t.listeners)},e.render=function(){var e=t.canvas.getContext("2d");e.imageSmoothingEnabled=!0;var n=fe(t.size,2),r=n[0],a=n[1],o=t.style.padding,i=[Math.floor(t.style.iconSize+o),Math.floor(o),Math.ceil(r-2*o-t.style.iconSize),Math.ceil(a-2*o)],s=t.style.zoomControlHeight;if(t.enableRangeZoom&&(i[1]+=Math.floor(s),i[3]-=Math.floor(s)),t.graphArea=i,e.clearRect(0,0,r,a),e.lineJoin="round",e.fillStyle=t.style.backgroundColor,e.fillRect.apply(e,i),t.style.iconSize>1){var c=Math.round(t.style.iconSize/2-t.style.strokeWidth),u=Math.round(c+o+t.style.strokeWidth);e.beginPath(),e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor,e.arc(u-o/2,u,c,0,2*Math.PI,!1),e.fillStyle=t.style.buttonFillColor,e.fill(),e.stroke(),e.moveTo(u-c+t.style.strokeWidth+2-o/2,u),e.lineTo(u+c-t.style.strokeWidth-2-o/2,u),e.stroke(),e.moveTo(u-o/2,u-c+t.style.strokeWidth+2),e.lineTo(u-o/2,u+c-t.style.strokeWidth-2),e.stroke(),-1===t.selectedGaussian?(e.fillStyle=t.style.buttonDisableFillColor,e.lineWidth=t.style.buttonDisableStrokeWidth,e.strokeStyle=t.style.buttonDisableStrokeColor):(e.fillStyle=t.style.buttonFillColor,e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor),e.beginPath(),e.arc(u-o/2,u+o/2+t.style.iconSize,c,0,2*Math.PI,!1),e.fill(),e.stroke(),e.moveTo(u-c+t.style.strokeWidth+2-o/2,u+o/2+t.style.iconSize),e.lineTo(u+c-t.style.strokeWidth-2-o/2,u+o/2+t.style.iconSize),e.stroke()}if(t.histogram&&rg(e,i,lg(t.histogram,t.rangeZoom),{lineWidth:1,strokeStyle:t.style.histogramColor,fillStyle:t.style.histogramColor}),rg(e,i,lg(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.strokeWidth,strokeStyle:t.style.strokeColor}),t.colorTransferFunction&&t.colorTransferFunction.getSize()){var l=t.dataRange||t.colorTransferFunction.getMappingRange();t.colorCanvas&&t.colorCanvasMTime===t.colorTransferFunction.getMTime()||(t.colorCanvasMTime=t.colorTransferFunction.getMTime(),t.colorCanvas=function(e,t,n,r){var a=r||document.createElement("canvas");a.setAttribute("width",t),a.setAttribute("height",256);for(var o=a.getContext("2d"),i=e.getUint8Table(n[0],n[1],t,4),s=o.getImageData(0,0,t,256),c=0;c<256;c++)s.data.set(i,4*c*t);for(var u=256*t*4,l=4*t,d=3;d<u;d+=4)s.data[d]=255-Math.floor(d/l);return o.putImageData(s,0,0),a}(t.colorTransferFunction,i[2],l,t.colorCanvas)),e.save(),rg(e,i,lg(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),t.enableRangeZoom?e.drawImage(t.colorCanvas,t.rangeZoom[0]*i[2],0,i[2],i[3],i[0],i[1],i[2]/(t.rangeZoom[1]-t.rangeZoom[0]),i[3]):e.drawImage(t.colorCanvas,i[0],i[1]),e.restore()}else t.backgroundImage&&(t.colorCanvas=function(e,t,n){var r=n||document.createElement("canvas");return r.setAttribute("width",t),r.setAttribute("height",256),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,256),r}(t.backgroundImage,i[2],t.colorCanvas),e.save(),rg(e,i,lg(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),e.drawImage(t.colorCanvas,i[0],i[1]),e.restore());t.enableRangeZoom&&(e.fillStyle=t.style.zoomControlColor,e.beginPath(),e.rect(i[0]+t.rangeZoom[0]*i[2],0,(t.rangeZoom[1]-t.rangeZoom[0])*i[2],s),e.fill());var d,p,f=t.gaussians[t.activeGaussian]||t.gaussians[t.selectedGaussian];if(f){rg(e,i,lg(ng([f],i[2]),t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.activeStrokeWidth,strokeStyle:t.style.activeColor});var g=i[0]+(d=f.position,((p=t.enableRangeZoom&&t.rangeZoom)?(d-p[0])/(p[1]-p[0]):d)*i[2]),m=i[1]+(1-f.height)*i[3],v=i[1]+(1-.5*f.height)*i[3],h=i[1]+i[3],y=f.width*i[2];t.enableRangeZoom&&(y/=t.rangeZoom[1]-t.rangeZoom[0]),e.lineWidth=t.style.handleWidth,e.strokeStyle=t.style.handleColor,e.fillStyle=t.style.backgroundColor,e.beginPath(),e.moveTo(g,i[1]+(1-f.height)*i[3]),e.lineTo(g,i[1]+i[3]),e.stroke(),e.beginPath(),e.arc(g,m,6,0,2*Math.PI),e.fill(),e.stroke();var b=Math.min(.1*y,f.height*i[3]*.2);e.beginPath(),e.rect(g-b,v-b,2*b,2*b),e.fill(),e.stroke(),e.beginPath();var x=.8*y;e.rect(g-x,h-5,2*x,10),e.fill(),e.stroke()}},e.getOpacityNodes=function(e){for(var n=e||t.dataRange,r=(n[1]-n[0])/(t.opacities.length-1),a=[],o=0;o<t.opacities.length;o++){var i=n[0]+r*o,s=t.opacities[o];a.push({x:i,y:s,midpoint:.5,sharpness:0})}return a},e.applyOpacity=function(t,n){var r=e.getOpacityNodes(n);t.setNodes(r)},e.getOpacityRange=function(e){for(var n=e||t.dataRange,r=(n[1]-n[0])/(t.opacities.length-1),a=t.opacities.length-1,o=0,i=0;i<t.opacities.length;i++)t.opacities[i]>0&&(a=Math.min(a,i)),t.opacities[i]>0&&(o=Math.max(o,i));return[n[0]+a*r,n[0]+o*r]};var n=e.setEnableRangeZoom;e.setEnableRangeZoom=function(e){var r=n(e);return r&&(t.colorCanvasMTime=0,t.rangeZoom=[0,1]),r};var r=e.setRangeZoom;e.setRangeZoom=function(){var e=r.apply(void 0,arguments);return e&&(t.colorCanvasMTime=0),e},e.onModified((function(){return e.render()})),e.setSize.apply(e,ve(t.size))}var fg={histogram:[],numberOfBins:256,histogramArray:null,dataRange:[0,1],gaussians:[],opacities:[],size:[600,300],piecewiseSize:256,colorCanvasMTime:0,gaussianMinimumHeight:.05,style:{backgroundColor:"rgba(255, 255, 255, 1)",histogramColor:"rgba(200, 200, 200, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(0, 0, 150)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",handleColor:"rgb(0, 150, 0)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:20,padding:10,zoomControlHeight:10,zoomControlColor:"#999"},activeGaussian:-1,selectedGaussian:-1,enableRangeZoom:!0,rangeZoom:[0,1]};function gg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fg,n),Ot.obj(e,t),Ot.setGet(e,t,["piecewiseSize","numberOfBins","colorTransferFunction","backgroundImage","enableRangeZoom","gaussianMinimumHeight"]),Ot.setGetArray(e,t,["rangeZoom"],2),Ot.get(e,t,["size","canvas","gaussians"]),Ot.event(e,t,"opacityChange"),Ot.event(e,t,"animation"),Ot.event(e,t,"zoomChange"),pg(e,t)}var mg=Qf({newInstance:Ot.newInstance(gg,"vtkPiecewiseGaussianWidget"),extend:gg},dg);function vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yg={Gaussians:0,Points:1,Nodes:2},bg={Gaussians:[{position:.5,height:1,width:.5,xBias:.5,yBias:.5}],Points:[[0,0],[1,1]],Nodes:[{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}]};function xg(e){return e.map((function(e){return hg({},e)}))}function Tg(e,t){t.classHierarchy.push("vtkPiecewiseFunctionProxy"),t.piecewiseFunction=t.piecewiseFunction||Kf.newInstance(),e.setGaussians=function(n){t.gaussians=xg(n||[]),0===t.gaussians.length&&(t.gaussians=xg(bg.Gaussians)),e.applyMode()},e.setPoints=function(n){t.points=(n||[]).slice(),0===t.points.length&&(t.points=bg.Points.slice()),e.applyMode()},e.setNodes=function(n){t.nodes=(n||[]).slice(),0===t.nodes.length&&(t.nodes=bg.Nodes.slice()),e.applyMode()},e.setMode=function(n){t.mode!==n&&(t.mode=n,e.applyMode())},e.applyMode=function(){switch(t.mode){case yg.Gaussians:mg.applyGaussianToPiecewiseFunction(t.gaussians,255,t.dataRange,t.piecewiseFunction),e.modified();break;case yg.Points:n=t.points,r=t.dataRange,a=t.piecewiseFunction,o=r[1]-r[0],i=n.map((function(e){var t=fe(e,2),n=t[0],a=t[1];return[n*o+r[0],a]})),a.removeAllPoints(),i.forEach((function(e){var t=fe(e,2),n=t[0],r=t[1];return a.addPoint(n,r)})),e.modified();break;case yg.Nodes:!function(e,t,n){var r=t[1]-t[0],a=e.map((function(e){return hg(hg({},e),{},{x:e.x*r+t[0]})}));n.setNodes(a)}(t.nodes,t.dataRange,t.piecewiseFunction),e.modified()}var n,r,a,o,i},e.getLookupTableProxy=function(){return t.proxyManager.getLookupTable(t.arrayName)},e.setDataRange=function(n,r){t.dataRange[0]===n&&t.dataRange[1]===r||(t.dataRange[0]=n,t.dataRange[1]=r,e.applyMode())},e.applyMode()}var Sg={mode:yg.Gaussians,gaussians:bg.Gaussians,points:bg.Points,nodes:bg.Nodes,arrayName:"No array associated",arrayLocation:"pointData",dataRange:[0,1]};function Pg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sg,n),Ot.obj(e,t),Ot.setGet(e,t,["arrayName"]),Ot.get(e,t,["piecewiseFunction","gaussians","nodes","points","mode","dataRange"]),Tg(e,t),Ot.proxy(e,t)}var wg={newInstance:Ot.newInstance(Pg,"vtkPiecewiseFunctionProxy"),extend:Pg,Mode:yg,Defaults:bg};function Cg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Og(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cg(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ag(e){var t={};return e.listPropertyNames().forEach((function(n){t[n]=e.getPropertyByName(n).value})),t}function Ig(e,t){e.loadState=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,a){var o={},i={},s={},c=n.datasetHandler||Oe,u=[];t.sources.forEach((function(t){var n=t.id,r=t.group,a=t.name,i=t.props;u.push(Promise.resolve(c(i.dataset)).then((function(t){if(t){var s=e.createProxy(r,a);return s.setName(i.name),s.setInputData(t,i.type),o[n]=s,s}return null})))})),Promise.all(u).then((function(){var n=e.getViews();function a(e){o[e]&&s[e]&&o[e].resetOrientation().then((function(){o[e].getCamera().set(s[e]),o[e].getRenderer().updateLightsGeometryToFollowCamera(),o[e].renderLater()}))}t.views.forEach((function(r){var a=r.id,i=r.group,c=r.name,u=r.props,l=r.camera,d=null;t.options.recycleViews&&(d=n.find((function(e){return e.getProxyGroup()===i&&e.getProxyName()===c&&e.getName()===u.name}))),d?d.setDisableAnimation(!0):d=e.createProxy(i,c,{disableAnimation:!0}),d.set(u,!0),o[a]=d,s[a]=l})),t.representations.forEach((function(t){var n=t.source,r=t.view,i=t.props;e.getRepresentation(o[n],o[r]).set(i,!0),a(r)})),Object.keys(t.fields).forEach((function(n){var r=t.fields[n],a=r.lookupTable,o=r.piecewiseFunction,i=e.getLookupTable(n,a);i.setPresetName(a.presetName),i.setDataRange.apply(i,ve(a.dataRange));var s=e.getPiecewiseFunction(n,o);switch(o.mode){case wg.Mode.Gaussians:s.setGaussians(o.gaussians);break;case wg.Mode.Points:s.setPoints(o.points);break;case wg.Mode.Nodes:s.setNodes(o.nodes)}s.setMode(o.mode),s.setDataRange.apply(s,ve(o.dataRange))})),Object.keys(s).forEach(a),Object.keys(o).forEach((function(e){var t=o[e].getProxyId();i[e]=t})),t.views.forEach((function(e){var t=e.id;o[t].setDisableAnimation(!1)})),r(Og(Og({},t.userData),{},{$oldToNewIdMapping:i}))})).catch(a)}))},e.saveState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,a){var o=e.getSources(),i=e.getViews(),s=t.datasetHandler||function(e){return e.getState()};delete t.datasetHandler;var c=[],u=new Set,l={userData:n,options:t,sources:[],views:[],representations:[],fields:{}};o.forEach((function(e){var t=Promise.resolve(s(e.getDataset(),e));c.push(t),l.sources.push({id:e.getProxyId(),group:e.getProxyGroup(),name:e.getProxyName(),props:{name:e.getName(),type:e.getType(),dataset:t}})})),i.forEach((function(e){var t=e.getCamera().get("position","viewUp","focalPoint");l.views.push({id:e.getProxyId(),group:e.getProxyGroup(),name:e.getProxyName(),props:Object.assign(Ag(e),e.get("axis","orientation","viewUp")),camera:t}),e.getRepresentations().forEach((function(t){l.representations.push({source:t.getInput().getProxyId(),view:e.getProxyId(),props:Ag(t)}),u.add(t.getColorBy()[0])}))})),u.forEach((function(t){l.fields[t]={lookupTable:e.getLookupTable(t).get("mode","presetName","rgbPoints","hsvPoints","nodes","arrayName","arrayLocation","dataRange"),piecewiseFunction:e.getPiecewiseFunction(t).get("mode","gaussians","points","nodes","arrayName","arrayLocation","dataRange")}})),Promise.all(c).then((function(){for(var e=function(e){l.sources[e].props.dataset.then((function(t){l.sources[e].props.dataset=t}))},t=0;t<l.sources.length;t++)e(t);r(l)})).catch(a)}))}}function Mg(e,t){function n(){t.animating=!1;for(var n=e.getViews(),r=0;r<n.length;r++)n[r].setAnimation(!1,e)}e.create3DView=function(t){return e.createProxy("Views","View3D",t)},e.create2DView=function(t){return e.createProxy("Views","View2D",t)},e.render=function(t){var n=t||e.getActiveView();n&&n.renderLater()},e.renderAllViews=function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getViews(),r=0;r<n.length;r++)n[r].render(t)},e.setAnimationOnAllViews=function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getViews().filter((function(e){return!t||e.getContainer()})),r=0;r<n.length;r++)n[r].setAnimation(t,e)},e.autoAnimateViews=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;if(!t.animating){t.animating=!0;for(var a=e.getViews().filter((function(e){return e.getContainer()})),o=0;o<a.length;o++)a[o].setAnimation(!0,e);t.clearAnimations=Ot.debounce(n,r)}t.clearAnimations()},e.resizeAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].resize()},e.resetCamera=function(t){var n=t||e.getActiveView();n&&n.resetCamera&&n.resetCamera()},e.createRepresentationInAllViews=function(t){for(var n=e.getViews(),r=0;r<n.length;r++)e.getRepresentation(t,n[r])},e.resetCameraInAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].resetCamera()}}function Rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dg(e,t){e.getSections=function(){var n=[],r=e.getActiveSource();if(!r)return[];var a=e.getActiveView();if(r){var o=r.getProxySection();o.ui.length&&n.push(Object.assign(o,{collapsed:t.collapseState[o.name]}))}if(r&&a){var i=e.getRepresentation(r,a);if(i){var s=i.getProxySection();s.ui.length&&n.push(Object.assign(s,{collapsed:t.collapseState[s.name]}))}}if(a){var c=a.getProxySection();c.ui.length&&n.push(Object.assign(c,{collapsed:t.collapseState[c.name]}))}return n},e.updateCollapseState=function(n,r){t.collapseState[n]=r,e.modified()},e.applyChanges=function(t){for(var n={},r=Object.keys(t),a=r.length;a--;){var o=r[a],i=fe(o.split(":"),2),s=i[0],c=i[1];if(n[s]||(n[s]={}),"__command_execute__"===t[o]){var u=e.getProxyById(s);u&&u[c]()}else n[s][c]=t[o]}var l=Object.keys(n);for(a=l.length;a--;){var d=l[a],p=e.getProxyById(d);p&&p.set(n[d])}e.modified(),e.renderAllViews()},e.getLookupTable=function(n,r){return t.lookupTables[n]||(t.lookupTables[n]=e.createProxy("Proxy","LookupTable",Eg({arrayName:n},r))),t.lookupTables[n]},e.getPiecewiseFunction=function(n,r){return t.piecewiseFunctions[n]||(t.piecewiseFunctions[n]=e.createProxy("Proxy","PiecewiseFunction",Eg({arrayName:n},r))),t.piecewiseFunctions[n]},e.rescaleTransferFunctionToDataRange=function(t,n){var r=e.getLookupTable(t),a=e.getPiecewiseFunction(t);r.setDataRange(n[0],n[1]),a.setDataRange(n[0],n[1])}}function Lg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,{proxyIdMapping:{},proxyByGroup:{},proxyConfiguration:{},sv2rMapping:{},r2svMapping:{},collapseState:{},lookupTables:{},piecewiseFunctions:{},animating:!1},n),Ot.obj(e,t),Ot.setGet(e,t,["proxyConfiguration","activeSource","activeView"]),Ot.event(e,t,"ActiveSourceChange"),Ot.event(e,t,"ActiveViewChange"),Ot.event(e,t,"ProxyRegistrationChange"),Ff(e,t),Ig(e),Mg(e,t),Dg(e,t),Ot.proxy(e,t),t.classHierarchy.push("vtkProxyManager")}var Bg={newInstance:Ot.newInstance(Lg,"vtkProxyManager"),extend:Lg},Ng=Object.create(null);[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,7.54296e-7,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,1.11641e-7,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,3.63578e-7,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,4.05298e-7,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4.264e-8,0,6.20844e-7,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,3.3216e-7,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,4.05432e-7,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,4.55569e-8]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,4.55569e-8,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}].filter((function(e){return e.RGBPoints})).filter((function(e){return"CIELAB"!==e.ColorSpace})).forEach((function(e){Ng[e.Name]=e}));var kg=Object.keys(Ng);kg.sort();var Vg=function(e){return Ng[e]},_g={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},Fg={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:_g},Gg={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};function Ug(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jg=Fg.ScalarMappingTarget,zg=Fg.VectorMode,Wg=Ba.VtkDataTypes,Hg=Gg.ColorMode,Kg=Ot.vtkErrorMacro;function Xg(e){return e}function qg(e){return Math.floor(255*e+.5)}function Yg(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(zg.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(zg.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(zg.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(n,r){if(!(n&&!r||!n&&r))if(n&&r&&n.length!==r.length)Kg("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],r&&n)for(var a=r.length,o=0;o<a;o++)t.annotationArray.push({value:n[o],annotation:String(r[o])});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(n,r){var a=e.checkForAnnotatedValue(n),o=!1;return a>=0?t.annotationArray[a].annotation!==r&&(t.annotationArray[a].annotation=r,o=!0):(t.annotationArray.push({value:n,annotation:r}),a=t.annotationArray.length-1,o=!0),o&&(e.updateAnnotatedValueMap(),e.modified()),a},e.getNumberOfAnnotatedValues=function(){return t.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value},e.getAnnotation=function(e){return void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(n){return t.annotationArray.length?e.checkForAnnotatedValue(n):-1},e.removeAnnotation=function(n){var r=e.checkForAnnotatedValue(n),a=r>=0;return a&&(t.annotationArray.splice(r,1),e.updateAnnotatedValueMap(),e.modified()),a},e.resetAnnotations=function(){t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(n,r){if(t.indexedLookup){var a=e.getAnnotatedValueIndex(n);e.getIndexedColor(a,r)}else e.getColor(parseFloat(n),r),r[3]=1},e.checkForAnnotatedValue=function(t){return e.getAnnotatedValueIndexInternal(t)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==t.annotatedValueMap[e]){var n=t.annotationArray.length;return t.annotatedValueMap[e]%n}return-1},e.getIndexedColor=function(e,t){t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=function(){t.annotatedValueMap=[];for(var e=t.annotationArray.length,n=0;n<e;n++)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=function(t,n,r){var a=t.getNumberOfComponents(),o=null;if(n===Hg.DEFAULT&&t.getDataType()===Wg.UNSIGNED_CHAR||n===Hg.DIRECT_SCALARS&&t)o=e.convertToRGBA(t,a,t.getNumberOfTuples());else{var i={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Wg.UNSIGNED_CHAR},s=Ot.newTypedArray(i.dataType,4*t.getNumberOfTuples());i.values=s,i.size=s.length,o=Ba.newInstance(i);var c=r;c<0&&a>1?e.mapVectorsThroughTable(t,o,jg.RGBA,-1,-1):(c<0&&(c=0),c>=a&&(c=a-1),e.mapScalarsThroughTable(t,o,jg.RGBA,c))}return o},e.mapVectorsToMagnitude=function(e,t,n){for(var r=e.getNumberOfTuples(),a=e.getNumberOfComponents(),o=t.getData(),i=e.getData(),s=0;s<r;s++){for(var c=0,u=0;u<n;u++)c+=i[s*a+u]*i[s*a+u];o[s]=Math.sqrt(c)}},e.mapVectorsThroughTable=function(t,n,r,a,o){var i=e.getVectorMode(),s=o,c=a,u=t.getNumberOfComponents();i===zg.COMPONENT?(-1===c&&(c=e.getVectorComponent()),c<0&&(c=0),c>=u&&(c=u-1)):(-1===s&&(s=e.getVectorSize()),s<=0?(c=0,s=u):(c<0&&(c=0),c>=u&&(c=u-1),c+s>u&&(s=u-c)),i!==zg.MAGNITUDE||1!==u&&1!==s||(i=zg.COMPONENT));var l=0;switch(c>0&&(l=c),i){case zg.COMPONENT:e.mapScalarsThroughTable(t,n,r,l);break;case zg.RGBCOLORS:break;case zg.MAGNITUDE:default:var d=Ba.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,d,s),e.mapScalarsThroughTable(d,n,r,0)}},e.luminanceToRGBA=function(e,t,n,r){for(var a=r(n),o=t.getData(),i=e.getData(),s=o.length,c=0,u=0;u<s;u+=1){var l=r(o[u]);i[4*c]=l,i[4*c+1]=l,i[4*c+2]=l,i[4*c+3]=a,c++}},e.luminanceAlphaToRGBA=function(e,t,n,r){for(var a=t.getData(),o=e.getData(),i=a.length,s=0,c=0;c<i;c+=2){var u=r(a[c]);o[s]=u,o[s+1]=u,o[s+2]=u,o[s+3]=r(a[c+1])*n,s+=4}},e.rGBToRGBA=function(e,t,n,r){for(var a=qg(n),o=t.getData(),i=e.getData(),s=o.length,c=0,u=0;u<s;u+=3)i[4*c]=r(o[u]),i[4*c+1]=r(o[u+1]),i[4*c+2]=r(o[u+2]),i[4*c+3]=a,c++},e.rGBAToRGBA=function(e,t,n,r){for(var a=t.getData(),o=e.getData(),i=a.length,s=0,c=0;c<i;c+=4)o[4*s]=r(a[c]),o[4*s+1]=r(a[c+1]),o[4*s+2]=r(a[c+2]),o[4*s+3]=r(a[c+3])*n,s++},e.convertToRGBA=function(n,r,a){var o=t.alpha;if(4===r&&o>=1&&n.getDataType()===Wg.UNSIGNED_CHAR)return n;var i=Ba.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:Wg.UNSIGNED_CHAR});if(a<=0)return i;o=(o=o>0?o:0)<1?o:1;var s=Xg;switch(n.getDataType()!==Wg.FLOAT&&n.getDataType()!==Wg.DOUBLE||(s=qg),r){case 1:e.luminanceToRGBA(i,n,o,s);break;case 2:e.luminanceAlphaToRGBA(i,n,s);break;case 3:e.rGBToRGBA(i,n,o,s);break;case 4:e.rGBAToRGBA(i,n,o,s);break;default:return Kg("Cannot convert colors"),null}return i},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 16777216},e.setRange=function(t,n){return e.setMappingRange(t,n)},e.getRange=function(){return e.getMappingRange()},e.areScalarsOpaque=function(n,r,a){if(!n)return e.isOpaque();var o=n.getNumberOfComponents();return(r!==Hg.DEFAULT||n.getDataType()!==Wg.UNSIGNED_CHAR)&&r!==Hg.DIRECT_SCALARS||(3===o||1===o?t.alpha>=1:255===n.getRange(o-1)[0])}}var Zg={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:zg.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function Qg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zg,n),Ot.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],Ot.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),Ot.setArray(e,t,["mappingRange"],2),Ot.getArray(e,t,["mappingRange"]),Yg(e,t)}var Jg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ug(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ug(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Qg,"vtkScalarsToColors"),extend:Qg},Fg),$g={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tm=$g.ColorSpace,nm=$g.Scale,rm=Jg.ScalarMappingTarget,am=Ot.vtkDebugMacro,om=Ot.vtkErrorMacro,im=Ot.vtkWarningMacro;function sm(e,t){var n=e[0],r=e[1],a=e[2],o=Math.sqrt(n*n+r*r+a*a),i=o>.001?Math.acos(n/o):0,s=i>.001?Math.atan2(a,r):0;t[0]=o,t[1]=i,t[2]=s}function cm(e,t){if(e[0]>=t-.1)return e[2];var n=e[1]*Math.sqrt(t*t-e[0]*e[0])/(e[0]*Math.sin(e[1]));return e[2]>-.3*Math.PI?e[2]+n:e[2]-n}function um(e,t,n,r){var a=[],o=[];oa(t,a),oa(n,o);var i=[],s=[];sm(a,i),sm(o,s);var c=e;if(i[1]>.05&&s[1]>.05&&function(e,t){var n=e-t;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}(i[2],s[2])>.33*Math.PI){var u=Math.max(i[0],s[0]);u=Math.max(88,u),e<.5?(s[0]=u,s[1]=0,s[2]=0,c*=2):(i[0]=u,i[1]=0,i[2]=0,c=2*c-1)}i[1]<.05&&s[1]>.05?i[2]=cm(s,i[0]):s[1]<.05&&i[1]>.05&&(s[2]=cm(i,s[0]));var l=[];l[0]=(1-c)*i[0]+c*s[0],l[1]=(1-c)*i[1]+c*s[1],l[2]=(1-c)*i[2]+c*s[2];var d=[];!function(e,t){var n=e[0],r=e[1],a=e[2];t[0]=n*Math.cos(r),t[1]=n*Math.sin(r)*Math.cos(a),t[2]=n*Math.sin(r)*Math.sin(a)}(l,d),ia(d,r)}function lm(e,t){t.classHierarchy.push("vtkColorTransferFunction"),e.getSize=function(){return t.nodes.length},e.addRGBPoint=function(t,n,r,a){return e.addRGBPointLong(t,n,r,a,.5,0)},e.addRGBPointLong=function(n,r,a,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(i<0||i>1)return om("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return om("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var c={x:n,r:r,g:a,b:o,midpoint:i,sharpness:s};t.nodes.push(c),e.sortAndUpdateRange();for(var u=0;u<t.nodes.length&&t.nodes[u].x!==n;u++);return u<t.nodes.length?u:-1},e.addHSVPoint=function(t,n,r,a){return e.addHSVPointLong(t,n,r,a,.5,0)},e.addHSVPointLong=function(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=[],c=[n,r,a];return ea(c,s),e.addRGBPoint(t,s[0],s[1],s[2],o,i)},e.setNodes=function(n){if(t.nodes!==n){var r=JSON.stringify(t.nodes);t.nodes=n;var a=JSON.stringify(t.nodes);if(e.sortAndUpdateRange()||r!==a)return e.modified(),!0}return!1},e.sortAndUpdateRange=function(){var n=JSON.stringify(t.nodes);t.nodes.sort((function(e,t){return e.x-t.x}));var r=JSON.stringify(t.nodes),a=e.updateRange();return a||n===r?a:(e.modified(),!0)},e.updateRange=function(){var n=[2];n[0]=t.mappingRange[0],n[1]=t.mappingRange[1];var r=t.nodes.length;return r?(t.mappingRange[0]=t.nodes[0].x,t.mappingRange[1]=t.nodes[r-1].x):(t.mappingRange[0]=0,t.mappingRange[1]=0),(n[0]!==t.mappingRange[0]||n[1]!==t.mappingRange[1])&&(e.modified(),!0)},e.removePoint=function(n){for(var r=0;r<t.nodes.length&&t.nodes[r].x!==n;r++);var a=r;if(r>=t.nodes.length)return-1;var o=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(o=e.updateRange()),o||e.modified(),a},e.movePoint=function(n,r){if(n!==r){e.removePoint(r);for(var a=0;a<t.nodes.length;a++)if(t.nodes[a].x===n){t.nodes[a].x=r,e.sortAndUpdateRange();break}}},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addRGBSegment=function(n,r,a,o,i,s,c,u){e.sortAndUpdateRange();for(var l=0;l<t.nodes.length;)t.nodes[l].x>=n&&t.nodes[l].x<=i?t.nodes.splice(l,1):l++;e.addRGBPointLong(n,r,a,o,.5,0),e.addRGBPointLong(i,s,c,u,.5,0),e.modified()},e.addHSVSegment=function(t,n,r,a,o,i,s,c){var u=[i,s,c],l=[],d=[];ea([n,r,a],l),ea(u,d),e.addRGBSegment(t,l[0],l[1],l[2],o,d[0],d[1],d[2])},e.mapValue=function(t){var n=[];return e.getColor(t,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},e.getColor=function(n,r){if(t.indexedLookup){var a=e.getSize(),o=e.getAnnotatedValueIndexInternal(n);if(o<0||0===a)e.getNanColor(r);else{var i=[];e.getNodeValue(o%a,i),r[0]=i.r,r[1]=i.g,r[2]=i.b}}else e.getTable(n,n,1,r)},e.getRedValue=function(t){var n=[];return e.getColor(t,n),n[0]},e.getGreenValue=function(t){var n=[];return e.getColor(t,n),n[1]},e.getBlueValue=function(t){var n=[];return e.getColor(t,n),n[2]},e.getTable=function(n,r,a,o){var i=Number(n),s=Number(r);if(va(i)||va(s))for(var c=0;c<a;c++)o[3*c+0]=t.nanColor[0],o[3*c+1]=t.nanColor[1],o[3*c+2]=t.nanColor[2];else{var u=0,l=t.nodes.length,d=0,p=0,f=0;0!==l&&(d=t.nodes[l-1].r,p=t.nodes[l-1].g,f=t.nodes[l-1].b);var g=0,m=0,v=0,h=[0,0,0],y=[0,0,0],b=0,x=0,T=[],S=t.scale===nm.LOG10;S&&(S=t.mappingRange[0]>0);var P=0,w=0,C=0;S&&(P=Math.log10(i),w=Math.log10(s));for(var O=0;O<a;O++){var A=3*O;if(a>1?S?(C=P+O/(a-1)*(w-P),g=Math.pow(10,C)):g=i+O/(a-1)*(s-i):S?(C=.5*(P+w),g=Math.pow(10,C)):g=.5*(i+s),t.discretize){var I=t.mappingRange;if(g>=I[0]&&g<=I[1]){var M=t.numberOfValues,R=I[1]-I[0];if(M<=1)g=I[0]+R/2;else{var E=(g-I[0])/R,D=lr(M*E);g=I[0]+D/(M-1)*R}}}for(;u<l&&g>t.nodes[u].x;)++u<l&&(m=t.nodes[u-1].x,v=t.nodes[u].x,S&&(m=Math.log10(m),v=Math.log10(v)),h[0]=t.nodes[u-1].r,y[0]=t.nodes[u].r,h[1]=t.nodes[u-1].g,y[1]=t.nodes[u].g,h[2]=t.nodes[u-1].b,y[2]=t.nodes[u].b,b=t.nodes[u-1].midpoint,x=t.nodes[u-1].sharpness,b<1e-5&&(b=1e-5),b>.99999&&(b=.99999));if(g>t.mappingRange[1])o[A]=0,o[A+1]=0,o[A+2]=0,t.clamping&&(e.getUseAboveRangeColor()?(o[A]=t.aboveRangeColor[0],o[A+1]=t.aboveRangeColor[1],o[A+2]=t.aboveRangeColor[2]):(o[A]=d,o[A+1]=p,o[A+2]=f));else if(g<t.mappingRange[0]||fa(g)&&g<0)o[A]=0,o[A+1]=0,o[A+2]=0,t.clamping&&(e.getUseBelowRangeColor()?(o[A]=t.belowRangeColor[0],o[A+1]=t.belowRangeColor[1],o[A+2]=t.belowRangeColor[2]):l>0&&(o[A]=t.nodes[0].r,o[A+1]=t.nodes[0].g,o[A+2]=t.nodes[0].b));else if(0===u&&(Math.abs(g-i)<1e-6||t.discretize))l>0?(o[A]=t.nodes[0].r,o[A+1]=t.nodes[0].g,o[A+2]=t.nodes[0].b):(o[A]=0,o[A+1]=0,o[A+2]=0);else{var L=0;if(L=(L=S?(C-m)/(v-m):(g-m)/(v-m))<b?.5*L/b:.5+.5*(L-b)/(1-b),x>.99){if(L<.5){o[A]=h[0],o[A+1]=h[1],o[A+2]=h[2];continue}o[A]=y[0],o[A+1]=y[1],o[A+2]=y[2];continue}if(x<.01){if(t.colorSpace===tm.RGB)o[A]=(1-L)*h[0]+L*y[0],o[A+1]=(1-L)*h[1]+L*y[1],o[A+2]=(1-L)*h[2]+L*y[2];else if(t.colorSpace===tm.HSV){var B=[],N=[];$r(h,B),$r(y,N),t.hSVWrap&&(B[0]-N[0]>.5||N[0]-B[0]>.5)&&(B[0]>N[0]?B[0]-=1:N[0]-=1);var k=[];k[0]=(1-L)*B[0]+L*N[0],k[0]<0&&(k[0]+=1),k[1]=(1-L)*B[1]+L*N[1],k[2]=(1-L)*B[2]+L*N[2],ea(k,T),o[A]=T[0],o[A+1]=T[1],o[A+2]=T[2]}else if(t.colorSpace===tm.LAB){var V=[],_=[];oa(h,V),oa(y,_);var F=[];F[0]=(1-L)*V[0]+L*_[0],F[1]=(1-L)*V[1]+L*_[1],F[2]=(1-L)*V[2]+L*_[2],ia(F,T),o[A]=T[0],o[A+1]=T[1],o[A+2]=T[2]}else t.colorSpace===tm.DIVERGING?(um(L,h,y,T),o[A]=T[0],o[A+1]=T[1],o[A+2]=T[2]):om("ColorSpace set to invalid value.",t.colorSpace);continue}L<.5?L=.5*Math.pow(2*L,1+10*x):L>.5&&(L=1-.5*Math.pow(2*(1-L),1+10*x));var G=L*L,U=G*L,j=2*U-3*G+1,z=-2*U+3*G,W=U-2*G+L,H=U-G,K=void 0;if(t.colorSpace===tm.RGB)for(var X=0;X<3;X++)K=(1-x)*(y[X]-h[X]),o[A+X]=j*h[X]+z*y[X]+W*K+H*K;else if(t.colorSpace===tm.HSV){var q=[],Y=[];$r(h,q),$r(y,Y),t.hSVWrap&&(q[0]-Y[0]>.5||Y[0]-q[0]>.5)&&(q[0]>Y[0]?q[0]-=1:Y[0]-=1);for(var Z=[],Q=0;Q<3;Q++)K=(1-x)*(Y[Q]-q[Q]),Z[Q]=j*q[Q]+z*Y[Q]+W*K+H*K,0===Q&&Z[Q]<0&&(Z[Q]+=1);ea(Z,T),o[A]=T[0],o[A+1]=T[1],o[A+2]=T[2]}else if(t.colorSpace===tm.LAB){var J=[],$=[];oa(h,J),oa(y,$);for(var ee=[],te=0;te<3;te++)K=(1-x)*($[te]-J[te]),ee[te]=j*J[te]+z*$[te]+W*K+H*K;ia(ee,T),o[A]=T[0],o[A+1]=T[1],o[A+2]=T[2]}else t.colorSpace===tm.DIVERGING?(um(L,h,y,T),o[A]=T[0],o[A+1]=T[1],o[A+2]=T[2]):om("ColorSpace set to invalid value.");for(var ne=0;ne<3;ne++)o[A+ne]=o[A+ne]<0?0:o[A+ne],o[A+ne]=o[A+ne]>1?1:o[A+ne]}}}},e.getUint8Table=function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.getMTime()<=t.buildTime&&t.tableSize===a&&t.tableWithAlpha!==o)return t.table;if(0===t.nodes.length)return om("Attempting to lookup a value with no points in the function"),t.table;var i=o?4:3;t.tableSize===a&&t.tableWithAlpha===o||(t.table=new Uint8Array(a*i),t.tableSize=a,t.tableWithAlpha=o);var s=[];e.getTable(n,r,a,s);for(var c=0;c<a;c++)t.table[c*i+0]=Math.floor(255*s[3*c+0]+.5),t.table[c*i+1]=Math.floor(255*s[3*c+1]+.5),t.table[c*i+2]=Math.floor(255*s[3*c+2]+.5),o&&(t.table[c*i+3]=255);return t.buildTime.modified(),t.table},e.buildFunctionFromArray=function(n){e.removeAllPoints();for(var r=n.getNumberOfComponents(),a=0;a<n.getNumberOfTuples();a++)switch(r){case 3:t.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:.5,sharpness:0});break;case 4:t.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:.5,sharpness:0});break;case 5:t.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break;case 6:t.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)})}e.sortAndUpdateRange()},e.buildFunctionFromTable=function(n,r,a,o){var i=0;e.removeAllPoints(),a>1&&(i=(r-n)/(a-1));for(var s=0;s<a;s++){var c={x:n+i*s,r:o[3*s],g:o[3*s+1],b:o[3*s+2],sharpness:0,midpoint:.5};t.nodes.push(c)}e.sortAndUpdateRange()},e.getNodeValue=function(e,n){return e<0||e>=t.nodes.length?(om("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].r,n[2]=t.nodes[e].g,n[3]=t.nodes[e].b,n[4]=t.nodes[e].midpoint,n[5]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,r){if(n<0||n>=t.nodes.length)return om("Index out of range!"),-1;var a=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].r=r[1],t.nodes[n].g=r[2],t.nodes[n].b=r[3],t.nodes[n].midpoint=r[4],t.nodes[n].sharpness=r[5],a!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.getNumberOfAvailableColors=function(){return t.indexedLookup&&e.getSize()?e.getSize():t.tableSize?t.tableSize:16777216},e.getIndexedColor=function(t,n){var r=e.getSize();if(r>0&&t>=0){var a=[];e.getNodeValue(t%r,a);for(var o=0;o<3;++o)n[o]=a[o+1];n[3]=1}else e.getNanColor(n),n[3]=1},e.fillFromDataPointer=function(t,n){if(!(t<=0)&&n){e.removeAllPoints();for(var r=0;r<t;r++)e.addRGBPoint(n[4*r],n[4*r+1],n[4*r+2],n[4*r+3])}},e.setMappingRange=function(n,r){var a=[n,r],o=e.getRange();if(o[1]!==a[1]||o[0]!==a[0])if(a[1]!==a[0]){for(var i=(a[1]-a[0])/(o[1]-o[0]),s=a[0]-o[0]*i,c=0;c<t.nodes.length;++c)t.nodes[c].x=t.nodes[c].x*i+s;t.mappingRange[0]=a[0],t.mappingRange[1]=a[1],e.modified()}else om("attempt to set zero width color range")},e.adjustRange=function(n){var r=e.getRange(),a=[];r[0]<n[0]?(e.getColor(n[0],a),e.addRGBPoint(n[0],a[0],a[1],a[2])):(e.getColor(r[0],a),e.addRGBPoint(n[0],a[0],a[1],a[2])),r[1]>n[1]?(e.getColor(n[1],a),e.addRGBPoint(n[1],a[0],a[1],a[2])):(e.getColor(r[1],a),e.addRGBPoint(n[1],a[0],a[1],a[2])),e.sortAndUpdateRange();for(var o=0;o<t.nodes.length;)t.nodes[o].x>=n[0]&&t.nodes[o].x<=n[1]?t.nodes.splice(o,1):++o;return 1},e.estimateMinNumberOfSamples=function(t,n){var r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=function(){if(t.nodes.length<2)return-1;for(var e=Number.MAX_VALUE,n=0;n<t.nodes.length-1;n++){var r=t.nodes[n+1].x-t.nodes[n].x;r<e&&(e=r)}return e},e.mapScalarsThroughTable=function(n,r,a,o){0!==e.getSize()?t.indexedLookup?e.mapDataIndexed(n,r,a,o):e.mapData(n,r,a,o):am("Transfer Function Has No Points!")},e.mapData=function(t,n,r,a){if(0!==e.getSize()){var o=Math.floor(255*e.getAlpha()+.5),i=t.getNumberOfTuples(),s=t.getNumberOfComponents(),c=n.getData(),u=t.getData(),l=[];if(r===rm.RGBA)for(var d=0;d<i;d++){var p=u[d*s+a];e.getColor(p,l),c[4*d]=Math.floor(255*l[0]+.5),c[4*d+1]=Math.floor(255*l[1]+.5),c[4*d+2]=Math.floor(255*l[2]+.5),c[4*d+3]=o}if(r===rm.RGB)for(var f=0;f<i;f++){var g=u[f*s+a];e.getColor(g,l),c[3*f]=Math.floor(255*l[0]+.5),c[3*f+1]=Math.floor(255*l[1]+.5),c[3*f+2]=Math.floor(255*l[2]+.5)}if(r===rm.LUMINANCE)for(var m=0;m<i;m++){var v=u[m*s+a];e.getColor(v,l),c[m]=Math.floor(76.5*l[0]+150.45*l[1]+28.05*l[2]+.5)}if(r===rm.LUMINANCE_ALPHA)for(var h=0;h<i;h++){var y=u[h*s+a];e.getColor(y,l),c[2*h]=Math.floor(76.5*l[0]+150.45*l[1]+28.05*l[2]+.5),c[2*h+1]=o}}else im("Transfer Function Has No Points!")},e.applyColorMap=function(n){var r=JSON.stringify(t.colorSpace);n.ColorSpace&&(t.colorSpace=tm[n.ColorSpace.toUpperCase()],void 0===t.colorSpace&&(om("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),t.colorSpace=tm.RGB));var a=r!==JSON.stringify(t.colorSpace),o=a||JSON.stringify(t.nanColor);if(n.NanColor)for(t.nanColor=[].concat(n.NanColor);t.nanColor.length<4;)t.nanColor.push(1);var i=(a=a||o!==JSON.stringify(t.nanColor))||JSON.stringify(t.nodes);if(n.RGBPoints){var s=n.RGBPoints.length;t.nodes=[];for(var c=0;c<s;c+=4)t.nodes.push({x:n.RGBPoints[c],r:n.RGBPoints[c+1],g:n.RGBPoints[c+2],b:n.RGBPoints[c+3],midpoint:.5,sharpness:0})}var u=e.sortAndUpdateRange(),l=!u&&(a||i!==JSON.stringify(t.nodes));return l&&e.modified(),u||l}}var dm={clamping:!0,colorSpace:tm.RGB,hSVWrap:!0,scale:nm.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function pm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dm,n),Jg.extend(e,t,n),t.table=[],t.nodes=[],t.nanColor=[.5,0,0,1],t.belowRangeColor=[0,0,0,1],t.aboveRangeColor=[1,1,1,1],t.buildTime={},Ot.obj(t.buildTime),Ot.get(e,t,["buildTime","mappingRange"]),Ot.setGet(e,t,["useAboveRangeColor","useBelowRangeColor","colorSpace","discretize","numberOfValues"]),Ot.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),Ot.getArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"]),lm(e,t)}var fm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(pm,"vtkColorTransferFunction"),extend:pm},$g),gm={Preset:0,RGBPoints:1,HSVPoints:2,Nodes:3},mm={Preset:"Cool to Warm",RGBPoints:[[0,0,0,0],[1,1,1,1]],HSVPoints:[[0,0,0,0],[1,0,0,1]],Nodes:[{x:0,r:0,g:0,b:0,midpoint:.5,sharpness:0},{x:1,r:1,g:1,b:1,midpoint:.5,sharpness:0}]};function vm(e,t){t.classHierarchy.push("vtkLookupTableProxy"),t.lookupTable=t.lookupTable||fm.newInstance(),t.lookupTable.setVectorModeToMagnitude(),e.setPresetName=function(n){t.presetName!==n&&(t.presetName=n,t.mode=gm.Preset,e.applyMode())},e.setRGBPoints=function(n){t.rgbPoints!==n&&(t.rgbPoints=(n||mm.RGBPoints).slice(),e.applyMode())},e.setHSVPoints=function(n){t.hsvPoints!==n&&(t.hsvPoints=(n||mm.HSVPoints).slice(),e.applyMode())},e.setNodes=function(n){t.nodes!==n&&(t.nodes=(n||mm.Nodes).slice(),e.applyMode())},e.setMode=function(n){t.mode!==n&&(t.mode=n,e.applyMode())},e.applyMode=function(){switch(t.mode){case gm.Preset:var n=Vg(t.presetName);n&&t.lookupTable.applyColorMap(n);break;case gm.RGBPoints:t.lookupTable.removeAllPoints(),t.rgbPoints.forEach((function(e){var n;return(n=t.lookupTable).addRGBPointLong.apply(n,ve(e))}));break;case gm.HSVPoints:t.lookupTable.removeAllPoints(),t.hsvPoints.forEach((function(e){var n;return(n=t.lookupTable).addHSVPointLong.apply(n,ve(e))}));break;case gm.Nodes:t.lookupTable.setNodes(t.nodes)}t.lookupTable.setMappingRange(t.dataRange[0],t.dataRange[1]),t.lookupTable.updateRange(),e.modified()},e.setDataRange=function(n,r){t.dataRange[0]===n&&t.dataRange[1]===r||(t.dataRange[0]=n,t.dataRange[1]=r,t.lookupTable.setMappingRange(t.dataRange[0],t.dataRange[1]),t.lookupTable.updateRange(),e.applyMode())},e.applyMode()}var hm={mode:gm.Preset,presetName:mm.Preset,rgbPoints:mm.RGBPoints,hsvPoints:mm.HSVPoints,nodes:mm.Nodes,arrayName:"No array associated",arrayLocation:"pointData",dataRange:[0,1]};function ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hm,n),Ot.obj(e,t),Ot.setGet(e,t,["arrayName"]),Ot.get(e,t,["mode","lookupTable","presetName","rgbPoints","hsvPoints","nodes","dataRange"]),vm(e,t),Ot.proxy(e,t)}var bm={newInstance:Ot.newInstance(ym,"vtkLookupTableProxy"),extend:ym,Mode:gm,Defaults:mm};function xm(e,t){t.classHierarchy.push("vtkSourceProxy"),e.setInputProxy=function(n){t.inputSubscription&&(t.inputSubscription(),t.inputSubscription=null),t.inputProxy=n,t.inputProxy&&(t.inputSubscription=n.onModified(e.update,-1).unsubscribe),e.update()},e.setInputData=function(n,r){t.dataset!==n&&(t.dataset=n,t.type=r||n.getClassName(),e.modified(),e.invokeDatasetChange())},e.setInputAlgorithm=function(n,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.type=r,t.algo!==n&&(t.algo=n,t.algoSubscription&&(t.algoSubscription(),t.algoSubscription=null),n&&a&&(t.algoSubscription=n.onModified((function(){e.update()}),-1).unsubscribe,e.update()))},e.update=function(){t.algo&&t.inputProxy&&t.algo.setInputData(t.inputProxy.getDataset()),t.updateDomain&&t.inputProxy&&t.updateDomain(e,t.inputProxy.getDataset()),t.algo&&e.setInputData(t.algo.getOutputData(),t.type)},e.getUpdate=function(){return t.algo.getMTime()>t.dataset.getMTime()},e.delete=Ot.chain((function(){t.algoSubscription&&(t.algoSubscription(),t.algoSubscription=null),t.inputSubscription&&(t.inputSubscription(),t.inputSubscription=null)}),e.delete),t.inputProxy&&(t.inputSubscription=t.inputProxy.onModified((function(){e.update()}),-1).unsubscribe),t.algoFactory&&e.setInputAlgorithm(t.algoFactory.newInstance(),null,t.autoUpdate),e.update()}var Tm={name:"Default source"};function Sm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tm,n),Ot.obj(e,t),Ot.get(e,t,["name","type","dataset","algo","inputProxy"]),Ot.set(e,t,["name"]),Ot.event(e,t,"DatasetChange"),Ot.proxy(e,t),xm(e,t),t.proxyPropertyMapping&&Ot.proxyPropertyMapping(e,t,t.proxyPropertyMapping)}var Pm={newInstance:Ot.newInstance(Sm,"vtkSourceProxy"),extend:Sm};function wm(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Cm={CoordinateSystem:{DISPLAY:0,WORLD:1}};function Om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Am=Cm.CoordinateSystem;function Im(e){return function(){return Ot.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}}function Mm(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=t.mtime,n=0;n<t.textures.length;++n){var r=t.textures[n].getMTime();r>e&&(e=r)}return e},e.processSelectorPixelBuffers=function(e,t){},e.getNestedProps=function(){return null},e.getActors=function(){return[]},e.getActors2D=function(){return[]},e.getVolumes=function(){return[]},e.pick=Im("pick"),e.hasKey=Im("hasKey"),e.getNestedVisibility=function(){return t.visibility&&(!t._parentProp||t._parentProp.getNestedVisibility())},e.getNestedPickable=function(){return t.pickable&&(!t._parentProp||t._parentProp.getNestedPickable())},e.getNestedDragable=function(){return t.dragable&&(!t._parentProp||t._parentProp.getNestedDragable())},e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return-1!==t.textures.indexOf(e)},e.addTexture=function(n){n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=function(n){var r=t.textures.filter((function(e){return e!==n}));t.textures.length!==r.length&&(t.textures=r,e.modified())},e.removeAllTextures=function(){t.textures=[],e.modified()},e.setCoordinateSystemToWorld=function(){return e.setCoordinateSystem(Am.WORLD)},e.setCoordinateSystemToDisplay=function(){return e.setCoordinateSystem(Am.DISPLAY)}}var Rm={allocatedRenderTime:10,coordinateSystem:Am.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Em(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rm,n),Ot.obj(e,t),Ot.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),Ot.setGet(e,t,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),Ot.moveToProtected(e,t,["parentProp"]),Mm(e,t)}var Dm=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Om(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Em,"vtkProp"),extend:Em},Cm);function Lm(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=function(n){t.position=t.position.map((function(e,t){return e+n[t]})),e.modified()},e.getOrientationWXYZ=function(){var e=ls();V(e,t.rotation);var n=new Float64Array(3),r=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>o?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}(n,e);return[cr(r),n[0],n[1],n[2]]},e.rotateX=function(n){0!==n&&(w(t.rotation,t.rotation,sr(n)),e.modified())},e.rotateY=function(n){0!==n&&(C(t.rotation,t.rotation,sr(n)),e.modified())},e.rotateZ=function(n){0!==n&&(O(t.rotation,t.rotation,sr(n)),e.modified())},e.rotateWXYZ=function(n,r,a,o){if(0!==n&&(0!==r||0!==a||0!==o)){var i=sr(n),s=ls();ds(s,[r,a,o],i);var c=new Float64Array(16);G(c,s),x(t.rotation,t.rotation,c),e.modified()}},e.setOrientation=function(n,r,a){return(n!==t.orientation[0]||r!==t.orientation[1]||a!==t.orientation[2])&&(t.orientation=[n,r,a],m(t.rotation),e.rotateZ(a),e.rotateX(n),e.rotateY(r),e.modified(),!0)},e.setUserMatrix=function(n){return!_r(t.userMatrix,n)&&(p(t.userMatrix,n),e.modified(),!0)},e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){if(e.getMTime()>t.matrixMTime.getMTime()){m(t.matrix),t.userMatrix&&x(t.matrix,t.matrix,t.userMatrix),T(t.matrix,t.matrix,t.origin),T(t.matrix,t.matrix,t.position),x(t.matrix,t.matrix,t.rotation),S(t.matrix,t.matrix,t.scale),T(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),v(t.matrix,t.matrix),t.isIdentity=!0;for(var n=0;n<4;++n)for(var r=0;r<4;++r)(n===r?1:0)!==t.matrix[n+4*r]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getCenter=function(){return of.getCenter(t.bounds)},e.getLength=function(){return of.getLength(t.bounds)},e.getXRange=function(){return of.getXRange(t.bounds)},e.getYRange=function(){return of.getYRange(t.bounds)},e.getZRange=function(){return of.getZRange(t.bounds)},e.getUserMatrix=function(){return t.userMatrix},e.onModified((function(){e.computeMatrix()}))}var Bm={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Nm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bm,n),Dm.extend(e,t,n),t.matrixMTime={},Ot.obj(t.matrixMTime),Ot.get(e,t,["bounds","isIdentity"]),Ot.getArray(e,t,["orientation"]),Ot.setGetArray(e,t,["origin","position","scale"],3),t.matrix=m(new Float64Array(16)),t.rotation=m(new Float64Array(16)),t.userMatrix=m(new Float64Array(16)),t.transform=null,Lm(e,t)}var km={newInstance:Ot.newInstance(Nm,"vtkProp3D"),extend:Nm};function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _m=Ot.vtkDebugMacro;function Fm(e,t){t.classHierarchy.push("vtkActor");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getActors=function(){return[e]},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return(n=n&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=vl.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),n;if(!t.mapperBounds||n[0]!==t.mapperBounds[0]||n[1]!==t.mapperBounds[1]||n[2]!==t.mapperBounds[2]||n[3]!==t.mapperBounds[3]||n[4]!==t.mapperBounds[4]||n[5]!==t.mapperBounds[5]||e.getMTime()>t.boundsMTime.getMTime()){_m("Recomputing bounds..."),t.mapperBounds=n.concat();var r=[];of.getCorners(n,r),e.computeMatrix();var a=new Float64Array(16);v(a,t.matrix),r.forEach((function(e){return Cn(e,e,a)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?r.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):r.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=n.getMTime();if(null!==t.property){var r=t.property.getMTime();e=r>e?r:e}if(null!==t.backfaceProperty){var a=t.backfaceProperty.getMTime();e=a>e?a:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()},e.processSelectorPixelBuffers=function(e,n){t.mapper&&t.mapper.processSelectorPixelBuffers&&t.mapper.processSelectorPixelBuffers(e,n)}}var Gm={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function Um(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gm,n),km.extend(e,t,n),t.boundsMTime={},Ot.obj(t.boundsMTime),Ot.set(e,t,["property"]),Ot.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),Fm(e,t)}var jm={newInstance:Ot.newInstance(Um,"vtkActor"),extend:Um};function zm(e,t){t.classHierarchy.push("vtkAbstractMapper"),e.update=function(){e.getInputData()},e.addClippingPlane=function(n){return!!n.isA("vtkPlane")&&!t.clippingPlanes.includes(n)&&(t.clippingPlanes.push(n),e.modified(),!0)},e.getNumberOfClippingPlanes=function(){return t.clippingPlanes.length},e.removeAllClippingPlanes=function(){return 0!==t.clippingPlanes.length&&(t.clippingPlanes.length=0,e.modified(),!0)},e.removeClippingPlane=function(n){var r=t.clippingPlanes.indexOf(n);return-1!==r&&(t.clippingPlanes.splice(r,1),e.modified(),!0)},e.getClippingPlanes=function(){return t.clippingPlanes},e.setClippingPlanes=function(t){if(t)if(Array.isArray(t))for(var n=t.length,r=0;r<n&&r<6;r++)e.addClippingPlane(t[r]);else e.addClippingPlane(t)},e.getClippingPlaneInDataCoords=function(e,n,r){var a=t.clippingPlanes,o=e;if(a){var i=a.length;if(n>=0&&n<i){var s=a[n],c=s.getNormal(),u=s.getOrigin(),l=c[0],d=c[1],p=c[2],f=-(l*u[0]+d*u[1]+p*u[2]);return r[0]=l*o[0]+d*o[4]+p*o[8]+f*o[12],r[1]=l*o[1]+d*o[5]+p*o[9]+f*o[13],r[2]=l*o[2]+d*o[6]+p*o[10]+f*o[14],void(r[3]=l*o[3]+d*o[7]+p*o[11]+f*o[15])}}Ot.vtkErrorMacro("Clipping plane index ".concat(n," is out of range."))}}var Wm={clippingPlanes:[]},Hm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wm,n),Ot.obj(e,t),Ot.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),zm(e,t)};function Km(e,t){e.getBounds=function(){return 0},e.getBounds=function(n){e.getBounds();for(var r=0;r<6;r++)n[r]=t.bounds[r]},e.getCenter=function(){e.getBounds();for(var n=0;n<3;n++)t.center[n]=(t.bounds[2*n+1]+t.bounds[2*n])/2;return t.center.slice()},e.getLength=function(){var n=0,r=0;e.getBounds();for(var a=0;a<3;a++)r+=(n=t.bounds[2*a+1]-t.bounds[2*a])*n;return Math.sqrt(r)}}var Xm={bounds:[1,-1,1,-1,1,-1],center:[0,0,0],viewSpecificProperties:null},qm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xm,n),Hm(e,t,n),t.bounds||sa(t.bounds),t.center||(t.center=[0,0,0]),Ot.setGet(e,t,["viewSpecificProperties"]),t.viewSpecificProperties||(t.viewSpecificProperties={}),Km(e,t)},Ym=Ot.vtkErrorMacro;function Zm(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){var n=!0;t.nanColor[3]<1&&(n=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(n=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(n=0);for(var r=3;r<t.table.length&&n;r+=4)t.table[r]<255&&(n=!1);t.opaqueFlag=n,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return t.table.length/4},e.linearIndexLookup=function(e,t){var n=0;return n=e<t.range[0]?t.maxIndex+0+1.5:e>t.range[1]?t.maxIndex+1+1.5:(n=(e+t.shift)*t.scale)<t.maxIndex?n:t.maxIndex,Math.floor(n)},e.linearLookup=function(t,n,r){var a=4*(va(t)?Math.floor(r.maxIndex+1.5+2):e.linearIndexLookup(t,r));return n.slice(a,a+4)},e.indexedLookupFunction=function(n,r,a){var o=e.getAnnotatedValueIndexInternal(n);-1===o&&(o=t.numberOfColors+2);var i=4*o;return[r[i],r[i+1],r[i+2],r[i+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(n,r,a,o){var i=e.linearLookup;t.indexedLookup&&(i=e.indexedLookupFunction);var s=e.getMappingRange(),c={maxIndex:e.getNumberOfColors()-1,range:s,shift:0,scale:0};e.lookupShiftAndScale(s,c);var u=e.getAlpha(),l=n.getNumberOfTuples(),d=n.getNumberOfComponents(),p=r.getData(),f=n.getData();if(u>=1){if(a===_g.RGBA)for(var g=0;g<l;g++){var m=i(f[g*d+o],t.table,c);p[4*g]=m[0],p[4*g+1]=m[1],p[4*g+2]=m[2],p[4*g+3]=m[3]}}else if(a===_g.RGBA)for(var v=0;v<l;v++){var h=i(f[v*d+o],t.table,c);p[4*v]=h[0],p[4*v+1]=h[1],p[4*v+2]=h[2],p[4*v+3]=Math.floor(h[3]*u+.5)}},e.forceBuild=function(){var n=0,r=0,a=0,o=0,i=t.numberOfColors-1;i&&(n=(t.hueRange[1]-t.hueRange[0])/i,r=(t.saturationRange[1]-t.saturationRange[0])/i,a=(t.valueRange[1]-t.valueRange[0])/i,o=(t.alphaRange[1]-t.alphaRange[0])/i),t.table.length=4*i+16;for(var s=[],c=[],u=0;u<=i;u++)s[0]=t.hueRange[0]+u*n,s[1]=t.saturationRange[0]+u*r,s[2]=t.valueRange[0]+u*a,ea(s,c),c[3]=t.alphaRange[0]+u*o,t.table[4*u]=255*c[0]+.5,t.table[4*u+1]=255*c[1]+.5,t.table[4*u+2]=255*c[2]+.5,t.table[4*u+3]=255*c[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=function(n){if(4===n.getNumberOfComponents())if(n.getDataType()===Kn.UNSIGNED_CHAR){t.numberOfColors=n.getNumberOfTuples();var r=n.getData();t.table.length=r.length;for(var a=0;a<r.length;a++)t.table[a]=r[a];e.buildSpecialColors(),t.insertTime.modified(),e.modified()}else Ym("Expected unsigned char values for RGBA colors");else Ym("Expected 4 components for RGBA colors")},e.buildSpecialColors=function(){var e=t.numberOfColors,n=t.table,r=4*(e+0);t.useBelowRangeColor||0===e?(n[r]=255*t.belowRangeColor[0]+.5,n[r+1]=255*t.belowRangeColor[1]+.5,n[r+2]=255*t.belowRangeColor[2]+.5,n[r+3]=255*t.belowRangeColor[3]+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=4*(e+1),t.useAboveRangeColor||0===e?(n[r]=255*t.aboveRangeColor[0]+.5,n[r+1]=255*t.aboveRangeColor[1]+.5,n[r+2]=255*t.aboveRangeColor[2]+.5,n[r+3]=255*t.aboveRangeColor[3]+.5):(n[r]=n[4*(e-1)+0],n[r+1]=n[4*(e-1)+1],n[r+2]=n[4*(e-1)+2],n[r+3]=n[4*(e-1)+3]),n[r=4*(e+2)]=255*t.nanColor[0]+.5,n[r+1]=255*t.nanColor[1]+.5,n[r+2]=255*t.nanColor[2]+.5,n[r+3]=255*t.nanColor[3]+.5},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&t.insertTime.modified()}var Qm={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Jm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qm,n),Jg.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},Ot.obj(t.buildTime),t.opaqueFlagBuildTime={},Ot.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},Ot.obj(t.insertTime,{mtime:0}),Ot.get(e,t,["buildTime"]),Ot.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),Ot.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),Ot.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),Ot.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),Zm(e,t)}var $m={newInstance:Ot.newInstance(Jm,"vtkLookupTable"),extend:Jm},ev=1,tv=0,nv=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function rv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;tv=e}var av={getResolveCoincidentTopologyAsString:function(){return nv[tv]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return ev},getResolveCoincidentTopology:function(){return tv},setResolveCoincidentTopology:rv,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){ev=e},setResolveCoincidentTopologyToDefault:function(){rv(0)},setResolveCoincidentTopologyToOff:function(){rv(0)},setResolveCoincidentTopologyToPolygonOffset:function(){rv(1)}};function ov(e,t,n){n.forEach((function(n){e["get".concat(n.method)]=function(){return t[n.key]},e["set".concat(n.method)]=function(e,r){t[n.key]={factor:e,offset:r}}}))}var iv=["Polygon","Line","Point"],sv={};ov(sv,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},iv.map((function(e){return{key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")}})));var cv={implementCoincidentTopologyMethods:function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),Ot.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(av).forEach((function(t){e[t]=av[t]})),Object.keys(sv).forEach((function(t){e[t]=sv[t]})),ov(e,t.topologyOffset,iv.map((function(e){return{key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}}))),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=sv.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=sv.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=sv.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}}},staticOffsetAPI:sv,otherStaticMethods:av,CATEGORIES:iv},uv={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3},lv={PassTypes:uv};function dv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dv(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fv=oi.FieldAssociations,gv=cv.staticOffsetAPI,mv=cv.otherStaticMethods,vv=Gg.ColorMode,hv=Gg.ScalarMode,yv=Gg.GetArray,bv=Fg.VectorMode,xv=Ba.VtkDataTypes;function Tv(e){return function(){return Ot.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}}function Sv(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=ha(),t.bounds},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.createDefaultLookupTable=function(){t.lookupTable=$m.newInstance()},e.getColorModeAsString=function(){return Ot.enumToString(vv,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return Ot.enumToString(hv,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,n,r,a,o){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var i=null,s=!1;if(n===hv.DEFAULT)(i=e.getPointData().getScalars())||(i=e.getCellData().getScalars(),s=!0);else if(n===hv.USE_POINT_DATA)i=e.getPointData().getScalars();else if(n===hv.USE_CELL_DATA)i=e.getCellData().getScalars(),s=!0;else if(n===hv.USE_POINT_FIELD_DATA){var c=e.getPointData();i=r===yv.BY_ID?c.getArrayByIndex(a):c.getArrayByName(o)}else if(n===hv.USE_CELL_FIELD_DATA){var u=e.getCellData();s=!0,i=r===yv.BY_ID?u.getArrayByIndex(a):u.getArrayByName(o)}else if(n===hv.USE_FIELD_DATA){var l=e.getFieldData();i=r===yv.BY_ID?l.getArrayByIndex(a):l.getArrayByName(o)}return{scalars:i,cellFlag:s}},e.mapScalars=function(n,r){var a=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!a)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);var o="".concat(e.getMTime()).concat(a.getMTime()).concat(r);if(t.colorBuildString!==o){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(n))e.mapScalarsToTexture(a,r);else{t.colorCoordinates=null,t.colorTextureMap=null;var i=e.getLookupTable();i&&(i.build(),t.colorMapColors=i.mapScalars(a,t.colorMode,t.fieldDataTupleId))}t.colorBuildString="".concat(e.getMTime()).concat(a.getMTime()).concat(r)}},e.scalarToTextureCoordinate=function(e,t,n){var r=.5,a=1;return va(e)||(a=.49,(r=(e-t)*n)>1e3?r=1e3:r<-1e3&&(r=-1e3)),{texCoordS:r,texCoordT:a}},e.createColorTextureCoordinates=function(t,n,r,a,o,i,s,c,u){var l=(i[1]-i[0])/c,d=[];d[0]=i[0]-l,d[1]=i[1]+l;var p=1/(d[1]-d[0]),f=n.getData(),g=t.getData(),m=0,v=0;if(o<0||o>=a)for(var h=0;h<r;++h){for(var y=0,b=0;b<a;++b)y+=g[m]*g[m],m++;var x=Math.sqrt(y);u&&(x=$m.applyLogScale(x,s,i));var T=e.scalarToTextureCoordinate(x,d[0],p);f[v]=T.texCoordS,f[v+1]=T.texCoordT,v+=2}else{m+=o;for(var S=0;S<r;++S){var P=g[m];u&&(P=$m.applyLogScale(P,s,i));var w=e.scalarToTextureCoordinate(P,d[0],p);f[v]=w.texCoordS,f[v+1]=w.texCoordT,v+=2,m+=a}}},e.mapScalarsToTexture=function(n,r){var a=t.lookupTable.getRange(),o=t.lookupTable.usingLogScale();o&&$m.getLogRange(a,a);var i=t.lookupTable.getAlpha();if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==r){t.lookupTable.setAlpha(r),t.colorTextureMap=null,t.lookupTable.build();var s=t.lookupTable.getNumberOfAvailableColors();s>4094&&(s=4094),s+=2;for(var c=(a[1]-a[0])/(s-1-2),u=new Float64Array(2*s),l=0;l<s;++l)u[l]=a[0]+l*c-c,o&&(u[l]=Math.pow(10,u[l]));for(var d=0;d<s;++d)u[d+s]=NaN;t.colorTextureMap=vf.newInstance(),t.colorTextureMap.setExtent(0,s-1,0,1,0,0);var p=Ba.newInstance({numberOfComponents:1,values:u});t.colorTextureMap.getPointData().setScalars(t.lookupTable.mapScalars(p,t.colorMode,0)),t.lookupTable.setAlpha(i)}if(!t.colorCoordinates||e.getMTime()>t.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>t.colorCoordinates.getMTime()||t.lookupTable.getMTime()>t.colorCoordinates.getMTime()){t.colorCoordinates=null;var f=n.getNumberOfComponents(),g=n.getNumberOfTuples();t.colorCoordinates=Ba.newInstance({numberOfComponents:2,values:new Float32Array(2*g)});var m=t.lookupTable.getVectorComponent();t.lookupTable.getVectorMode()===bv.MAGNITUDE&&n.getNumberOfComponents()>1&&(m=-1),e.createColorTextureCoordinates(n,t.colorCoordinates,g,f,m,a,t.lookupTable.getRange(),t.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,o)}},e.getIsOpaque=function(){var n=e.getInputData(),r=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!t.scalarVisibility||null==r)return!0;var a=e.getLookupTable();return!a||(a.build(),a.areScalarsOpaque(r,t.colorMode,-1))},e.canUseTextureMapForColoring=function(n){if(!t.interpolateScalarsBeforeMapping)return!1;if(t.lookupTable&&t.lookupTable.getIndexedLookup())return!1;var r=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),a=r.scalars;return!(!a||r.cellFlag||t.colorMode===vv.DEFAULT&&a.getDataType()===xv.UNSIGNED_CHAR||t.colorMode===vv.DIRECT_SCALARS)},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getPolys().getNumberOfCells()}},e.acquireInvertibleLookupTable=Tv("AcquireInvertibleLookupTable"),e.valueToColor=Tv("ValueToColor"),e.colorToValue=Tv("ColorToValue"),e.useInvertibleColorFor=Tv("UseInvertibleColorFor"),e.clearInvertibleColor=Tv("ClearInvertibleColor"),e.processSelectorPixelBuffers=function(e,n){if(e&&t.selectionWebGLIdsToVTKIds&&t.populateSelectionSettings){var r=e.getRawPixelBuffer(uv.ID_LOW24),a=e.getRawPixelBuffer(uv.ID_HIGH24),o=e.getCurrentPass(),i=e.getFieldAssociation(),s=null;i===fv.FIELD_ASSOCIATION_POINTS?s=t.selectionWebGLIdsToVTKIds.points:i===fv.FIELD_ASSOCIATION_CELLS&&(s=t.selectionWebGLIdsToVTKIds.cells),s&&n.forEach((function(t){if(o===uv.ID_LOW24){var n=0;a&&(n+=a[t],n*=256),n+=r[t+2],n*=256,n+=r[t+1],n*=256,n+=r[t];var i=s[n],c=e.getPixelBuffer(uv.ID_LOW24);c[t]=255&i,c[t+1]=(65280&i)>>8,c[t+2]=(16711680&i)>>16}else if(o===uv.ID_HIGH24&&a){var u=0;u+=a[t],u*=256,u+=r[t],u*=256,u+=r[t+1],u*=256,u+=r[t+2];var l=s[u];e.getPixelBuffer(uv.ID_HIGH24)[t]=(4278190080&l)>>24}}))}}}var Pv={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function wv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pv,n),qm(e,t,n),Ot.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap"]),Ot.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","selectionWebGLIdsToVTKIds","static","useLookupTableScalarRange","customShaderAttributes"]),Ot.setGetArray(e,t,["scalarRange"],2),cv.implementCoincidentTopologyMethods(e,t),Sv(e,t)}var Cv=pv(pv(pv({newInstance:Ot.newInstance(wv,"vtkMapper"),extend:wv},gv),mv),Gg);function Ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Av(e,t){t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setJsImageData=function(n){t.jsImageData!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null),t.jsImageData=n,t.imageLoaded=!0,e.modified())},e.setCanvas=function(n){t.canvas!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.jsImageData=null),t.canvas=n,e.modified())},e.setImage=function(n){t.image!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.canvas=null,t.jsImageData=null),t.image=n,t.imageLoaded=!1,n.complete?e.imageLoaded():n.addEventListener("load",e.imageLoaded),e.modified())},e.getDimensionality=function(){var n=0,r=0,a=1;if(e.getInputData()){var o=e.getInputData();n=o.getDimensions()[0],r=o.getDimensions()[1],a=o.getDimensions()[2]}return t.jsImageData&&(n=t.jsImageData.width,r=t.jsImageData.height),t.canvas&&(n=t.canvas.width,r=t.canvas.height),t.image&&(n=t.image.width,r=t.image.height),(n>1)+(r>1)+(a>1)},e.getInputAsJsImageData=function(){if(!t.imageLoaded||e.getInputData())return null;if(t.jsImageData)return t.jsImageData();if(t.canvas)return t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height);if(t.image){var n=document.createElement("canvas");n.width=t.image.width,n.height=t.image.height;var r=n.getContext("2d");return r.translate(0,n.height),r.scale(1,-1),r.drawImage(t.image,0,0,t.image.width,t.image.height),r.getImageData(0,0,n.width,n.height)}return null}}var Iv={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function Mv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Iv,n),Ot.obj(e,t),Ot.algo(e,t,6,0),Ot.get(e,t,["canvas","image","jsImageData","imageLoaded","resizable"]),Ot.setGet(e,t,["repeat","edgeClamp","interpolate","mipLevel"]),Av(e,t)}var Rv={generateMipmaps:function(e,t,n,r){for(var a=[1,2,1],o=e.length/(t*n),i=t,s=n,c=e,u=[c],l=0;l<r;l++){var d=ve(c);i/=2,c=new Uint8ClampedArray(i*(s/=2)*o);for(var p=o*i,f=0,g=0;g<c.length;g+=o){g%p==0&&(f+=2*o*i);for(var m=0;m<o;m++){var v=d[f+m];v+=d[f+o+m],v+=d[f-2*p+m],v+=d[f-2*p+o+m],v/=4,c[g+m]=v}f+=2*o}for(var h=ve(c),y=0;y<c.length;y+=o)for(var b=0;b<o;b++){for(var x=-(a.length-1)/2,T=4,S=0,P=0;P<a.length;P++){var w=y+b+x*o,C=w%p-(y+b)%p;C>o&&(w+=p),C<-o&&(w-=p),h[w]?S+=h[w]*a[P]:T-=a[P],x+=1}c[y+b]=S/T}h=ve(c);for(var O=0;O<c.length;O+=o)for(var A=0;A<o;A++){for(var I=-(a.length-1)/2,M=4,R=0,E=0;E<a.length;E++){var D=O+A+I*p;h[D]?R+=h[D]*a[E]:M-=a[E],I+=1}c[O+A]=R/M}u.push(c)}return u}},Ev=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Mv,"vtkTexture"),extend:Mv},Rv);function Dv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0],n=fe(t,4),r=n[0],a=n[1],o=n[2],i=n[3],s=e.getContext("2d"),c=s.getImageData(r,a,o||e.width,i||e.height),u=vf.newInstance({type:"vtkImageData"});u.setOrigin(0,0,0),u.setSpacing(1,1,1),u.setExtent(0,(o||e.width)-1,0,(i||e.height)-1,0,0);var l=Ba.newInstance({numberOfComponents:4,values:new Uint8Array(c.data.buffer)});return l.setName("scalars"),u.getPointData().setScalars(l),u}var Lv={canvasToImageData:Dv,imageToImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flipX:!1,flipY:!1,rotate:0},n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d"),a=t.flipX,o=t.flipY,i=t.rotate;return r.translate(n.width/2,n.height/2),r.scale(a?-1:1,o?-1:1),r.rotate(i*Math.PI/180),r.drawImage(e,-e.width/2,-e.height/2),Dv(n)}},Bv={default:{defaultStyle:{fontStyle:"bold",fontFamily:"Arial",fontColor:"black",fontSizeScale:function(e){return e/2},faceColor:"white",edgeThickness:.1,edgeColor:"black",resolution:400},xMinusFaceProperty:{text:"X-",faceColor:"yellow"},xPlusFaceProperty:{text:"X+",faceColor:"yellow"},yMinusFaceProperty:{text:"Y-",faceColor:"red"},yPlusFaceProperty:{text:"Y+",faceColor:"red"},zMinusFaceProperty:{text:"Z-",faceColor:"#008000"},zPlusFaceProperty:{text:"Z+",faceColor:"#008000"}},lps:{xMinusFaceProperty:{text:"R",faceRotation:-90},xPlusFaceProperty:{text:"L",faceRotation:90},yMinusFaceProperty:{text:"A",faceRotation:0},yPlusFaceProperty:{text:"P",faceRotation:180},zMinusFaceProperty:{text:"I",faceRotation:180},zPlusFaceProperty:{text:"S",faceRotation:0}}};function Nv(e,t){t.set(e)}var kv={applyDefinitions:Nv,applyPreset:function(e,t){return Nv(Bv[e],t)},registerStylePreset:function(e,t){Bv[e]=t}};function Vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vv(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fv={xPlus:0,xMinus:1,yPlus:2,yMinus:3,zPlus:4,zMinus:5};function Gv(e,t){t.classHierarchy.push("vtkAnnotatedCubeActor"),t.xPlusFaceProperty=_v({},t.xPlusFaceProperty),t.xMinusFaceProperty=_v({},t.xMinusFaceProperty),t.yPlusFaceProperty=_v({},t.yPlusFaceProperty),t.yMinusFaceProperty=_v({},t.yMinusFaceProperty),t.zPlusFaceProperty=_v({},t.zPlusFaceProperty),t.zMinusFaceProperty=_v({},t.zMinusFaceProperty);var n=null,r=document.createElement("canvas"),a=Cv.newInstance(),o=Ev.newInstance();function i(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a&&Object.assign(t["".concat(n,"FaceProperty")],a);var i=_v(_v({},t.defaultStyle),t["".concat(n,"FaceProperty")]);r.width=i.resolution,r.height=i.resolution;var s=r.getContext("2d");s.fillStyle=i.faceColor,s.fillRect(0,0,r.width,r.height),i.edgeThickness>0&&(s.strokeStyle=i.edgeColor,s.lineWidth=i.edgeThickness*r.width,s.strokeRect(0,0,r.width,r.height)),s.save(),s.translate(0,r.height),s.scale(1,-1),s.translate(r.width/2,r.height/2),s.rotate(-Math.PI*(i.faceRotation/180));var c=i.fontSizeScale(i.resolution);s.fillStyle=i.fontColor,s.textAlign="center",s.textBaseline="middle",s.font="".concat(i.fontStyle," ").concat(c,'px "').concat(i.fontFamily,'"'),s.fillText(i.text,0,0),s.restore();var u=Lv.canvasToImageData(r);o.setInputData(u,Fv[n]),e.modified()}function s(){n=ts.newInstance({generate3DTextureCoordinates:!0}),a.setInputConnection(n.getOutputPort()),i("xPlus"),i("xMinus"),i("yPlus"),i("yMinus"),i("zPlus"),i("zMinus")}o.setInterpolate(!0),e.setDefaultStyle=function(e){t.defaultStyle=_v(_v({},t.defaultStyle),e),s()},e.setXPlusFaceProperty=function(e){return i("xPlus",e)},e.setXMinusFaceProperty=function(e){return i("xMinus",e)},e.setYPlusFaceProperty=function(e){return i("yPlus",e)},e.setYMinusFaceProperty=function(e){return i("yMinus",e)},e.setZPlusFaceProperty=function(e){return i("zPlus",e)},e.setZMinusFaceProperty=function(e){return i("zMinus",e)},s(),a.setInputConnection(n.getOutputPort()),e.setMapper(a),e.addTexture(o)}var Uv={defaultStyle:{text:"",faceColor:"white",faceRotation:0,fontFamily:"Arial",fontColor:"black",fontStyle:"normal",fontSizeScale:function(e){return e/1.8},edgeThickness:.1,edgeColor:"black",resolution:200}};function jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Uv,n),jm.extend(e,t,n),Ot.get(e,t,["defaultStyle","xPlusFaceProperty","xMinusFaceProperty","yPlusFaceProperty","yMinusFaceProperty","zPlusFaceProperty","zMinusFaceProperty"]),Gv(e,t)}var zv={newInstance:Ot.newInstance(jv,"vtkAnnotatedCubeActor"),extend:jv,Presets:kv},Wv=Ot.vtkErrorMacro;function Hv(e,t,n,r){var a,o;e.set((a=n,o=0,t.map((function(e,t){return t===o?(o+=e+1,e):e+a}))),r)}function Kv(e,t){t.classHierarchy.push("vtkAppendPolyData"),e.requestData=function(n,r){var a=e.getNumberOfInputPorts();if(a)if(1!==a){for(var o=Gi.newInstance(),i=0,s=0,c=1,u=1,l=0,d=0,p=0,f=0,g=!0,m=!0,v=!0,h=0;h<a;h++){var y=n[h];if(y){var b=y.getPoints().getNumberOfPoints();i+=b,l+=y.getVerts().getNumberOfValues(),d+=y.getLines().getNumberOfValues(),p+=y.getStrips().getNumberOfValues(),f+=y.getPolys().getNumberOfValues(),b&&(u&&(u=0,s=y.getPoints().getDataType()),s=s>(c=y.getPoints().getDataType())?s:c);var x=y.getPointData();x?(g=g&&null!==x.getNormals(),m=m&&null!==x.getTCoords(),v=v&&null!==x.getScalars()):(g=!1,m=!1,v=!1)}}t.outputPointsPrecision===Uo.SINGLE?s=Kn.FLOAT:t.outputPointsPrecision===Uo.DOUBLE&&(s=Kn.DOUBLE);var T=Ya.newInstance({dataType:s});T.setNumberOfPoints(i);var S=T.getData(),P=new Uint32Array(l),w=new Uint32Array(d),C=new Uint32Array(p),O=new Uint32Array(f),A=null,I=null,M=null,R=n[a-1];if(g){var E=R.getPointData().getNormals();A=Ba.newInstance({numberOfComponents:3,numberOfTuples:i,size:3*i,dataType:E.getDataType(),name:E.getName()})}if(m){var D=R.getPointData().getTCoords();I=Ba.newInstance({numberOfComponents:2,numberOfTuples:i,size:2*i,dataType:D.getDataType(),name:D.getName()})}if(v){var L=R.getPointData().getScalars();M=Ba.newInstance({numberOfComponents:L.getNumberOfComponents(),numberOfTuples:i,size:i*L.getNumberOfComponents(),dataType:L.getDataType(),name:L.getName()})}i=0,l=0,d=0,p=0,f=0;for(var B=0;B<a;B++){var N=n[B];S.set(N.getPoints().getData(),3*i),Hv(P,N.getVerts().getData(),i,l),l+=N.getVerts().getNumberOfValues(),Hv(w,N.getLines().getData(),i,d),d+=N.getLines().getNumberOfValues(),Hv(C,N.getStrips().getData(),i,p),p+=N.getStrips().getNumberOfValues(),Hv(O,N.getPolys().getData(),i,f),f+=N.getPolys().getNumberOfValues();var k=N.getPointData();if(g){var V=k.getNormals();A.getData().set(V.getData(),3*i)}if(m){var _=k.getTCoords();I.getData().set(_.getData(),2*i)}if(v){var F=k.getScalars();M.getData().set(F.getData(),i*M.getNumberOfComponents())}i+=N.getPoints().getNumberOfPoints()}o.setPoints(T),o.getVerts().setData(P),o.getLines().setData(w),o.getStrips().setData(C),o.getPolys().setData(O),A&&o.getPointData().setNormals(A),I&&o.getPointData().setTCoords(I),M&&o.getPointData().setScalars(M),r[0]=o}else r[0]=n[0];else Wv("No input specified.")}}var Xv={outputPointsPrecision:Uo.DEFAULT};function qv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xv,n),Ot.setGet(e,t,["outputPointsPrecision"]),Ot.obj(e,t),Ot.algo(e,t,1,1),Kv(e,t)}var Yv={newInstance:Ot.newInstance(qv,"vtkAppendPolyData"),extend:qv};function Zv(e,t){t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,n){var r;if(!t.deleted){var a=n[0],o=2*Math.PI/t.resolution,i=-t.height/2,s=t.resolution+1,c=4*t.resolution+1+t.resolution,u=0,l=Ot.newTypedArray(t.pointType,3*s),d=0,p=new Uint32Array(c);l[0]=t.height/2,l[1]=0,l[2]=0,t.capping&&(p[d++]=t.resolution);for(var f=0;f<t.resolution;f++)l[3*++u+0]=i,l[3*u+1]=t.radius*Math.cos(f*o),l[3*u+2]=t.radius*Math.sin(f*o),t.capping&&(p[t.resolution-d+++1]=u);for(var g=0;g<t.resolution;g++)p[d++]=3,p[d++]=0,p[d++]=g+1,p[d++]=g+2>t.resolution?1:g+2;(r=Qi()).translate.apply(r,ve(t.center)).rotateFromDirections([1,0,0],t.direction).apply(l),(a=Gi.newInstance()).getPoints().setData(l,3),a.getPolys().setData(p,1),n[0]=a}}}var Qv={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function Jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qv,n),Ot.obj(e,t),Ot.setGet(e,t,["height","radius","resolution","capping"]),Ot.setGetArray(e,t,["center","direction"],3),Ot.algo(e,t,0,1),Zv(e,t)}var $v={newInstance:Ot.newInstance(Jv,"vtkConeSource"),extend:Jv};function eh(e,t){t.classHierarchy.push("vtkCylinderSource"),e.requestData=function(e,n){var r,a;if(!t.deleted){var o=n[0],i=2*Math.PI/t.resolution,s=2*t.resolution,c=5*t.resolution;t.capping&&(s=4*t.resolution,c=7*t.resolution+2);for(var u=Ot.newTypedArray(t.pointType,3*s),l=0,d=new Uint32Array(c),p=new Float32Array(3*s),f=Ba.newInstance({numberOfComponents:3,values:p,name:"Normals"}),g=new Float32Array(2*s),m=Ba.newInstance({numberOfComponents:2,values:g,name:"TCoords"}),v=[0,0,0],h=[0,0,0],y=[0,0,0],b=[0,0,0],x=[0,0],T=[0,0],S=null==t.otherRadius?t.radius:t.otherRadius,P=0;P<t.resolution;P++){v[0]=Math.cos(P*i+t.initAngle),h[0]=v[0],y[0]=t.radius*v[0]+t.center[0],b[0]=y[0],x[0]=Math.abs(2*P/t.resolution-1),T[0]=x[0],y[1]=.5*t.height+t.center[1],b[1]=-.5*t.height+t.center[1],x[1]=0,T[1]=1,v[2]=-Math.sin(P*i+t.initAngle),h[2]=v[2],y[2]=S*v[2]+t.center[2],b[2]=y[2];for(var w=2*P,C=0;C<3;C++)p[3*w+C]=v[C],p[3*(w+1)+C]=h[C],u[3*w+C]=y[C],u[3*(w+1)+C]=b[C],C<2&&(g[2*w+C]=x[C],g[2*(w+1)+C]=T[C])}for(var O=0;O<t.resolution;O++){d[l++]=4,d[l++]=2*O,d[l++]=2*O+1;var A=(2*O+3)%(2*t.resolution);d[l++]=A,d[l++]=A-1}if(t.capping){for(var I=0;I<t.resolution;I++){y[0]=t.radius*Math.cos(I*i+t.initAngle),b[0]=y[0],x[0]=y[0],T[0]=y[0],y[0]+=t.center[0],b[0]+=t.center[0],v[1]=1,h[1]=-1,y[1]=.5*t.height+t.center[1],b[1]=-.5*t.height+t.center[1],y[2]=-S*Math.sin(I*i+t.initAngle),b[2]=y[2],x[1]=y[2],T[1]=y[2],y[2]+=t.center[2],b[2]+=t.center[2];for(var M=2*t.resolution+I,R=3*t.resolution+t.resolution-I-1,E=0;E<3;E++)p[3*M+E]=v[E],p[3*R+E]=h[E],u[3*M+E]=y[E],u[3*R+E]=b[E],E<2&&(g[2*M+E]=x[E],g[2*R+E]=T[E])}d[l++]=t.resolution;for(var D=0;D<t.resolution;D++)d[l++]=2*t.resolution+D;d[l++]=t.resolution;for(var L=0;L<t.resolution;L++)d[l++]=3*t.resolution+L}(r=(a=Qi()).translate.apply(a,ve(t.center)).rotateFromDirections([0,1,0],t.direction)).translate.apply(r,ve(t.center.map((function(e){return-1*e})))).apply(u),(o=Gi.newInstance()).getPoints().setData(u,3),o.getPolys().setData(d,1),o.getPointData().setNormals(f),o.getPointData().setTCoords(m),n[0]=o}}}var th={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function nh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,th,n),Ot.obj(e,t),Ot.setGet(e,t,["height","initAngle","otherRadius","radius","resolution","capping"]),Ot.setGetArray(e,t,["center","direction"],3),Ot.algo(e,t,0,1),eh(e,t)}var rh={newInstance:Ot.newInstance(nh,"vtkCylinderSource"),extend:nh};function ah(e,t){t.classHierarchy.push("vtkArrowSource"),e.requestData=function(e,n){if(!t.deleted){var r=rh.newInstance({capping:!0});r.setResolution(t.shaftResolution),r.setRadius(t.shaftRadius),r.setHeight(1-t.tipLength),r.setCenter(0,.5*(1-t.tipLength),0);var a=r.getOutputData(),o=a.getPoints().getData(),i=a.getPointData().getNormals().getData();Zi().rotateZ(-90).apply(o).apply(i);var s=$v.newInstance();s.setResolution(t.tipResolution),s.setHeight(t.tipLength),s.setRadius(t.tipRadius);var c=s.getOutputData(),u=c.getPoints().getData();Qi().translate(1-.5*t.tipLength,0,0).apply(u);var l=Yv.newInstance();l.setInputData(a),l.addInputData(c);var d=l.getOutputData(),p=d.getPoints().getData();Qi().translate(.5*t.tipLength-.5,0,0).apply(p),t.invert?(Qi().rotateFromDirections([1,0,0],t.direction).scale(-1,-1,-1).apply(p),n[0]=d):(Qi().rotateFromDirections([1,0,0],t.direction).scale(1,1,1).apply(p),n[0]=l.getOutputData())}}}var oh={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function ih(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oh,n),Ot.obj(e,t),Ot.setGet(e,t,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),Ot.setGetArray(e,t,["direction"],3),Ot.algo(e,t,0,1),ah(e,t)}var sh={newInstance:Ot.newInstance(ih,"vtkArrowSource"),extend:ih};function ch(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ch(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ch(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lh(e){var t,n=e.getPoints().getBounds(),r=[.5*-(n[0]+n[1]),.5*-(n[2]+n[3]),.5*-(n[4]+n[5])];(t=Zi()).translate.apply(t,r).apply(e.getPoints().getData())}function dh(e,t){var n,r=e.getPoints().getBounds(),a=[0,0,0];a[t]=-r[2*t],(n=Zi()).translate.apply(n,a).apply(e.getPoints().getData())}function ph(e,t,n,r){for(var a=e.getPoints().getData().length,o=new Uint8Array(a),i=0;i<a;)o[i++]=t,o[i++]=n,o[i++]=r;e.getPointData().setScalars(Ba.newInstance({name:"color",numberOfComponents:3,values:o}))}function fh(e,t){t.classHierarchy.push("vtkAxesActor");var n=Cv.newInstance();e.setMapper(n),e.update=function(){var e=sh.newInstance(uh({direction:[1,0,0]},t.config)).getOutputData();t.config.recenter?lh(e):dh(e,0),ph.apply(void 0,[e].concat(ve(t.xAxisColor)));var r=sh.newInstance(uh({direction:[0,1,0]},t.config)).getOutputData();t.config.recenter?lh(r):dh(r,1),ph.apply(void 0,[r].concat(ve(t.yAxisColor)));var a=sh.newInstance(uh({direction:[0,0,1]},t.config)).getOutputData();t.config.recenter?lh(a):dh(a,2),ph.apply(void 0,[a].concat(ve(t.zAxisColor)));var o=Yv.newInstance();o.setInputData(e),o.addInputData(r),o.addInputData(a),n.setInputConnection(o.getOutputPort())},e.update();var r=Ot.debounce(e.update,0),a=e.setConfig,o=e.setXAxisColor,i=e.setYAxisColor,s=e.setZAxisColor;e.setConfig=function(e){return!!a(e)&&(r(),!0)},e.setXAxisColor=function(e){return!!o(e)&&(r(),!0)},e.setYAxisColor=function(e){return!!i(e)&&(r(),!0)},e.setZAxisColor=function(e){return!!s(e)&&(r(),!0)}}var gh={config:{recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1},xAxisColor:[255,0,0],yAxisColor:[255,255,0],zAxisColor:[0,128,0]};function mh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gh,n),jm.extend(e,t,n),Ot.setGet(e,t,["config"]),Ot.setGetArray(e,t,["xAxisColor","yAxisColor","zAxisColor"],3,255),fh(e,t)}var vh={newInstance:Ot.newInstance(mh,"vtkAxesActor"),extend:mh};function hh(){}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".CornerAnnotation-module_container__2mZcn {\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  flex-direction: column;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  z-index: 100;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.CornerAnnotation-module_row__23t97 {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n}\n\n.CornerAnnotation-module_topRow__1OP5f {\n  align-items: flex-start;\n}\n\n.CornerAnnotation-module_middleRow__1xYK_ {\n  align-items: center;\n}\n\n.CornerAnnotation-module_bottomRow__1V34_ {\n  align-items: flex-end;\n}\n\n.CornerAnnotation-module_item__BavOy {\n  flex: 1;\n  padding: 5px;\n}\n\n.CornerAnnotation-module_east__xyYFe {\n  text-align: right;\n}\n\n.CornerAnnotation-module_west__3DsS- {\n  text-align: left;\n}\n\n.CornerAnnotation-module_north__2jPzf {\n  text-align: center;\n}\n\n.CornerAnnotation-module_south__FZyGo {\n  text-align: center;\n}\n\n.CornerAnnotation-module_northEast__-GjXi {\n}\n\n.CornerAnnotation-module_northWest__23pUR {\n}\n\n.CornerAnnotation-module_southEast__tmLmN {\n}\n\n.CornerAnnotation-module_southWest__FLNPM {\n}\n\n");var yh={nw:"northWestContainer",n:"northContainer",ne:"northEastContainer",w:"westContainer",e:"eastContainer",sw:"southWestContainer",s:"southContainer",se:"southEastContainer"};function bh(e,t){function n(){for(var e=Object.keys(t.templates),n=e.length;n--;){var r=t[yh[e[n]]],a=t.templates[e[n]];r&&a&&(r.innerHTML=a(t.metadata))}}t.classHierarchy.push("vtkCornerAnnotation"),t.templates||(t.templates={}),t.metadata||(t.metadata={}),t.annotationContainer=document.createElement("div"),t.annotationContainer.setAttribute("class","CornerAnnotation-module_container__2mZcn"),t.annotationContainer.innerHTML='\n    <div class="'.concat("CornerAnnotation-module_topRow__1OP5f CornerAnnotation-module_row__23t97",'">\n      <div class="js-nw ').concat("CornerAnnotation-module_northWest__23pUR CornerAnnotation-module_west__3DsS- CornerAnnotation-module_item__BavOy",'"></div>\n      <div class="js-n ').concat("CornerAnnotation-module_north__2jPzf CornerAnnotation-module_item__BavOy",'"></div>\n      <div class="js-ne ').concat("CornerAnnotation-module_northEast__-GjXi CornerAnnotation-module_east__xyYFe CornerAnnotation-module_item__BavOy",'"></div>\n    </div>\n    <div class="').concat("CornerAnnotation-module_middleRow__1xYK_ CornerAnnotation-module_row__23t97",'">\n      <div class="js-w ').concat("CornerAnnotation-module_west__3DsS- CornerAnnotation-module_item__BavOy",'"></div>\n      <div class="js-e ').concat("CornerAnnotation-module_east__xyYFe CornerAnnotation-module_item__BavOy",'"></div>\n    </div>\n    <div class="').concat("CornerAnnotation-module_bottomRow__1V34_ CornerAnnotation-module_row__23t97",'">\n      <div class="js-sw ').concat("CornerAnnotation-module_southWest__FLNPM CornerAnnotation-module_west__3DsS- CornerAnnotation-module_item__BavOy",'"></div>\n      <div class="js-s ').concat("CornerAnnotation-module_south__FZyGo CornerAnnotation-module_item__BavOy",'"></div>\n      <div class="js-se ').concat("CornerAnnotation-module_southEast__tmLmN CornerAnnotation-module_east__xyYFe CornerAnnotation-module_item__BavOy",'"></div>\n    </div>'),t.northWestContainer=t.annotationContainer.querySelector(".js-nw"),t.northContainer=t.annotationContainer.querySelector(".js-n"),t.northEastContainer=t.annotationContainer.querySelector(".js-ne"),t.westContainer=t.annotationContainer.querySelector(".js-w"),t.eastContainer=t.annotationContainer.querySelector(".js-e"),t.southWestContainer=t.annotationContainer.querySelector(".js-sw"),t.southContainer=t.annotationContainer.querySelector(".js-s"),t.southEastContainer=t.annotationContainer.querySelector(".js-se"),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.annotationContainer),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.annotationContainer),e.resize()),e.modified())},e.resize=hh,e.updateTemplates=function(r){t.templates=Object.assign(t.templates,r),n(),e.modified()},e.updateMetadata=function(r){t.metadata=Object.assign(t.metadata,r),n(),e.modified()}}var xh={templates:null,metadata:null};function Th(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xh,n),Ot.obj(e,t),Ot.get(e,t,["annotationContainer","northWestContainer","northContainer","northEastContainer","westContainer","eastContainer","southWestContainer","southContainer","southEastContainer","metadata"]),bh(e,t)}var Sh={newInstance:Ot.newInstance(Th,"vtkCornerAnnotation"),extend:Th,applyTemplate:function(e,t,n){return e.replace(/\${([^{]+)}/g,(function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"${".concat(e,"}");return e.split(".").reduce((function(e,t){return void 0!==e[t]?e[t]:n}),t)}(e.substr(2,e.length-3).trim(),t,n)}))}},Ph={Unknown:0,LeftController:1,RightController:2},wh={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},Ch={Device:Ph,Input:wh,Axis:{Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4}};function Oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ah(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oh(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ih=Ch.Device,Mh=Ch.Input,Rh=Ot.vtkWarningMacro,Eh=Ot.vtkErrorMacro,Dh=Ot.normalizeWheel,Lh=Ot.vtkOnceErrorMacro,Bh=new MouseEvent(""),Nh={"xr-standard":[Mh.Trigger,Mh.Grip,Mh.TrackPad,Mh.Thumbstick,Mh.A,Mh.B]},kh=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function Vh(e){e.cancelable&&e.preventDefault()}function _h(e){var t=Object.create(null);return e.forEach((function(e){var n=e.pointerId,r=e.position;t[n]=r})),t}function Fh(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");var n=new Set,r=new Map,a=1;function o(n,r){t._forcedRenderer||(t.currentRenderer=e.findPokedRenderer(n,r))}function i(e){var n=t._view.getCanvas(),a=n.getBoundingClientRect(),i=n.width/a.width,s=n.height/a.height,c={x:i*(e.clientX-a.left),y:s*(a.height-e.clientY+a.top),z:0};return(r.size<=1||!t.currentRenderer)&&o(c.x,c.y),c}function s(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function c(e){var t=s(e);return Ah({key:e.key,keyCode:e.charCode},t)}function u(e){return e.pointerType||""}function l(){t._view&&t.enabled&&t.enableRender&&(t.inRender=!0,t._view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){Eh("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(n){t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return Rh("empty event loop")},e.getCurrentRenderer=function(){return t.currentRenderer||o(0,0),t.currentRenderer},e.bindEvents=function(n){t.container=n,n.addEventListener("contextmenu",Vh),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("pointerenter",e.handlePointerEnter),n.addEventListener("pointerleave",e.handlePointerLeave),n.addEventListener("pointermove",e.handlePointerMove,{passive:!1}),n.addEventListener("pointerdown",e.handlePointerDown,{passive:!1}),n.addEventListener("pointerup",e.handlePointerUp),n.addEventListener("pointercancel",e.handlePointerCancel),document.addEventListener("keypress",e.handleKeyPress),document.addEventListener("keydown",e.handleKeyDown),document.addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),n.style.touchAction="none",n.style.userSelect="none",n.style.webkitTapHighlightColor="rgba(0,0,0,0)"},e.unbindEvents=function(){var n=t.container;n.removeEventListener("contextmenu",Vh),n.removeEventListener("wheel",e.handleWheel),n.removeEventListener("DOMMouseScroll",e.handleWheel),n.removeEventListener("pointerenter",e.handlePointerEnter),n.removeEventListener("pointerleave",e.handlePointerLeave),n.removeEventListener("pointermove",e.handlePointerMove,{passive:!1}),n.removeEventListener("pointerdown",e.handlePointerDown,{passive:!1}),n.removeEventListener("pointerup",e.handlePointerUp),n.removeEventListener("pointercancel",e.handlePointerCancel),document.removeEventListener("keypress",e.handleKeyPress),document.removeEventListener("keydown",e.handleKeyDown),document.removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),t.container=null,r.clear()},e.handleKeyPress=function(t){var n=c(t);e.keyPressEvent(n)},e.handleKeyDown=function(t){var n=c(t);e.keyDownEvent(n)},e.handleKeyUp=function(t){var n=c(t);e.keyUpEvent(n)},e.handlePointerEnter=function(t){var n=Ah(Ah({},s(t)),{},{position:i(t),deviceType:u(t)});e.pointerEnterEvent(n),"mouse"===n.deviceType&&e.mouseEnterEvent(n)},e.handlePointerLeave=function(t){var n=Ah(Ah({},s(t)),{},{position:i(t),deviceType:u(t)});e.pointerLeaveEvent(n),"mouse"===n.deviceType&&e.mouseLeaveEvent(n)},e.handlePointerDown=function(n){if(!(n.button>2||e.isPointerLocked()))switch(t.preventDefaultOnPointerDown&&Vh(n),n.target.hasPointerCapture(n.pointerId)&&n.target.releasePointerCapture(n.pointerId),t.container.setPointerCapture(n.pointerId),r.has(n.pointerId)&&Rh("[RenderWindowInteractor] duplicate pointerId detected"),r.set(n.pointerId,{pointerId:n.pointerId,position:i(n)}),n.pointerType){case"pen":case"touch":e.handleTouchStart(n);break;default:e.handleMouseDown(n)}},e.handlePointerUp=function(n){if(r.has(n.pointerId))switch(t.preventDefaultOnPointerUp&&Vh(n),r.delete(n.pointerId),t.container.releasePointerCapture(n.pointerId),n.pointerType){case"pen":case"touch":e.handleTouchEnd(n);break;default:e.handleMouseUp(n)}},e.handlePointerCancel=function(t){if(r.has(t.pointerId))switch(r.delete(t.pointerId),t.pointerType){case"pen":case"touch":e.handleTouchEnd(t);break;default:e.handleMouseUp(t)}},e.handlePointerMove=function(t){switch(r.has(t.pointerId)&&(r.get(t.pointerId).position=i(t)),t.pointerType){case"pen":case"touch":e.handleTouchMove(t);break;default:e.handleMouseMove(t)}},e.handleMouseDown=function(t){var n=Ah(Ah({},s(t)),{},{position:i(t),deviceType:u(t)});switch(t.button){case 0:e.leftButtonPressEvent(n);break;case 1:e.middleButtonPressEvent(n);break;case 2:e.rightButtonPressEvent(n);break;default:Eh("Unknown mouse button pressed: ".concat(t.button))}},e.requestPointerLock=function(){t.container&&t.container.requestPointerLock()},e.exitPointerLock=function(){return document.exitPointerLock()},e.isPointerLocked=function(){return!!t.container&&document.pointerLockElement===t.container},e.handlePointerLockChange=function(){e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=function(r){void 0!==r?n.has(r)?Rh("requester is already registered for animating"):(n.add(r),t.animationRequest||1!==n.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):Eh("undefined requester, can not start animating")},e.extendAnimation=function(r){var a=Date.now()+r;t._animationExtendedEnd=Math.max(t._animationExtendedEnd,a),t.animationRequest||0!==n.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())},e.isAnimating=function(){return t.xrAnimation||null!==t.animationRequest},e.cancelAnimation=function(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.has(r))n.delete(r),t.animationRequest&&0===n.size&&Date.now()>t._animationExtendedEnd&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!a){var o=r&&r.getClassName?r.getClassName():r;Rh("".concat(o," did not request an animation"))}},e.switchToXRAnimation=function(){t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.xrAnimation=!0},e.returnFromXRAnimation=function(){t.xrAnimation=!1,0!==n.size&&(t.recentAnimationFrameRate=10,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateXRGamepads=function(n,r,a){n.inputSources.forEach((function(n){var o=null==n.gripSpace?null:r.getPose(n.gripSpace,a),i=n.gamepad,s=n.handedness;if(i){i.index in t.lastGamepadValues||(t.lastGamepadValues[i.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(var c=0;c<i.buttons.length;++c)c in t.lastGamepadValues[i.index][s].buttons||(t.lastGamepadValues[i.index][s].buttons[c]=!1),t.lastGamepadValues[i.index][s].buttons[c]!==i.buttons[c].pressed&&null!=o&&(e.button3DEvent({gamepad:i,position:o.transform.position,orientation:o.transform.orientation,pressed:i.buttons[c].pressed,device:"left"===n.handedness?Ih.LeftController:Ih.RightController,input:Nh[i.mapping]&&Nh[i.mapping][c]?Nh[i.mapping][c]:Mh.Trigger}),t.lastGamepadValues[i.index][s].buttons[c]=i.buttons[c].pressed),t.lastGamepadValues[i.index][s].buttons[c]&&null!=o&&e.move3DEvent({gamepad:i,position:o.transform.position,orientation:o.transform.orientation,device:"left"===n.handedness?Ih.LeftController:Ih.RightController})}}))},e.handleMouseMove=function(n){var r=Ah(Ah({},s(n)),{},{position:i(n),deviceType:u(n)});0===t.moveTimeoutID?e.startMouseMoveEvent(r):(e.mouseMoveEvent(r),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout((function(){e.endMouseMoveEvent(),t.moveTimeoutID=0}),200)},e.handleAnimation=function(){var r=Date.now();t._animationFrameCount++,r-t._animationStartTime>1e3&&t._animationFrameCount>1&&(t.recentAnimationFrameRate=1e3*(t._animationFrameCount-1)/(r-t._animationStartTime),t.lastFrameTime=1/t.recentAnimationFrameRate,e.animationFrameRateUpdateEvent(),t._animationStartTime=r,t._animationFrameCount=1),e.animationEvent(),l(),n.size>0||Date.now()<t._animationExtendedEnd?t.animationRequest=requestAnimationFrame(e.handleAnimation):(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render())},e.handleWheel=function(n){Vh(n);var r=Ah(Ah(Ah({},Dh(n)),s(n)),{},{position:i(n),deviceType:u(n)});0===t.wheelTimeoutID&&(a=Math.abs(r.spinY)>=.3?Math.abs(r.spinY):1),r.spinY/=a,0===t.wheelTimeoutID?(e.startMouseWheelEvent(r),e.mouseWheelEvent(r)):(e.mouseWheelEvent(r),clearTimeout(t.wheelTimeoutID)),t.mouseScrollDebounceByPass?(e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0):t.wheelTimeoutID=setTimeout((function(){e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0}),200)},e.handleMouseUp=function(t){var n=Ah(Ah({},s(t)),{},{position:i(t),deviceType:u(t)});switch(t.button){case 0:e.leftButtonReleaseEvent(n);break;case 1:e.middleButtonReleaseEvent(n);break;case 2:e.rightButtonReleaseEvent(n);break;default:Eh("Unknown mouse button released: ".concat(t.button))}},e.handleTouchStart=function(n){var a=ve(r.values());if(t.recognizeGestures&&a.length>1){var o=_h(r);if(2===a.length){var c=Ah(Ah({},s(Bh)),{},{position:a[0].position,deviceType:u(n)});e.leftButtonReleaseEvent(c)}e.recognizeGesture("TouchStart",o)}else if(1===a.length){var l=Ah(Ah({},s(Bh)),{},{position:i(n),deviceType:u(n)});e.leftButtonPressEvent(l)}},e.handleTouchMove=function(n){var a=ve(r.values());if(t.recognizeGestures&&a.length>1){var o=_h(r);e.recognizeGesture("TouchMove",o)}else if(1===a.length){var i=Ah(Ah({},s(Bh)),{},{position:a[0].position,deviceType:u(n)});e.mouseMoveEvent(i)}},e.handleTouchEnd=function(n){var a=ve(r.values());if(t.recognizeGestures)if(0===a.length){var o=Ah(Ah({},s(Bh)),{},{position:i(n),deviceType:u(n)});e.leftButtonReleaseEvent(o)}else if(1===a.length){var c=_h(r);e.recognizeGesture("TouchEnd",c);var l=Ah(Ah({},s(Bh)),{},{position:a[0].position,deviceType:u(n)});e.leftButtonPressEvent(l)}else{var d=_h(r);e.recognizeGesture("TouchMove",d)}else if(1===a.length){var p=Ah(Ah({},s(Bh)),{},{position:a[0].position,deviceType:u(n)});e.leftButtonReleaseEvent(p)}},e.setView=function(n){t._view!==n&&(t._view=n,t._view.getRenderable().setInteractor(e),e.modified())},e.getFirstRenderer=function(){var e,n,r;return null===(e=t._view)||void 0===e||null===(n=e.getRenderable())||void 0===n||null===(r=n.getRenderersByReference())||void 0===r?void 0:r[0]},e.findPokedRenderer=function(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t._view)return null;var o=null===(e=t._view)||void 0===e||null===(n=e.getRenderable())||void 0===n?void 0:n.getRenderers();if(!o||0===o.length)return null;o.sort((function(e,t){return e.getLayer()-t.getLayer()}));for(var i=null,s=null,c=null,u=o.length;u--;){var l=o[u];if(t._view.isInViewport(r,a,l)&&l.getInteractive()){c=l;break}null===i&&l.getInteractive()&&(i=l),null===s&&t._view.isInViewport(r,a,l)&&(s=l)}return null===c&&(c=i),null===c&&(c=s),null==c&&(c=o[0]),c},e.render=function(){e.isAnimating()||t.inRender||l()},kh.forEach((function(n){var r=n.charAt(0).toLowerCase()+n.slice(1);e["".concat(r,"Event")]=function(r){if(t.enabled)if(e.getCurrentRenderer()){var a=Ah({type:n,pokedRenderer:t.currentRenderer,firstRenderer:e.getFirstRenderer()},r);e["invoke".concat(n)](a)}else Lh("\n          Can not forward events without a current renderer on the interactor.\n        ")}})),e.recognizeGesture=function(n,r){if(!(Object.keys(r).length>2)){if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(r).forEach((function(e){t.startingEventPositions[e]=r[e]})),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});var a=0,o=[],i=[];Object.keys(r).forEach((function(e){o[a]=r[e],i[a]=t.startingEventPositions[e],a++}));var s=Math.sqrt((i[0].x-i[1].x)*(i[0].x-i[1].x)+(i[0].y-i[1].y)*(i[0].y-i[1].y)),c=Math.sqrt((o[0].x-o[1].x)*(o[0].x-o[1].x)+(o[0].y-o[1].y)*(o[0].y-o[1].y)),u=cr(Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x)),l=cr(Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x)),d=l-u;l=l+180>=360?l-180:l+180,u=u+180>=360?u-180:u+180,Math.abs(l-u)<Math.abs(d)&&(d=l-u);var p=[];if(p[0]=(o[0].x-i[0].x+o[1].x-i[1].x)/2,p[1]=(o[0].y-i[0].y+o[1].y-i[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){var f=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);f<15&&(f=15);var g=Math.abs(c-s),m=3.1415926*c*Math.abs(d)/360,v=Math.sqrt(p[0]*p[0]+p[1]*p[1]);if(g>f&&g>m&&g>v){t.currentGesture="Pinch";var h={scale:1,touches:r};e.startPinchEvent(h)}else if(m>f&&m>v){t.currentGesture="Rotate";var y={rotation:0,touches:r};e.startRotateEvent(y)}else if(v>f){t.currentGesture="Pan";var b={translation:[0,0],touches:r};e.startPanEvent(b)}}else{if("Rotate"===t.currentGesture){var x={rotation:d,touches:r};e.rotateEvent(x)}if("Pinch"===t.currentGesture){var T={scale:c/s,touches:r};e.pinchEvent(T)}if("Pan"===t.currentGesture){var S={translation:p,touches:r};e.panEvent(S)}}}},e.handleVisibilityChange=function(){t._animationStartTime=Date.now(),t._animationFrameCount=0},e.setCurrentRenderer=function(e){t._forcedRenderer=!!e,t.currentRenderer=e};var d=e.delete;e.delete=function(){for(;n.size;)e.cancelAnimation(n.values().next().value);void 0!==document.hidden&&document.removeEventListener("visibilitychange",e.handleVisibilityChange),t.container&&e.unbindEvents(),d()},void 0!==document.hidden&&document.addEventListener("visibilitychange",e.handleVisibilityChange,!1)}var Gh={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function Uh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gh,n),Ot.obj(e,t),t._animationExtendedEnd=0,Ot.event(e,t,"RenderEvent"),kh.forEach((function(n){return Ot.event(e,t,n)})),Ot.get(e,t,["initialized","container","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),Ot.setGet(e,t,["lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),Ot.moveToProtected(e,t,["view"]),Fh(e,t)}var jh=Ah({newInstance:Ot.newInstance(Uh,"vtkRenderWindowInteractor"),extend:Uh,handledEvents:kh},Ch);function zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zh(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hh=Ot.vtkErrorMacro,Kh=Ot.VOID;function Xh(e,t){t.classHierarchy.push("vtkInteractorObserver");var n=Wh({},e);function r(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function a(){jh.handledEvents.forEach((function(n){e["handle".concat(n)]&&t.subscribedEvents.push(t._interactor["on".concat(n)]((function(r){return t.processEvents?e["handle".concat(n)](r):Kh}),t.priority))}))}e.setInteractor=function(n){n!==t._interactor&&(r(),t._interactor=n,n&&t.enabled&&a(),e.modified())},e.setEnabled=function(n){n!==t.enabled&&(r(),n&&(t._interactor?a():Hh("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=function(e,n,r,a){return e?t._interactor.getView().displayToWorld(n,r,a,e):null},e.computeWorldToDisplay=function(e,n,r,a){return e?t._interactor.getView().worldToDisplay(n,r,a,e):null},e.setPriority=function(e){n.setPriority(e)&&t._interactor&&(r(),a())}}var qh={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function Yh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qh,n),Ot.obj(e,t),Ot.event(e,t,"InteractionEvent"),Ot.event(e,t,"StartInteractionEvent"),Ot.event(e,t,"EndInteractionEvent"),Ot.get(e,t,["_interactor","enabled"]),Ot.setGet(e,t,["priority","processEvents"]),Ot.moveToProtected(e,t,["interactor"]),Xh(e,t)}var Zh=Wh({newInstance:Ot.newInstance(Yh,"vtkInteractorObserver"),extend:Yh},{computeWorldToDisplay:function(e,t,n,r){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,r,e)},computeDisplayToWorld:function(e,t,n,r){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,r,e)}}),Qh={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025},Jh={States:Qh};function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ey=Jh.States,ty={Rotate:ey.IS_ROTATE,Pan:ey.IS_PAN,Spin:ey.IS_SPIN,Dolly:ey.IS_DOLLY,CameraPose:ey.IS_CAMERA_POSE,WindowLevel:ey.IS_WINDOW_LEVEL,Slice:ey.IS_SLICE};function ny(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(ty).forEach((function(n){Ot.event(e,t,"Start".concat(n,"Event")),e["start".concat(n)]=function(){t.state===ey.IS_NONE&&(t.state=ty[n],t._interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},Ot.event(e,t,"End".concat(n,"Event")),e["end".concat(n)]=function(){t.state===ty[n]&&(t.state=ey.IS_NONE,t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),t._interactor.render())}})),e.handleKeyPress=function(e){var n=t._interactor;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),n.render();break;case"w":case"W":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToWireframe&&t.setRepresentationToWireframe()})),n.render();break;case"s":case"S":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToSurface&&t.setRepresentationToSurface()})),n.render();break;case"v":case"V":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToPoints&&t.setRepresentationToPoints()})),n.render()}}}var ry={state:ey.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function ay(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ry,n),Zh.extend(e,t,n),ny(e,t)}var oy=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$h(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(ay,"vtkInteractorStyle"),extend:ay},Jh);function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var sy=Ot.vtkDebugMacro,cy=oy.States,uy={type:"StartInteractionEvent"},ly={type:"InteractionEvent"},dy={type:"EndInteractionEvent"};function py(e,t,n,r,a,o){var i=e.getActiveCamera(),s=i.getFocalPoint(),c=(s=t.getInteractorStyle().computeWorldToDisplay(e,s[0],s[1],s[2]))[2],u=t.getInteractorStyle().computeDisplayToWorld(e,n,r,c),l=t.getInteractorStyle().computeDisplayToWorld(e,a,o,c),d=[l[0]-u[0],l[1]-u[1],l[2]-u[2]];s=i.getFocalPoint();var p=i.getPosition();i.setFocalPoint(d[0]+s[0],d[1]+s[1],d[2]+s[2]),i.setPosition(d[0]+p[0],d[1]+p[1],d[2]+p[2])}var fy={dollyToPosition:function(e,t,n,r){var a=n.getActiveCamera();if(a.getParallelProjection()){var o=r.getView(),i=o.getViewportSize(n),s=n.getViewport(),c=o.getSize(),u=i[0]/2,l=i[1]/2,d=t.x-s[0]*c[0],p=t.y-s[1]*c[1];py(n,r,u,l,d,p),a.setParallelScale(a.getParallelScale()/e),py(n,r,d,p,u,l)}else{var f=a.getFocalPoint(),g=a.getViewPlaneNormal();f=r.getInteractorStyle().computeWorldToDisplay(n,f[0],f[1],f[2]);var m=r.getInteractorStyle().computeDisplayToWorld(n,t.x,t.y,f[2]);a.setFocalPoint(m[0],m[1],m[2]),a.dolly(e),n.resetCameraClippingRange();var v=a.getPosition();f=a.getFocalPoint();var h=[0,0,0],y=g[0]*(f[0]-v[0])+g[1]*(f[1]-v[1])+g[2]*(f[2]-v[2]);y/=Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2),h[0]=v[0]+g[0]*y,h[1]=v[1]+g[1]*y,h[2]=v[2]+g[2]*y,a.setFocalPoint(h[0],h[1],h[2]),n.resetCameraClippingRange()}},translateCamera:py,dollyByFactor:function(e,t,n){if(!Number.isNaN(n)){var r=t.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}};function gy(e,t){t.classHierarchy.push("vtkInteractorStyleManipulator"),t.mouseManipulators=[],t.keyboardManipulators=[],t.vrManipulators=[],t.gestureManipulators=[],t.currentManipulator=null,t.currentWheelManipulator=null,t.centerOfRotation=[0,0,0],t.rotationFactor=1,e.removeAllManipulators=function(){e.removeAllMouseManipulators(),e.removeAllKeyboardManipulators(),e.removeAllVRManipulators(),e.removeAllGestureManipulators()},e.removeAllMouseManipulators=function(){t.mouseManipulators=[]},e.removeAllKeyboardManipulators=function(){t.keyboardManipulators=[]},e.removeAllVRManipulators=function(){t.vrManipulators=[]},e.removeAllGestureManipulators=function(){t.gestureManipulators=[]};var n=function(t,n){var r=n.indexOf(t);return-1!==r&&(n.splice(r,1),e.modified(),!0)};e.removeMouseManipulator=function(e){return n(e,t.mouseManipulators)},e.removeKeyboardManipulator=function(e){return n(e,t.keyboardManipulators)},e.removeVRManipulator=function(e){return n(e,t.vrManipulators)},e.removeGestureManipulator=function(e){return n(e,t.gestureManipulators)};var r=function(t,n){return-1===n.indexOf(t)&&(n.push(t),e.modified(),!0)};e.addMouseManipulator=function(e){return r(e,t.mouseManipulators)},e.addKeyboardManipulator=function(e){return r(e,t.keyboardManipulators)},e.addVRManipulator=function(e){return r(e,t.vrManipulators)},e.addGestureManipulator=function(e){return r(e,t.gestureManipulators)},e.getNumberOfMouseManipulators=function(){return t.mouseManipulators.length},e.getNumberOfKeyboardManipulators=function(){return t.keyboardManipulators.length},e.getNumberOfVRManipulators=function(){return t.vrManipulators.length},e.getNumberOfGestureManipulators=function(){return t.gestureManipulators.length},e.resetCurrentManipulator=function(){t.currentManipulator=null,t.currentWheelManipulator=null},e.handleLeftButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(1,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(2,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(3,n)},e.handleButton3D=function(n){n&&(t.currentManipulator=e.findVRManipulator(n.device,n.input,n.pressed),t.currentManipulator?(t.currentManipulator.onButton3D(e,n.pokedRenderer,t.state,n.device,n.input,n.pressed),n.pressed?e.startCameraPose():e.endCameraPose()):sy("No manipulator found"))},e.handleMove3D=function(n){t.currentManipulator&&t.state===cy.IS_CAMERA_POSE&&t.currentManipulator.onMove3D(e,n.pokedRenderer,t.state,n)},e.onButtonDown=function(n,r){t.currentManipulator||(t.currentManipulator=e.findMouseManipulator(n,r.shiftKey,r.controlKey,r.altKey),t.currentManipulator?(t.currentManipulator.setCenter&&t.currentManipulator.setCenter(t.centerOfRotation),t.currentManipulator.setRotationFactor&&t.currentManipulator.setRotationFactor(t.rotationFactor),t.currentManipulator.startInteraction(),t.currentManipulator.onButtonDown(t._interactor,r.pokedRenderer,r.position),t._interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(uy)):sy("No manipulator found"))},e.findMouseManipulator=function(e,n,r,a){for(var o=null,i=t.mouseManipulators.length;i--;){var s=t.mouseManipulators[i];s&&s.getButton()===e&&s.getShift()===n&&s.getControl()===r&&s.getAlt()===a&&s.isDragEnabled()&&(o=s)}return o},e.findVRManipulator=function(e,n){for(var r=null,a=t.vrManipulators.length;a--;){var o=t.vrManipulators[a];o&&o.getDevice()===e&&o.getInput()===n&&(r=o)}return r},e.handleLeftButtonRelease=function(){e.onButtonUp(1)},e.handleMiddleButtonRelease=function(){e.onButtonUp(2)},e.handleRightButtonRelease=function(){e.onButtonUp(3)},e.onButtonUp=function(n){t.currentManipulator&&t.currentManipulator.getButton&&t.currentManipulator.getButton()===n&&(t.currentManipulator.onButtonUp(t._interactor),t.currentManipulator.endInteraction(),t.currentManipulator=null,t._interactor.cancelAnimation(e.onButtonDown),e.invokeEndInteractionEvent(dy))},e.handleStartMouseWheel=function(n){if(!t.currentWheelManipulator){for(var r=null,a=t.mouseManipulators.length;a--;){var o=t.mouseManipulators[a];o&&o.isScrollEnabled()&&o.getShift()===n.shiftKey&&o.getControl()===n.controlKey&&o.getAlt()===n.altKey&&(r=o)}r?(t.currentWheelManipulator=r,t.currentWheelManipulator.onStartScroll(t._interactor,n.pokedRenderer,n.spinY),t.currentWheelManipulator.startInteraction(),t._interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(uy)):sy("No manipulator found")}},e.handleEndMouseWheel=function(){t.currentWheelManipulator&&t.currentWheelManipulator.onEndScroll&&(t.currentWheelManipulator.onEndScroll(t._interactor),t.currentWheelManipulator.endInteraction(),t.currentWheelManipulator=null,t._interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(dy))},e.handleMouseWheel=function(n){t.currentWheelManipulator&&t.currentWheelManipulator.onScroll&&(t.currentWheelManipulator.onScroll(t._interactor,n.pokedRenderer,n.spinY,t.cachedMousePosition),e.invokeInteractionEvent(ly))},e.handleMouseMove=function(n){t.cachedMousePosition=n.position,t.currentManipulator&&t.currentManipulator.onMouseMove&&(t.currentManipulator.onMouseMove(t._interactor,n.pokedRenderer,n.position),e.invokeInteractionEvent(ly))},e.handleKeyPress=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyPress})).forEach((function(r){r.onKeyPress(t._interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(ly)}))},e.handleKeyDown=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyDown})).forEach((function(r){r.onKeyDown(t._interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(ly)}))},e.handleKeyUp=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyUp})).forEach((function(r){r.onKeyUp(t._interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(ly)}))},e.handleStartPinch=function(n){e.startDolly();for(var r=t.gestureManipulators.length;r--;){var a=t.gestureManipulators[r];a&&a.isPinchEnabled()&&(a.onStartPinch(t._interactor,n.scale),a.startInteraction())}t._interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(uy)},e.handleEndPinch=function(){e.endDolly();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r&&r.isPinchEnabled()&&(r.onEndPinch(t._interactor),r.endInteraction())}t._interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(dy)},e.handleStartRotate=function(n){e.startRotate();for(var r=t.gestureManipulators.length;r--;){var a=t.gestureManipulators[r];a&&a.isRotateEnabled()&&(a.onStartRotate(t._interactor,n.rotation),a.startInteraction())}t._interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(uy)},e.handleEndRotate=function(){e.endRotate();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r&&r.isRotateEnabled()&&(r.onEndRotate(t._interactor),r.endInteraction())}t._interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(dy)},e.handleStartPan=function(n){e.startPan();for(var r=t.gestureManipulators.length;r--;){var a=t.gestureManipulators[r];a&&a.isPanEnabled()&&(a.onStartPan(t._interactor,n.translation),a.startInteraction())}t._interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(uy)},e.handleEndPan=function(){e.endPan();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r&&r.isPanEnabled()&&(r.onEndPan(t._interactor),r.endInteraction())}t._interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(dy)},e.handlePinch=function(n){for(var r=t.gestureManipulators.length,a=0;r--;){var o=t.gestureManipulators[r];o&&o.isPinchEnabled()&&(o.onPinch(t._interactor,n.pokedRenderer,n.scale),a++)}a&&e.invokeInteractionEvent(ly)},e.handlePan=function(n){for(var r=t.gestureManipulators.length,a=0;r--;){var o=t.gestureManipulators[r];o&&o.isPanEnabled()&&(o.onPan(t._interactor,n.pokedRenderer,n.translation),a++)}a&&e.invokeInteractionEvent(ly)},e.handleRotate=function(n){for(var r=t.gestureManipulators.length,a=0;r--;){var o=t.gestureManipulators[r];o&&o.isRotateEnabled()&&(o.onRotate(t._interactor,n.pokedRenderer,n.rotation),a++)}a&&e.invokeInteractionEvent(ly)}}var my={cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function vy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,my,n),oy.extend(e,t,n),Ot.setGet(e,t,["rotationFactor"]),Ot.get(e,t,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),Ot.setGetArray(e,t,["centerOfRotation"],3),gy(e,t)}var hy=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(vy,"vtkInteractorStyleManipulator"),extend:vy},fy);function yy(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function by(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){yy(o,r,a,i,s,"next",e)}function s(e){yy(o,r,a,i,s,"throw",e)}i(void 0)}))}}var xy=n(191),Ty=n.n(xy),Sy=navigator.gpu?"WebGPU":"WebGL",Py=Object.create(null);function wy(e,t){Py[e]=t}function Cy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Py[e]&&Py[e](t)}function Oy(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(n){e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=function(n){t.renderers=t.renderers.filter((function(e){return e!==n})),e.modified()},e.hasRenderer=function(e){return-1!==t.renderers.indexOf(e)},e.newAPISpecificView=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cy(e||t.defaultViewAPI,n)},e.addView=function(n){e.hasView(n)||(n.setRenderable(e),t._views.push(n),e.modified())},e.removeView=function(n){t._views=t._views.filter((function(e){return e!==n})),e.modified()},e.hasView=function(e){return-1!==t._views.indexOf(e)},e.preRender=function(){t.renderers.forEach((function(e){e.isActiveCameraCreated()||e.resetCamera()}))},e.render=function(){e.preRender(),t.interactor?t.interactor.render():t._views.forEach((function(e){return e.traverseAllPasses()}))},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0};return t.renderers.forEach((function(t){t.getViewProps().forEach((function(t){if(t.getVisibility()){e.propCount+=1;var n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){var r=n.getPrimitiveCount();Object.keys(r).forEach((function(t){e[t]||(e[t]=0),e[t]+=r[t]}))}}else e.invisiblePropCount+=1}))})),e.str=Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n"),e},e.captureImages=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ot.setImmediate(e.render),t._views.map((function(e){return e.captureNextImage?e.captureNextImage(n,r):void 0})).filter((function(e){return!!e}))}}var Ay={defaultViewAPI:Sy,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function Iy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ay,n),Ot.obj(e,t),Ot.setGet(e,t,["interactor","numberOfLayers","_views","defaultViewAPI"]),Ot.get(e,t,["neverRendered"]),Ot.getArray(e,t,["renderers"]),Ot.moveToProtected(e,t,["views"]),Ot.event(e,t,"completion"),Oy(e,t)}var My={newInstance:Ot.newInstance(Iy,"vtkRenderWindow"),extend:Iy,registerViewConstructor:wy,listViewAPIs:function(){return Object.keys(Py)},newAPISpecificView:Cy};function Ry(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return t.currentOperation},e.setCurrentOperation=function(e){t.currentOperation=e,t.currentTraverseOperation="traverse".concat(Ot.capitalize(t.currentOperation))},e.getTraverseOperation=function(){return t.currentTraverseOperation},e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t._currentParent=r,t.preDelegateOperations.forEach((function(t){e.setCurrentOperation(t),n.traverse(e)})),t.delegates.forEach((function(t){t.traverse(n,e)})),t.postDelegateOperations.forEach((function(t){e.setCurrentOperation(t),n.traverse(e)})))}}var Ey={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function Dy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ey,n),Ot.obj(e,t),Ot.get(e,t,["currentOperation"]),Ot.setGet(e,t,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),Ot.moveToProtected(e,t,["currentParent"]),Ry(e,t)}var Ly={newInstance:Ot.newInstance(Dy,"vtkRenderPass"),extend:Dy},By=vl.Representation,Ny=Ot.vtkErrorMacro;function ky(e){var t=Us.substitute(e.Fragment,"//VTK::RenderPassFragmentShader::Impl","\n      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);\n      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);\n      gl_FragData[1].r = weight;\n    ",!1);e.Fragment=t.result}function Vy(e,t){t.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),e.createVertexBuffer=function(){var e=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array([4,0,1,3,2]),a=Ba.newInstance({numberOfComponents:3,values:e});a.setName("points");var o=Ba.newInstance({numberOfComponents:2,values:n});o.setName("tcoords");var i=Ba.newInstance({numberOfComponents:1,values:r});t.tris.getCABO().createVBO(i,"polys",By.SURFACE,{points:a,tcoords:o,cellOffset:0}),t.VBOBuildTime.modified()},e.createFramebuffer=function(e){var n,r=e.getSize(),a=e.getContext();t.framebuffer=zc.newInstance(),t.framebuffer.setOpenGLRenderWindow(e),(n=t.framebuffer).create.apply(n,ve(r)),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind(),t.translucentRGBATexture=vc.newInstance(),t.translucentRGBATexture.setInternalFormat(a.RGBA16F),t.translucentRGBATexture.setFormat(a.RGBA),t.translucentRGBATexture.setOpenGLDataType(a.HALF_FLOAT),t.translucentRGBATexture.setOpenGLRenderWindow(e),t.translucentRGBATexture.create2DFromRaw(r[0],r[1],4,"Float32Array",null),t.translucentRTexture=vc.newInstance(),t.translucentRTexture.setInternalFormat(a.R16F),t.translucentRTexture.setFormat(a.RED),t.translucentRTexture.setOpenGLDataType(a.HALF_FLOAT),t.translucentRTexture.setOpenGLRenderWindow(e),t.translucentRTexture.create2DFromRaw(r[0],r[1],1,"Float32Array",null),t.translucentZTexture=vc.newInstance(),t.translucentZTexture.setOpenGLRenderWindow(e),t.translucentZTexture.createDepthFromRaw(r[0],r[1],"Float32Array",null),t.framebuffer.setColorBuffer(t.translucentRGBATexture,0),t.framebuffer.setColorBuffer(t.translucentRTexture,1),t.framebuffer.setDepthBuffer(t.translucentZTexture)},e.createCopyShader=function(e){t.copyShader=e.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join("\n"),"//VTK::System::Dec\n\nin vec2 tcoord;\n\nuniform sampler2D translucentRTexture;\nuniform sampler2D translucentRGBATexture;\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  vec4 t1Color = texture(translucentRGBATexture, tcoord);\n  float t2Color = texture(translucentRTexture, tcoord).r;\n  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);\n}\n","")},e.createVBO=function(n){var r=n.getContext();t.tris.setOpenGLRenderWindow(n),e.createVertexBuffer();var a=t.copyShader;t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(a,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||Ny("Error setting vertexDC in copy shader VAO."),t.copyVAO.addAttributeArray(a,t.tris.getCABO(),"tcoordTC",t.tris.getCABO().getTCoordOffset(),t.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||Ny("Error setting vertexDC in copy shader VAO.")},e.traverse=function(n,r,a){if(!t.deleted){var o=n.getSize(),i=n.getContext();if(t._supported=!1,r.getSelector()||!i||!n.getWebgl2()||!i.getExtension("EXT_color_buffer_half_float")&&!i.getExtension("EXT_color_buffer_float"))return e.setCurrentOperation("translucentPass"),void r.traverse(e);if(t._supported=!0,null===t.framebuffer)e.createFramebuffer(n);else{var s=t.framebuffer.getSize();null===s||s[0]!==o[0]||s[1]!==o[1]?(t.framebuffer.releaseGraphicsResources(),t.translucentRGBATexture.releaseGraphicsResources(n),t.translucentRTexture.releaseGraphicsResources(n),t.translucentZTexture.releaseGraphicsResources(n),e.createFramebuffer(n)):(t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind())}i.drawBuffers([i.COLOR_ATTACHMENT0]),i.clearBufferfv(i.COLOR,0,[0,0,0,0]),i.clearBufferfv(i.DEPTH,0,[1]),i.colorMask(!1,!1,!1,!1),a.getOpaqueActorCount()>0&&(a.setCurrentOperation("opaqueZBufferPass"),r.traverse(a)),i.colorMask(!0,!0,!0,!0),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1]),i.viewport(0,0,o[0],o[1]),i.scissor(0,0,o[0],o[1]),i.clearBufferfv(i.COLOR,0,[0,0,0,1]),i.clearBufferfv(i.COLOR,1,[0,0,0,0]),i.enable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFuncSeparate(i.ONE,i.ONE,i.ZERO,i.ONE_MINUS_SRC_ALPHA),e.setCurrentOperation("translucentPass"),r.traverse(e),i.drawBuffers([i.NONE]),t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader?e.createCopyShader(n):n.getShaderCache().readyShaderProgram(t.copyShader),t.copyVAO||(t.copyVAO=Hs.newInstance(),t.copyVAO.setOpenGLRenderWindow(n)),t.copyVAO.bind(),t.VBOBuildTime.getMTime()<e.getMTime()&&e.createVBO(n),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),i.depthMask(!1),i.depthFunc(i.ALWAYS),i.viewport(0,0,o[0],o[1]),i.scissor(0,0,o[0],o[1]),t.translucentRGBATexture.activate(),t.copyShader.setUniformi("translucentRGBATexture",t.translucentRGBATexture.getTextureUnit()),t.translucentRTexture.activate(),t.copyShader.setUniformi("translucentRTexture",t.translucentRTexture.getTextureUnit()),i.drawArrays(i.TRIANGLES,0,t.tris.getCABO().getElementCount()),i.depthMask(!0),i.depthFunc(i.LEQUAL),t.translucentRGBATexture.deactivate(),t.translucentRTexture.deactivate()}},e.getShaderReplacement=function(){return t._supported?ky:null},e.releaseGraphicsResources=function(n){t.framebuffer&&(t.framebuffer.releaseGraphicsResources(n),t.framebuffer=null),t.translucentRGBATexture&&(t.translucentRGBATexture.releaseGraphicsResources(n),t.translucentRGBATexture=null),t.translucentRTexture&&(t.translucentRTexture.releaseGraphicsResources(n),t.translucentRTexture=null),t.translucentZTexture&&(t.translucentZTexture.releaseGraphicsResources(n),t.translucentZTexture=null),t.copyVAO&&(t.copyVAO.releaseGraphicsResources(n),t.copyVAO=null),t.copyShader&&(t.copyShader.releaseGraphicsResources(n),t.copyShader=null),t.tris&&(t.tris.releaseGraphicsResources(n),t.tris=null),e.modified()}}var _y={framebuffer:null,copyShader:null,tris:null};function Fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_y,n),Ly.extend(e,t,n),t.VBOBuildTime={},Ot.obj(t.VBOBuildTime,{mtime:0}),t.tris=Zs.newInstance(),Ot.get(e,t,["framebuffer"]),Vy(e,t)}var Gy={newInstance:Ot.newInstance(Fy,"vtkOpenGLOrderIndependentTranslucentPass"),extend:Fy};function Uy(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t._currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e);for(var a=n.getRenderable().getNumberOfLayers(),o=n.getChildren(),i=0;i<a;i++)for(var s=0;s<o.length;s++){var c=o[s],u=n.getRenderable().getRenderers()[s];if(u.getDraw()&&u.getLayer()===i){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,t.overlayActorCount=0,e.setCurrentOperation("queryPass"),c.traverse(e),(t.opaqueActorCount>0||t.translucentActorCount>0)&&t.volumeCount>0||t.depthRequested){var l=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=zc.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();var d=t.framebuffer.getSize();null!==d&&d[0]===l[0]&&d[1]===l[1]||(t.framebuffer.create(l[0],l[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("zBufferPass"),c.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers(),t.depthRequested=!1}e.setCurrentOperation("cameraPass"),c.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),c.traverse(e)),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=Gy.newInstance()),t.translucentPass.traverse(n,c,e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),c.traverse(e)),t.overlayActorCount>0&&(e.setCurrentOperation("overlayPass"),c.traverse(e))}}}},e.getZBufferTexture=function(){return t.framebuffer?t.framebuffer.getColorTexture():null},e.requestDepth=function(){t.depthRequested=!0},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.incrementVolumeCount=function(){return t.volumeCount++},e.incrementOverlayActorCount=function(){return t.overlayActorCount++}}var jy={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function zy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jy,n),Ly.extend(e,t,n),Ot.get(e,t,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),Uy(e,t)}var Wy={newInstance:Ot.newInstance(zy,"vtkForwardPass"),extend:zy};function Hy(e,t){t.classHierarchy.push("vtkHardwareSelector"),e.getSourceDataAsync=function(){var e=by(Ty().mark((function e(t,n,r,a,o){return Ty().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),e.selectAsync=function(){var t=by(Ty().mark((function t(n,r,a,o,i){var s;return Ty().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSourceDataAsync(n,r,a,o,i);case 2:if(!(s=t.sent)){t.next=5;break}return t.abrupt("return",s.generateSelection(r,a,o,i));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,a,o){return t.apply(this,arguments)}}()}var Ky={fieldAssociation:oi.FieldAssociations.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function Xy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ky,n),Ot.obj(e,t),Ot.setGet(e,t,["fieldAssociation","captureZValues"]),Hy(e,t)}var qy={newInstance:Ot.newInstance(Xy,"vtkHardwareSelector"),extend:Xy};function Yy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zy(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return t.points.getBounds()}}var Qy={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function Jy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qy,n),Ot.obj(e,t),t.properties={},Ot.setGet(e,t,["contentType","fieldType","properties","selectionList"]),Zy(e,t)}var $y=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yy(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Jy,"vtkSelectionNode"),extend:Jy},{SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}});function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tb=lv.PassTypes,nb=$y.SelectionContent,rb=$y.SelectionField,ab=oi.FieldAssociations,ob=Ot.vtkErrorMacro;function ib(e){return"".concat(e.propID," ").concat(e.compositeID)}function sb(e,t,n,r){return n?n[4*(t*(r[2]-r[0]+1)+e)+3]:0}function cb(e,t,n,r){if(!n)return 0;var a=4*(t*(r[2]-r[0]+1)+e),o=n[a],i=n[a+1];return 256*(256*n[a+2]+i)+o}function ub(e,t){var n=t;return(n<<=24)|e}function lb(e,t,n,r){var a=n<0?0:n;if(0===a){if(r[0]=t[0],r[1]=t[1],t[0]<e.area[0]||t[0]>e.area[2]||t[1]<e.area[1]||t[1]>e.area[3])return null;var o=[t[0]-e.area[0],t[1]-e.area[1]],i=cb(o[0],o[1],e.pixBuffer[tb.ACTOR_PASS],e.area);if(i<=0||i-1>=e.props.length)return null;var s={valid:!0};s.propID=i-1,s.prop=e.props[s.propID];var c=cb(o[0],o[1],e.pixBuffer[tb.COMPOSITE_INDEX_PASS],e.area);if((c<0||c>16777215)&&(c=0),s.compositeID=c-1,e.captureZValues){var u=4*(o[1]*(e.area[2]-e.area[0]+1)+o[0]);s.zValue=(256*e.zBuffer[u]+e.zBuffer[u+1])/65535,s.displayPosition=t}if(e.pixBuffer[tb.ID_LOW24]&&0===sb(o[0],o[1],e.pixBuffer[tb.ID_LOW24],e.area))return s;var l=cb(o[0],o[1],e.pixBuffer[tb.ID_LOW24],e.area),d=cb(o[0],o[1],e.pixBuffer[tb.ID_HIGH24],e.area);return s.attributeID=ub(l,d),s}var p=[t[0],t[1]],f=[0,0],g=lb(e,t,0,r);if(g&&g.valid)return g;for(var m=1;m<a;++m){for(var v=p[1]>m?p[1]-m:0;v<=p[1]+m;++v){if(f[1]=v,p[0]>=m&&(f[0]=p[0]-m,(g=lb(e,f,0,r))&&g.valid))return g;if(f[0]=p[0]+m,(g=lb(e,f,0,r))&&g.valid)return g}for(var h=p[0]>=m?p[0]-(m-1):0;h<=p[0]+(m-1);++h){if(f[0]=h,p[1]>=m&&(f[1]=p[1]-m,(g=lb(e,f,0,r))&&g.valid))return g;if(f[1]=p[1]+m,(g=lb(e,f,0,r))&&g.valid)return g}}return r[0]=t[0],r[1]=t[1],null}function db(e,t,n,r,a){var o=[],i=0;return t.forEach((function(t,s){var c=$y.newInstance();switch(c.setContentType(nb.INDICES),e){case ab.FIELD_ASSOCIATION_CELLS:c.setFieldType(rb.CELL);break;case ab.FIELD_ASSOCIATION_POINTS:c.setFieldType(rb.POINT);break;default:ob("Unknown field association")}c.getProperties().propID=t.info.propID,c.getProperties().prop=t.info.prop,c.getProperties().compositeID=t.info.compositeID,c.getProperties().attributeID=t.info.attributeID,c.getProperties().pixelCount=t.pixelCount,n&&(c.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],c.getProperties().worldPosition=a.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,r)),c.setSelectionList(t.attributeIDs),o[i]=c,i++})),o}function pb(e,t,n,r,a){for(var o=Math.floor(t),i=Math.floor(n),s=Math.floor(r),c=Math.floor(a),u=new Map,l=[0,0],d=i;d<=c;d++)for(var p=o;p<=s;p++){var f=lb(e,[p,d],0,l);if(f&&f.valid){var g=ib(f);if(u.has(g)){var m=u.get(g);m.pixelCount++,e.captureZValues&&f.zValue<m.info.zValue&&(m.info=f),-1===m.attributeIDs.indexOf(f.attributeID)&&m.attributeIDs.push(f.attributeID)}else u.set(g,{info:f,pixelCount:1,attributeIDs:[f.attributeID]})}}return db(e.fieldAssociation,u,e.captureZValues,e.renderer,e.openGLRenderWindow)}function fb(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){t.rawPixBuffer=[],t.pixBuffer=[],t.zBuffer=null},e.beginSelection=function(){t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer),t.maxAttributeId=0;var n=t._openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();var r=t.framebuffer.getSize();r[0]!==n[0]||r[1]!==n[1]?(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer()):t.framebuffer.bind()}else t.framebuffer=zc.newInstance(),t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();if(t._openGLRenderer.clear(),t._openGLRenderer.setSelector(e),t.hitProps={},t.propPixels={},t.props=[],e.releasePixBuffers(),t.fieldAssociation===ab.FIELD_ASSOCIATION_POINTS){var a=t._openGLRenderWindow.getContext(),o=a.isEnabled(a.BLEND);a.disable(a.BLEND),t._openGLRenderWindow.traverseAllPasses(),o&&a.enable(a.BLEND)}},e.endSelection=function(){t.hitProps={},t._openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){var e=t._openGLRenderWindow.getContext();t.originalBlending=e.isEnabled(e.BLEND),e.disable(e.BLEND)},e.postCapturePass=function(){var e=t._openGLRenderWindow.getContext();t.originalBlending&&e.enable(e.BLEND)},e.select=function(){var n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},e.getSourceDataAsync=function(){var n=by(Ty().mark((function n(r,a,o,i,s){var c,u;return Ty().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t._renderer=r,void 0===a?(c=t._openGLRenderWindow.getSize(),e.setArea(0,0,c[0]-1,c[1]-1)):e.setArea(a,o,i,s),e.captureBuffers()){n.next=4;break}return n.abrupt("return",!1);case 4:return(u={area:ve(t.area),pixBuffer:ve(t.pixBuffer),captureZValues:t.captureZValues,zBuffer:t.zBuffer,props:ve(t.props),fieldAssociation:t.fieldAssociation,renderer:r,openGLRenderWindow:t._openGLRenderWindow}).generateSelection=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pb.apply(void 0,[u].concat(t))},n.abrupt("return",u);case 7:case"end":return n.stop()}}),n)})));return function(e,t,r,a,o){return n.apply(this,arguments)}}(),e.captureBuffers=function(){if(!t._renderer||!t._openGLRenderWindow)return ob("Renderer and view must be set before calling Select."),!1;t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer),t._openGLRenderWindow.getRenderable().preRender(),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t._renderer.getBackgroundByReference(),t._renderer.setBackground(0,0,0,0);var n=t._openGLRenderWindow.getRenderPasses();for(e.beginSelection(),t.currentPass=tb.MIN_KNOWN_PASS;t.currentPass<=tb.MAX_KNOWN_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===tb.ACTOR_PASS&&"function"==typeof n[0].requestDepth&&"function"==typeof n[0].getFramebuffer?(n[0].requestDepth(),t._openGLRenderWindow.traverseAllPasses()):t._openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass),e.processPixelBuffers());return e.endSelection(),t._renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.processPixelBuffers=function(){t.props.forEach((function(n,r){e.isPropHit(r)&&n.processSelectorPixelBuffers(e,t.propPixels[r])}))},e.passRequired=function(e){if(e===tb.ID_HIGH24){if(t.fieldAssociation===ab.FIELD_ASSOCIATION_POINTS)return t.maximumPointId>16777215;if(t.fieldAssociation===ab.FIELD_ASSOCIATION_CELLS)return t.maximumCellId>16777215}return!0},e.savePixelBuffer=function(n){if(t.pixBuffer[n]=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),!t.rawPixBuffer[n]){var r=(t.area[2]-t.area[0]+1)*(t.area[3]-t.area[1]+1)*4;t.rawPixBuffer[n]=new Uint8Array(r),t.rawPixBuffer[n].set(t.pixBuffer[n])}if(n===tb.ACTOR_PASS){if(t.captureZValues){var a=t._openGLRenderWindow.getRenderPasses();if("function"==typeof a[0].requestDepth&&"function"==typeof a[0].getFramebuffer){var o=a[0].getFramebuffer();o.saveCurrentBindingsAndBuffers(),o.bind(),t.zBuffer=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),o.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.rawPixBuffer[n])}},e.buildPropHitList=function(e){for(var n=0,r=0;r<=t.area[3]-t.area[1];r++)for(var a=0;a<=t.area[2]-t.area[0];a++){var o=cb(a,r,e,t.area);o>0&&(--o in t.hitProps||(t.hitProps[o]=!0,t.propPixels[o]=[]),t.propPixels[o].push(4*n)),++n}},e.renderProp=function(n){t.currentPass===tb.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+1),t.props.push(n))},e.renderCompositeIndex=function(n){t.currentPass===tb.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+1)},e.renderAttributeId=function(e){e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.passTypeToString=function(e){return Ot.enumToString(tb,e)},e.isPropHit=function(e){return Boolean(t.hitProps[e])},e.setPropColorValueFromInt=function(e){t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=function(n,r,a){var o=r<0?0:r;if(0===o){if(a[0]=n[0],a[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;var i=[n[0]-t.area[0],n[1]-t.area[1]],s=cb(i[0],i[1],t.pixBuffer[tb.ACTOR_PASS],t.area);if(s<=0||s-1>=t.props.length)return null;var c={valid:!0};c.propID=s-1,c.prop=t.props[c.propID];var u=cb(i[0],i[1],t.pixBuffer[tb.COMPOSITE_INDEX_PASS],t.area);if((u<0||u>16777215)&&(u=0),c.compositeID=u-1,t.captureZValues){var l=4*(i[1]*(t.area[2]-t.area[0]+1)+i[0]);c.zValue=(256*t.zBuffer[l]+t.zBuffer[l+1])/65535,c.displayPosition=n}if(t.pixBuffer[tb.ID_LOW24]&&0===sb(i[0],i[1],t.pixBuffer[tb.ID_LOW24],t.area))return c;var d=cb(i[0],i[1],t.pixBuffer[tb.ID_LOW24],t.area),p=cb(i[0],i[1],t.pixBuffer[tb.ID_HIGH24],t.area);return c.attributeID=ub(d,p),c}var f=[n[0],n[1]],g=[0,0],m=e.getPixelInformation(n,0,a);if(m&&m.valid)return m;for(var v=1;v<o;++v){for(var h=f[1]>v?f[1]-v:0;h<=f[1]+v;++h){if(g[1]=h,f[0]>=v&&(g[0]=f[0]-v,(m=e.getPixelInformation(g,0,a))&&m.valid))return m;if(g[0]=f[0]+v,(m=e.getPixelInformation(g,0,a))&&m.valid)return m}for(var y=f[0]>=v?f[0]-(v-1):0;y<=f[0]+(v-1);++y){if(g[0]=y,f[1]>=v&&(g[1]=f[1]-v,(m=e.getPixelInformation(g,0,a))&&m.valid))return m;if(g[1]=f[1]+v,(m=e.getPixelInformation(g,0,a))&&m.valid)return m}}return a[0]=n[0],a[1]=n[1],null},e.generateSelection=function(n,r,a,o){for(var i=Math.floor(n),s=Math.floor(r),c=Math.floor(a),u=Math.floor(o),l=new Map,d=[0,0],p=s;p<=u;p++)for(var f=i;f<=c;f++){var g=[f,p],m=e.getPixelInformation(g,0,d);if(m&&m.valid){var v=ib(m);if(l.has(v)){var h=l.get(v);h.pixelCount++,t.captureZValues&&m.zValue<h.info.zValue&&(h.info=m),-1===h.attributeIDs.indexOf(m.attributeID)&&h.attributeIDs.push(m.attributeID)}else l.set(v,{info:m,pixelCount:1,attributeIDs:[m.attributeID]})}}return db(t.fieldAssociation,l,t.captureZValues,t._renderer,t._openGLRenderWindow)},e.getRawPixelBuffer=function(e){return t.rawPixBuffer[e]},e.getPixelBuffer=function(e){return t.pixBuffer[e]},e.attach=function(e,n){t._openGLRenderWindow=e,t._renderer=n};var n=e.setArea;e.setArea=function(){return!!n.apply(void 0,arguments)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}}var gb={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function mb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gb,n),qy.extend(e,t,n),t.propColorValue=[0,0,0],t.props=[],t.area||(t.area=[0,0,0,0]),Ot.setGetArray(e,t,["area"],4),Ot.setGet(e,t,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),Ot.setGetArray(e,t,["propColorValue"],3),Ot.moveToProtected(e,t,["renderer","openGLRenderWindow"]),Ot.event(e,t,"event"),fb(e,t)}var vb=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(mb,"vtkOpenGLHardwareSelector"),extend:mb},lv),hb=n(594),yb=n.n(hb),bb=["lastShaderBound","context","_openGLRenderWindow"];function xb(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,n,r){var a=n;r.length>0&&(a=Us.substitute(a,"VSOut","GSOut").result);var o=t._openGLRenderWindow.getWebgl2(),i="\n",s="#version 100\n";o?s="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(i="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),a=Us.substitute(a,"//VTK::System::Dec",["".concat(s,"\n"),o?"":"#extension GL_OES_standard_derivatives : enable\n",i,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var c=Us.substitute(e,"//VTK::System::Dec",["".concat(s,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){c=Us.substitute(c,"varying","out").result,a=Us.substitute(a,"varying","in").result;for(var u="",l=0;a.includes("gl_FragData[".concat(l,"]"));)a=Us.substitute(a,"gl_FragData\\[".concat(l,"\\]"),"fragOutput".concat(l)).result,u+="layout(location = ".concat(l,") out vec4 fragOutput").concat(l,";\n"),l++;a=Us.substitute(a,"//VTK::Output::Dec",u).result}return{VSSource:c,FSSource:a,GSSource:Us.substitute(r,"//VTK::System::Dec",s).result}},e.readyShaderProgramArray=function(t,n,r){var a=e.replaceShaderValues(t,n,r),o=e.getShaderProgram(a.VSSource,a.FSSource,a.GSSource);return e.readyShaderProgram(o)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,n,r){var a="".concat(e).concat(n).concat(r),o=yb().hash(a);if(!(o in t.shaderPrograms)){var i=Us.newInstance();return i.setContext(t.context),i.getVertexShader().setSource(e),i.getFragmentShader().setSource(n),r&&i.getGeometryShader().setSource(r),i.setMd5Hash(o),t.shaderPrograms[o]=i,i}return t.shaderPrograms[o]},e.releaseGraphicsResources=function(n){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map((function(e){return t.shaderPrograms[e]})).forEach((function(e){return e.releaseGraphicsResources(n)}))},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e||(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e),1}}var Tb={lastShaderBound:null,shaderPrograms:null,context:null};function Sb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tb,n),t.shaderPrograms={},Ot.obj(e,t),Ot.setGet(e,t,bb),Ot.moveToProtected(e,t,["openGLRenderWindow"]),xb(e,t)}var Pb={newInstance:Ot.newInstance(Sb,"vtkShaderCache"),extend:Sb},wb=Ot.vtkErrorMacro;function Cb(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&wb("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(n){if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<t.numberOfTextureUnits;++r)t.textureUnits[r]=!1}e.modified()}},e.allocate=function(){for(var n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=function(n){return e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n)},e.isAllocated=function(e){return t.textureUnits[e]},e.free=function(e){t.textureUnits[e]=!1}}var Ob={context:null,numberOfTextureUnits:0,textureUnits:0};function Ab(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ob,n),Ot.obj(e,t),t.textureUnits=[],Ot.get(e,t,["numberOfTextureUnits"]),Ot.setGet(e,t,["context"]),Cb(e,t)}var Ib={newInstance:Ot.newInstance(Ab,"vtkOpenGLTextureUnitManager"),extend:Ab};function Mb(e,t){t.classHierarchy.push("vtkRenderWindowViewNode"),e.getViewNodeFactory=function(){return null},e.getAspectRatio=function(){return t.size[0]/t.size[1]},e.getAspectRatioForRenderer=function(e){var n=e.getViewportByReference();return t.size[0]*(n[2]-n[0])/((n[3]-n[1])*t.size[1])},e.isInViewport=function(t,n,r){var a=r.getViewportByReference(),o=e.getFramebufferSize();return a[0]*o[0]<=t&&a[2]*o[0]>=t&&a[1]*o[1]<=n&&a[3]*o[1]>=n},e.getViewportSize=function(t){var n=t.getViewportByReference(),r=e.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},e.getViewportCenter=function(t){var n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=function(t,n,r){var a=e.getFramebufferSize();return[t/a[0],n/a[1],r]},e.normalizedDisplayToDisplay=function(t,n,r){var a=e.getFramebufferSize();return[t*a[0],n*a[1],r]},e.worldToView=function(e,t,n,r){return r.worldToView(e,t,n)},e.viewToWorld=function(e,t,n,r){return r.viewToWorld(e,t,n)},e.worldToDisplay=function(t,n,r,a){var o=a.worldToView(t,n,r),i=e.getViewportSize(a),s=a.viewToProjection(o[0],o[1],o[2],i[0]/i[1]),c=a.projectionToNormalizedDisplay(s[0],s[1],s[2]);return e.normalizedDisplayToDisplay(c[0],c[1],c[2])},e.displayToWorld=function(t,n,r,a){var o=e.displayToNormalizedDisplay(t,n,r),i=a.normalizedDisplayToProjection(o[0],o[1],o[2]),s=e.getViewportSize(a),c=a.projectionToView(i[0],i[1],i[2],s[0]/s[1]);return a.viewToWorld(c[0],c[1],c[2])},e.normalizedDisplayToViewport=function(t,n,r,a){var o=a.getViewportByReference();o=e.normalizedDisplayToDisplay(o[0],o[1],0);var i=e.normalizedDisplayToDisplay(t,n,r);return[i[0]-o[0]-.5,i[1]-o[1]-.5,r]},e.viewportToNormalizedViewport=function(t,n,r,a){var o=e.getViewportSize(a);return o&&0!==o[0]&&0!==o[1]?[t/(o[0]-1),n/(o[1]-1),r]:[t,n,r]},e.normalizedViewportToViewport=function(t,n,r,a){var o=e.getViewportSize(a);return[t*(o[0]-1),n*(o[1]-1),r]},e.displayToLocalDisplay=function(t,n,r){return[t,e.getFramebufferSize()[1]-n-1,r]},e.viewportToNormalizedDisplay=function(t,n,r,a){var o=a.getViewportByReference(),i=t+(o=e.normalizedDisplayToDisplay(o[0],o[1],0))[0]+.5,s=n+o[1]+.5;return e.displayToNormalizedDisplay(i,s,r)},e.getComputedDevicePixelRatio=function(){return t.size[0]/e.getContainerSize()[0]},e.getContainerSize=function(){Ot.vtkErrorMacro("not implemented")},e.getPixelData=function(e,t,n,r){Ot.vtkErrorMacro("not implemented")},e.createSelector=function(){Ot.vtkErrorMacro("not implemented")}}var Rb={size:void 0,selector:void 0};function Eb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rb,n),t.size||(t.size=[300,300]),Ot.getArray(e,t,["size"],2),Ot.get(e,t,["selector"]),Et.extend(e,t,n),Mb(e,t)}var Db={newInstance:Ot.newInstance(Eb,"vtkRenderWindowViewNode"),extend:Eb};var Lb=Ot.vtkDebugMacro,Bb=Ot.vtkErrorMacro,Nb={HmdVR:0,MobileAR:1,LookingGlassVR:2},kb={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Vb=1,_b=-.7,Fb=.25,Gb=-.5;function Ub(e,t,n){var r=e.createFramebuffer(),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),o===e.FRAMEBUFFER_COMPLETE}var jb=0,zb=[];function Wb(){jb++,zb.forEach((function(e){return e(jb)}))}function Hb(){jb--,zb.forEach((function(e){return e(jb)}))}function Kb(e){e.preventDefault()}function Xb(e,t){t.classHierarchy.push("vtkOpenGLRenderWindow");var r,a,o,i=(r=new Map,a={apply:function(e,t,n){return r.has(n[0])?r.get(n[0]):e.apply(t,n)}},(o=Object.create(null)).getParameter=function(e,t,n,r){return new Proxy(r.bind(e),a)},o.depthMask=function(e,t,n,a){return new Proxy(a.bind(e),(o=e.DEPTH_WRITEMASK,{apply:function(e,t,n){return r.set(o,n[0]),e.apply(t,n)}}));var o},{get:function(e,t,n){if("__getUnderlyingContext"===t)return function(){return e};var r=Reflect.get(e,t,e);r instanceof Function&&(r=r.bind(e));var a=o[t];return a?a(e,t,n,r):r}});e.getViewNodeFactory=function(){return t.myFactory},t.canvas.addEventListener("webglcontextlost",Kb,!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1);var s,c=void 0!==navigator.xr&&navigator.xr.isSessionSupported("immersive-vr"),u=[0,0];e.onModified((function(){t.renderable&&(t.size[0]===u[0]&&t.size[1]===u[1]||(u[0]=t.size[0],u[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.buildPass=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach((function(t){t.setOpenGLRenderWindow(e)}))}},e.initialize=function(){if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=Ib.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&Bb("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect(),n=e.width,r=e.height;t.containerSize=[n,r]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.activeFramebuffer?t.activeFramebuffer.getSize():t.size},e.getPixelData=function(e,n,r,a){var o=new Uint8Array((r-e+1)*(a-n+1)*4);return t.context.readPixels(e,n,r-e+1,a-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,o),o},e.get3DContext=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},r=null;c&&e.invokeHaveVRDisplay();var a="undefined"!=typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&a&&(r=t.canvas.getContext("webgl2",n))&&(t.webgl2=!0,Lb("using webgl2")),r||(Lb("using webgl1"),r=t.canvas.getContext("webgl",n)||t.canvas.getContext("experimental-webgl",n)),new Proxy(r,i)},e.startXR=function(n){if(void 0===navigator.xr)throw new Error("WebXR is not available");t.xrSessionType=void 0!==n?n:Nb.HmdVR;var r=n===Nb.MobileAR,a=r?"immersive-ar":"immersive-vr";if(!navigator.xr.isSessionSupported(a))throw r?new Error("Device does not support AR session"):new Error("VR display is not available");if(null!==t.xrSession)throw new Error("XR Session already exists!");navigator.xr.requestSession(a).then(e.enterXR,(function(){throw new Error("Failed to create XR session!")}))},e.enterXR=function(){var r=by(Ty().mark((function r(a){var o,i;return Ty().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.xrSession=a,t.oldCanvasSize=t.size.slice(),null===t.xrSession){r.next=15;break}return o=e.get3DContext(),r.next=6,o.makeXRCompatible();case 6:i=new n.g.XRWebGLLayer(t.xrSession,o.__getUnderlyingContext()),e.setSize(i.framebufferWidth,i.framebufferHeight),t.xrSession.updateRenderState({baseLayer:i}),t.xrSession.requestReferenceSpace("local").then((function(e){t.xrReferenceSpace=e})),e.resetXRScene(),t.renderable.getInteractor().switchToXRAnimation(),t.xrSceneFrame=t.xrSession.requestAnimationFrame(e.xrRender),r.next=16;break;case 15:throw new Error("Failed to enter VR with a null xrSession.");case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e.resetXRScene=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vb,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_b,r=e,a=n,o=t.xrSessionType===Nb.MobileAR;o&&r===Vb&&(r=Fb),o&&a===_b&&(a=Gb);var i=t.renderable.getRenderers()[0];i.resetCamera();var s=i.getActiveCamera(),c=s.getPhysicalScale(),u=s.getPhysicalTranslation();a*=c/=r,u[2]+=a,s.setPhysicalScale(c),s.setPhysicalTranslation(u),s.setClippingRange(.1*c,100*c)},e.stopXR=by(Ty().mark((function n(){var r,a;return Ty().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==navigator.xr){n.next=2;break}return n.abrupt("return");case 2:if(null===t.xrSession){n.next=10;break}return t.xrSession.cancelAnimationFrame(t.xrSceneFrame),t.renderable.getInteractor().returnFromXRAnimation(),(r=e.get3DContext()).bindFramebuffer(r.FRAMEBUFFER,null),n.next=9,t.xrSession.end().catch((function(e){if(!(e instanceof DOMException))throw e}));case 9:t.xrSession=null;case 10:void 0!==t.oldCanvasSize&&e.setSize.apply(e,ve(t.oldCanvasSize)),(a=t.renderable.getRenderers()[0]).getActiveCamera().setProjectionMatrix(null),a.resetCamera(),a.setViewport(0,0,1,1),e.traverseAllPasses();case 16:case"end":return n.stop()}}),n)}))),e.xrRender=function(){var n=by(Ty().mark((function n(r,a){var o,i,s,c,u;return Ty().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=a.session,t.renderable.getInteractor().updateXRGamepads(o,a,t.xrReferenceSpace),t.xrSceneFrame=t.xrSession.requestAnimationFrame(e.xrRender),(i=a.getViewerPose(t.xrReferenceSpace))&&(s=e.get3DContext(),t.xrSessionType===Nb.MobileAR&&void 0!==t.oldCanvasSize&&(s.canvas.width=t.oldCanvasSize[0],s.canvas.height=t.oldCanvasSize[1]),c=o.renderState.baseLayer,s.bindFramebuffer(s.FRAMEBUFFER,c.framebuffer),s.clear(s.COLOR_BUFFER_BIT),s.clear(s.DEPTH_BUFFER_BIT),e.setSize(c.framebufferWidth,c.framebufferHeight),u=t.renderable.getRenderers()[0],i.views.forEach((function(n,r){var a=c.getViewport(n);if(t.xrSessionType===Nb.HmdVR)if("left"===n.eye)u.setViewport(0,0,.5,1);else{if("right"!==n.eye)return;u.setViewport(.5,0,1,1)}else if(t.xrSessionType===Nb.LookingGlassVR){var o=a.x/c.framebufferWidth,i=a.y/c.framebufferHeight,s=(a.x+a.width)/c.framebufferWidth,l=(a.y+a.height)/c.framebufferHeight;u.setViewport(o,i,s,l)}else u.setViewport(0,0,1,1);u.getActiveCamera().computeViewParametersFromPhysicalMatrix(n.transform.inverse.matrix),u.getActiveCamera().setProjectionMatrix(n.projectionMatrix),e.traverseAllPasses()})),s.scissor(0,0,c.framebufferWidth,c.framebufferHeight),s.disable(s.SCISSOR_TEST));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e.restoreContext=function(){var t=Ly.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=function(n){var r=t._textureResourceIds.get(n);if(void 0===r){var a=e.getTextureUnitManager().allocate();a<0?Bb("Hardware does not support the number of textures defined."):(t._textureResourceIds.set(n,a),t.context.activeTexture(t.context.TEXTURE0+a))}else t.context.activeTexture(t.context.TEXTURE0+r)},e.deactivateTexture=function(n){var r=t._textureResourceIds.get(n);void 0!==r&&(e.getTextureUnitManager().free(r),t._textureResourceIds.delete(n))},e.getTextureUnitForTexture=function(e){var n=t._textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureInternalFormat=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.webgl2)switch(e){case Kn.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;default:return t.context.RGBA8}case r&&!a&&Kn.UNSIGNED_SHORT:switch(n){case 1:return r.R16_EXT;case 2:return r.RG16_EXT;case 3:return r.RGB16_EXT;default:return r.RGBA16_EXT}case r&&!a&&Kn.SHORT:switch(n){case 1:return r.R16_SNORM_EXT;case 2:return r.RG16_SNORM_EXT;case 3:return r.RGB16_SNORM_EXT;default:return r.RGBA16_SNORM_EXT}default:switch(n){case 1:return t.context.R16F;case 2:return t.context.RG16F;case 3:return t.context.RGB16F;default:return t.context.RGBA16F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;default:return t.context.RGBA}},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.resetCamera,o=void 0!==a&&a,i=r.size,s=void 0===i?null:i,c=r.scale,u=void 0===c?1:c;if(t.deleted)return null;t.imageFormat=n;var l=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:s||1!==u?s||t.size.map((function(e){return e*u})):null},new Promise((function(n,r){var a=e.onImageReady((function(r){if(null===t._screenshot.size)t.notifyStartCaptureImage=l,a.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach((function(e){return(0,e.restoreParamsFn)(e.arg)})),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),n(r);else{var i=document.createElement("img");if(i.style=kb,i.src=r,t._screenshot.placeHolder=t.el.appendChild(i),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,t._screenshot.size=null,e.modified(),o){var s=!0!==o;t._screenshot.cameras=t.renderable.getRenderers().map((function(e){var t=e.getActiveCamera(),n=t.get("focalPoint","position","parallelScale");return{resetCameraArgs:s?{renderer:e}:void 0,resetCameraFn:s?o:e.resetCamera,restoreParamsFn:t.set,arg:JSON.parse(JSON.stringify(n))}})),t._screenshot.cameras.forEach((function(e){return(0,e.resetCameraFn)(e.resetCameraArgs)}))}e.traverseAllPasses()}}))}))},e.getHardwareMaximumLineWidth=function(){if(null!=s)return s;var t=e.get3DContext(),n=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);return s=n[1],n[1]},e.getGLInformations=function(){for(var n=e.get3DContext(),r=n.getExtension("OES_texture_float"),a=n.getExtension("OES_texture_half_float"),o=n.getExtension("WEBGL_debug_renderer_info"),i=n.getExtension("WEBGL_draw_buffers"),s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),c=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",s&&n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[r&&Ub(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",r&&Ub(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",r&&Ub(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",r&&Ub(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",r&&Ub(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[a&&Ub(n,n.RGBA,a.HALF_FLOAT_OES)?"RGBA":"",a&&Ub(n,n.RGB,a.HALF_FLOAT_OES)?"RGB":"",a&&Ub(n,n.LUMINANCE,a.HALF_FLOAT_OES)?"LUMINANCE":"",a&&Ub(n,n.ALPHA,a.HALF_FLOAT_OES)?"ALPHA":"",a&&Ub(n,n.LUMINANCE_ALPHA,a.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[r&&Ub(n,n.RGBA,n.FLOAT)?"RGBA":"",r&&Ub(n,n.RGB,n.FLOAT)?"RGB":"",r&&Ub(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",r&&Ub(n,n.ALPHA,n.FLOAT)?"ALPHA":"",r&&Ub(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",i?n.getParameter(i.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",o&&n.getParameter(o.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",o&&n.getParameter(o.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],u={};c.length;){var l=fe(c.pop(),3),d=l[0],p=l[1],f=l[2];p&&(u[p]={label:d,value:f})}return u},e.traverseAllPasses=function(){if(t.renderPasses)for(var n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.notifyStartCaptureImage&&function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat,r=document.createElement("canvas"),a=r.getContext("2d");r.width=t.canvas.width,r.height=t.canvas.height,a.drawImage(t.canvas,0,0);var o=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach((function(e){e.getViewProps().forEach((function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var r=t[n],i=r.getBoundingClientRect(),s=i.x-o.x,c=i.y-o.y;a.drawImage(r,s,c)}}))}));var i=r.toDataURL(n);r.remove(),e.invokeImageReady(i)}()},e.disableCullFace=function(){t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=function(){t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady((function(t){return e.setBackgroundImage(t.image)})),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.createSelector=function(){var t=vb.newInstance();return t.setOpenGLRenderWindow(e),t},e.delete=Ot.chain((function(){t.canvas.removeEventListener("webglcontextlost",Kb),t.canvas.removeEventListener("webglcontextrestored",e.restoreContext)}),e.delete,e.setViewStream,Hb),e.setActiveFramebuffer=function(e){t.activeFramebuffer=e};var l=e.setSize;e.setSize=function(t,n){var r=l(t,n);return r&&e.invokeWindowResizeEvent({width:t,height:n}),r}}var qb={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,xrSession:null,xrReferenceSpace:null,xrSupported:!0,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};var Yb=Ot.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qb,n),Db.extend(e,t,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",Wb(),t.selector||(t.selector=vb.newInstance(),t.selector.setOpenGLRenderWindow(e)),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t._textureResourceIds=new Map,t.myFactory=Ut.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",Yb),t.shaderCache=Pb.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=Wy.newInstance(),Ot.event(e,t,"imageReady"),Ot.event(e,t,"haveVRDisplay"),Ot.get(e,t,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage","xrSupported","activeFramebuffer"]),Ot.setGet(e,t,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),Ot.setGetArray(e,t,["size"],2),Ot.event(e,t,"windowResizeEvent"),Xb(e,t)}),"vtkOpenGLRenderWindow");wy("WebGL",Yb);var Zb=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];function Qb(e,t){t.classHierarchy.push("vtkWebGPURenderEncoder"),e.begin=function(e){t.drawCallbacks=[],t.handle=e.beginRenderPass(t.description),t.label&&t.handle.pushDebugGroup(t.label)},e.end=function(){for(var n=0;n<t.drawCallbacks.length;n++){var r=t.drawCallbacks[n],a=r.pipeline;e.setPipeline(a);for(var o=0;o<r.callbacks.length;o++)r.callbacks[o](e)}t.label&&t.handle.popDebugGroup(),t.handle.end(),t.boundPipeline=null},e.setPipeline=function(e){if(t.boundPipeline!==e){t.handle.setPipeline(e.getHandle());var n=e.getPipelineDescription();if(t.colorTextureViews.length!==n.fragment.targets.length)console.log("mismatched attachment counts on pipeline ".concat(n.fragment.targets.length," while encoder has ").concat(t.colorTextureViews.length)),console.trace();else for(var r=0;r<t.colorTextureViews.length;r++){var a,o=null===(a=t.colorTextureViews[r].getTexture())||void 0===a?void 0:a.getFormat();o&&o!==n.fragment.targets[r].format&&(console.log("mismatched attachments for attachment ".concat(r," on pipeline ").concat(n.fragment.targets[r].format," while encoder has ").concat(o)),console.trace())}if(!t.depthTextureView!=!("depthStencil"in n))console.log("mismatched depth attachments"),console.trace();else if(t.depthTextureView){var i,s=null===(i=t.depthTextureView.getTexture())||void 0===i?void 0:i.getFormat();s&&s!==n.depthStencil.format&&(console.log("mismatched depth attachments on pipeline ".concat(n.depthStencil.format," while encoder has ").concat(s)),console.trace())}t.boundPipeline=e}},e.replaceShaderCode=function(e){t.replaceShaderCodeFunction(e)},e.setColorTextureView=function(e,n){t.colorTextureViews[e]!==n&&(t.colorTextureViews[e]=n)},e.activateBindGroup=function(e){var n=t.boundPipeline.getDevice(),r=t.boundPipeline.getBindGroupLayoutCount(e.getLabel());t.handle.setBindGroup(r,e.getBindGroup(n));var a=n.getBindGroupLayoutDescription(e.getBindGroupLayout(n)),o=n.getBindGroupLayoutDescription(t.boundPipeline.getBindGroupLayout(r));a!==o&&(console.log("renderEncoder ".concat(t.pipelineHash," mismatched bind group layouts bind group has\n").concat(a,"\n versus pipeline\n").concat(o,"\n")),console.trace())},e.attachTextureViews=function(){for(var e=0;e<t.colorTextureViews.length;e++)t.description.colorAttachments[e]?t.description.colorAttachments[e].view=t.colorTextureViews[e].getHandle():t.description.colorAttachments[e]={view:t.colorTextureViews[e].getHandle()};t.depthTextureView&&(t.description.depthStencilAttachment.view=t.depthTextureView.getHandle())},e.registerDrawCallback=function(e,n){for(var r=0;r<t.drawCallbacks.length;r++)if(t.drawCallbacks[r].pipeline===e)return void t.drawCallbacks[r].callbacks.push(n);t.drawCallbacks.push({pipeline:e,callbacks:[n]})};for(var n=function(n){e[Zb[n]]=function(){var e;return(e=t.handle)[Zb[n]].apply(e,arguments)}},r=0;r<Zb.length;r++)n(r)}var Jb={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function $b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jb,n),at(e,t),t.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},t.replaceShaderCodeFunction=function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");var n=t.getCode();n=Cu.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,t.setCode(n)},t.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},t.colorTextureViews=[],it(e,t,["boundPipeline","colorTextureViews"]),lt(e,t,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),Qb(e,t)}var ex={newInstance:yt($b,"vtkWebGPURenderEncoder"),extend:$b};function tx(e,t){t.classHierarchy.push("vtkWebGPUTextureView"),e.create=function(e,n){t.texture=e,t.options=n,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var r=Nu(t.texture.getFormat());t.bindGroupLayoutEntry.texture.sampleType=r.sampleType},e.createFromTextureHandle=function(e,n){t.texture=null,t.options=n,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e,t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var r=Nu(n.format);t.bindGroupLayoutEntry.texture.sampleType=r.sampleType,t.bindGroupTime.modified()},e.getBindGroupEntry=function(){return{resource:e.getHandle()}},e.getShaderCode=function(e,n){var r="f32";"sint"===t.bindGroupLayoutEntry.texture.sampleType?r="i32":"uint"===t.bindGroupLayoutEntry.texture.sampleType&&(r="u32");var a="@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": texture_").concat(t.options.dimension,"<").concat(r,">;");return"depth"===t.bindGroupLayoutEntry.texture.sampleType&&(a="@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": texture_depth_").concat(t.options.dimension,";")),a},e.addSampler=function(n,r){var a=pd.newInstance({label:"".concat(t.label,"Sampler")});a.create(n,r),e.setSampler(a)},e.getBindGroupTime=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.bindGroupTime},e.getHandle=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.handle}}var nx={texture:null,handle:null,sampler:null,label:null};function rx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nx,n),Ot.obj(e,t),t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},t.bindGroupTime={},Ot.obj(t.bindGroupTime,{mtime:0}),Ot.get(e,t,["bindGroupTime","texture"]),Ot.setGet(e,t,["bindGroupLayoutEntry","label","sampler"]),tx(e,t)}var ax={newInstance:Ot.newInstance(rx),extend:rx},ox=zl.BufferUsage;function ix(e,t){t.classHierarchy.push("vtkWebGPUTexture"),e.create=function(e,n){t.device=e,t.width=n.width,t.height=n.height,t.depth=n.depth?n.depth:1;var r=1===t.depth?"2d":"3d";t.format=n.format?n.format:"rgba8unorm",t.mipLevel=n.mipLevel?n.mipLevel:0,t.usage=n.usage?n.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label,dimension:r,mipLevelCount:t.mipLevel+1})},e.assignFromHandle=function(e,n,r){t.device=e,t.handle=n,t.width=r.width,t.height=r.height,t.depth=r.depth?r.depth:1,t.format=r.format?r.format:"rgba8unorm",t.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},e.writeImageData=function(n){var r=[];if(n.canvas)return t.device.getHandle().queue.copyExternalImageToTexture({source:n.canvas,flipY:n.flip},{texture:t.handle,premultipliedAlpha:!0},[t.width,t.height,t.depth]),void(t.ready=!0);n.jsImageData&&!n.nativeArray&&(n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,n.nativeArray=n.jsImageData.data);var a=Nu(t.format),o=t.width*a.stride,i=function(e,t,n){var r=e.length/(t*n)*e.BYTES_PER_ELEMENT,o=2===a.elementSize&&"float"===a.sampleType;if(o||r%256){for(var i=e,s=r/i.BYTES_PER_ELEMENT,c=a.elementSize,u=256*Math.floor((s*c+255)/256),l=u/c,d=Ot.newTypedArray(o?"Uint16Array":i.constructor.name,l*t*n),p=0;p<t*n;p++)if(o)for(var f=0;f<s;f++)d[p*l+f]=rc(i[p*s+f]);else d.set(i.subarray(p*s,(p+1)*s),p*l);return[d,u]}return[e,r]};if(n.nativeArray&&(r=n.nativeArray),n.image){var s=document.createElement("canvas");s.width=n.image.width,s.height=n.image.height;var c=s.getContext("2d");c.translate(0,s.height),c.scale(1,-1),c.drawImage(n.image,0,0,n.image.width,n.image.height,0,0,s.width,s.height),r=c.getImageData(0,0,n.image.width,n.image.height).data}var u=t.device.createCommandEncoder();if(3!==e.getDimensionality()){for(var l=Ev.generateMipmaps(r,t.width,t.height,t.mipLevel),d=t.width,p=t.height,f=0;f<=t.mipLevel;f++){var g=i(l[f],p,1);o=g[1];var m={dataArray:n.dataArray?n.dataArray:null,nativeArray:g[0],usage:ox.Texture},v=t.device.getBufferManager().getBuffer(m);u.copyBufferToTexture({buffer:v.getHandle(),offset:0,bytesPerRow:o,rowsPerImage:p},{texture:t.handle,mipLevel:f},[d,p,1]),d/=2,p/=2}t.device.submitCommandEncoder(u),t.ready=!0}else{var h=i(r,t.height,t.depth);o=h[1];var y={dataArray:n.dataArray?n.dataArray:null,usage:ox.Texture};y.nativeArray=h[0];var b=t.device.getBufferManager().getBuffer(y);u.copyBufferToTexture({buffer:b.getHandle(),offset:0,bytesPerRow:o,rowsPerImage:t.height},{texture:t.handle},[t.width,t.height,t.depth]),t.device.submitCommandEncoder(u),t.ready=!0}},e.getScale=function(){var e=Nu(t.format);return 2===e.elementSize&&"float"===e.sampleType?1:255},e.getNumberOfComponents=function(){return Nu(t.format).numComponents},e.getDimensionality=function(){var e=0;return t.width>1&&e++,t.height>1&&e++,t.depth>1&&e++,e},e.resizeToMatch=function(e){e.getWidth()===t.width&&e.getHeight()===t.height&&e.getDepth()===t.depth||(t.width=e.getWidth(),t.height=e.getHeight(),t.depth=e.getDepth(),t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.resize=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e===t.width&&n===t.height&&r===t.depth||(t.width=e,t.height=n,t.depth=r,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.createView=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.dimension||(r.dimension=1===t.depth?"2d":"3d");var a=ax.newInstance({label:n});return a.create(e,r),a}}var sx={device:null,handle:null,buffer:null,ready:!1,label:null};function cx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sx,n),Ot.obj(e,t),Ot.get(e,t,["handle","ready","width","height","depth","format","usage"]),Ot.setGet(e,t,["device","label"]),ix(e,t)}var ux={newInstance:Ot.newInstance(cx),extend:cx};function lx(e,t){t.classHierarchy.push("vtkWebGPUOpaquePass"),e.traverse=function(n,r){if(!t.deleted){t._currentParent=r;var a=r.getDevice();if(t.renderEncoder)t.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),t.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{e.createRenderEncoder(),t.colorTexture=ux.newInstance({label:"opaquePassColor"}),t.colorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});var o=t.colorTexture.createView("opaquePassColorTexture");t.renderEncoder.setColorTextureView(0,o),t.depthFormat="depth32float",t.depthTexture=ux.newInstance({label:"opaquePassDepth"}),t.depthTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:t.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});var i=t.depthTexture.createView("opaquePassDepthTexture");t.renderEncoder.setDepthTextureView(i)}t.renderEncoder.attachTextureViews(),e.setCurrentOperation("opaquePass"),n.setRenderEncoder(t.renderEncoder),n.traverse(e)}},e.getColorTextureView=function(){return t.renderEncoder.getColorTextureViews()[0]},e.getDepthTextureView=function(){return t.renderEncoder.getDepthTextureView()},e.createRenderEncoder=function(){t.renderEncoder=ex.newInstance({label:"OpaquePass"}),t.renderEncoder.setPipelineHash("op")}}var dx={renderEncoder:null,colorTexture:null,depthTexture:null};function px(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dx,n),Ly.extend(e,t,n),Ot.get(e,t,["colorTexture","depthTexture"]),lx(e,t)}var fx={newInstance:Ot.newInstance(px,"vtkWebGPUOpaquePass"),extend:px};function gx(e,t){t.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),e.traverse=function(n,r){if(!t.deleted){t._currentParent=r;var a=r.getDevice();if(t.translucentRenderEncoder)t.translucentColorTexture.resizeToMatch(t.colorTextureView.getTexture()),t.translucentAccumulateTexture.resizeToMatch(t.colorTextureView.getTexture());else{e.createRenderEncoder(),e.createFinalEncoder(),t.translucentColorTexture=ux.newInstance({label:"translucentPassColor"}),t.translucentColorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var o=t.translucentColorTexture.createView("oitpColorTexture");t.translucentRenderEncoder.setColorTextureView(0,o),t.translucentAccumulateTexture=ux.newInstance({label:"translucentPassAccumulate"}),t.translucentAccumulateTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var i=t.translucentAccumulateTexture.createView("oitpAccumTexture");t.translucentRenderEncoder.setColorTextureView(1,i),t.fullScreenQuad=tl.newInstance(),t.fullScreenQuad.setDevice(r.getDevice()),t.fullScreenQuad.setPipelineHash("oitpfsq"),t.fullScreenQuad.setTextureViews(t.translucentRenderEncoder.getColorTextureViews()),t.fullScreenQuad.setFragmentShaderTemplate("\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));\n  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;\n  if (reveal == 1.0) { discard; }\n  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);\n  var total: f32 = max(tcolor.a, 0.01);\n  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n")}t.translucentRenderEncoder.setDepthTextureView(t.depthTextureView),t.translucentRenderEncoder.attachTextureViews(),e.setCurrentOperation("translucentPass"),n.setRenderEncoder(t.translucentRenderEncoder),n.traverse(e),e.finalPass(r,n)}},e.finalPass=function(e,n){t.translucentFinalEncoder.setColorTextureView(0,t.colorTextureView),t.translucentFinalEncoder.attachTextureViews(),t.translucentFinalEncoder.begin(e.getCommandEncoder()),n.scissorAndViewport(t.translucentFinalEncoder),t.fullScreenQuad.prepareAndDraw(t.translucentFinalEncoder),t.translucentFinalEncoder.end()},e.getTextures=function(){return[t.translucentColorTexture,t.translucentAccumulateTexture]},e.createRenderEncoder=function(){t.translucentRenderEncoder=ex.newInstance({label:"translucentRender"});var e=t.translucentRenderEncoder.getDescription();e.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],e.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},t.translucentRenderEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addOutput("f32","outAccum"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");var n=t.getCode();n=Cu.substitute(n,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,t.setCode(n)})),t.translucentRenderEncoder.setPipelineHash("oitpr"),t.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcfactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createFinalEncoder=function(){t.translucentFinalEncoder=ex.newInstance({label:"translucentFinal"}),t.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t.translucentFinalEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");var n=t.getCode();n=Cu.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(n)})),t.translucentFinalEncoder.setPipelineHash("oitpf"),t.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}var mx={colorTextureView:null,depthTextureView:null};function vx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mx,n),Ly.extend(e,t,n),Ot.setGet(e,t,["colorTextureView","depthTextureView"]),gx(e,t)}var hx={newInstance:Ot.newInstance(vx,"vtkWebGPUOrderIndependentTranslucentPass"),extend:vx},yx="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Volume::TraverseDec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\nfn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32\n{\n  // todo multicomponent support\n  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;\n}\n\nfn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>\n{\n  var result: vec4<f32>;\n\n  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;\n  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;\n  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;\n  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;\n  result.w = 0.0;\n\n  // divide by spacing as that is our delta\n  result = result / volumeSSBO.values[vNum].spacing;\n  // now we have a gradient in unit tcoords\n\n  var grad: f32 = length(result.xyz);\n  if (grad > 0.0)\n  {\n    // rotate to View Coords, needed for lighting and shading\n    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;\n    result = nMat * result;\n    result = result / length(result);\n  }\n\n  // store gradient magnitude in .w\n  result.w = grad;\n\n  return result;\n}\n\nfn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>\n{\n  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n\n  // convert to tcoords and reject if outside the volume\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;\n  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||\n      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }\n\n  var scalar: f32 = getTextureValue(vTex, tpos);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n\n  var gofactor: f32 = 1.0;\n  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);\n  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    normal = getGradient(vTex, tpos, vNum, scalar);\n    if (componentSSBO.values[cNum].gomin <  1.0)\n    {\n      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,\n      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);\n    }\n  }\n\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n\n  if (volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    color = color*abs(normal.z);\n  }\n\n  outColor = vec4<f32>(color.rgb, gofactor * opacity);\n\n  return outColor;\n}\n\n// adjust the start and end point of a raycast such that it intersects the unit cube.\n// This function is used to take a raycast starting point and step vector\n// and numSteps and return the startijng and ending steps for intersecting the\n// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates\n// that have valid values. So this funtion can be used to take a ray in texture coordinates\n// and bound it to intersecting the texture.\n//\nfn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>\n{\n  var result: vec2<f32> = vec2<f32>(0.0, numSteps);\n  var tpos2: vec4<f32> = tpos + tstep*numSteps;\n\n  // move tpos to the start of the volume\n  var adjust: f32 =\n    min(\n      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),\n      min(\n        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),\n        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));\n  if (adjust < 0.0)\n  {\n    result.x = result.x - adjust;\n  }\n\n  // adjust length to the end\n  adjust =\n    max(\n      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),\n      max(\n        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),\n        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));\n  if (adjust > 0.0)\n  {\n    result.y = result.y - adjust;\n  }\n\n  return result;\n}\n\nfn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>\n{\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n  return vec4<f32>(color.rgb, opacity);\n}\n\nfn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var maxVal: f32 = -1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar > maxVal)\n    {\n      maxVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);\n}\n\nfn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var minVal: f32 = 1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar < minVal)\n    {\n      minVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);\n}\n\nfn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var avgVal: f32 = 0.0;\n  var sampleCount: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      avgVal = avgVal + sample;\n      sampleCount = sampleCount + 1.0;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  if (sampleCount <= 0.0)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);\n}\n\nfn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var sumVal: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      sumVal = sumVal + sample;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);\n}\n\nfn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>\n{\n  // initial ray position is at the beginning\n  var rayPosSC: vec4<f32> = minPosSC;\n\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var curDist: f32 = 0.0;\n  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n  var sampleColor: vec4<f32>;\n//VTK::Volume::TraverseCalls\n\n  loop\n  {\n    // for each volume, sample and accumulate color\n//VTK::Volume::CompositeCalls\n\n    // increment position\n    curDist = curDist + mapperUBO.SampleDistance;\n    rayPosSC = rayPosSC + rayStepSC;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayLengthSC) { break; }\n    if (computedColor.a > 0.98) { break; }\n  }\n  return computedColor;\n}\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;\n  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;\n\n  // discard empty rays\n  if (rayMax <= rayMin) { discard; }\n  else\n  {\n    // compute start and end ray positions in view coordinates\n    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);\n    minPosSC = minPosSC * (1.0 / minPosSC.w);\n    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);\n    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);\n\n    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);\n    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);\n    rayStepSC.w = 0.0;\n\n    var computedColor: vec4<f32>;\n\n//VTK::Volume::Loop\n\n//VTK::RenderEncoder::Impl\n  }\n\n  return output;\n}\n",bx=new Float64Array(16),xx=new Float64Array(16);function Tx(e,t){t.classHierarchy.push("vtkWebGPUVolumePassFSQ"),e.replaceShaderPosition=function(e,t,n){var r=t.getShaderDescription("vertex");r.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var a=r.getCode();a=Cu.substitute(a,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,r.setCode(a),t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderVolume=function(e,n,r){for(var a=n.getShaderDescription("fragment"),o=a.getCode(),i=[],s=[],c=0;c<t.volumes.length;c++)t.volumes[c].getRenderable().getMapper().getBlendMode()===Xc.COMPOSITE_BLEND?(i.push("    sampleColor = processVolume(volTexture".concat(c,", ").concat(c,", ").concat(t.rowStarts[c],", rayPosSC, tfunRows);")),i.push("    computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);")):(s.push("  sampleColor = traverseVals[".concat(c,"];")),s.push("  computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);"));o=Cu.substitute(o,"//VTK::Volume::CompositeCalls",i).result,o=Cu.substitute(o,"//VTK::Volume::TraverseCalls",s).result,o=Cu.substitute(o,"//VTK::Volume::TraverseDec",["var<private> traverseVals: array<vec4<f32>,".concat(t.volumes.length,">;")]).result;for(var u=!1,l=0;l<t.volumes.length;l++){var d=t.volumes[l].getRenderable().getMapper().getBlendMode();d===Xc.COMPOSITE_BLEND?u=!0:d===Xc.MAXIMUM_INTENSITY_BLEND?o=Cu.substitute(o,"//VTK::Volume::Loop",["    traverseMax(volTexture".concat(l,", ").concat(l,", ").concat(l,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(l,"];"),"//VTK::Volume::Loop"]).result:d===Xc.MINIMUM_INTENSITY_BLEND?o=Cu.substitute(o,"//VTK::Volume::Loop",["    traverseMin(volTexture".concat(l,", ").concat(l,", ").concat(l,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(l,"];"),"//VTK::Volume::Loop"]).result:d===Xc.AVERAGE_INTENSITY_BLEND?o=Cu.substitute(o,"//VTK::Volume::Loop",["    traverseAverage(volTexture".concat(l,", ").concat(l,", ").concat(l,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(l,"];"),"//VTK::Volume::Loop"]).result:d===Xc.ADDITIVE_INTENSITY_BLEND&&(o=Cu.substitute(o,"//VTK::Volume::Loop",["    traverseAdditive(volTexture".concat(l,", ").concat(l,", ").concat(l,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(l,"];"),"//VTK::Volume::Loop"]).result)}u&&(o=Cu.substitute(o,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),a.setCode(o)},t.shaderReplacements.set("replaceShaderVolume",e.replaceShaderVolume),e.updateLUTImage=function(n){for(var r=e.getMTime(),a=0;a<t.volumes.length;a++){var o=t.volumes[a].getRenderable(),i=o.getMapper().getInputData();r=Math.max(r,o.getMTime(),i.getMTime())}if(!(r<t.lutBuildTime.getMTime())){t.numRows=0,t.rowStarts=[];for(var s=0;s<t.volumes.length;s++){t.rowStarts.push(t.numRows);var c=t.volumes[s].getRenderable(),u=c.getMapper(),l=c.getProperty(),d=u.getInputData(),p=(d.getPointData()&&d.getPointData().getScalars()).getNumberOfComponents(),f=l.getIndependentComponents()?p:1;t.numRows+=f}for(var g=new Uint8Array(2*t.numRows*t.rowLength*4),m=new Float32Array(2*t.numRows*t.rowLength),v=0,h=new Float32Array(3*t.rowLength),y=t.rowLength,b=0;b<t.volumes.length;b++)for(var x=t.volumes[b].getRenderable(),T=x.getMapper(),S=x.getProperty(),P=T.getInputData(),w=(P.getPointData()&&P.getPointData().getScalars()).getNumberOfComponents(),C=S.getIndependentComponents()?w:1,O=0;O<C;++O){var A=S.getRGBTransferFunction(O),I=A.getRange();A.getTable(I[0],I[1],y,h,1);for(var M=v*y*4,R=0;R<y;++R){g[M+4*R]=255*h[3*R],g[M+4*R+1]=255*h[3*R+1],g[M+4*R+2]=255*h[3*R+2],g[M+4*R+3]=255;for(var E=0;E<4;E++)g[M+4*(y+R)+E]=g[M+4*R+E]}var D=S.getScalarOpacity(O),L=t.sampleDist/S.getScalarOpacityUnitDistance(O),B=D.getRange();D.getTable(B[0],B[1],y,h,1),M=v*y;for(var N=0;N<y;++N)m[M+N]=1-Math.pow(1-h[N],L),m[M+N+y]=m[M+N];v+=2}var k={nativeArray:g,width:t.rowLength,height:2*t.numRows,depth:1,format:"rgba8unorm"},V=n.getTextureManager().getTexture(k).createView("tfunTexture");t.textureViews[2]=V;var _={nativeArray:m,width:t.rowLength,height:2*t.numRows,depth:1,format:"r16float"},F=n.getTextureManager().getTexture(_).createView("ofunTexture");t.textureViews[3]=F,t.lutBuildTime.modified()}},e.updateSSBO=function(n){for(var r=Math.max(e.getMTime(),t.WebGPURenderer.getStabilizedTime()),a=0;a<t.volumes.length;a++){var o=t.volumes[a].getRenderable(),i=o.getMapper(),s=i.getInputData();r=Math.max(r,o.getMTime(),s.getMTime(),i.getMTime())}if(!(r<t.SSBO.getSendTime())){var c=t.WebGPURenderer.getStabilizedCenterByReference();t.SSBO.clearData(),t.SSBO.setNumberOfInstances(t.volumes.length);for(var u=new Float64Array(16*t.volumes.length),l=new Float64Array(16*t.volumes.length),d=new Float64Array(4*t.volumes.length),p=new Float64Array(4*t.volumes.length),f=new Float64Array(4*t.volumes.length),g=new Float64Array(4*t.volumes.length),y=0;y<t.volumes.length;y++){var b=t.volumes[y].getRenderable(),P=b.getMapper(),w=P.getInputData();m(bx),T(bx,bx,c);var C=b.getMatrix();v(xx,C),h(xx,xx),x(bx,xx,bx);var O=w.getWorldToIndex();x(bx,O,bx);var A=w.getDimensions();m(xx),S(xx,xx,[1/A[0],1/A[1],1/A[2]]),x(bx,xx,bx);for(var I=0;I<16;I++)u[16*y+I]=bx[I];h(bx,bx);for(var M=0;M<4;M++)l[16*y+4*M]=bx[4*M],l[16*y+4*M+1]=bx[4*M+1],l[16*y+4*M+2]=bx[4*M+2],l[16*y+4*M+3]=0;d[4*y]=1/A[0],d[4*y+1]=1/A[1],d[4*y+2]=1/A[2],d[4*y+3]=1,p[4*y]=b.getProperty().getShade()?1:0;var R=w.getSpacing();f[4*y]=R[0],f[4*y+1]=R[1],f[4*y+2]=R[2],f[4*y+3]=1;var E=t.textureViews[y+4].getTexture().getScale(),D=P.getIpScalarRange();g[4*y]=D[0]/E,g[4*y+1]=D[1]/E,g[4*y+2]=P.getFilterMode()}t.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),t.SSBO.addEntry("planeNormals","mat4x4<f32>"),t.SSBO.addEntry("shade","vec4<f32>"),t.SSBO.addEntry("tstep","vec4<f32>"),t.SSBO.addEntry("spacing","vec4<f32>"),t.SSBO.addEntry("ipScalarRange","vec4<f32>"),t.SSBO.setAllInstancesFromArray("SCTCMatrix",u),t.SSBO.setAllInstancesFromArray("planeNormals",l),t.SSBO.setAllInstancesFromArray("shade",p),t.SSBO.setAllInstancesFromArray("tstep",d),t.SSBO.setAllInstancesFromArray("spacing",f),t.SSBO.setAllInstancesFromArray("ipScalarRange",g),t.SSBO.send(n),t.componentSSBO.clearData(),t.componentSSBO.setNumberOfInstances(t.numRows);for(var L=new Float64Array(t.numRows),B=new Float64Array(t.numRows),N=new Float64Array(t.numRows),k=new Float64Array(t.numRows),V=new Float64Array(t.numRows),_=new Float64Array(t.numRows),F=new Float64Array(t.numRows),G=new Float64Array(t.numRows),U=0,j=0;j<t.volumes.length;j++){var z=t.volumes[j].getRenderable(),W=z.getMapper(),H=z.getProperty(),K=W.getInputData(),X=(K.getPointData()&&K.getPointData().getScalars()).getNumberOfComponents(),q=H.getIndependentComponents(),Y=t.textureViews[j+4].getTexture().getFormat(),Z=Nu(Y),Q={scale:[255],offset:[0]};2===Z.elementSize&&"float"===Z.sampleType&&(Q.scale[0]=1);for(var J=0;J<X;J++){var $=q?J:0,ee=Q.scale[J],te=H.getScalarOpacity($).getRange(),ne=ee/(te[1]-te[0]),re=(Q.offset[J]-te[0])/(te[1]-te[0]);k[U]=re,N[U]=ne;var ae=H.getRGBTransferFunction($).getRange();if(B[U]=(Q.offset[J]-ae[0])/(ae[1]-ae[0]),L[U]=ee/(ae[1]-ae[0]),H.getUseGradientOpacity($)){var oe=H.getGradientOpacityMinimumOpacity($),ie=H.getGradientOpacityMaximumOpacity($);V[U]=oe,_[U]=ie;var se=[H.getGradientOpacityMinimumValue($),H.getGradientOpacityMaximumValue($)];G[U]=ee*(ie-oe)/(se[1]-se[0]),F[U]=-se[0]*(ie-oe)/(se[1]-se[0])+oe}else V[U]=1,_[U]=1,G[U]=0,F[U]=1;U++}}t.componentSSBO.addEntry("cScale","f32"),t.componentSSBO.addEntry("cShift","f32"),t.componentSSBO.addEntry("oScale","f32"),t.componentSSBO.addEntry("oShift","f32"),t.componentSSBO.addEntry("goShift","f32"),t.componentSSBO.addEntry("goScale","f32"),t.componentSSBO.addEntry("gomin","f32"),t.componentSSBO.addEntry("gomax","f32"),t.componentSSBO.setAllInstancesFromArray("cScale",L),t.componentSSBO.setAllInstancesFromArray("cShift",B),t.componentSSBO.setAllInstancesFromArray("oScale",N),t.componentSSBO.setAllInstancesFromArray("oShift",k),t.componentSSBO.setAllInstancesFromArray("goScale",G),t.componentSSBO.setAllInstancesFromArray("goShift",F),t.componentSSBO.setAllInstancesFromArray("gomin",V),t.componentSSBO.setAllInstancesFromArray("gomax",_),t.componentSSBO.send(n)}};var n=e.updateBuffers;e.updateBuffers=function(){n();for(var r=t.volumes[0].getRenderable().getMapper().getSampleDistance(),a=0;a<t.volumes.length;a++){var o=t.volumes[a].getRenderable().getMapper().getSampleDistance();o<r&&(r=o)}t.sampleDist!==r&&(t.sampleDist=r,t.UBO.setValue("SampleDistance",r),t.UBO.sendIfNeeded(t.device));for(var i=0;i<t.volumes.length;i++){var s=t.volumes[i].getRenderable().getMapper().getInputData(),c=t.device.getTextureManager().getTextureForImageData(s);if(!t.textureViews[i+4]||t.textureViews[i+4].getTexture()!==c){var u=c.createView("volTexture".concat(i));t.textureViews[i+4]=u}}if(t.volumes.length<t.lastVolumeLength)for(var l=t.volumes.length;l<t.lastVolumeLength;l++)t.textureViews.pop();t.lastVolumeLength=t.volumes.length,e.updateLUTImage(t.device),e.updateSSBO(t.device),t.clampSampler||(t.clampSampler=pd.newInstance({label:"clampSampler"}),t.clampSampler.create(t.device,{minFilter:"linear",magFilter:"linear"}))},e.computePipelineHash=function(){t.pipelineHash="volfsq";for(var e=0;e<t.volumes.length;e++){var n=t.volumes[e].getRenderable().getMapper().getBlendMode();t.pipelineHash+="".concat(n)}},e.setVolumes=function(n){if(!t.volumes||t.volumes.length!==n.length)return t.volumes=ve(n),void e.modified();for(var r=0;r<n.length;r++)if(n[r]!==t.volumes[r])return t.volumes=ve(n),void e.modified()};var r=e.getBindables;e.getBindables=function(){var e=r();return e.push(t.componentSSBO),e.push(t.clampSampler),e}}var Sx={volumes:null,rowLength:1024,lastVolumeLength:0};function Px(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sx,n),tl.extend(e,t,n),t.fragmentShaderTemplate=yx,t.UBO=td.newInstance({label:"mapperUBO"}),t.UBO.addEntry("SampleDistance","f32"),t.SSBO=Yl.newInstance({label:"volumeSSBO"}),t.componentSSBO=Yl.newInstance({label:"componentSSBO"}),t.lutBuildTime={},Ot.obj(t.lutBuildTime,{mtime:0}),Tx(e,t)}var wx={newInstance:Ot.newInstance(Px,"vtkWebGPUVolumePassFSQ"),extend:Px},Cx=vl.Representation,Ox=zl.BufferUsage,Ax=zl.PrimitiveTypes,Ix=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],Mx="\n//VTK::Renderer::Dec\n\n//VTK::Select::Dec\n\n//VTK::VolumePass::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Select::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::VolumePass::Impl\n\n  // use the maximum (closest) of the current value and the zbuffer\n  // the blend func will then take the min to find the farthest stop value\n  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n";function Rx(e,t){t.classHierarchy.push("vtkWebGPUVolumePass"),e.initialize=function(n){t._clearEncoder||e.createClearEncoder(n),t._mergeEncoder||e.createMergeEncoder(n),t._copyEncoder||e.createCopyEncoder(n),t._depthRangeEncoder||e.createDepthRangeEncoder(n),t.fullScreenQuad||(t.fullScreenQuad=wx.newInstance(),t.fullScreenQuad.setDevice(n.getDevice()),t.fullScreenQuad.setTextureViews(ve(t._depthRangeEncoder.getColorTextureViews()))),t._volumeCopyQuad||(t._volumeCopyQuad=tl.newInstance(),t._volumeCopyQuad.setPipelineHash("volpassfsq"),t._volumeCopyQuad.setDevice(n.getDevice()),t._volumeCopyQuad.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,\n    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._copyUBO=td.newInstance({label:"mapperUBO"}),t._copyUBO.addEntry("tscale","vec2<f32>"),t._volumeCopyQuad.setUBO(t._copyUBO),t._volumeCopyQuad.setTextureViews([t._colorTextureView]))},e.traverse=function(n,r){if(!t.deleted){t._currentParent=r,e.initialize(r),e.computeTiming(r),e.renderDepthBounds(n,r),t._firstGroup=!0;var a=r.getDevice(),o=a.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(t.volumes.length>o){for(var i=n.getRenderable().getActiveCamera().getPosition(),s=[],c=0;c<t.volumes.length;c++){var u=t.volumes[c].getRenderable().getBounds(),l=[.5*(u[1]+u[0]),.5*(u[3]+u[2]),.5*(u[5]+u[4])];s[c]=Rr(l,i)}var d=ve(Array(t.volumes.length).keys());d.sort((function(e,t){return s[t]-s[e]}));for(var p=[],f=d.length%o,g=0;g<d.length;g++)p.push(t.volumes[d[g]]),p.length>=f&&(e.rayCastPass(r,n,p),p=[],f=o,t._firstGroup=!1)}else e.rayCastPass(r,n,t.volumes);if(t._volumeCopyQuad.setWebGPURenderer(n),t._useSmallViewport){var m=t._colorTextureView.getTexture().getWidth(),v=t._colorTextureView.getTexture().getHeight();t._copyUBO.setArray("tscale",[t._smallViewportWidth/m,t._smallViewportHeight/v])}else t._copyUBO.setArray("tscale",[1,1]);t._copyUBO.sendIfNeeded(a),t._copyEncoder.setColorTextureView(0,t.colorTextureView),t._copyEncoder.attachTextureViews(),t._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(t._copyEncoder),t._volumeCopyQuad.prepareAndDraw(t._copyEncoder),t._copyEncoder.end()}},e.delete=Ot.chain((function(){t._animationRateSubscription&&(t._animationRateSubscription.unsubscribe(),t._animationRateSubscription=null)}),e.delete),e.computeTiming=function(e){t._useSmallViewport=!1;var n=e.getRenderable().getInteractor();n.isAnimating()&&t._lastScale>1.5&&(t._smallViewportHeight||(t._smallViewportWidth=Math.ceil(e.getCanvas().width/Math.sqrt(t._lastScale)),t._smallViewportHeight=Math.ceil(e.getCanvas().height/Math.sqrt(t._lastScale))),t._useSmallViewport=!0),t._colorTexture.resize(e.getCanvas().width,e.getCanvas().height),t._animationRateSubscription||(t._animationRateSubscription=n.onAnimationFrameRateUpdate((function(){var r=t.volumes[0].getRenderable().getMapper();if(r.getAutoAdjustSampleDistances()){var a=n.getRecentAnimationFrameRate(),o=t._lastScale*n.getDesiredUpdateRate()/a;t._lastScale=o,t._lastScale>400&&(t._lastScale=400)}else t._lastScale=r.getImageSampleDistance()*r.getImageSampleDistance();t._lastScale<1.5?t._lastScale=1.5:(t._smallViewportWidth=Math.ceil(e.getCanvas().width/Math.sqrt(t._lastScale)),t._smallViewportHeight=Math.ceil(e.getCanvas().height/Math.sqrt(t._lastScale)))})))},e.rayCastPass=function(e,n,r){var a=t._firstGroup?t._clearEncoder:t._mergeEncoder;a.attachTextureViews(),a.begin(e.getCommandEncoder());var o=t._colorTextureView.getTexture().getWidth(),i=t._colorTextureView.getTexture().getHeight();t._useSmallViewport&&(o=t._smallViewportWidth,i=t._smallViewportHeight),a.getHandle().setViewport(0,0,o,i,0,1),a.getHandle().setScissorRect(0,0,o,i),t.fullScreenQuad.setWebGPURenderer(n),t.fullScreenQuad.setVolumes(r),t.fullScreenQuad.prepareAndDraw(a),a.end()},e.renderDepthBounds=function(n,r){e.updateDepthPolyData(n);var a=t._boundsPoly,o=a.getPoints(),i=a.getPolys(),s={hash:"vp".concat(i.getMTime()),usage:Ox.Index,cells:i,numberOfPoints:o.getNumberOfPoints(),primitiveType:Ax.Triangles,representation:Cx.SURFACE},c=r.getDevice().getBufferManager().getBuffer(s);t._mapper.getVertexInput().setIndexBuffer(c),s={usage:Ox.PointArray,format:"float32x4",hash:"vp".concat(o.getMTime()).concat(i.getMTime()),dataArray:o,indexBuffer:c,packExtra:!0};var u=r.getDevice().getBufferManager().getBuffer(s);t._mapper.getVertexInput().addBuffer(u,["vertexBC"]),t._mapper.setNumberOfVertices(u.getSizeInBytes()/u.getStrideInBytes()),e.drawDepthRange(n,r)},e.updateDepthPolyData=function(e){for(var n=!1,r=0;r<t.volumes.length;r++){var a=t.volumes[r].getMTime();t._lastMTimes[r]&&a===t._lastMTimes[r]||(n=!0,t._lastMTimes[r]=a)}var o=e.getStabilizedTime();if((t._lastMTimes.length<=t.volumes.length||o!==t._lastMTimes[t.volumes.length])&&(n=!0,t._lastMTimes[t.volumes.length]=o),n){for(var i=e.getStabilizedCenterByReference(),s=8*t.volumes.length,c=new Float64Array(3*s),u=12*t.volumes.length,l=new Uint16Array(4*u),d=0;d<t.volumes.length;d++){t.volumes[d].getBoundingCubePoints(c,24*d);for(var p=12*d*4,f=8*d,g=0;g<12;g++)l[p++]=3,l[p++]=f+Ix[g][0],l[p++]=f+Ix[g][1],l[p++]=f+Ix[g][2]}for(var m=0;m<c.length;m+=3)c[m]-=i[0],c[m+1]-=i[1],c[m+2]-=i[2];t._boundsPoly.getPoints().setData(c,3),t._boundsPoly.getPoints().modified(),t._boundsPoly.getPolys().setData(l,1),t._boundsPoly.getPolys().modified(),t._boundsPoly.modified()}},e.drawDepthRange=function(n,r){t._depthRangeTexture.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeTexture2.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeEncoder.attachTextureViews(),e.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(t._depthRangeEncoder),n.volumeDepthRangePass(!0),t._mapper.setWebGPURenderer(n),t._mapper.prepareToDraw(t._depthRangeEncoder),t._mapper.registerDrawCallback(t._depthRangeEncoder),n.volumeDepthRangePass(!1)},e.createDepthRangeEncoder=function(e){var n=e.getDevice();t._depthRangeEncoder=ex.newInstance({label:"VolumePass DepthRange"}),t._depthRangeEncoder.setPipelineHash("volr"),t._depthRangeEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor1"),t.addOutput("vec4<f32>","outColor2");var n=t.getCode();n=Cu.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,t.setCode(n)})),t._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),t._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcfactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcfactor:"one",dstFactor:"one",operation:"min"}}}]}}),t._depthRangeTexture=ux.newInstance({label:"volumePassMaxDepth"}),t._depthRangeTexture.create(n,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var r=t._depthRangeTexture.createView("maxTexture");t._depthRangeEncoder.setColorTextureView(0,r),t._depthRangeTexture2=ux.newInstance({label:"volumePassDepthMin"}),t._depthRangeTexture2.create(n,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var a=t._depthRangeTexture2.createView("minTexture");t._depthRangeEncoder.setColorTextureView(1,a),t._mapper.setDevice(e.getDevice()),t._mapper.setTextureViews([t.depthTextureView])},e.createClearEncoder=function(e){t._colorTexture=ux.newInstance({label:"volumePassColor"}),t._colorTexture.create(e.getDevice(),{width:e.getCanvas().width,height:e.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),t._colorTextureView=t._colorTexture.createView("volumePassColorTexture"),t._colorTextureView.addSampler(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._clearEncoder=ex.newInstance({label:"VolumePass Clear"}),t._clearEncoder.setColorTextureView(0,t._colorTextureView),t._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),t._clearEncoder.setPipelineHash("volpf"),t._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createCopyEncoder=function(e){t._copyEncoder=ex.newInstance({label:"volumePassCopy"}),t._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._copyEncoder.setPipelineHash("volcopypf"),t._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createMergeEncoder=function(e){t._mergeEncoder=ex.newInstance({label:"volumePassMerge"}),t._mergeEncoder.setColorTextureView(0,t._colorTextureView),t._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._mergeEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");var n=t.getCode();n=Cu.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(n)})),t._mergeEncoder.setPipelineHash("volpf"),t._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.setVolumes=function(n){if(!t.volumes||t.volumes.length!==n.length)return t.volumes=ve(n),void e.modified();for(var r=0;r<n.length;r++)if(n[r]!==t.volumes[r])return t.volumes=ve(n),void e.modified()}}var Ex={colorTextureView:null,depthTextureView:null,volumes:null};function Dx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ex,n),Ly.extend(e,t,n),t._lastScale=2,t._mapper=Qu.newInstance(),t._mapper.setFragmentShaderTemplate(Mx),t._mapper.getShaderReplacements().set("replaceShaderVolumePass",(function(e,t,n){t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")})),t._boundsPoly=Gi.newInstance(),t._lastMTimes=[],Ot.setGet(e,t,["colorTextureView","depthTextureView"]),Rx(e,t)}var Lx={newInstance:Ot.newInstance(Dx,"vtkWebGPUVolumePass"),extend:Dx};function Bx(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t._currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e),t.opaquePass||(t.opaquePass=fx.newInstance());for(var a=n.getRenderable().getNumberOfLayers(),o=n.getChildren(),i=0;i<a;i++)for(var s=0;s<o.length;s++){var c=o[s],u=n.getRenderable().getRenderers()[s];u.getDraw()&&u.getLayer()===i&&(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumes=[],e.setCurrentOperation("queryPass"),c.traverse(e),e.setCurrentOperation("cameraPass"),c.traverse(e),t.opaquePass.traverse(c,n),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=hx.newInstance()),t.translucentPass.setColorTextureView(t.opaquePass.getColorTextureView()),t.translucentPass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.translucentPass.traverse(c,n)),t.volumes.length>0&&(t.volumePass||(t.volumePass=Lx.newInstance()),t.volumePass.setColorTextureView(t.opaquePass.getColorTextureView()),t.volumePass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.volumePass.setVolumes(t.volumes),t.volumePass.traverse(c,n)),e.finalPass(n,c))}}},e.finalPass=function(n,r){t._finalBlitEncoder||e.createFinalBlitEncoder(n),t._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),t._finalBlitEncoder.attachTextureViews(),t._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(t._finalBlitEncoder),t._fullScreenQuad.prepareAndDraw(t._finalBlitEncoder),t._finalBlitEncoder.end()},e.createFinalBlitEncoder=function(e){t._finalBlitEncoder=ex.newInstance({label:"forwardPassBlit"}),t._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._finalBlitEncoder.setPipelineHash("fpf"),t._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:e.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),t._fsqSampler=pd.newInstance({label:"finalPassSampler"}),t._fsqSampler.create(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._fullScreenQuad=tl.newInstance(),t._fullScreenQuad.setDevice(e.getDevice()),t._fullScreenQuad.setPipelineHash("fpfsq"),t._fullScreenQuad.setTextureViews([t.opaquePass.getColorTextureView()]),t._fullScreenQuad.setAdditionalBindables([t._fsqSampler]),t._fullScreenQuad.setFragmentShaderTemplate("\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0),vec4<f32>(0.0),vec4<f32>(1.0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._finalBlitOutputTextureView=ax.newInstance(),t._finalBlitEncoder.setColorTextureView(0,t._finalBlitOutputTextureView)},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.addVolume=function(e){t.volumes.push(e)}}var Nx={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function kx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nx,n),Ly.extend(e,t,n),Ot.setGet(e,t,["opaquePass","translucentPass","volumePass"]),Bx(e,t)}var Vx={newInstance:Ot.newInstance(kx,"vtkForwardPass"),extend:kx},_x=Ba.VtkDataTypes;function Fx(e,t){function n(e){if(e.imageData){e.dataArray=e.imageData.getPointData().getScalars(),e.time=e.dataArray.getMTime(),e.nativeArray=e.dataArray.getData();var t=e.imageData.getDimensions();switch(e.width=t[0],e.height=t[1],e.depth=t[2],e.dataArray.getNumberOfComponents()){case 1:e.format="r";break;case 2:e.format="rg";break;default:e.format="rgba"}switch(e.dataArray.getDataType()){case _x.UNSIGNED_CHAR:e.format+="8unorm";break;case _x.FLOAT:case _x.UNSIGNED_INT:case _x.INT:case _x.DOUBLE:case _x.UNSIGNED_SHORT:case _x.SHORT:default:e.format+="16float"}}e.image&&(e.width=e.image.width,e.height=e.image.height,e.depth=1,e.format="rgba8unorm"),e.jsImageData&&(e.width=e.jsImageData.width,e.height=e.jsImageData.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.nativeArray=e.jsImageData.data),e.canvas&&(e.width=e.canvas.width,e.height=e.canvas.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT)}function r(e){var n=ux.newInstance();return n.create(t.device,{width:e.width,height:e.height,depth:e.depth,format:e.format,usage:e.usage,mipLevel:e.mipLevel}),(e.nativeArray||e.image||e.canvas)&&n.writeImageData(e),n}t.classHierarchy.push("vtkWebGPUTextureManager"),e.getTexture=function(e){return e.hash?t.device.getCachedObject(e.hash,r,e):r(e)},e.getTextureForImageData=function(e){var r={time:e.getMTime()};return r.imageData=e,n(r),r.hash=r.time+r.format+r.mipLevel,t.device.getTextureManager().getTexture(r)},e.getTextureForVTKTexture=function(e){var r={time:e.getMTime()};return e.getInputData()?r.imageData=e.getInputData():e.getImage()?r.image=e.getImage():e.getJsImageData()?r.jsImageData=e.getJsImageData():e.getCanvas()&&(r.canvas=e.getCanvas()),n(r),r.mipLevel=e.getMipLevel(),r.hash=r.time+r.format+r.mipLevel,t.device.getTextureManager().getTexture(r)}}var Gx={handle:null,device:null};function Ux(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gx,n),Ot.obj(e,t),Ot.setGet(e,t,["device"]),Fx(e,t)}var jx={newInstance:Ot.newInstance(Ux),extend:Ux};var zx=function(e){Le(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Re(t);if(n){var a=Re(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return Ne(this,e)});function a(){var e,t,n;return Ae(this,a),(n=r.call(this)).registry=new FinalizationRegistry((function(r){var o=De((e=Be(n),Re(a.prototype)),"get",e).call(e,r);o&&o.deref&&void 0===o.deref()&&De((t=Be(n),Re(a.prototype)),"delete",t).call(t,r)})),n}return Me(a,[{key:"getValue",value:function(e){var t=De(Re(a.prototype),"get",this).call(this,e);if(t){var n=t.deref();if(void 0!==n)return n;De(Re(a.prototype),"delete",this).call(this,e)}}},{key:"setValue",value:function(e,t){var n;return t&&"object"===ge(t)&&(n=new WeakRef(t),this.registry.register(t,e),De(Re(a.prototype),"set",this).call(this,e,n)),n}}]),a}(ke(Map));function Wx(e,t){t.classHierarchy.push("vtkWebGPUDevice"),e.initialize=function(e){t.handle=e},e.createCommandEncoder=function(){return t.handle.createCommandEncoder()},e.submitCommandEncoder=function(e){t.handle.queue.submit([e.finish()])},e.getShaderModule=function(e){return t.shaderCache.getShaderModule(e)},e.getBindGroupLayout=function(e){if(!e.entries)return null;for(var n=0;n<e.entries.length;n++){var r=e.entries[n];r.binding=r.binding||0,r.visibility=r.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}for(var a=JSON.stringify(e),o=0;o<t.bindGroupLayouts.length;o++)if(t.bindGroupLayouts[o].sval===a)return t.bindGroupLayouts[o].layout;var i=t.handle.createBindGroupLayout(e);return t.bindGroupLayouts.push({sval:a,layout:i}),i},e.getBindGroupLayoutDescription=function(e){for(var n=0;n<t.bindGroupLayouts.length;n++)if(t.bindGroupLayouts[n].layout===e)return t.bindGroupLayouts[n].sval;return vtkErrorMacro("layout not found"),console.trace(),null},e.getPipeline=function(e){return e in t.pipelines?t.pipelines[e]:null},e.createPipeline=function(n,r){r.initialize(e,n),t.pipelines[n]=r},e.onSubmittedWorkDone=function(){return t.handle.queue.onSubmittedWorkDone()},e.hasCachedObject=function(e){return t.objectCache.getValue(e)},e.getCachedObject=function(e,n){if(!e)return vtkErrorMacro("attempt to cache an object without a hash"),null;var r=t.objectCache.getValue(e);if(r)return r;for(var a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];var s=n.apply(void 0,o);return t.objectCache.setValue(e,s),s}}var Hx={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function Kx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hx,n),at(e,t),lt(e,t,["handle"]),it(e,t,["bufferManager","shaderCache","textureManager"]),t.objectCache=new zx,t.shaderCache=Cu.newInstance(),t.shaderCache.setDevice(e),t.bindGroupLayouts=[],t.bufferManager=zl.newInstance(),t.bufferManager.setDevice(e),t.textureManager=jx.newInstance(),t.textureManager.setDevice(e),t.pipelines={},Wx(e,t)}var Xx={newInstance:yt(Kx,"vtkWebGPUDevice"),extend:Kx};function qx(e,t){t.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),e.traverse=function(n,r){if(!t.deleted){t._currentParent=null,e.setCurrentOperation("buildPass"),n.traverse(e);var a=n.getDevice();if(t.selectionRenderEncoder)t.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),t.depthTexture.resizeToMatch(t.colorTexture);else{e.createRenderEncoder(),t.colorTexture=ux.newInstance({label:"hardwareSelectorColor"}),t.colorTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});var o=t.colorTexture.createView("hardwareSelectColorTexture");t.selectionRenderEncoder.setColorTextureView(0,o),t.depthTexture=ux.newInstance({label:"hardwareSelectorDepth"}),t.depthTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});var i=t.depthTexture.createView("hardwareSelectDepthTexture");t.selectionRenderEncoder.setDepthTextureView(i)}t.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(t.selectionRenderEncoder),e.setCurrentOperation("cameraPass"),r.traverse(e),e.setCurrentOperation("opaquePass"),r.traverse(e)}},e.createRenderEncoder=function(){t.selectionRenderEncoder=ex.newInstance({label:"HardwareSelectionPass"}),t.selectionRenderEncoder.setPipelineHash("sel"),t.selectionRenderEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<u32>","outColor");var n=t.getCode();n=Cu.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,t.setCode(n)})),t.selectionRenderEncoder.getDescription().colorAttachments[0].clearValue=[0,0,0,0],t.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}var Yx={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function Zx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yx,n),Ly.extend(e,t,n),Ot.get(e,t,["colorTexture","depthTexture"]),qx(e,t)}var Qx={newInstance:Ot.newInstance(Zx,"vtkWebGPUHardwareSelectionPass"),extend:Zx},Jx=$y.SelectionContent,$x=$y.SelectionField,eT=oi.FieldAssociations,tT=Ot.vtkErrorMacro;function nT(e){return"".concat(e.propID," ").concat(e.compositeID)}function rT(e,t,n,r){var a=4*((n.height-t-1)*n.colorBufferWidth+e)+r;return n.colorValues[a]}function aT(e,t,n,r){var a=n<0?0:n;if(0===a){if(r[0]=t[0],r[1]=t[1],t[0]<0||t[0]>=e.width||t[1]<0||t[1]>=e.height)return null;var o=rT(t[0],t[1],e,0);if(o<=0)return null;var i={};i.propID=o;var s=rT(t[0],t[1],e,1);if((s<0||s>16777215)&&(s=0),i.compositeID=s,e.captureZValues){var c=(e.height-t[1]-1)*e.zbufferBufferWidth+t[0];i.zValue=e.depthValues[c],i.zValue=e.webGPURenderer.convertToOpenGLDepth(i.zValue),i.displayPosition=t}return i}var u=[t[0],t[1]],l=[0,0],d=aT(e,t,0,r);if(d)return d;for(var p=1;p<a;++p){for(var f=u[1]>p?u[1]-p:0;f<=u[1]+p;++f){if(l[1]=f,u[0]>=p&&(l[0]=u[0]-p,d=aT(e,l,0,r)))return d;if(l[0]=u[0]+p,d=aT(e,l,0,r))return d}for(var g=u[0]>=p?u[0]-(p-1):0;g<=u[0]+(p-1);++g){if(l[0]=g,u[1]>=p&&(l[1]=u[1]-p,d=aT(e,l,0,r)))return d;if(l[1]=u[1]+p,d=aT(e,l,0,r))return d}}return r[0]=t[0],r[1]=t[1],null}function oT(e,t,n,r,a){for(var o=Math.floor(t),i=Math.floor(n),s=Math.floor(r),c=Math.floor(a),u=new Map,l=[0,0],d=i;d<=c;d++)for(var p=o;p<=s;p++){var f=aT(e,[p,d],0,l);if(f){var g=nT(f);if(u.has(g)){var m=u.get(g);m.pixelCount++,e.captureZValues&&f.zValue<m.info.zValue&&(m.info=f),-1===m.attributeIDs.indexOf(f.attributeID)&&m.attributeIDs.push(f.attributeID)}else u.set(g,{info:f,pixelCount:1,attributeIDs:[f.attributeID]})}}return function(e,t,n){var r=[],a=0;return t.forEach((function(t,o){var i=$y.newInstance();switch(i.setContentType(Jx.INDICES),e){case eT.FIELD_ASSOCIATION_CELLS:i.setFieldType($x.CELL);break;case eT.FIELD_ASSOCIATION_POINTS:i.setFieldType($x.POINT);break;default:tT("Unknown field association")}i.getProperties().propID=t.info.propID;var s=n.webGPURenderer.getPropFromID(t.info.propID);i.getProperties().prop=s.getRenderable(),i.getProperties().compositeID=t.info.compositeID,i.getProperties().pixelCount=t.pixelCount,n.captureZValues&&(i.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],i.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,n.renderer)),i.setSelectionList(t.attributeIDs),r[a]=i,a++})),r}(e.fieldAssociation,u,e)}function iT(e,t){t.classHierarchy.push("vtkWebGPUHardwareSelector"),e.endSelection=function(){t.WebGPURenderer.setSelector(null)},e.getSourceDataAsync=function(){var e=by(Ty().mark((function e(n){var r,a,o,i,s,c,u,l,d,p,f;return Ty().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t._WebGPURenderWindow){e.next=3;break}return tT("Renderer and view must be set before calling Select."),e.abrupt("return",!1);case 3:if(t._WebGPURenderWindow.getRenderable().preRender(),t._WebGPURenderWindow.getInitialized()){e.next=8;break}return t._WebGPURenderWindow.initialize(),e.next=8,new Promise((function(e){t._WebGPURenderWindow.onInitialized(e)}));case 8:if(r=t._WebGPURenderWindow.getViewNodeFor(n)){e.next=11;break}return e.abrupt("return",!1);case 11:if(a=r.getSuppressClear(),r.setSuppressClear(!0),t._selectionPass.traverse(t._WebGPURenderWindow,r),r.setSuppressClear(a),o=t._WebGPURenderWindow.getDevice(),i=t._selectionPass.getColorTexture(),s=t._selectionPass.getDepthTexture(),(c={area:[0,0,i.getWidth()-1,i.getHeight()-1],captureZValues:t.captureZValues,fieldAssociation:t.fieldAssociation,renderer:n,webGPURenderer:r,webGPURenderWindow:t._WebGPURenderWindow,width:i.getWidth(),height:i.getHeight()}).colorBufferWidth=16*Math.floor((c.width+15)/16),c.colorBufferSizeInBytes=c.colorBufferWidth*c.height*4*4,(u=cl.newInstance({label:"hardwareSelectColorBuffer"})).setDevice(o),u.create(c.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),(l=t._WebGPURenderWindow.getCommandEncoder()).copyTextureToBuffer({texture:i.getHandle()},{buffer:u.getHandle(),bytesPerRow:16*c.colorBufferWidth,rowsPerImage:c.height},{width:c.width,height:c.height,depthOrArrayLayers:1}),t.captureZValues&&(c.zbufferBufferWidth=64*Math.floor((c.width+63)/64),(d=cl.newInstance({label:"hardwareSelectDepthBuffer"})).setDevice(o),c.zbufferSizeInBytes=c.height*c.zbufferBufferWidth*4,d.create(c.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),l.copyTextureToBuffer({texture:s.getHandle(),aspect:"depth-only"},{buffer:d.getHandle(),bytesPerRow:4*c.zbufferBufferWidth,rowsPerImage:c.height},{width:c.width,height:c.height,depthOrArrayLayers:1})),o.submitCommandEncoder(l),p=u.mapAsync(GPUMapMode.READ),!t.captureZValues){e.next=37;break}return f=d.mapAsync(GPUMapMode.READ),e.next=33,Promise.all([p,f]);case 33:c.depthValues=new Float32Array(d.getMappedRange().slice()),d.unmap(),e.next=39;break;case 37:return e.next=39,p;case 39:return c.colorValues=new Uint32Array(u.getMappedRange().slice()),u.unmap(),c.generateSelection=function(e,t,n,r){return oT(c,e,t,n,r)},e.abrupt("return",c);case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var sT={};function cT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sT,n),qy.extend(e,t,n),t._selectionPass=Qx.newInstance(),Ot.setGet(e,t,["_WebGPURenderWindow"]),Ot.moveToProtected(e,t,["WebGPURenderWindow"]),iT(e,t)}var uT={newInstance:Ot.newInstance(cT,"vtkWebGPUHardwareSelector"),extend:cT},lT=Ot.vtkErrorMacro,dT={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function pT(e,t){t.classHierarchy.push("vtkWebGPURenderWindow"),e.getViewNodeFactory=function(){return t.myFactory};var n=[0,0];function r(){return r=by(Ty().mark((function n(){var r,a,o,i,s,c,u,l=arguments;return Ty().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:t.imageFormat,a=document.createElement("canvas"),o=a.getContext("2d"),a.width=t.canvas.width,a.height=t.canvas.height,n.next=7,e.getPixelsAsync();case 7:i=n.sent,s=new ImageData(i.colorValues,i.width,i.height),o.putImageData(s,0,0),c=t.canvas.getBoundingClientRect(),t.renderable.getRenderers().forEach((function(e){e.getViewProps().forEach((function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var r=t[n],a=r.getBoundingClientRect(),i=a.x-c.x,s=a.y-c.y;o.drawImage(r,i,s)}}))})),u=a.toDataURL(r),a.remove(),e.invokeImageReady(u);case 17:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}e.onModified((function(){t.renderable&&(t.size[0]===n[0]&&t.size[1]===n[1]||(n[0]=t.size[0],n[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]),e.recreateSwapChain())),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.recreateSwapChain=function(){t.context&&(t.context.unconfigure(),t.presentationFormat=navigator.gpu.getPreferredCanvasFormat(t.adapter),t.context.configure({device:t.device.getHandle(),format:t.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:t.size[0],height:t.size[1]}),t._configured=!0)},e.getCurrentTexture=function(){return t.context.getCurrentTexture()},e.buildPass=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize()}else t.initialized&&(t._configured||e.recreateSwapChain(),t.commandEncoder=t.device.createCommandEncoder())},e.initialize=function(){if(!t.initializing){if(t.initializing=!0,!navigator.gpu)return void lT("WebGPU is not enabled.");e.create3DContextAsync().then((function(){t.initialized=!0,t.deleted||e.invokeInitialized()}))}},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&lT("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect(),n=e.width,r=e.height;t.containerSize=[n,r]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.size},e.create3DContextAsync=by(Ty().mark((function e(){return Ty().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.gpu.requestAdapter({powerPreference:"high-performance"});case 2:if(t.adapter=e.sent,!t.deleted){e.next=5;break}return e.abrupt("return");case 5:return t.device=Xx.newInstance(),e.t0=t.device,e.next=9,t.adapter.requestDevice();case 9:if(e.t1=e.sent,e.t0.initialize.call(e.t0,e.t1),!t.deleted){e.next=14;break}return t.device=null,e.abrupt("return");case 14:t.context=t.canvas.getContext("webgpu");case 15:case"end":return e.stop()}}),e)}))),e.releaseGraphicsResources=function(){var n=Ly.newInstance();n.setCurrentOperation("Release"),n.traverse(e,null),t.adapter=null,t.device=null,t.context=null,t.initialized=!1,t.initializing=!1},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.resetCamera,o=void 0!==a&&a,i=r.size,s=void 0===i?null:i,c=r.scale,u=void 0===c?1:c;if(t.deleted)return null;t.imageFormat=n;var l=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:s||1!==u?s||t.size.map((function(e){return e*u})):null},new Promise((function(n,r){var a=e.onImageReady((function(r){if(null===t._screenshot.size)t.notifyStartCaptureImage=l,a.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach((function(e){return(0,e.restoreParamsFn)(e.arg)})),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),n(r);else{var i=document.createElement("img");if(i.style=dT,i.src=r,t._screenshot.placeHolder=t.el.appendChild(i),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,t._screenshot.size=null,e.modified(),o){var s=!0!==o;t._screenshot.cameras=t.renderable.getRenderers().map((function(e){var t=e.getActiveCamera(),n=t.get("focalPoint","position","parallelScale");return{resetCameraArgs:s?{renderer:e}:void 0,resetCameraFn:s?o:e.resetCamera,restoreParamsFn:t.set,arg:JSON.parse(JSON.stringify(n))}})),t._screenshot.cameras.forEach((function(e){return(0,e.resetCameraFn)(e.resetCameraArgs)}))}e.traverseAllPasses()}}))}))},e.traverseAllPasses=function(){if(!t.deleted)if(t.initialized){if(t.renderPasses)for(var n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.commandEncoder&&(t.device.submitCommandEncoder(t.commandEncoder),t.commandEncoder=null,t.notifyStartCaptureImage&&t.device.onSubmittedWorkDone().then((function(){!function(){r.apply(this,arguments)}()})))}else{e.initialize();var a=e.onInitialized((function(){a.unsubscribe(),e.traverseAllPasses()}))}},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady((function(t){return e.setBackgroundImage(t.image)})),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.getUniquePropID=function(){return t.nextPropID++},e.getPropFromID=function(e){for(var n=0;n<t.children.length;n++){var r=t.children[n].getPropFromID(e);if(null!==r)return r}return null},e.getPixelsAsync=by(Ty().mark((function e(){var n,r,a,o,i,s,c,u,l,d,p;return Ty().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.device,r=t.renderPasses[0].getOpaquePass().getColorTexture(),(a={width:r.getWidth(),height:r.getHeight()}).colorBufferWidth=32*Math.floor((a.width+31)/32),a.colorBufferSizeInBytes=a.colorBufferWidth*a.height*8,(o=cl.newInstance()).setDevice(n),o.create(a.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),(i=t.device.createCommandEncoder()).copyTextureToBuffer({texture:r.getHandle()},{buffer:o.getHandle(),bytesPerRow:8*a.colorBufferWidth,rowsPerImage:a.height},{width:a.width,height:a.height,depthOrArrayLayers:1}),n.submitCommandEncoder(i),s=o.mapAsync(GPUMapMode.READ),e.next=14,s;case 14:for(a.colorValues=new Uint16Array(o.getMappedRange().slice()),o.unmap(),c=new Uint8ClampedArray(a.height*a.width*4),u=0;u<a.height;u++)for(l=0;l<a.width;l++)d=4*(u*a.width+l),p=4*(u*a.colorBufferWidth+l),c[d]=255*nc(a.colorValues[p]),c[d+1]=255*nc(a.colorValues[p+1]),c[d+2]=255*nc(a.colorValues[p+2]),c[d+3]=255*nc(a.colorValues[p+3]);return a.colorValues=c,e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)}))),e.createSelector=function(){var t=uT.newInstance();return t.setWebGPURenderWindow(e),t},e.delete=Ot.chain(e.delete,e.setViewStream)}var fT={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};var gT=Ot.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fT,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",Db.extend(e,t,n),t.myFactory=lu.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",gT),t.renderPasses[0]=Vx.newInstance(),t.selector||(t.selector=uT.newInstance(),t.selector.setWebGPURenderWindow(e)),Ot.event(e,t,"imageReady"),Ot.event(e,t,"initialized"),Ot.get(e,t,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),Ot.setGet(e,t,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),Ot.setGetArray(e,t,["size"],2),pT(e,t)}),"vtkWebGPURenderWindow");wy("WebGPU",gT);var mT=Ot.vtkDebugMacro;function vT(e,t){t.classHierarchy.push("vtkCamera");var n=new Float64Array(3),r=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),o=m(new Float64Array(16)),i=m(new Float64Array(16)),s=new Float64Array(3),c=new Float64Array(3),u=new Float64Array(3),l=m(new Float64Array(16)),d=m(new Float64Array(16)),f=new Float64Array(3),g=new Float64Array(3);function y(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=function(){var n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=function(n,r,a){n===t.position[0]&&r===t.position[1]&&a===t.position[2]||(t.position[0]=n,t.position[1]=r,t.position[2]=a,e.computeDistance(),e.modified())},e.setFocalPoint=function(n,r,a){n===t.focalPoint[0]&&r===t.focalPoint[1]&&a===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=r,t.focalPoint[2]=a,e.computeDistance(),e.modified())},e.setDistance=function(n){if(t.distance!==n){t.distance=n,t.distance<1e-20&&(t.distance=1e-20,mT("Distance is set to minimum."));var r=t.directionOfProjection;t.focalPoint[0]=t.position[0]+r[0]*t.distance,t.focalPoint[1]=t.position[1]+r[1]*t.distance,t.focalPoint[2]=t.position[2]+r[2]*t.distance,e.modified()}},e.computeDistance=function(){var e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],r=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+r*r),t.distance<1e-20){t.distance=1e-20,mT("Distance is set to minimum.");var a=t.directionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=r/t.distance,y()},e.dolly=function(n){if(!(n<=0)){var r=t.distance/n;e.setPosition(t.focalPoint[0]-r*t.directionOfProjection[0],t.focalPoint[1]-r*t.directionOfProjection[1],t.focalPoint[2]-r*t.directionOfProjection[2])}},e.roll=function(n){var r=t.position,a=t.focalPoint,o=t.viewUp,i=new Float64Array([o[0],o[1],o[2],0]);m(l);var s=new Float64Array([a[0]-r[0],a[1]-r[1],a[2]-r[2]]);P(l,l,sr(n),s),us(i,i,l),t.viewUp[0]=i[0],t.viewUp[1]=i[1],t.viewUp[2]=i[2],e.modified()},e.azimuth=function(n){var r=t.focalPoint;m(d),T(d,d,r),P(d,d,sr(n),t.viewUp),T(d,d,[-r[0],-r[1],-r[2]]),Cn(f,t.position,d),e.setPosition(f[0],f[1],f[2])},e.yaw=function(n){var r=t.position;m(d),T(d,d,r),P(d,d,sr(n),t.viewUp),T(d,d,[-r[0],-r[1],-r[2]]),Cn(g,t.focalPoint,d),e.setFocalPoint(g[0],g[1],g[2])},e.elevation=function(n){var r=t.focalPoint,a=e.getViewMatrix(),o=[-a[0],-a[1],-a[2]];m(d),T(d,d,r),P(d,d,sr(n),o),T(d,d,[-r[0],-r[1],-r[2]]),Cn(f,t.position,d),e.setPosition(f[0],f[1],f[2])},e.pitch=function(n){var r=t.position,a=e.getViewMatrix(),o=[a[0],a[1],a[2]];m(d),T(d,d,r),P(d,d,sr(n),o),T(d,d,[-r[0],-r[1],-r[2]]),Cn(g,t.focalPoint,d),e.setFocalPoint.apply(e,ve(g))},e.zoom=function(n){n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.translate=function(n,r,a){var o=[n,r,a];xr(t.position,o,t.position),xr(t.focalPoint,o,t.focalPoint),e.computeDistance(),e.modified()},e.applyTransform=function(n){var r=[].concat(ve(t.viewUp),[1]),a=[],o=[],i=[];r[0]+=t.position[0],r[1]+=t.position[1],r[2]+=t.position[2],us(a,[].concat(ve(t.position),[1]),n),us(o,[].concat(ve(t.focalPoint),[1]),n),us(i,r,n),i[0]-=a[0],i[1]-=a[1],i[2]-=a[2],e.setPosition.apply(e,ve(a.slice(0,3))),e.setFocalPoint.apply(e,ve(o.slice(0,3))),e.setViewUp.apply(e,ve(i.slice(0,3)))},e.getThickness=function(){return t.clippingRange[1]-t.clippingRange[0]},e.setThickness=function(n){var r=n;r<1e-20&&(r=1e-20,mT("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+r)},e.setThicknessFromFocalPoint=function(n){var r=n;r<1e-20&&(r=1e-20,mT("Thickness is set to minimum.")),e.setClippingRange(t.distance-r/2,t.distance+r/2)},e.setRoll=function(e){},e.getRoll=function(){},e.setObliqueAngles=function(e,t){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getFrustumPlanes=function(e){},e.getCameraLightTransformMatrix=function(e){return p(e,t.cameraLightTransform),e},e.computeCameraLightTransform=function(){p(o,e.getViewMatrix()),h(o,o),I(i,[t.distance,t.distance,t.distance]),x(o,o,i),m(t.cameraLightTransform),T(t.cameraLightTransform,o,[0,0,-1])},e.deepCopy=function(e){},e.physicalOrientationToWorldDirection=function(e){var t=gs(e[0],e[1],e[2],e[3]),n=ls(),r=gs(0,0,1,0);return function(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3]}(n,t),ps(r,t,r),ps(r,r,n),[r[0],r[1],r[2]]},e.getPhysicalToWorldMatrix=function(t){e.getWorldToPhysicalMatrix(t),h(t,t)},e.getWorldToPhysicalMatrix=function(e){m(e);var n=[3];Or(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],v(e,e),en(s,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),S(e,e,s),T(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=function(i){h(o,i),Cn(s,n,o),e.computeDistance();var l=t.distance;e.setPosition(s[0],s[1],s[2]),Cn(c,r,o),nn(c,c,s),yn(c,c),e.setDirectionOfProjection(c[0],c[1],c[2]),Cn(u,a,o),nn(u,u,s),yn(u,u),e.setViewUp(u[0],u[1],u[2]),e.setDistance(l)},e.computeViewParametersFromPhysicalMatrix=function(t){e.getWorldToPhysicalMatrix(o),x(o,t,o),e.computeViewParametersFromViewMatrix(o)},e.setViewMatrix=function(n){t.viewMatrix=n,t.viewMatrix&&(p(o,t.viewMatrix),e.computeViewParametersFromViewMatrix(o),v(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=function(){if(t.viewMatrix)return t.viewMatrix;Y(o,t.position,t.focalPoint,t.viewUp),v(o,o);var e=new Float64Array(16);return p(e,o),e},e.setProjectionMatrix=function(e){t.projectionMatrix=e},e.getProjectionMatrix=function(e,n,r){var a=new Float64Array(16);if(m(a),t.projectionMatrix){var i=1/t.physicalScale;return en(s,i,i,i),p(a,t.projectionMatrix),S(a,a,s),v(a,a),a}m(o);var c=t.clippingRange[1]-t.clippingRange[0],u=[t.clippingRange[0]+(n+1)*c/2,t.clippingRange[0]+(r+1)*c/2];if(t.parallelProjection){var l=t.parallelScale*e,d=t.parallelScale,f=(t.windowCenter[0]-1)*l,g=(t.windowCenter[0]+1)*l,h=(t.windowCenter[1]-1)*d,y=(t.windowCenter[1]+1)*d;X(o,f,g,h,y,u[0],u[1]),v(o,o)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var b,x,T=Math.tan(sr(t.viewAngle)/2);!0===t.useHorizontalViewAngle?(b=t.clippingRange[0]*T,x=t.clippingRange[0]*T/e):(b=t.clippingRange[0]*T*e,x=t.clippingRange[0]*T);var P=(t.windowCenter[0]-1)*b,w=(t.windowCenter[0]+1)*b,C=(t.windowCenter[1]-1)*x,O=(t.windowCenter[1]+1)*x,A=u[0],I=u[1];o[0]=2*A/(w-P),o[5]=2*A/(O-C),o[2]=(P+w)/(w-P),o[6]=(C+O)/(O-C),o[10]=-(A+I)/(I-A),o[14]=-1,o[11]=-2*A*I/(I-A),o[15]=0}return p(a,o),a},e.getCompositeProjectionMatrix=function(t,n,r){var a=e.getViewMatrix(),o=e.getProjectionMatrix(t,n,r);return x(o,a,o),o},e.setDirectionOfProjection=function(e,n,r){if(t.directionOfProjection[0]!==e||t.directionOfProjection[1]!==n||t.directionOfProjection[2]!==r){t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=r;var a=t.directionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance,y()}},e.setDeviceAngles=function(n,r,a,o){var i=[3];Or(t.physicalViewNorth,t.physicalViewUp,i);var s=m(new Float64Array(16));P(s,s,sr(n),t.physicalViewUp),P(s,s,sr(r),i),P(s,s,sr(a),t.physicalViewNorth),P(s,s,sr(-o),t.physicalViewUp);var c=new Float64Array([-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]]),u=new Float64Array(t.physicalViewNorth);Cn(c,c,s),Cn(u,u,s),e.setDirectionOfProjection(c[0],c[1],c[2]),e.setViewUp(u[0],u[1],u[2]),e.modified()},e.setOrientationWXYZ=function(t,n,r,a){var o=m(new Float64Array(16));if(0!==t&&(0!==n||0!==r||0!==a)){var i=sr(t),s=ls();ds(s,[n,r,a],i),G(o,s)}var c=new Float64Array(3);Cn(c,[0,0,-1],o);var u=new Float64Array(3);Cn(u,[0,1,0],o),e.setDirectionOfProjection.apply(e,ve(c)),e.setViewUp.apply(e,ve(u)),e.modified()},e.computeClippingRange=function(e){var n,r;n=t.viewPlaneNormal,r=t.position;for(var a=-n[0],o=-n[1],i=-n[2],s=-(a*r[0]+o*r[1]+i*r[2]),c=[a*e[0]+o*e[2]+i*e[4]+s,1e-18],u=0;u<2;u++)for(var l=0;l<2;l++)for(var d=0;d<2;d++){var p=a*e[d]+o*e[2+l]+i*e[4+u]+s;c[0]=p<c[0]?p:c[0],c[1]=p>c[1]?p:c[1]}return c}}var hT={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:l(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function yT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hT,n),Ot.obj(e,t),Ot.get(e,t,["distance"]),Ot.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),Ot.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),Ot.setGetArray(e,t,["clippingRange","windowCenter"],2),Ot.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),vT(e,t)}var bT={newInstance:Ot.newInstance(yT,"vtkCamera"),extend:yT};function xT(e,t){t.classHierarchy.push("vtkLight");var n=new Float64Array(3);e.getTransformedPosition=function(){return t.transformMatrix?Cn(n,t.position,t.transformMatrix):en(n,t.position[0],t.position[1],t.position[2]),n},e.getTransformedFocalPoint=function(){return t.transformMatrix?Cn(n,t.focalPoint,t.transformMatrix):en(n,t.focalPoint[0],t.focalPoint[1],t.focalPoint[2]),n},e.getDirection=function(){return t.directionMTime<t.mtime&&(Vn(t.direction,t.focalPoint,t.position),Ir(t.direction),t.directionMTime=t.mtime),t.direction},e.setDirection=function(e){var n=new Float64Array(3);Vn(n,t.position,e),t.focalPoint=n},e.setDirectionAngle=function(t,n){var r=sr(t),a=sr(n);e.setPosition(Math.cos(r)*Math.sin(a),Math.sin(r),Math.cos(r)*Math.cos(a)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}var TT={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function ST(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,TT,n),Ot.obj(e,t),Ot.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),Ot.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),xT(e,t)}var PT={newInstance:Ot.newInstance(ST,"vtkLight"),extend:ST,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]},wT=Ot.vtkErrorMacro;function CT(e,t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);var r=e.getNestedProps();if(r&&r.length)for(var a=0;a<r.length;a++)n(r[a],t);return t}t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return t.props.includes(e)},e.addViewProp=function(n){n&&!e.hasViewProp(n)&&t.props.push(n)},e.removeViewProp=function(e){var n=t.props.filter((function(t){return t!==e}));t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=function(){t.props=[]},e.getViewPropsWithNestedProps=function(){for(var e=[],r=0;r<t.props.length;r++)n(t.props[r],e);return e},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach((function(e){t.actors2D=t.actors2D.concat(e.getActors2D())})),t.actors2D},e.displayToView=function(){return wT("call displayToView on your view instead")},e.viewToDisplay=function(){return wT("callviewtodisplay on your view instead")},e.getSize=function(){return wT("call getSize on your View instead")},e.normalizedDisplayToProjection=function(t,n,r){var a=e.normalizedDisplayToNormalizedViewport(t,n,r);return e.normalizedViewportToProjection(a[0],a[1],a[2])},e.normalizedDisplayToNormalizedViewport=function(e,n,r){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/a[0],(n-t.viewport[1])/a[1],r]},e.normalizedViewportToProjection=function(e,t,n){return[2*e-1,2*t-1,2*n-1]},e.projectionToNormalizedDisplay=function(t,n,r){var a=e.projectionToNormalizedViewport(t,n,r);return e.normalizedViewportToNormalizedDisplay(a[0],a[1],a[2])},e.normalizedViewportToNormalizedDisplay=function(e,n,r){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*a[0]+t.viewport[0],n*a[1]+t.viewport[1],r]},e.projectionToNormalizedViewport=function(e,t,n){return[.5*(e+1),.5*(t+1),.5*(n+1)]},e.PickPropFrom=("PickPropFrom",function(){return wT("vtkViewport::".concat("PickPropFrom"," - NOT IMPLEMENTED"))})}var OT={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function AT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OT,n),Ot.obj(e,t),Ot.event(e,t,"event"),Ot.setGetArray(e,t,["viewport"],4),Ot.setGetArray(e,t,["background","background2"],3),CT(e,t)}var IT={newInstance:Ot.newInstance(AT,"vtkViewport"),extend:AT},MT=He,RT=Ke,ET=Xe;function DT(e){return function(){return RT("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}}function LT(e,t){t.classHierarchy.push("vtkRenderer");var n={type:"ComputeVisiblePropBoundsEvent",renderer:e},r={type:"ResetCameraClippingRangeEvent",renderer:e},a={type:"ResetCameraEvent",renderer:e};e.updateCamera=function(){return t.activeCamera||(MT("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var n=e.getActiveCameraAndResetIfCreated();t.lights.forEach((function(e){e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):e.lightTypeIsCameraLight()?e.setTransformMatrix(n.getCameraLightTransformMatrix(l())):RT("light has unknown light type",e.get()))}))},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=DT("allocateTime"),e.updateGeometry=DT("updateGeometry"),e.getVTKWindow=function(){return t._renderWindow},e.setLayer=function(n){MT(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=function(n){return t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0)},e.makeCamera=function(){var t=bT.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.getActors=function(){return t.actors=[],t.props.forEach((function(e){t.actors=t.actors.concat(e.getActors())})),t.actors},e.addActor=e.addViewProp,e.removeActor=function(n){t.actors=t.actors.filter((function(e){return e!==n})),e.removeViewProp(n),e.modified()},e.removeAllActors=function(){e.getActors().forEach((function(t){e.removeViewProp(t)})),t.actors=[],e.modified()},e.getVolumes=function(){return t.volumes=[],t.props.forEach((function(e){t.volumes=t.volumes.concat(e.getVolumes())})),t.volumes},e.addVolume=e.addViewProp,e.removeVolume=function(n){t.volumes=t.volumes.filter((function(e){return e!==n})),e.removeViewProp(n),e.modified()},e.removeAllVolumes=function(){e.getVolumes().forEach((function(t){e.removeViewProp(t)})),t.volumes=[],e.modified()},e.hasLight=function(e){return t.lights.includes(e)},e.addLight=function(n){n&&!e.hasLight(n)&&(t.lights.push(n),e.modified())},e.removeLight=function(n){t.lights=t.lights.filter((function(e){return e!==n})),e.modified()},e.removeAllLights=function(){t.lights=[],e.modified()},e.setLightCollection=function(n){t.lights=n,e.modified()},e.makeLight=PT.newInstance,e.createLight=function(){t.automaticLightCreation&&(t._createdLight&&(e.removeLight(t._createdLight),t._createdLight.delete(),t._createdLight=null),t._createdLight=e.makeLight(),e.addLight(t._createdLight),t._createdLight.setLightTypeToHeadLight(),t._createdLight.setPosition(e.getActiveCamera().getPosition()),t._createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,n,r,a){var o=e.normalizedDisplayToProjection(t,n,r);return o=e.projectionToView(o[0],o[1],o[2],a),e.viewToWorld(o[0],o[1],o[2])},e.worldToNormalizedDisplay=function(t,n,r,a){var o=e.worldToView(t,n,r);return o=e.viewToProjection(o[0],o[1],o[2],a),e.projectionToNormalizedDisplay(o[0],o[1],o[2])},e.viewToWorld=function(e,n,r){if(null===t.activeCamera)return RT("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getViewMatrix();h(a,a),v(a,a);var o=new Float64Array([e,n,r]);return Cn(o,o,a),o},e.projectionToView=function(e,n,r,a){if(null===t.activeCamera)return RT("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getProjectionMatrix(a,-1,1);h(o,o),v(o,o);var i=new Float64Array([e,n,r]);return Cn(i,i,o),i},e.worldToView=function(e,n,r){if(null===t.activeCamera)return RT("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getViewMatrix();v(a,a);var o=new Float64Array([e,n,r]);return Cn(o,o,a),o},e.viewToProjection=function(e,n,r,a){if(null===t.activeCamera)return RT("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getProjectionMatrix(a,-1,1);v(o,o);var i=new Float64Array([e,n,r]);return Cn(i,i,o),i},e.computeVisiblePropBounds=function(){t.allBounds[0]=of.INIT_BOUNDS[0],t.allBounds[1]=of.INIT_BOUNDS[1],t.allBounds[2]=of.INIT_BOUNDS[2],t.allBounds[3]=of.INIT_BOUNDS[3],t.allBounds[4]=of.INIT_BOUNDS[4],t.allBounds[5]=of.INIT_BOUNDS[5];var r=!0;e.invokeEvent(n);for(var a=0;a<t.props.length;++a){var o=t.props[a];if(o.getVisibility()&&o.getUseBounds()){var i=o.getBounds();i&&ca(i)&&(r=!1,i[0]<t.allBounds[0]&&(t.allBounds[0]=i[0]),i[1]>t.allBounds[1]&&(t.allBounds[1]=i[1]),i[2]<t.allBounds[2]&&(t.allBounds[2]=i[2]),i[3]>t.allBounds[3]&&(t.allBounds[3]=i[3]),i[4]<t.allBounds[4]&&(t.allBounds[4]=i[4]),i[5]>t.allBounds[5]&&(t.allBounds[5]=i[5]))}}return r&&(sa(t.allBounds),MT("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=n||e.computeVisiblePropBounds(),o=[0,0,0];if(!ca(r))return MT("Cannot reset camera!"),!1;var i=null;if(!e.getActiveCamera())return RT("Trying to reset non-existent camera"),!1;i=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),o[0]=(r[0]+r[1])/2,o[1]=(r[2]+r[3])/2,o[2]=(r[4]+r[5])/2;var s=r[1]-r[0],c=r[3]-r[2],u=r[5]-r[4],l=(s*=s)+(c*=c)+(u*=u);l=0===l?1:l,l=.5*Math.sqrt(l);var d=sr(t.activeCamera.getViewAngle()),p=l,f=l/Math.sin(.5*d),g=t.activeCamera.getViewUp();return Math.abs(Cr(g,i))>.999&&(ET("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-g[2],g[0],g[1])),t.activeCamera.setFocalPoint(o[0],o[1],o[2]),t.activeCamera.setPosition(o[0]+f*i[0],o[1]+f*i[1],o[2]+f*i[2]),e.resetCameraClippingRange(r),t.activeCamera.setParallelScale(p),t.activeCamera.setPhysicalScale(l),t.activeCamera.setPhysicalTranslation(-o[0],-o[1],-o[2]),e.invokeEvent(a),!0},e.resetCameraClippingRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=n||e.computeVisiblePropBounds();if(!ca(a))return MT("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return RT("Trying to reset clipping range of non-existent camera"),!1;var o=t.activeCamera.computeClippingRange(a),i=0;if(t.activeCamera.getParallelProjection())i=.2*t.activeCamera.getParallelScale();else{var s=sr(t.activeCamera.getViewAngle());i=.2*Math.tan(s/2)*o[1]}return o[1]-o[0]<i&&(i=i-o[1]+o[0],o[1]+=i/2,o[0]-=i/2),o[0]<0&&(o[0]=0),o[0]=.99*o[0]-(o[1]-o[0])*t.clippingRangeExpansion,o[1]=1.01*o[1]+(o[1]-o[0])*t.clippingRangeExpansion,o[0]=o[0]>=o[1]?.01*o[1]:o[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),o[0]<t.nearClippingPlaneTolerance*o[1]&&(o[0]=t.nearClippingPlaneTolerance*o[1]),t.activeCamera.setClippingRange(o[0],o[1]),e.invokeEvent(r),!1},e.setRenderWindow=function(e){e!==t._renderWindow&&(t._vtkWindow=e,t._renderWindow=e)},e.visibleActorCount=function(){return t.props.filter((function(e){return e.getVisibility()})).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=t.mtime,n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);var r=t._createdLight?t._createdLight.getMTime():0;return r>e&&(e=r),e},e.getTransparent=function(){return!!t.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!t.activeCamera}}var BT={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:ha(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function NT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(Object.assign(t,BT,n),IT.extend(e,t,n),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1),it(e,t,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),lt(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),dt(e,t,["actors","volumes","lights"]),ft(e,t,["background"],4,1),gt(0,t,["renderWindow"]),LT(e,t)}var kT={newInstance:yt(NT,"vtkRenderer"),extend:NT},VT={Corners:{TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}};function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_T(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GT=Ot.vtkErrorMacro,UT=VT.Corners;function jT(e,t){t.classHierarchy.push("vtkOrientationMarkerWidget");var n=FT({},e),r=[],a=kT.newInstance(),o=new ResizeObserver((function(t){e.updateViewport()})),i=null,s=null,c=null,u=null,l=null;function d(){t._interactor.isAnimating()||e.updateMarkerOrientation()}t._onParentRendererChanged=function(){return e.updateViewport()},e.computeViewport=function(){var e=t.parentRenderer||t._interactor.getCurrentRenderer(),n=fe(e.getViewport(),4),r=n[0],a=n[1],o=n[2],i=n[3],s=t._interactor.getView(),c=s.getSize(),u=fe(s.getViewportSize(e),2),l=u[0],d=u[1],p=Math.min(l,d),f=t.viewportSize*p,g=(f=Math.max(Math.min(t.minPixelSize,p),Math.min(t.maxPixelSize,f)))/c[0],m=f/c[1];switch(t.viewportCorner){case UT.TOP_LEFT:return[r,i-m,r+g,i];case UT.TOP_RIGHT:return[o-g,i-m,o,i];case UT.BOTTOM_LEFT:return[r,a,r+g,a+m];case UT.BOTTOM_RIGHT:return[o-g,a,o,a+m];default:return GT("Invalid widget corner"),null}},e.updateViewport=function(){t.enabled&&(a.setViewport.apply(a,ve(e.computeViewport())),t._interactor.render())},e.updateMarkerOrientation=function(){var e=(t.parentRenderer||t._interactor.getCurrentRenderer()).getActiveCamera();if(e){var n=e.getReferenceByName("position"),o=e.getReferenceByName("focalPoint"),i=e.getReferenceByName("viewUp");if(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==o[0]||r[4]!==o[1]||r[5]!==o[2]||r[6]!==i[0]||r[7]!==i[1]||r[8]!==i[2]){r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=o[0],r[4]=o[1],r[5]=o[2],r[6]=i[0],r[7]=i[1],r[8]=i[2];var s=a.getActiveCamera();s.setPosition(n[0],n[1],n[2]),s.setFocalPoint(o[0],o[1],o[2]),s.setViewUp(i[0],i[1],i[2]),a.resetCamera()}}},e.setEnabled=function(n){if(n){if(t.enabled)return;if(!t.actor)return void GT("Must set actor before enabling orientation marker.");if(!t._interactor)return void GT("Must set interactor before enabling orientation marker.");var r=t.parentRenderer||t._interactor.getCurrentRenderer(),l=r.getRenderWindow();l.addRenderer(a),l.getNumberOfLayers()<2&&l.setNumberOfLayers(2),a.setLayer(l.getNumberOfLayers()-1),a.setInteractive(!1),a.addViewProp(t.actor),t.actor.setVisibility(!0),i=r.onEvent((function(e){"ActiveCameraEvent"===e.type&&(s&&s.unsubscribe(),s=e.camera.onModified(d))})),s=r.getActiveCamera().onModified(d),c=t._interactor.onAnimation(e.updateMarkerOrientation),u=t._interactor.onEndAnimation(e.updateMarkerOrientation),o.observe(t._interactor.getView().getCanvas()),e.updateViewport(),e.updateMarkerOrientation(),t.enabled=!0}else{var p,f;if(!t.enabled)return;t.enabled=!1,o.disconnect(),i.unsubscribe(),i=null,s.unsubscribe(),s=null,c.unsubscribe(),c=null,u.unsubscribe(),u=null,t.actor.setVisibility(!1),a.removeViewProp(t.actor);var g=null===(p=t._interactor)||void 0===p||null===(f=p.findPokedRenderer())||void 0===f?void 0:f.getRenderWindow();g&&g.removeRenderer(a)}e.modified()},e.setViewportCorner=function(n){n!==t.viewportCorner&&(t.viewportCorner=n,e.updateViewport())},e.setViewportSize=function(n){var r=Math.min(1,Math.max(0,n));r!==t.viewportSize&&(t.viewportSize=r,e.updateViewport())},e.setActor=function(n){var r=t.enabled;e.setEnabled(!1),t.actor=n,e.setEnabled(r)},e.getRenderer=function(){return a},e.delete=function(){n.delete(),l&&(l.unsubscribe(),l=null),i&&(i.unsubscribe(),i=null),s&&(s.unsubscribe(),s=null),c&&(c.unsubscribe(),c=null),u&&(u.unsubscribe(),u=null),o.disconnect()},l=e.onModified(e.updateViewport)}var zT={viewportCorner:VT.Corners.BOTTOM_LEFT,viewportSize:.2,minPixelSize:50,maxPixelSize:200,parentRenderer:null};function WT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zT,n),Ot.obj(e,t),Ot.get(e,t,["enabled","viewportCorner","viewportSize"]),Ot.setGet(e,t,["_interactor","minPixelSize","maxPixelSize","parentRenderer"]),Ot.get(e,t,["actor"]),Ot.moveToProtected(e,t,["interactor"]),jT(e,t)}var HT=FT({newInstance:Ot.newInstance(WT,"vtkOrientationMarkerWidget"),extend:WT},VT);function KT(e,t){t.classHierarchy.push("vtkCompositeCameraManipulator"),e.computeDisplayCenter=function(e,n){var r=e.computeWorldToDisplay(n,t.center[0],t.center[1],t.center[2]);t.displayCenter[0]=r[0],t.displayCenter[1]=r[1]}}var XT={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]},qT={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,XT,n),Ot.setGet(e,t,["rotationFactor"]),Ot.setGetArray(e,t,["displayCenter"],2),Ot.setGetArray(e,t,["center"],3),KT(e,t)}};function YT(e,t){t.classHierarchy.push("vtkCompositeGestureManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onStartPinch=function(e,t){},e.onStartRotate=function(e,t){},e.onStartPan=function(e,t){},e.onPinch=function(e,t,n){},e.onRotate=function(e,t,n){},e.onPan=function(e,t,n){},e.onEndPinch=function(e){},e.onEndRotate=function(e){},e.onEndPan=function(e){},e.isPinchEnabled=function(){return t.pinchEnabled},e.isPanEnabled=function(){return t.panEnabled},e.isRotateEnabled=function(){return t.rotateEnabled}}var ZT={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0},QT={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ZT,n),Ot.set(e,t,["pinchEnabled","panEnabled","rotateEnabled"]),Ot.setGet(e,t,["interactorStyle"]),YT(e,t)}};function JT(e,t){t.classHierarchy.push("vtkCompositeKeyboardManipulator"),e.onKeyPress=function(e,t,n){},e.onKeyDown=function(e,t,n){},e.onKeyUp=function(e,t,n){}}var $T={},eS={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$T,n),JT(e,t)}};function tS(e,t){t.classHierarchy.push("vtkCompositeMouseManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onButtonDown=function(e,t,n){},e.onButtonUp=function(e){},e.onMouseMove=function(e,t,n){},e.onStartScroll=function(e,t,n){},e.onScroll=function(e,t,n){},e.onEndScroll=function(e){},e.isDragEnabled=function(){return t.dragEnabled},e.isScrollEnabled=function(){return t.scrollEnabled}}var nS={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1},rS={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nS,n),Ot.setGet(e,t,["button","shift","control","alt"]),Ot.set(e,t,["dragEnabled","scrollEnabled"]),tS(e,t)}};function aS(e,t){t.classHierarchy.push("vtkCompositeVRManipulator"),e.onButton3D=function(e,t,n,r,a,o){},e.onMove3D=function(e,t,n,r,a,o){}}var oS={},iS={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oS,n),Ot.setGet(e,t,["device","input"]),aS(e,t)},Device:Ph,Input:wh};function sS(e,t){t.classHierarchy.push("vtkGestureCameraManipulator"),e.onStartPinch=function(e,n){t.previousScale=n},e.onStartRotate=function(e,n){t.previousRotation=n},e.onStartPan=function(e,n){t.previousTranslation=n},e.onPinch=function(e,n,r){hy.dollyByFactor(e,n,r/t.previousScale),t.previousScale=r},e.onPan=function(e,n,r){var a=n.getActiveCamera(),o=e.getInteractorStyle(),i=a.getFocalPoint(),s=(i=o.computeWorldToDisplay(n,i[0],i[1],i[2]))[2],c=r,u=t.previousTranslation,l=o.computeDisplayToWorld(n,i[0]+c[0]-u[0],i[1]+c[1]-u[1],s),d=o.computeDisplayToWorld(n,i[0],i[1],s),p=[];p[0]=d[0]-l[0],p[1]=d[1]-l[1],p[2]=d[2]-l[2],i=a.getFocalPoint();var f=a.getPosition();a.setFocalPoint(p[0]+i[0],p[1]+i[1],p[2]+i[2]),a.setPosition(p[0]+f[0],p[1]+f[1],p[2]+f[2]),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),a.orthogonalizeViewUp(),t.previousTranslation=r},e.onRotate=function(e,n,r){var a=n.getActiveCamera();a.roll(r-t.previousRotation),a.orthogonalizeViewUp(),t.previousRotation=r}}var cS={};function uS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cS,n),Ot.obj(e,t),QT.extend(e,t,n),qT.extend(e,t,n),sS(e,t)}var lS={newInstance:Ot.newInstance(uS,"vtkGestureCameraManipulator"),extend:uS},dS=Ot.vtkErrorMacro,pS="vtkKeyboardCameraManipulator";function fS(e,t){t.classHierarchy.push("vtkKeyboardCameraManipulator");var n={keysDown:[],direction:[0,0,0],skipUpdateDirection:!1,animationSub:null,cameraModifiedSub:null};e.inMotion=function(){return null!==n.animationSub},e.resetMovementSpeed=function(){var e=t.renderer.computeVisiblePropBounds();t.movementSpeed=of.getMaxLength(e)/500},e.startMovement=function(){if(e.inMotion())dS("Camera is already in motion!");else{null===t.movementSpeed&&e.resetMovementSpeed();var r=t.interactor,a=t.renderer;e.calculateCurrentDirection();var o=a.getActiveCamera();n.cameraModifiedSub=o.onModified(e.calculateCurrentDirection),r.requestAnimation(pS),n.animationSub=r.onAnimation((function(){0!==n.keysDown.length&&(n.skipUpdateDirection=!0,e.moveCamera(a.getActiveCamera(),n.direction,t.movementSpeed),a.resetCameraClippingRange(),r.getLightFollowCamera()&&a.updateLightsGeometryToFollowCamera(),n.skipUpdateDirection=!1)}))}},e.endMovement=function(){n.animationSub&&(n.animationSub.unsubscribe(),n.animationSub=null),t._interactor.cancelAnimation(pS),n.cameraModifiedSub&&(n.cameraModifiedSub.unsubscribe(),n.cameraModifiedSub=null)},e.calculateCurrentDirection=function(){if(!n.skipUpdateDirection){n.direction=[0,0,0];var r=t.renderer;if(r){var a=r.getActiveCamera();if(a&&0!==n.keysDown.length){var o=n.keysDown.map((function(t){return e.getDirectionFromKey(t,a)}));if(0!==(o=o.filter((function(e){return e}))).length){var i=o.reduce((function(e,t){return xr(e,t,t),t}));Ir(i),n.direction=i}}}}},e.getDirectionFromKey=function(e,n){var r;if(t.moveForwardKeys.includes(e))r=n.getDirectionOfProjection();else if(t.moveLeftKeys.includes(e)){var a=n.getDirectionOfProjection();r=[0,0,0],Or(n.getViewUp(),a,r)}else if(t.moveBackwardKeys.includes(e))r=n.getDirectionOfProjection().map((function(e){return-e}));else if(t.moveRightKeys.includes(e))r=[0,0,0],Or(n.getDirectionOfProjection(),n.getViewUp(),r);else if(t.moveUpKeys.includes(e))r=n.getViewUp();else{if(!t.moveDownKeys.includes(e))return;r=n.getViewUp().map((function(e){return-e}))}return Ir(r),r},e.moveCamera=function(e,t,n){var r=e.getPosition(),a=e.getFocalPoint();e.setFocalPoint(a[0]+t[0]*n,a[1]+t[1]*n,a[2]+t[2]*n),e.setPosition(r[0]+t[0]*n,r[1]+t[1]*n,r[2]+t[2]*n)},e.onKeyPress=function(e,t,n){},e.onKeyDown=function(r,a,o){n.keysDown.includes(o)||(n.keysDown.push(o),e.calculateCurrentDirection()),e.inMotion()||(Object.assign(t,{interactor:r,renderer:a}),e.startMovement())},e.onKeyUp=function(t,r,a){n.keysDown=n.keysDown.filter((function(e){return e.toUpperCase()!==a.toUpperCase()})),e.calculateCurrentDirection(),0===n.keysDown.length&&e.endMovement()}}var gS={movementSpeed:null,moveForwardKeys:["w","W","ArrowUp"],moveLeftKeys:["a","A","ArrowLeft"],moveBackwardKeys:["s","S","ArrowDown"],moveRightKeys:["d","D","ArrowRight"],moveUpKeys:[" "],moveDownKeys:["Shift"],interactor:null,renderer:null};function mS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gS,n),Ot.obj(e,t),eS.extend(e,t,n),Ot.setGet(e,t,["movementSpeed","moveForwardKeys","moveLeftKeys","moveBackwardKeys","moveRightKeys","moveUpKeys","moveDownKeys","interactor","renderer"]),fS(e,t)}var vS={newInstance:Ot.newInstance(mS,"vtkKeyboardCameraManipulator"),extend:mS};function hS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hS(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bS=[-2,-1,-2,-1],xS={position:"absolute",zIndex:1,border:"2px solid #F44336",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"4px",boxSizing:"border-box"};function TS(e,t){t.classHierarchy.push("vtkMouseBoxSelectionManipulator");var n=null,r=null,a=null,o=null,i=null,s=!1;function c(){return a&&o?[Math.min(a.x,o.x),Math.max(a.x,o.x),Math.min(a.y,o.y),Math.max(a.y,o.y)]:bS}function u(){if(n&&r){var e=fe(n.getSize(),2),t=e[0],a=e[1],o=r.getBoundingClientRect(),s=o.width,u=o.height,l=fe(c(),4),d=l[0],p=l[1],f=l[2],g=l[3];i.style.left="".concat(s*d/t,"px"),i.style.top="".concat(u-u*g/a,"px"),i.style.width="".concat(s*(p-d)/t,"px"),i.style.height="".concat(u*(g-f)/a,"px")}}e.onButtonDown=function(e,o,c){var l,d,p;a=c,t.renderSelection&&(n||(n=e.getView()),!r&&null!==(l=n)&&void 0!==l&&l.getContainer&&(r=n.getContainer()),r||(r=t.container),i||(d=i=document.createElement("div"),p=t.selectionStyle,Object.keys(p).forEach((function(e){d.style[e]=p[e]}))),u(),r&&!s&&(s=!0,r.appendChild(i)))},e.onMouseMove=function(i,s,l){a&&l&&(o=l,e.invokeBoxSelectInput({view:n,container:r,selection:c()}),t.renderSelection&&u())},e.onButtonUp=function(u,l){a&&(o||t.boxChangeOnClick)&&(o||(o=a),e.invokeBoxSelectChange({view:n,container:r,selection:c()}),s&&(i.parentElement.removeChild(i),s=!1),n=null,r=null,a=null,o=null)}}function SS(e){return yS(yS({boxChangeOnClick:!1,renderSelection:!0},e),{},{selectionStyle:yS(yS({},xS),e.selectionStyle)})}function PS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,SS(n)),at(e,t),rS.extend(e,t,n),ht(e,t,"BoxSelectChange"),ht(e,t,"BoxSelectInput"),lt(e,t,["renderSelection","boxChangeOnClick","selectionStyle","container"]),TS(e,t)}var wS={newInstance:yt(PS,"vtkMouseBoxSelectionManipulator"),extend:PS};function CS(e,t){t.classHierarchy.push("vtkMouseCameraAxisRotateManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),o=new Float64Array(3),i=new Float64Array(16),s=new Float64Array(16),c=new Float64Array(3),u=new Float64Array(3),l=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,d,p){if(p){var f=d.getActiveCamera(),g=f.getPosition(),v=f.getFocalPoint(),h=f.getViewUp(),y=f.getDirectionOfProjection();vn(n,y),m(i),m(s);var b=t.center,S=t.rotationFactor,w=t.rotationAxis;vn(l,w);var C=t.previousPosition.x-p.x,O=t.previousPosition.y-p.y,A=e.getView().getViewportSize(d),I=sr(360*C/A[0]*S);P(s,s,I,w),Or(y,h,c);var M=sr(-360*O/A[1]*S),R=Math.acos(bn(n,w)),E=Math.acos(bn(n,l)),D=R<=E,L=Math.min(R,E);t.useHalfAxis&&!D?M=Math.PI/2-R:D&&L+M<0?M=-L:!D&&R+M>Math.PI&&(M=L),P(s,s,M,c),T(i,i,b),x(i,i,s),vn(u,b),T(i,i,u),Cn(r,g,i),Cn(a,v,i),Cn(o,h,s),f.setPosition(r[0],r[1],r[2]),f.setFocalPoint(a[0],a[1],a[2]),f.setViewUp(o),d.resetCameraClippingRange(),e.getLightFollowCamera()&&d.updateLightsGeometryToFollowCamera(),t.previousPosition=p}}}var OS={rotationAxis:[0,0,1],useHalfAxis:!0};function AS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,OS,n),Ot.obj(e,t),Ot.setGet(e,t,["rotationAxis","useHalfAxis"]),rS.extend(e,t,n),qT.extend(e,t,n),CS(e,t)}var IS={newInstance:Ot.newInstance(AS,"vtkMouseCameraAxisRotateManipulator"),extend:AS};function MS(e,t){t.classHierarchy.push("vtkMouseCameraSliceManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,n,r){if(r){var a=r.y-t.previousPosition.y,o=n.getActiveCamera(),i=o.getClippingRange(),s=o.getDistance(),c=0;if(o.getParallelProjection())c=2*o.getParallelScale();else{var u=sr(o.getViewAngle());c=2*s*Math.tan(.5*u)}(s+=a*c/e.getView().getViewportSize(n)[1])<i[0]&&(s=i[0]+.001*c),s>i[1]&&(s=i[1]-.001*c),o.setDistance(s),t.previousPosition=r}},e.onScroll=function(e,t,n){if(n){var r=1-n;r*=25;var a=t.getActiveCamera(),o=a.getClippingRange(),i=a.getDistance();(i+=r)<o[0]&&(i=o[0]),i>o[1]&&(i=o[1]),a.setDistance(i)}}}var RS={};function ES(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RS,n),Ot.obj(e,t),qT.extend(e,t,n),rS.extend(e,t,n),MS(e,t)}var DS={newInstance:Ot.newInstance(ES,"vtkMouseCameraSliceManipulator"),extend:ES};function LS(e,t){t.classHierarchy.push("vtkAbstractPicker"),e.initialize=function(){t.renderer=null,t.selectionPoint[0]=0,t.selectionPoint[1]=0,t.selectionPoint[2]=0,t.pickPosition[0]=0,t.pickPosition[1]=0,t.pickPosition[2]=0},e.initializePickList=function(){t.pickList=[]},e.addPickList=function(e){t.pickList.push(e)},e.deletePickList=function(e){var n=t.pickList.indexOf(e);-1!==n&&t.pickList.splice(n,1)}}var BS={renderer:null,selectionPoint:[0,0,0],pickPosition:[0,0,0],pickFromList:0,pickList:[]};function NS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BS,n),Ot.obj(e,t),Ot.get(e,t,["renderer"]),Ot.getArray(e,t,["selectionPoint","pickPosition"]),Ot.setGet(e,t,["pickFromList","pickList"]),LS(e,t)}var kS={newInstance:Ot.newInstance(NS,"vtkAbstractPicker"),extend:NS};function VS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _S=Ot.vtkErrorMacro,FS=Ot.vtkWarningMacro;function GS(e,t){t.classHierarchy.push("vtkPicker");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VS(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.intersectWithLine=function(e,t,n,r){if(!r)return Number.MAX_VALUE;for(var a=r.getCenter(),o=[],i=0;i<3;i++)o[i]=t[i]-e[i];var s=Cr(o,o);return 0===s?2:(o[0]*(a[0]-e[0])+o[1]*(a[1]-e[1])+o[2]*(a[2]-e[2]))/s},e.pick=function(r,a){3!==r.length&&FS("vtkPicker::pick: selectionPt needs three components");var o,i,s,c,u,l,d,p,f,g,m,y=r[0],b=r[1],x=r[2],T=[],S=[],P=[],w=[],C=[],O=[],A=0,I=[],M=!1,R=new Float64Array(4),E=new Float64Array(4),D=of.newInstance(),L=[],B=[],N=a.getRenderWindow().getViews()[0];if(n.initialize(),t.actors=[],t.pickedPositions=[],t.mapperPosition[0]=0,t.mapperPosition[1]=0,t.mapperPosition[2]=0,t.mapper=null,t.dataSet=null,t.globalTMin=Number.MAX_VALUE,t.renderer=a,t.selectionPoint[0]=y,t.selectionPoint[1]=b,t.selectionPoint[2]=x,a){var k=a.getActiveCamera();o=k.getPosition(),i=k.getFocalPoint();var V=N.getViewportSize(a),_=V[0]/V[1];T=a.worldToNormalizedDisplay(i[0],i[1],i[2],_),x=(T=N.normalizedDisplayToDisplay(T[0],T[1],T[2]))[2];var F=N.displayToNormalizedDisplay(y,b,x);s=a.normalizedDisplayToWorld(F[0],F[1],F[2],_);for(var G=0;G<3;G++)t.pickPosition[G]=s[G];for(var U=0;U<3;U++)S[U]=t.pickPosition[U]-o[U];for(var j=0;j<3;j++)P[j]=i[j]-o[j];Ir(P);var z=Cr(P,S);if(0!==z){if(c=k.getClippingRange(),k.getParallelProjection()){u=c[0]-z,l=c[1]-z;for(var W=0;W<3;W++)w[W]=t.pickPosition[W]+u*P[W],C[W]=t.pickPosition[W]+l*P[W]}else{u=c[0]/z,l=c[1]/z;for(var H=0;H<3;H++)w[H]=o[H]+u*S[H],C[H]=o[H]+l*S[H]}w[3]=1,C[3]=1,d=a.getViewport(),a.getRenderWindow()&&(O=a.getRenderWindow().getViews()[0].getSize()),p=O[0]*d[0],f=O[1]*d[1];var K=N.displayToNormalizedDisplay(p,f,x);g=a.normalizedDisplayToWorld(K[0],K[1],K[2],_),p=O[0]*d[2],f=O[1]*d[3];var X=N.displayToNormalizedDisplay(p,f,x);m=a.normalizedDisplayToWorld(X[0],X[1],X[2],_);for(var q=0;q<3;q++)A+=(m[q]-g[q])*(m[q]-g[q]);A=Math.sqrt(A)*t.tolerance,I=t.pickFromList?t.pickList:a.getActors();var Y=[];I.forEach((function(n){var r=n.getMapper();if(M=n.getNestedPickable()&&n.getNestedVisibility(),n.getProperty().getOpacity()<=0&&(M=!1),M){t.transformMatrix=n.getMatrix().slice(0),v(t.transformMatrix,t.transformMatrix),h(t.transformMatrix,t.transformMatrix);var a=[t.transformMatrix[0],t.transformMatrix[1],t.transformMatrix[2]],o=[t.transformMatrix[4],t.transformMatrix[5],t.transformMatrix[6]],i=[t.transformMatrix[8],t.transformMatrix[9],t.transformMatrix[10]];Y[0]=Ar(a),Y[1]=Ar(o),Y[2]=Ar(i),us(R,w,t.transformMatrix),us(E,C,t.transformMatrix),R[0]/=R[3],R[1]/=R[3],R[2]/=R[3],E[0]/=E[3],E[1]/=E[3],E[2]/=E[3];for(var s=0;s<3;s++)S[s]=E[s]-R[s];if(r?(D.setBounds(r.getBounds()),D.inflate(A)):D.reset(),D.intersectBox(R,S,B,L)&&(L[0]=e.intersectWithLine(R,E,.333*A*(Y[0]+Y[1]+Y[2]),r),L[0]<Number.MAX_VALUE)){var c=[];c[0]=(1-L[0])*w[0]+L[0]*C[0],c[1]=(1-L[0])*w[1]+L[0]*C[1],c[2]=(1-L[0])*w[2]+L[0]*C[2];for(var u=-1,l=0;l<t.actors.length;l++)if(t.actors[l]===n){u=l;break}if(-1===u)t.actors.push(n),t.pickedPositions.push(c);else{var d=t.pickedPositions[u],p=Rr(w,d);Rr(w,c)<p&&(t.pickedPositions[u]=c)}}}return e.invokePickChange(t.pickedPositions),1}))}else FS("Picker::Pick Cannot process points")}else _S("Picker::Pick Must specify renderer")}}var US={tolerance:.025,mapperPosition:[0,0,0],mapper:null,dataSet:null,actors:[],pickedPositions:[],transformMatrix:null,globalTMin:Number.MAX_VALUE};function jS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,US,n),kS.extend(e,t,n),Ot.setGet(e,t,["tolerance"]),Ot.setGetArray(e,t,["mapperPosition"],3),Ot.get(e,t,["mapper","dataSet","actors","pickedPositions"]),Ot.event(e,t,"pickChange"),GS(e,t)}var zS={newInstance:Ot.newInstance(jS,"vtkPicker"),extend:jS},WS=Ot.vtkErrorMacro;function HS(e,t){t.classHierarchy.push("vtkPointPicker"),e.intersectWithLine=function(n,r,a,o){var i=Number.MAX_VALUE;if(o.isA("vtkImageMapper")||o.isA("vtkImageArrayMapper")){var s=o.intersectWithLineForPointPicking(n,r);s&&(i=s.t,t.pointIJK=s.ijk)}else o.isA("vtkMapper")&&(i=e.intersectActorWithLine(n,r,a,o));return i},e.intersectActorWithLine=function(e,n,r,a){var o=a.getInputData(),i=0,s=o.getPoints().getNumberOfPoints();if(s<=i)return 2;for(var c=[],u=0;u<3;u++)c[u]=n[u]-e[u];var l,d=Cr(c,c);if(0===d)return WS("Cannot process points"),2;var p=-1,f=Number.MAX_VALUE,g=Number.MAX_VALUE,m=[],v=[],h=o.getPoints();if(t.useCells)for(var y=o.getPolys().getData(),b=y[0],x=o.getPolys().getNumberOfCells(),T=0;T<x;T++)for(var S=T*b+1,P=S+b,w=S;w<P;w++){var C=y[w];if(h.getPoint(C,v),(l=(c[0]*(v[0]-e[0])+c[1]*(v[1]-e[1])+c[2]*(v[2]-e[2]))/d)>=0&&l<=1&&l<=f+t.tolerance){for(var O=0,A=0;A<3;A++){m[A]=e[A]+l*c[A];var I=Math.abs(v[A]-m[A]);I>O&&(O=I)}O<=r&&O<g&&(p=i,g=O,f=l)}}else for(i=0;i<s;i++)if(h.getPoint(i,v),(l=(c[0]*(v[0]-e[0])+c[1]*(v[1]-e[1])+c[2]*(v[2]-e[2]))/d)>=0&&l<=1&&l<=f+t.tolerance){for(var M=0,R=0;R<3;R++){m[R]=e[R]+l*c[R];var E=Math.abs(v[R]-m[R]);E>M&&(M=E)}M<=r&&M<g&&(p=i,g=M,f=l)}return t.pointId=p,f}}var KS={pointId:-1,pointIJK:[],useCells:!1};function XS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,KS,n),zS.extend(e,t,n),Ot.getArray(e,t,["pointIJK"]),Ot.get(e,t,["pointId"]),Ot.setGet(e,t,["useCells"]),HS(e,t)}var qS={newInstance:Ot.newInstance(XS,"vtkPointPicker"),extend:XS};function YS(e,t){t.classHierarchy.push("vtkSphereSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],a=r?r.getPoints().getDataType():t.pointType;r=Gi.newInstance();var o=0,i=t.thetaResolution,s=t.startTheta<t.endTheta?t.startTheta:t.endTheta;s*=Math.PI/180;var c=t.endTheta>t.startTheta?t.endTheta:t.startTheta;c*=Math.PI/180;var u=t.startPhi<t.endPhi?t.startPhi:t.endPhi;u*=Math.PI/180;var l=t.endPhi>t.startPhi?t.endPhi:t.startPhi;l*=Math.PI/180,Math.abs(s-c)<2*Math.PI&&++i;var d=(c-s)/t.thetaResolution,p=t.startPhi<=0?1:0,f=t.phiResolution+(t.endPhi>=180?-1:0),g=t.phiResolution*i+2,m=2*t.phiResolution*t.thetaResolution,v=0,h=Ot.newTypedArray(a,3*g),y=new Float32Array(3*g),b=0,x=new Uint32Array(5*m);t.startPhi<=0&&(h[3*v+0]=t.center[0],h[3*v+1]=t.center[1],h[3*v+2]=t.center[2]+t.radius,y[3*v+0]=0,y[3*v+1]=0,y[3*v+2]=1,v++,o++),t.endPhi>=180&&(h[3*v+0]=t.center[0],h[3*v+1]=t.center[1],h[3*v+2]=t.center[2]-t.radius,y[3*v+0]=0,y[3*v+1]=0,y[3*v+2]=-1,v++,o++);for(var T=t.phiResolution-o,S=(l-u)/(t.phiResolution-1),P=0;P<i;P++)for(var w=s+P*d,C=p;C<f;C++){var O=u+C*S,A=t.radius*Math.sin(O);y[3*v+0]=A*Math.cos(w),y[3*v+1]=A*Math.sin(w),y[3*v+2]=t.radius*Math.cos(O),h[3*v+0]=y[3*v+0]+t.center[0],h[3*v+1]=y[3*v+1]+t.center[1],h[3*v+2]=y[3*v+2]+t.center[2];var I=Math.sqrt(y[3*v+0]*y[3*v+0]+y[3*v+1]*y[3*v+1]+y[3*v+2]*y[3*v+2]);I=0===I?1:I,y[3*v+0]/=I,y[3*v+1]/=I,y[3*v+2]/=I,v++}var M=T*i;if(Math.abs(s-c)<2*Math.PI&&--i,t.startPhi<=0)for(var R=0;R<i;R++)x[b++]=3,x[b++]=T*R+o,x[b++]=T*(R+1)%M+o,x[b++]=0;if(t.endPhi>=180)for(var E=T-1+o,D=0;D<i;D++)x[b++]=3,x[b++]=T*D+E,x[b++]=o-1,x[b++]=T*(D+1)%M+E;for(var L=0;L<i;L++)for(var B=0;B<T-1;B++){var N=T*L+B+o,k=N+1,V=(T*(L+1)+B)%M+o+1;t.latLongTessellation?(x[b++]=4,x[b++]=N,x[b++]=k,x[b++]=V,x[b++]=V-1):(x[b++]=3,x[b++]=N,x[b++]=k,x[b++]=V,x[b++]=3,x[b++]=N,x[b++]=V,x[b++]=V-1)}h=h.subarray(0,3*v),r.getPoints().setData(h,3),y=y.subarray(0,3*v);var _=Ba.newInstance({name:"Normals",values:y,numberOfComponents:3});r.getPointData().setNormals(_),x=x.subarray(0,b),r.getPolys().setData(x,1),n[0]=r}}}var ZS={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float64Array"};function QS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ZS,n),Ot.obj(e,t),Ot.setGet(e,t,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),Ot.setGetArray(e,t,["center"],3),Ot.algo(e,t,0,1),YS(e,t)}var JS={newInstance:Ot.newInstance(QS,"vtkSphereSource"),extend:QS},$S=Jh.States;function eP(e,t){t.classHierarchy.push("vtkMouseCameraUnicamRotateManipulator"),t.picker=qS.newInstance(),t.downPoint=[0,0,0],t.isDot=!1,t.state=$S.IS_NONE;var n=JS.newInstance();n.setThetaResolution(6),n.setPhiResolution(6);var r=Cv.newInstance();r.setInputConnection(n.getOutputPort()),t.focusSphere=jm.newInstance(),t.focusSphere.setMapper(r),t.focusSphere.getProperty().setColor(.89,.66,.41),t.focusSphere.getProperty().setAmbient(1),t.focusSphere.getProperty().setDiffuse(0),t.focusSphere.getProperty().setRepresentationToWireframe();var a=function(e){if(e){if(t.useWorldUpVec){var n=e.findPokedRenderer().getActiveCamera();Vr(t.worldUpVec,n.getViewPlaneNormal())||n.setViewUp(t.worldUpVec)}e.render()}},o=function(e,t){var n=t.findPokedRenderer(),r=fe(t.getView().getViewportSize(n),2),a=r[0],o=r[1];return{x:2*e.x/a-1,y:2*e.y/o-1}},i=function(e,t,n,r,a,o,i,s){var c=e.getPosition(),u=e.getFocalPoint(),l=e.getViewUp();c[3]=1,u[3]=1,l[3]=0;var d=m(new Float64Array(16));T(d,d,[t,n,r]),P(d,d,s,[a,o,i]),T(d,d,[-t,-n,-r]);var p=[],f=[];Cn(p,c,d),Cn(f,u,d),m(d),P(d,d,s,[a,o,i]);var g=[];Cn(g,l,d),e.setPosition.apply(e,p),e.setFocalPoint.apply(e,f),e.setViewUp.apply(e,g)},s=function(e){!function(e){var n,r=e.findPokedRenderer();(n=t.focusSphere).setPosition.apply(n,ve(t.downPoint));var a=r.getActiveCamera(),o=a.getPosition(),i=[];Tr(t.downPoint,o,i),a.getParallelProjection()&&Sr(i,a.getParallelScale());var s=a.getDirectionOfProjection();Ir(s);var c=.02*Cr(s,i)*t.focusSphereRadiusFactor;t.focusSphere.setScale(c,c,c)}(e),e.findPokedRenderer().addActor(t.focusSphere),t.isDot=!0};e.onButtonDown=function(e,n,r){t.buttonPressed=!0,t.startPosition=r,t.previousPosition=r;var a=o(r,e);if(Math.abs(a.x)>.9||Math.abs(a.y)>.9)return t.state=$S.IS_ROTATE,void s(e);t.downPoint=function(e,n){var r=e.findPokedRenderer(),a=null;if(t.useHardwareSelector){var o=e.getView().getSelector();o.setCaptureZValues(!0),o.setFieldAssociation(Jo.FIELD_ASSOCIATION_POINTS),o.attach(e.getView(),r),o.setArea(n.x,n.y,n.x,n.y),a=o.select()}return a&&0!==a.length?Array.from(a[0].getProperties().worldPosition):function(e,n){var r=e.findPokedRenderer();t.picker.pick([n.x,n.y,n.z],r);var a=t.picker.getPickedPositions();if(0===a.length)return t.picker.getPickPosition();var o=r.getActiveCamera().getPosition();return a.sort((function(e,t){return Rr(e,o)-Rr(t,o)})),a[0]}(e,n)}(e,r),t.isDot?t.state=$S.IS_ROTATE:(t.state=$S.IS_NONE,t.displayFocusSphereOnButtonDown&&s(e))},e.onMouseMove=function(n,r,s){t.buttonPressed&&(t.state=$S.IS_ROTATE,function(n,r){var s,c=n.findPokedRenderer(),u=o(r,n),l=o(t.previousPosition,n),d=t.focusSphere.getPosition(),p=(s=n.getView()).worldToDisplay.apply(s,ve(d).concat([c]));p=[(p=o({x:d[0],y:d[1]},n)).x,p.y,d[2]];var f=Math.pow(1+Math.abs(p[0]),2),g=[l.x,0,0],m=[u.x,0,0],v=Math.pow(g[0],2),h=Math.pow(m[0],2),y=v>f?0:Math.sqrt(f-v),b=h>f?0:Math.sqrt(f-h),x=[g[0],0,y];Ir(x);var T=[m[0],0,b];Ir(T);var S=Cr(x,T);if(Math.abs(S)>1e-4){var P=-2*Math.acos(ua(S,-1,1))*Math.sign(u.x-l.x)*e.getRotationFactor(),w=c.getActiveCamera(),C=t.useWorldUpVec?t.worldUpVec:w.getViewUp();Ir(C),i.apply(void 0,[w].concat(ve(d),ve(C),[P]));var O=[];Tr(w.getPosition(),r,O);var A=(u.y-l.y)*e.getRotationFactor();Ir(O);var I=w.getViewPlaneNormal(),M=[];Or(w.getViewUp(),I,M),Ir(M),t.useWorldUpVec&&(Cr(C,I)>.99&&A<0&&(A=0),Cr(C,I)<-.99&&A>0&&(A=0)),i.apply(void 0,[w].concat(ve(d),M,[A])),t.useWorldUpVec&&!Vr(C,w.getViewPlaneNormal())&&w.setViewUp.apply(w,ve(C)),t.previousPosition=r,c.resetCameraClippingRange(),a(n)}}(n,s),t.previousPosition=s)},e.onButtonUp=function(e){var n=e.findPokedRenderer();t.buttonPressed=!1,(t.state!==$S.IS_ROTATE||t.isDot)&&(t.state===$S.IS_ROTATE?function(e){e.findPokedRenderer().removeActor(t.focusSphere),t.isDot=!1}(e):t.state===$S.IS_NONE&&s(e),n.resetCameraClippingRange(),a(e))},e.getFocusSphereColor=function(){t.focusSphere.getProperty().getColor()},e.setFocusSphereColor=function(e,n,r){t.focusSphere.getProperty().setColor(e,n,r)}}var tP={focusSphereRadiusFactor:1,displayFocusSphereOnButtonDown:!0,useHardwareSelector:!0,useWorldUpVec:!0,worldUpVec:[0,0,1]};function nP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tP,n),Ot.obj(e,t),qT.extend(e,t,n),rS.extend(e,t,n),Ot.setGet(e,t,["focusSphereRadiusFactor","displayFocusSphereOnButtonDown","useHardwareSelector","useWorldUpVec"]),Ot.get(e,t,["state"]),Ot.getArray(e,t,["downPoint"],3),Ot.setGetArray(e,t,["worldUpVec"],3),eP(e,t)}var rP={newInstance:Ot.newInstance(nP,"vtkMouseCameraUnicamRotateManipulator"),extend:nP},aP=Jh.States;function oP(e,t){t.classHierarchy.push("vtkMouseCameraUnicamManipulator"),t.state=aP.IS_NONE,t.rotateManipulator=rP.newInstance({button:t.button,shift:t.shift,control:t.control,alt:t.alt,dragEnabled:t.dragEnabled,scrollEnabled:t.scrollEnabled,displayFocusSphereOnButtonDown:!1});var n=function(e,t){var n=t.findPokedRenderer(),r=fe(t.getView().getViewportSize(n),2),a=r[0],o=r[1];return{x:2*e.x/a-1,y:2*e.y/o-1}},r=function(e,t){var n=t.findPokedRenderer().getActiveCamera(),r=[0,0,0];Tr(e,n.getPosition(),r),n.getParallelProjection()&&Sr(r,n.getParallelScale());var a=n.getViewPlaneNormal();Ir(a);var o=Cr(r,a),i=sr(n.getViewAngle()),s=t.findPokedRenderer(),c=fe(t.getView().getViewportSize(s),2),u=c[0]/c[1]*(2*o*Math.tan(i/2)/2),l=2*o*Math.tan(i/2)/2,d=n.getViewUp(),p=[];return Or(d,a,p),Or(a,p,d),Ir(p),Ir(d),Sr(p,u),Sr(d,l),{rightV:p,upV:d}};e.onButtonDown=function(e,n,r){t.buttonPressed=!0,t.startPosition=r,t.previousPosition=r,t.time=Date.now()/1e3,t.dist=0,t.rotateManipulator.onButtonDown(e,n,r),t.downPoint=t.rotateManipulator.getDownPoint()},e.onMouseMove=function(e,a,o){if(t.buttonPressed){if(t.rotateManipulator.getState()===aP.IS_ROTATE)t.rotateManipulator.onMouseMove(e,a,o);else switch(t.state){case aP.IS_NONE:!function(e,r){var a=n(r,e),o=n(t.previousPosition,e),i={x:a.x-o.x,y:a.y-o.y};t.previousPosition=r;var s=Date.now()/1e3-t.time;t.dist+=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2));var c={x:r.x-t.startPosition.x,y:r.y-t.startPosition.y},u=Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y,2));Math.abs(c.y)/u>.9&&s>.05?t.state=aP.IS_DOLLY:(s>=.1||t.dist>=.03)&&(Math.abs(c.x)/u>.6?t.state=aP.IS_PAN:t.state=aP.IS_DOLLY)}(e,o);break;case aP.IS_PAN:!function(e,a){var o=e.findPokedRenderer(),i=n(a,e),s=n(t.previousPosition,e),c=i.x-s.x,u=i.y-s.y,l=o.getActiveCamera();t.previousPosition=a;for(var d=r(t.downPoint,e),p=d.rightV,f=d.upV,g=[],m=0;m<3;m++)g[m]=c*p[m]+u*f[m];l.translate.apply(l,g),o.resetCameraClippingRange(),e.render()}(e,o);break;case aP.IS_DOLLY:!function(e,a){var o=e.findPokedRenderer(),i=n(a,e),s=n(t.previousPosition,e),c={x:i.x-s.x,y:i.y-s.y},u=o.getActiveCamera(),l=u.getPosition();if(u.getParallelProjection())u.zoom(1-c.y);else{var d=[];Tr(t.downPoint,l,d),Sr(d,-4*c.y),u.translate.apply(u,d)}var p=r(t.downPoint,e).rightV;Sr(p,c.x),u.translate.apply(u,ve(p)),o.resetCameraClippingRange(),e.render()}(e,o)}t.previousPosition=o}},e.onButtonUp=function(e){t.buttonPressed=!1,t.state===aP.IS_NONE&&t.rotateManipulator.onButtonUp(e),t.state=aP.IS_NONE},e.getUseWorldUpVec=function(){return t.rotateManipulator.getUseWorldUpVec()},e.setUseWorldUpVec=function(e){t.rotateManipulator.setUseWorldUpVec(e)},e.getWorldUpVec=function(){return t.rotateManipulator.getWorldUpVec()},e.setWorldUpVec=function(e,n,r){t.rotateManipulator.setWorldUpVec(e,n,r)},e.getUseHardwareSelector=function(){return t.rotateManipulator.getUseHardwareSelector()},e.setUseHardwareSelector=function(e){t.rotateManipulator.setUseHardwareSelector(e)},e.getFocusSphereColor=function(){t.rotateManipulator.getFocusSphereColor()},e.setFocusSphereColor=function(e,n,r){t.rotateManipulator.setFocusSphereColor(e,n,r)},e.getFocusSphereRadiusFactor=function(){return t.rotateManipulator.getFocusSphereRadiusFactor()},e.setFocusSphereRadiusFactor=function(e){t.rotateManipulator.setFocusSphereRadiusFactor(e)}}var iP={};function sP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,iP,n),Ot.obj(e,t),qT.extend(e,t,n),rS.extend(e,t,n),oP(e,t)}var cP={newInstance:Ot.newInstance(sP,"vtkMouseCameraUnicamManipulator"),extend:sP};function uP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballFirstPersonManipulator");var n={interactor:null,renderer:null,previousPosition:null};e.onButtonDown=function(r,a,o){n.previousPosition=o,t.usePointerLock&&!r.isPointerLocked()&&(Object.assign(n,{interactor:r,renderer:a}),r.requestPointerLock(),e.startPointerLockInteraction())},e.startPointerLockInteraction=function(){var t=n.interactor;document.addEventListener("mousemove",e.onPointerLockMove);var r=null;r=t.onEndPointerLock((function(){document.removeEventListener("mousemove",e.onPointerLockMove),r.unsubscribe()}))},e.onPointerLockMove=function(n){var r=t.sensitivity,a=-1*n.movementX*r,o=-1*n.movementY*r;e.moveCamera(a,o)},e.onMouseMove=function(r,a,o){if(o){var i=n.previousPosition,s=t.sensitivity,c=(i.x-o.x)*s,u=(o.y-i.y)*s;Object.assign(n,{interactor:r,renderer:a}),e.moveCamera(c,u),n.previousPosition=o}},e.moveCamera=function(e,r){var a=n.renderer,o=n.interactor,i=a.getActiveCamera(),s=t.numAnimationSteps,c=e/s,u=r/s,l=performance.now().toString(),d="".concat("vtkMouseCameraTrackballFirstPersonManipulator",".").concat(l),p=0,f=null;o.requestAnimation(d),f=o.onAnimation((function(){return i.yaw(c),i.pitch(u),i.orthogonalizeViewUp(),void((p+=1)===s&&(f.unsubscribe(),a.resetCameraClippingRange(),o.getLightFollowCamera()&&a.updateLightsGeometryToFollowCamera(),setTimeout((function(){n.interactor.cancelAnimation(d)}),0)))}))}}var lP={numAnimationSteps:5,sensitivity:.05,usePointerLock:!0};function dP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lP,n),Ot.obj(e,t),qT.extend(e,t,n),rS.extend(e,t,n),Ot.setGet(e,t,["numAnimationSteps","sensitivity","usePointerLock"]),uP(e,t)}var pP={newInstance:Ot.newInstance(dP,"vtkMouseCameraTrackballFirstPersonManipulator"),extend:dP};function fP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),o=new Float64Array(16),i=new Float64Array(3),s=new Float64Array(3),c=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,u,l){if(l){var d=u.getActiveCamera(),p=d.getPosition(),f=d.getFocalPoint();m(o);var g=t.center,v=t.rotationFactor;t.useFocalPointAsCenterOfRotation&&(g[0]=f[0],g[1]=f[1],g[2]=f[2]);var h=t.previousPosition.x-l.x,y=t.previousPosition.y-l.y,b=e.getView().getViewportSize(u),x=d.getViewUp();if(t.useWorldUpVec){var S=new Float64Array(3);$t(S,t.worldUpVec),Sr(S,Cr(p,t.worldUpVec)/Cr(t.worldUpVec,t.worldUpVec)),xr(g,S,S),T(o,o,S),P(o,o,sr(360*h/b[0]*v),t.worldUpVec),S[0]=-S[0],S[1]=-S[1],S[2]=-S[2],T(o,o,S),T(o,o,g)}else T(o,o,g),P(o,o,sr(360*h/b[0]*v),x);Or(d.getDirectionOfProjection(),x,i),P(o,o,sr(-360*y/b[1]*v),i),s[0]=-g[0],s[1]=-g[1],s[2]=-g[2],T(o,o,s),Cn(n,p,o),Cn(r,f,o),c[0]=x[0]+p[0],c[1]=x[1]+p[1],c[2]=x[2]+p[2],Cn(a,c,o),d.setPosition(n[0],n[1],n[2]),d.setFocalPoint(r[0],r[1],r[2]),d.setViewUp(a[0]-n[0],a[1]-n[1],a[2]-n[2]),d.orthogonalizeViewUp(),u.resetCameraClippingRange(),e.getLightFollowCamera()&&u.updateLightsGeometryToFollowCamera(),t.previousPosition=l}}}var gP={useWorldUpVec:!1,worldUpVec:[0,1,0],useFocalPointAsCenterOfRotation:!1};function mP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gP,n),Ot.obj(e,t),rS.extend(e,t,n),qT.extend(e,t,n),Ot.setGet(e,t,["useWorldUpVec"]),Ot.setGetArray(e,t,["worldUpVec"],3),Ot.setGet(e,t,["useFocalPointAsCenterOfRotation"]),fP(e,t)}var vP={newInstance:Ot.newInstance(mP,"vtkMouseCameraTrackballRotateManipulator"),extend:mP};function hP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),o=new Float64Array(16),i=new Float64Array(3),s=new Float64Array(3),c=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(u,l,d){if(d){var p=l.getActiveCamera(),f=p.getPosition(),g=p.getFocalPoint(),v=p.getViewUp();n[0]=g[0]-f[0],n[1]=g[1]-f[1],n[2]=g[2]-f[2],e.computeDisplayCenter(u.getInteractorStyle(),l);var h=t.previousPosition.x-t.displayCenter[0],y=d.x-t.displayCenter[0],b=t.previousPosition.y-t.displayCenter[1],x=d.y-t.displayCenter[1];if(!(0===y&&0===x||0===h&&0===b)){var S=cr((h*x-b*y)/(Math.sqrt(h*h+b*b)*Math.sqrt(y*y+x*x))),w=t.center;m(o),a[0]=-w[0],a[1]=-w[1],a[2]=-w[2],T(o,o,w),P(o,o,sr(S),n),T(o,o,a),Cn(i,f,o),Cn(s,g,o),r[0]=v[0]+f[0],r[1]=v[1]+f[1],r[2]=v[2]+f[2],Cn(c,r,o),p.setPosition(i[0],i[1],i[2]),p.setFocalPoint(s[0],s[1],s[2]),p.setViewUp(c[0]-i[0],c[1]-i[1],c[2]-i[2]),p.orthogonalizeViewUp(),l.resetCameraClippingRange(),u.getLightFollowCamera()&&l.updateLightsGeometryToFollowCamera(),t.previousPosition=d}}}}var yP={};function bP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yP,n),Ot.obj(e,t),qT.extend(e,t,n),rS.extend(e,t,n),hP(e,t)}var xP={newInstance:Ot.newInstance(bP,"vtkMouseCameraTrackballRollManipulator"),extend:bP};function TP(e){return e*e}function SP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");var n=vP.newInstance(),r=xP.newInstance(),a=null;e.onButtonDown=function(t,o,i){var s=t.getView().getViewportSize(o),c=[.5*s[0],.5*s[1]],u=.9*function(e,t){return e<t?t:e}(c[0],c[1]),l=TP(c[0]-i.x)+TP(c[1]-i.y);(a=u*u>l?n:r).setButton(e.getButton()),a.setShift(e.getShift()),a.setControl(e.getControl()),a.setCenter(e.getCenter()),a.onButtonDown(t,i)},e.onButtonUp=function(e){a&&a.onButtonUp(e)},e.onMouseMove=function(e,t,n){a&&a.onMouseMove(e,t,n)}}var PP={};function wP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PP,n),Ot.obj(e,t),rS.extend(e,t,n),qT.extend(e,t,n),SP(e,t)}var CP={newInstance:Ot.newInstance(wP,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:wP};function OP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,n,r){if(r){var a=r,o=t.previousPosition;t.previousPosition=r;var i=n.getActiveCamera(),s=i.getPosition(),c=i.getFocalPoint();if(i.getParallelProjection()){i.orthogonalizeViewUp();var u=i.getViewUp(),l=[0,0,0];Or(i.getViewPlaneNormal(),u,l);var d=e.getView().getViewportSize(n)[1],p=(a.x-o.x)/d,f=(o.y-a.y)/d,g=i.getParallelScale();f*=2*g;var m=l[0]*(p*=2*g)+u[0]*f;s[0]+=m,c[0]+=m,m=l[1]*p+u[1]*f,s[1]+=m,c[1]+=m,m=l[2]*p+u[2]*f,s[2]+=m,c[2]+=m,i.setPosition(s[0],s[1],s[2]),i.setFocalPoint(c[0],c[1],c[2])}else{var v=t.center,h=e.getInteractorStyle(),y=h.computeWorldToDisplay(n,v[0],v[1],v[2])[2],b=h.computeDisplayToWorld(n,a.x,a.y,y),x=h.computeDisplayToWorld(n,o.x,o.y,y),T=[s[0]+(x[0]-b[0]),s[1]+(x[1]-b[1]),s[2]+(x[2]-b[2])],S=[c[0]+(x[0]-b[0]),c[1]+(x[1]-b[1]),c[2]+(x[2]-b[2])];i.setPosition(T[0],T[1],T[2]),i.setFocalPoint(S[0],S[1],S[2])}n.resetCameraClippingRange(),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}}var AP={};function IP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,AP,n),Ot.obj(e,t),qT.extend(e,t,n),rS.extend(e,t,n),OP(e,t)}var MP={newInstance:Ot.newInstance(IP,"vtkMouseCameraTrackballPanManipulator"),extend:IP};function RP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r;var a=e.getView().getViewportSize(n),o=n.getActiveCamera(),i=t.flipDirection?-1:1;if(o.getParallelProjection())t.zoomScale=1.5/a[1]*i;else{var s=o.getClippingRange();t.zoomScale=s[1]/a[1]*1.5*i}},e.onMouseMove=function(e,n,r){if(r){var a=t.previousPosition.y-r.y,o=n.getActiveCamera();if(o.getParallelProjection()){var i=a*t.zoomScale;o.setParallelScale((1-i)*o.getParallelScale())}else{var s=o.getPosition(),c=o.getFocalPoint(),u=o.getDirectionOfProjection(),l=a*t.zoomScale,d=l*u[0];s[0]+=d,c[0]+=d,d=l*u[1],s[1]+=d,c[1]+=d,d=l*u[2],s[2]+=d,c[2]+=d,o.getFreezeFocalPoint()||o.setFocalPoint(c[0],c[1],c[2]),o.setPosition(s[0],s[1],s[2]),n.resetCameraClippingRange()}e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=r}},e.onScroll=function(e,t,n){if(n){var r=t.getActiveCamera(),a=1-n/10;r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/a):(r.dolly(a),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var EP={zoomScale:0,flipDirection:!1};function DP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,EP,n),Ot.obj(e,t),rS.extend(e,t,n),qT.extend(e,t,n),Ot.setGet(e,t,["flipDirection"]),RP(e,t)}var LP={newInstance:Ot.newInstance(DP,"vtkMouseCameraTrackballZoomManipulator"),extend:DP};function BP(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");var n=e.onButtonDown;e.onButtonDown=function(e,r,a){n(e,r,a),t.zoomPosition=a},e.onMouseMove=function(e,n,r){if(r){var a=(t.previousPosition.y-r.y)*t.zoomScale;hy.dollyToPosition(1-a,t.zoomPosition,n,e),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=r}},e.onScroll=function(e,t,n,r){if(n&&r){var a=1-.1*n;hy.dollyToPosition(a,r,t,e),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var NP={zoomPosition:null};function kP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,NP,n),LP.extend(e,t,n),BP(e,t)}var VP={newInstance:Ot.newInstance(kP,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:kP};function _P(e,t){t.classHierarchy.push("vtkMouseRangeManipulator");var n=new Map;function r(e,t){return t*((e.max-e.min)/(e.step+1))}function a(e,r){var a=e.getValue(),o=e.exponentialScroll?Math.pow(e.scale,Math.log2(Math.abs(t.interactionNetDelta)+2)):e.scale,i=r*(o=Math.abs(o)*Math.sign(e.scale))+n.get(e),s=Math.floor(Math.abs(i/e.step)),c=a+e.step*s*Math.sign(i);c=Math.max(c,e.min),(c=Math.min(c,e.max))!==a?(e.setValue(c),n.set(e,0)):c===e.min&&i<0||c===e.max&&i>0?n.set(e,0):n.set(e,i)}e.setHorizontalListener=function(r,a,o,i,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=Number.isFinite(i)?function(){return i}:i;t.horizontalListener={min:r,max:a,step:o,getValue:l,setValue:s,scale:c,exponentialScroll:u},n.set(t.horizontalListener,0),e.modified()},e.setVerticalListener=function(r,a,o,i,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=Number.isFinite(i)?function(){return i}:i;t.verticalListener={min:r,max:a,step:o,getValue:l,setValue:s,scale:c,exponentialScroll:u},n.set(t.verticalListener,0),e.modified()},e.setScrollListener=function(r,a,o,i,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];o<0&&Xe("Value of step cannot be negative. If you want to invert the scrolling direction, use a negative scale value instead.");var l=Math.abs(o),d=Number.isFinite(i)?function(){return i}:i;t.scrollListener={min:r,max:a,step:l,getValue:d,setValue:s,scale:c,exponentialScroll:u},n.set(t.scrollListener,0),e.modified()},e.removeHorizontalListener=function(){t.horizontalListener&&(n.delete(t.horizontalListener),delete t.horizontalListener,e.modified())},e.removeVerticalListener=function(){t.verticalListener&&(n.delete(t.verticalListener),delete t.verticalListener,e.modified())},e.removeScrollListener=function(){t.scrollListener&&(n.delete(t.scrollListener),delete t.scrollListener,e.modified())},e.removeAllListeners=function(){e.removeHorizontalListener(),e.removeVerticalListener(),e.removeScrollListener()},e.onButtonDown=function(e,n,r){t.previousPosition=r,t.interactionNetDelta=0;var a=e.getView(),o=a.getContainerSize()[0]/a.getSize()[0],i=a.getViewportSize(n);t.containerSize=i.map((function(e){return e*o}))},e.onButtonUp=function(e){e.exitPointerLock()},e.startPointerLockEvent=function(t,n){var r=function(r){e.onPointerLockMove(t,n,r)};document.addEventListener("mousemove",r);var a=null;a=null==t?void 0:t.onEndPointerLock((function(){var e;document.removeEventListener("mousemove",r),null===(e=a)||void 0===e||e.unsubscribe()}))},e.onPointerLockMove=function(n,r,a){n.isPointerLocked()&&null!=t.previousPosition&&(t.previousPosition.x+=a.movementX,t.previousPosition.y+=a.movementY,e.onMouseMove(n,r,t.previousPosition))},e.onMouseMove=function(n,o,i){if((t.verticalListener||t.horizontalListener)&&(t.usePointerLock&&!n.isPointerLocked()&&(n.requestPointerLock(),e.startPointerLockEvent(n,o)),i)){if(t.horizontalListener){var s=(i.x-t.previousPosition.x)/t.containerSize[0],c=r(t.horizontalListener,s);t.interactionNetDelta+=c,a(t.horizontalListener,c)}if(t.verticalListener){var u=(i.y-t.previousPosition.y)/t.containerSize[1],l=r(t.verticalListener,u);t.interactionNetDelta+=l,a(t.verticalListener,l)}t.previousPosition=i}},e.onScroll=function(e,n,r){t.scrollListener&&r&&(t.interactionNetDelta+=r*t.scrollListener.step,a(t.scrollListener,r*t.scrollListener.step))},e.onStartScroll=function(){t.interactionNetDelta=0}}var FP={horizontalListener:null,verticalListener:null,scrollListener:null};function GP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FP,n),Ot.obj(e,t),rS.extend(e,t,n),Ot.setGet(e,t,["usePointerLock"]),_P(e,t)}var UP={newInstance:Ot.newInstance(GP,"vtkMouseRangeManipulator"),extend:GP};function jP(e,t){t.classHierarchy.push("vtkVRButtonPanManipulator"),e.onButton3D=function(e,t,n,r,a,o){o?e.startCameraPose():n===Qh.IS_CAMERA_POSE&&e.endCameraPose()},e.onMove3D=function(e,t,n,r){if(n===Qh.IS_CAMERA_POSE){var a=t.getActiveCamera(),o=a.getPhysicalTranslation(),i=.05*r.gamepad.axes[1]*a.getPhysicalScale(),s=a.physicalOrientationToWorldDirection(r.orientation);a.setPhysicalTranslation(o[0]+s[0]*i,o[1]+s[1]*i,o[2]+s[2]*i)}}}var zP={device:Ph.RightController,input:wh.TrackPad};function WP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zP,n),Ot.obj(e,t),iS.extend(e,t,n),jP(e,t)}var HP=Ot.newInstance(WP,"vtkVRButtonPanManipulator"),KP={vtkCompositeCameraManipulator:qT,vtkCompositeGestureManipulator:QT,vtkCompositeKeyboardManipulator:eS,vtkCompositeMouseManipulator:rS,vtkCompositeVRManipulator:iS,vtkGestureCameraManipulator:lS,vtkKeyboardCameraManipulator:vS,vtkMouseBoxSelectorManipulator:wS,vtkMouseCameraAxisRotateManipulator:IS,vtkMouseCameraSliceManipulator:DS,vtkMouseCameraUnicamManipulator:cP,vtkMouseCameraUnicamRotateManipulator:rP,vtkMouseCameraTrackballFirstPersonManipulator:pP,vtkMouseCameraTrackballMultiRotateManipulator:CP,vtkMouseCameraTrackballPanManipulator:MP,vtkMouseCameraTrackballRollManipulator:xP,vtkMouseCameraTrackballRotateManipulator:vP,vtkMouseCameraTrackballZoomManipulator:LP,vtkMouseCameraTrackballZoomToMouseManipulator:VP,vtkMouseRangeManipulator:UP,vtkVRButtonPanManipulator:{newInstance:HP,extend:WP}},XP={slice:KP.vtkMouseCameraSliceManipulator,multiRotate:KP.vtkMouseCameraTrackballMultiRotateManipulator,pan:KP.vtkMouseCameraTrackballPanManipulator,roll:KP.vtkMouseCameraTrackballRollManipulator,rotate:KP.vtkMouseCameraTrackballRotateManipulator,axisRotate:KP.vtkMouseCameraAxisRotateManipulator,zoom:KP.vtkMouseCameraTrackballZoomManipulator,zoomToMouse:KP.vtkMouseCameraTrackballZoomToMouseManipulator,range:KP.vtkMouseRangeManipulator,vrPan:KP.vtkVRButtonPanManipulator,gestureCamera:KP.vtkGestureCameraManipulator,movement:KP.vtkKeyboardCameraManipulator,freeLook:KP.vtkMouseCameraTrackballFirstPersonManipulator,unicam:KP.vtkMouseCameraUnicamManipulator,unicamRotate:KP.vtkMouseCameraUnicamRotateManipulator},qP={"3D":[{type:"rotate"},{type:"pan",options:{shift:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}},{type:"roll",options:{shift:!0,control:!0}},{type:"roll",options:{shift:!0,alt:!0}},{type:"roll",options:{shift:!0,button:3}},{type:"vrPan"},{type:"gestureCamera"}],"2D":[{type:"pan",options:{shift:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{button:3}},{type:"roll",options:{shift:!0,alt:!0}},{type:"roll",options:{shift:!0,button:3}},{type:"roll",options:{shift:!0}},{type:"vrPan"},{type:"gestureCamera"}],FirstPerson:[{type:"movement"},{type:"freeLook"}],Unicam:[{type:"unicam"}],zRotateTop:[{type:"pan",options:{shift:!0}},{type:"axisRotate",options:{rotationAxis:[0,0,1],useHalfAxis:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}}],zRotateAll:[{type:"pan",options:{shift:!0}},{type:"axisRotate",options:{rotationAxis:[0,0,1],useHalfAxis:!1}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}}]};function YP(e,t){t.removeAllManipulators();for(var n=0;n<e.length;n++){var r=e[n],a=XP[r.type].newInstance(r.options);a.isA("vtkCompositeVRManipulator")?t.addVRManipulator(a):a.isA("vtkCompositeGestureManipulator")?t.addGestureManipulator(a):a.isA("vtkCompositeKeyboardManipulator")?t.addKeyboardManipulator(a):t.addMouseManipulator(a)}return!0}var ZP={applyDefinitions:YP,applyPreset:function(e,t){return YP(qP[e],t)},registerManipulatorType:function(e,t){XP[e]=t},registerStylePreset:function(e,t){qP[e]=t}},QP=["format"],JP=1e-6;function $P(e,t){function n(){var e=fe(t.renderer.getBackground(),3),n=e[0],r=e[1],a=e[2];t.cornerAnnotation.getAnnotationContainer().style.color=n+r+a>1.5?"black":"white"}t.classHierarchy.push("vtkViewProxy"),t.renderWindow=My.newInstance(),t.renderer=kT.newInstance({background:[0,0,0]}),t.renderWindow.addRenderer(t.renderer),t._openGLRenderWindow=t.renderWindow.newAPISpecificView(),t.renderWindow.addView(t._openGLRenderWindow),t.interactor=jh.newInstance(),t.interactor.setView(t._openGLRenderWindow),t.interactorStyle3D=hy.newInstance(),t.interactorStyle2D=hy.newInstance(),t._resetCamera=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t.renderer.resetCamera(e)},ZP.applyPreset("3D",t.interactorStyle3D),ZP.applyPreset("2D",t.interactorStyle2D),t.cornerAnnotation=Sh.newInstance(),t.interactor.setInteractorStyle(t.useParallelRendering?t.interactorStyle2D:t.interactorStyle3D),t.camera=t.renderer.getActiveCamera(),t.camera.setParallelProjection(!!t.useParallelRendering),t.orientationAxesArrow=vh.newInstance(),t.orientationAxesCube=zv.newInstance(),kv.applyPreset("default",t.orientationAxesCube),kv.applyPreset("lps",t.orientationAxesCube),t.orientationAxesMap={arrow:t.orientationAxesArrow,cube:t.orientationAxesCube},t.orientationWidget=HT.newInstance({actor:t.orientationAxesArrow,interactor:t.renderWindow.getInteractor()}),t.orientationWidget.setEnabled(!0),t.orientationWidget.setViewportCorner(HT.Corners.BOTTOM_LEFT),t.orientationWidget.setViewportSize(.1),e.setPresetToInteractor3D=function(e){return Array.isArray(e)?ZP.applyDefinitions(e,t.interactorStyle3D):ZP.applyPreset(e,t.interactorStyle3D)},e.setPresetToInteractor2D=function(e){return Array.isArray(e)?ZP.applyDefinitions(e,t.interactorStyle2D):ZP.applyPreset(e,t.interactorStyle2D)},e.setOrientationAxesType=function(n){var r=t.orientationAxesMap[n];r&&(t.orientationAxesType=n,t.orientationWidget.setActor(r),e.renderLater())},e.registerOrientationAxis=function(e,n){t.orientationAxesMap[e]=n},e.unregisterOrientationAxis=function(e){delete t.orientationAxesMap[e]},e.listOrientationAxis=function(){return Object.keys(t.orientationAxesMap)},e.setPresetToOrientationAxes=function(n){var r=!1;return"string"==typeof n?(t.presetToOrientationAxes!==n&&(t.presetToOrientationAxes=n,r=kv.applyPreset(n,t.orientationAxesCube),e.modified()),r):(t.presetToOrientationAxes="Custom",r=kv.applyDefinitions(n,t.orientationAxesCube),e.modified(),r)},e.setContainer=function(e){var n=t.orientationWidget.getEnabled();t.container&&(t.orientationWidget.setEnabled(!1),t.interactor.unbindEvents(t.container),t._openGLRenderWindow.setContainer(null),t.cornerAnnotation.setContainer(null)),t.container=e,e&&(t._openGLRenderWindow.setContainer(e),t.cornerAnnotation.setContainer(e),t.interactor.initialize(),t.interactor.bindEvents(e),t.orientationWidget.setEnabled(n))},e.resize=function(){if(t.container){var n=t.container.getBoundingClientRect();if(n.width===n.height&&0===n.width)return;var r=window.devicePixelRatio||1,a=Math.max(10,Math.floor(r*n.width)),o=Math.max(10,Math.floor(r*n.height));t._openGLRenderWindow.setSize(a,o),e.invokeResize({width:a,height:o}),e.renderLater()}},e.renderLater=function(){e.render(!1)},e.render=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.representations.length>0&&t.resetCameraOnFirstRender&&(t.resetCameraOnFirstRender=!1,e.resetCamera()),t.orientationWidget.updateMarkerOrientation(),t.renderer.resetCameraClippingRange(),n?t.renderWindow.render():setTimeout(t.renderWindow.render,0)},e.addRepresentation=function(e){e&&-1===t.representations.indexOf(e)&&(t.representations.push(e),t.renderer.addViewProp(e))},e.removeRepresentation=function(e){e&&(-1!==t.representations.indexOf(e)&&(t.representations=t.representations.filter((function(t){return t!==e})),t.renderer.removeViewProp(e)),0===t.representations.length&&(t.resetCameraOnFirstRender=!0))},e.setCameraParameters=function(e){var n,r,a=e.position,o=e.focalPoint,i=e.bounds,s=e.parallelScale,c=e.viewAngle;null!=a&&(n=t.camera).setPosition.apply(n,ve(a)),null!=o&&(r=t.camera).setFocalPoint.apply(r,ve(o)),null!=i?t.renderer.resetCameraClippingRange(i):t.renderer.resetCameraClippingRange(),null!=s&&t.camera.setParallelScale(s),null!=c&&t.camera.setViewAngle(c)},e.resetCamera=function(){t._resetCamera(),t.interactorStyle2D.setCenterOfRotation(t.camera.getFocalPoint()),t.interactorStyle3D.setCenterOfRotation(t.camera.getFocalPoint()),e.renderLater()},e.captureImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,r=void 0===n?"image/png":n,a=wm(e,QP);return t.renderWindow.captureImages(r,a)[0]},e.openCaptureImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_blank",n=new Image;return e.captureImage().then((function(e){n.src=e;var r=window.open("",t);r.document.write(n.outerHTML),r.document.title="vtk.js Image Capture",window.focus()}))},e.setCornerAnnotation=function(e,n){t.cornerAnnotation.updateTemplates(me({},e,(function(e){return Sh.applyTemplate(n,e)})))},e.setCornerAnnotations=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r?Object.keys(n).forEach((function(t){e.setCornerAnnotation(t,n[t])})):t.cornerAnnotation.updateTemplates(n)},e.updateCornerAnnotation=function(e){return t.cornerAnnotation.updateMetadata(e)},e.setAnnotationOpacity=function(n){t.annotationOpacity!==Number(n)&&(t.annotationOpacity=Number(n),t.cornerAnnotation.getAnnotationContainer().style.opacity=n,e.modified())},e.setBackground=bt(t.renderer.setBackground,n),e.getBackground=t.renderer.getBackground,e.setAnimation=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!t.disableAnimation||!n)if(n)t.renderWindow.getInteractor().requestAnimation(r);else{var a=r===e||0==="".concat(r).indexOf("ViewProxy.moveCamera.");t.renderWindow.getInteractor().cancelAnimation(r,a)}},e.updateOrientation=function(n,r,a){var o,i,s,c,u,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0===n)return Promise.resolve();var d=t.camera.getPosition(),p=t.camera.getViewUp(),f=t.camera.getFocalPoint();t.axis=n,t.orientation=r,t.viewUp=a;var g=t.camera.getFocalPoint();g[t.axis]+=t.orientation,(o=t.camera).setPosition.apply(o,ve(g)),(i=t.camera).setViewUp.apply(i,ve(a)),t.renderer.resetCamera();var m=t.camera.getFocalPoint(),v=t.camera.getPosition(),h=t.camera.getViewUp();return(s=t.camera).setFocalPoint.apply(s,ve(f)),(c=t.camera).setPosition.apply(c,ve(d)),(u=t.camera).setViewUp.apply(u,ve(p)),e.moveCamera(m,v,h,l)},e.moveCamera=function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.camera.getFocalPoint(),s=t.camera.getPosition(),c=t.camera.getViewUp(),u=[{focalPoint:n,position:r,viewUp:a}];if(o){var l=[(i[0]-n[0])/o,(i[1]-n[1])/o,(i[2]-n[2])/o],d=[(s[0]-r[0])/o,(s[1]-r[1])/o,(s[2]-r[2])/o],p=[(c[0]-a[0])/o,(c[1]-a[1])/o,(c[2]-a[2])/o],f=l[0]||l[1]||l[2]||d[0]||d[1]||d[2]||p[0]||p[1]||p[2],g=l.map((function(e){return Math.abs(e)<JP?0:1})).reduce((function(e,t){return e+t}),0),m=d.map((function(e){return Math.abs(e)<JP?0:1})).reduce((function(e,t){return e+t}),0),v=p.map((function(e){return Math.abs(e)<JP?0:1})).reduce((function(e,t){return e+t}),0),h=1===v&&0===m&&0===g;if(f)if(h)for(var y=i.map((function(e,t){return Math.abs(s[t]-e)<JP?t:null})).filter((function(e){return null!==e})),b=y.find((function(e){return Math.abs(p[e])<JP})),x=0;x<o;x++){var T=[a[0]+(x+1)*p[0],a[1]+(x+1)*p[1],a[2]+(x+1)*p[2]];T[b]=Math.sin(Math.PI*x/(o-1)),u.push({focalPoint:n,position:r,viewUp:T})}else for(var S=0;S<o;S++)u.push({focalPoint:[n[0]+(S+1)*l[0],n[1]+(S+1)*l[1],n[2]+(S+1)*l[2]],position:[r[0]+(S+1)*d[0],r[1]+(S+1)*d[1],r[2]+(S+1)*d[2]],viewUp:[a[0]+(S+1)*p[0],a[1]+(S+1)*p[1],a[2]+(S+1)*p[2]]})}return 1===u.length?(t.camera.set(u.pop()),t.renderer.resetCameraClippingRange(),t.interactor.getLightFollowCamera()&&t.renderer.updateLightsGeometryToFollowCamera(),Promise.resolve()):new Promise((function(n,r){var a=performance.now().toString(),o="ViewProxy.moveCamera.".concat(a);e.setAnimation(!0,o);var i=null;i=setInterval((function(){if(u.length){var r,a,s,c=u.pop(),l=c.focalPoint,d=c.position,p=c.viewUp;(r=t.camera).setFocalPoint.apply(r,ve(l)),(a=t.camera).setPosition.apply(a,ve(d)),(s=t.camera).setViewUp.apply(s,ve(p)),t.renderer.resetCameraClippingRange(),t.interactor.getLightFollowCamera()&&t.renderer.updateLightsGeometryToFollowCamera()}else clearInterval(i),e.setAnimation(!1,o),n()}),1)}))},e.resetOrientation=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.updateOrientation(t.axis,t.orientation,t.viewUp,n)},e.rotate=function(e){var n,r=t.camera.get("viewUp","focalPoint","position"),a=r.viewUp,o=r.focalPoint,i=r.position,s=[o[0]-i[0],o[1]-i[1],o[2]-i[2]];Zi().rotate(Number.isNaN(e)?90:e,s).apply(a),(n=t.camera).setViewUp.apply(n,ve(a)),t.camera.modified(),t.orientationWidget.updateMarkerOrientation(),t.renderWindow.render()},e.focusTo=bt(t.camera.setFocalPoint,t.interactorStyle2D.setCenterOfRotation,t.interactorStyle3D.setCenterOfRotation),e.delete=bt((function(){e.setContainer(null),t.orientationWidget.setEnabled(!1),t.orientationWidget.delete(),t.orientationAxesArrow.delete(),t.orientationAxesCube.delete(),t.interactorStyle2D.delete(),t.interactorStyle3D.delete(),t.cornerAnnotation.delete(),t.interactor.delete(),t.renderer.delete(),t._openGLRenderWindow.delete(),t.renderWindow.delete()}),e.delete),e.resetOrientation(),n()}var ew={representations:[],sectionName:"view",annotationOpacity:1,resetCameraOnFirstRender:!0,presetToOrientationAxes:"lps",orientationAxesType:"arrow",disableAnimation:!1,axis:1,orientation:0,viewUp:[0,0,1]};function tw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ew,n),at(e,t),lt(e,t,["name","disableAnimation"]),it(e,t,["annotationOpacity","camera","container","cornerAnnotation","interactor","interactorStyle2D","interactorStyle3D","_openGLRenderWindow","orientationAxesType","presetToOrientationAxes","renderer","renderWindow","representations","useParallelRendering"]),gt(0,t,["openGLRenderWindow"]),ht(e,t,"Resize"),$P(e,t),wt(e,t),Ct(e,t,{orientationAxesVisibility:{modelKey:"orientationWidget",property:"enabled"},orientationAxesCorner:{modelKey:"orientationWidget",property:"viewportCorner"},orientationAxesSize:{modelKey:"orientationWidget",property:"viewportSize"},cameraViewUp:{modelKey:"camera",property:"viewUp",modified:!1},cameraPosition:{modelKey:"camera",property:"position",modified:!1},cameraFocalPoint:{modelKey:"camera",property:"focalPoint",modified:!1}})}var nw={newInstance:yt(tw,"vtkViewProxy"),extend:tw};function rw(e){return Array.isArray(e)?e.map(rw).join(", "):Number.isInteger(e)?e:Number.isFinite(e)?Math.abs(e)<.01?"0":e.toFixed(2):e}function aw(e){var t,n;if(!e.getVisibility()||!e.getUseBounds())return[];var r,a=e.getBounds(),o=null,i=null==e||null===(t=e.getMapper)||void 0===t?void 0:t.call(e),s=null==i||null===(n=i.getBounds)||void 0===n?void 0:n.call(i);if(of.isValid(s)&&e.getMatrix&&(a=s,v(o=e.getMatrix().slice(),o),i.isA("vtkImageMapper")&&null!==(r=i.getInputData())&&void 0!==r&&r.isA("vtkImageData"))){e.computeMatrix();var c=i.getInputData();a=c.getSpatialExtent();var u=c.getIndexToWorld();oe(o,o,u)}var l=[];return of.getCorners(a,l),o&&l.forEach((function(e){return Cn(e,e,o)})),l}function ow(e,t){t.classHierarchy.push("vtkView2DProxy"),e.updateWidthHeightAnnotation=function(){var n=t.cornerAnnotation.getMetadata(),r=n.ijkOrientation,a=n.dimensions;if(r&&a){var o=a;a.length>3&&(o=a.split(",").map(Number));var i=t.camera.getDirectionOfProjection(),s=t.camera.getViewUp(),c=[0,0,0];Or(i,s,c);var u=ya(c),l=ya(s),d=o["IJK".indexOf(r[u])],p=o["IJK".indexOf(r[l])];e.updateCornerAnnotation({sliceWidth:d,sliceHeight:p})}};var n=e.updateOrientation;e.updateOrientation=function(r,a,o){for(var i=n(r,a,o),s=t.representations.length;s--;){var c=t.representations[s],u="XYZ"[r];c.setSlicingMode&&c.setSlicingMode(u)}return e.updateCornerAnnotation({axis:"XYZ"[r]}),i};var r=e.addRepresentation;e.addRepresentation=function(n){r(n),n.setSlicingMode&&(n.setSlicingMode("XYZ"[t.axis]),e.bindRepresentationToManipulator(n))};var a=e.removeRepresentation;e.removeRepresentation=function(n){if(a(n),n===t.sliceRepresentation){e.bindRepresentationToManipulator(null);for(var r=t.representations.length;r--;)e.bindRepresentationToManipulator(t.representations[r])&&(r=0)}};var o=t._resetCamera;function i(n){e.updateCornerAnnotation({windowWidth:n}),t.sliceRepresentation&&t.sliceRepresentation.setWindowWidth&&t.sliceRepresentation.setWindowWidth(n)}function s(n){e.updateCornerAnnotation({windowLevel:n}),t.sliceRepresentation&&t.sliceRepresentation.setWindowLevel&&t.sliceRepresentation.setWindowLevel(n)}function c(n){var r=Number(n),a={slice:Number.isInteger(r)?n:r.toFixed(2)};if(t.sliceRepresentation&&t.sliceRepresentation.setSlice&&t.sliceRepresentation.setSlice(r),t.sliceRepresentation&&t.sliceRepresentation.getAnnotations){var o=t.sliceRepresentation.getAnnotations();Object.keys(o).forEach((function(e){a[e]=rw(o[e])}))}e.updateCornerAnnotation(a)}t._resetCamera=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=o(n);if(!t.fitProps||!t.useParallelRendering||!r)return r;var a=[];n?of.getCorners(n,a):e.getRepresentations().forEach((function(e){return[e.getActors(),e.getVolumes()].flat().forEach((function(e){return a.push.apply(a,ve(aw(e)))}))}));var i=of.reset([]),s=t.camera.getViewMatrix();v(s,s);for(var c=0;c<a.length;++c){var u=a[c];Cn(u,u,s),of.addPoint.apply(of,[i].concat(ve(u)))}var l=of.getCenter(i),d=[l[0],l[1],i[5]+1],p=new Float64Array(16),f=new Float64Array(3),g=new Float64Array(3);h(p,s),Cn(f,l,p),Cn(g,d,p);var m=t.renderer.getRenderWindow().getViews()[0],y=m.getViewportSize(t.renderer),b=y[0]/y[1],x=of.getLength(i,0),T=of.getLength(i,1),S=.5*Math.max(T,x/b);if(S<=0)return r;var P=of.transformBounds(i,p);return e.setCameraParameters({position:g,focalPoint:f,bounds:P,parallelScale:S}),!0},t.rangeManipulator=UP.newInstance({button:1,scrollEnabled:!0}),t.interactorStyle2D.addMouseManipulator(t.rangeManipulator),e.bindRepresentationToManipulator=function(n){var r=0;for(t.rangeManipulator.removeAllListeners(),t.sliceRepresentation=n;t.sliceRepresentationSubscriptions.length;)t.sliceRepresentationSubscriptions.pop().unsubscribe();if(n){if(t.sliceRepresentationSubscriptions.push(t.camera.onModified(e.updateWidthHeightAnnotation)),n.getWindowWidth){var a=function(){return i(n.getWindowWidth())},o=n.getPropertyDomainByName("windowWidth"),u=o.min,l=o.max,d=o.step;d&&"any"!==d||(d=1/512),t.rangeManipulator.setVerticalListener(u,l,d,n.getWindowWidth,i),t.sliceRepresentationSubscriptions.push(n.onModified(a)),a(),r++}if(n.getWindowLevel){var p=function(){return s(n.getWindowLevel())},f=n.getPropertyDomainByName("windowLevel"),g=f.min,m=f.max,v=f.step;v&&"any"!==v||(v=1/512),t.rangeManipulator.setHorizontalListener(g,m,v,n.getWindowLevel,s),t.sliceRepresentationSubscriptions.push(n.onModified(p)),p(),r++}var h=n.getPropertyDomainByName("slice");if(n.getSlice&&h){var y=function(){return c(n.getSlice())};t.rangeManipulator.setScrollListener(h.min,h.max,h.step,n.getSlice,c),t.sliceRepresentationSubscriptions.push(n.onModified(y)),y(),r++}}return r}}var iw={axis:2,orientation:-1,viewUp:[0,1,0],useParallelRendering:!0,sliceRepresentationSubscriptions:[],fitProps:!1};function sw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,iw,n),nw.extend(e,t,n),Ot.get(e,t,["axis"]),Ot.setGet(e,t,["fitProps"]),ow(e,t)}var cw={newInstance:Ot.newInstance(sw,"vtkView2DProxy"),extend:sw},uw=Ot.vtkErrorMacro;function lw(e,t){t.classHierarchy.push("vtkImageCropFilter"),e.reset=function(){var t=e.getInputData();t&&e.setCroppingPlanes.apply(e,ve(t.getExtent()))},e.requestData=function(e,n){var r=e[0];if(r){var a=r.getPointData().getScalars();if(a){var o=r.getExtent(),i=t.croppingPlanes&&6===t.croppingPlanes.length?o.map((function(e,n){return n%2==0?Math.max(e,Math.round(t.croppingPlanes[n])):Math.min(e,Math.round(t.croppingPlanes[n]))})):o.slice();if(i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]&&i[4]===o[4]&&i[5]===o[5]){var s=vf.newInstance();return s.shallowCopy(r),void(n[0]=s)}for(var c=0;c<3;++c)if(i[2*c]>i[2*c+1]){var u=[i[2*c+1],i[2*c]];i[2*c]=u[0],i[2*c+1]=u[1]}for(var l=0;l<6;l+=2)i[l]=Math.max(i[l],o[l]),i[l+1]=Math.min(i[l+1],o[l+1]);for(var d=a.getNumberOfComponents(),p=(i[1]-i[0]+1)*(i[3]-i[2]+1)*(i[5]-i[4]+1)*d,f=a.getData(),g=r.getDimensions(),m=d*g[0],v=d*g[0]*g[1],h=(i[0]-o[0])*d,y=(i[1]-i[0]+1)*d,b=new f.constructor(p),x=0,T=i[4];T<=i[5];++T)for(var S=i[2];S<=i[3];++S){var P=h+(S-o[2])*m+(T-o[4])*v,w=P+y,C=f.subarray(P,w);b.set(C,x),x+=C.length}var O=vf.newInstance({extent:i,origin:r.getOrigin(),direction:r.getDirection(),spacing:r.getSpacing()}),A=Ba.newInstance({name:a.getName(),numberOfComponents:d,values:b});O.getPointData().setScalars(A),n[0]=O}else uw("No scalars from input")}else uw("Invalid or missing input")},e.isResetAvailable=function(){if(null==t.croppingPlanes||0===t.croppingPlanes.length)return!1;var n=e.getInputData();if(n){var r=n.getExtent().find((function(e,n){return Math.abs(t.croppingPlanes[n]-e)>Number.EPSILON}));return void 0!==r}return!1}}var dw={};function pw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dw,n),Ot.obj(e,t),Ot.algo(e,t,1,1),Ot.setGetArray(e,t,["croppingPlanes"],6),lw(e,t)}var fw={newInstance:Ot.newInstance(pw,"vtkImageCropFilter"),extend:pw};function gw(e,t){t.classHierarchy.push("vtkAbstractImageMapper"),e.getIsOpaque=function(){return!0},e.getCurrentImage=function(){return null}}var mw={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1]},vw=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mw,n),qm(e,t,n),Ot.setGet(e,t,["slice","useCustomExtents"]),Ot.setGetArray(e,t,["customDisplayExtent"],6),Ot.setGetArray(e,t,["backgroundColor"],4),gw(e,t)};function hw(e,t,n){var r=n.getCurrentImage(),a=r.getExtent(),o=[a[0],a[2],a[4]],i=n.getClosestIJKAxis().ijkMode,s=n.isA("vtkImageArrayMapper")?n.getSubSlice():n.getSlice();i!==n.getSlicingMode()&&(s=n.getSliceAtPosition(s)),o[i]+=s;var c=[0,0,0];r.indexToWorld(o,c),o[i]+=1;var u=[0,0,0];r.indexToWorld(o,u),u[0]-=c[0],u[1]-=c[1],u[2]-=c[2],yn(u,u);var l=wi.intersectWithLine(e,t,c,u);if(l.intersection){var d=l.x,p=[0,0,0];return r.worldToIndex(d,p),{t:l.t,absoluteIJK:p}}return null}function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yw(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xw=cv.staticOffsetAPI,Tw=cv.otherStaticMethods,Sw=Ot.vtkWarningMacro,Pw=Ac.SlicingMode;function ww(e,t){function n(){var n;switch(t.slicingMode){case Pw.X:n=[1,0,0];break;case Pw.Y:n=[0,1,0];break;case Pw.Z:n=[0,0,1];break;default:return void(t.closestIJKAxis={ijkMode:t.slicingMode,flip:!1})}var r=[0,0,0];Lr(e.getCurrentImage().getDirection(),n,r);for(var a=0,o=-1,i=!1,s=0;s<r.length;++s){var c=Math.abs(r[s]);c>a&&(a=c,i=r[s]<0,o=s)}if(1!==a){var u="IJKXYZ"[t.slicingMode],l="IJKXYZ"[o];Sw("Unaccurate slicing along ".concat(u," axis which ")+"is not aligned with any IJK axis of the image data. "+"Using ".concat(l," axis  as a fallback (").concat(a,"% aligned). ")+"Necessitates slice reformat that is not yet implemented.  You can switch the slicing mode on your mapper to do IJK slicing instead.")}t.closestIJKAxis={ijkMode:o,flip:i}}t.classHierarchy.push("vtkImageMapper"),e.getSliceAtPosition=function(n){var r,a=e.getCurrentImage();if(3===n.length)r=n;else if(Number.isFinite(n)){var o=a.getBounds();switch(t.slicingMode){case Pw.X:r=[n,(o[3]+o[2])/2,(o[5]+o[4])/2];break;case Pw.Y:r=[(o[1]+o[0])/2,n,(o[5]+o[4])/2];break;case Pw.Z:r=[(o[1]+o[0])/2,(o[3]+o[2])/2,n]}}var i=[0,0,0];a.worldToIndex(r,i);var s=a.getExtent(),c=0;switch(e.getClosestIJKAxis().ijkMode){case Pw.I:c=ua(i[0],s[0],s[1]);break;case Pw.J:c=ua(i[1],s[2],s[3]);break;case Pw.K:c=ua(i[2],s[4],s[5]);break;default:return 0}return c},e.setSliceFromCamera=function(n){var r=n.getFocalPoint();switch(t.slicingMode){case Pw.I:case Pw.J:case Pw.K:var a=e.getSliceAtPosition(r);e.setSlice(a);break;case Pw.X:e.setSlice(r[0]);break;case Pw.Y:e.setSlice(r[1]);break;case Pw.Z:e.setSlice(r[2])}},e.setXSlice=function(t){e.setSlicingMode(Pw.X),e.setSlice(t)},e.setYSlice=function(t){e.setSlicingMode(Pw.Y),e.setSlice(t)},e.setZSlice=function(t){e.setSlicingMode(Pw.Z),e.setSlice(t)},e.setISlice=function(t){e.setSlicingMode(Pw.I),e.setSlice(t)},e.setJSlice=function(t){e.setSlicingMode(Pw.J),e.setSlice(t)},e.setKSlice=function(t){e.setSlicingMode(Pw.K),e.setSlice(t)},e.getSlicingModeNormal=function(){var n=[0,0,0],r=e.getCurrentImage().getDirection();switch(t.slicingMode){case Pw.X:n[0]=1;break;case Pw.Y:n[1]=1;break;case Pw.Z:n[2]=1;break;case Pw.I:Lr(r,[1,0,0],n);break;case Pw.J:Lr(r,[0,1,0],n);break;case Pw.K:Lr(r,[0,0,1],n)}return n},e.setSlicingMode=function(r){t.slicingMode!==r&&(t.slicingMode=r,e.getCurrentImage()&&n(),e.modified())},e.getClosestIJKAxis=function(){return void 0!==t.closestIJKAxis&&t.closestIJKAxis.ijkMode!==Pw.NONE||!e.getCurrentImage()||n(),t.closestIJKAxis},e.getBounds=function(){var n=e.getCurrentImage();if(!n)return ha();if(!t.useCustomExtents)return n.getBounds();var r=t.customDisplayExtent.slice(),a=e.getClosestIJKAxis().ijkMode,o=t.slice;switch(a!==t.slicingMode&&(o=e.getSliceAtPosition(t.slice)),a){case Pw.I:r[0]=o,r[1]=o;break;case Pw.J:r[2]=o,r[3]=o;break;case Pw.K:r[4]=o,r[5]=o}return n.extentToBounds(r)},e.getBoundsForSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.slice,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.getCurrentImage();if(!a)return ha();var o=a.getSpatialExtent(),i=e.getClosestIJKAxis(),s=i.ijkMode,c=n;switch(s!==t.slicingMode&&(c=e.getSliceAtPosition(n)),s){case Pw.I:o[0]=c-r,o[1]=c+r;break;case Pw.J:o[2]=c-r,o[3]=c+r;break;case Pw.K:o[4]=c-r,o[5]=c+r}return a.extentToBounds(o)},e.intersectWithLineForPointPicking=function(t,n){return function(e,t,n){var r=hw(e,t,n);if(r){var a=n.getCurrentImage().getExtent(),o=[Math.round(r.absoluteIJK[0]),Math.round(r.absoluteIJK[1]),Math.round(r.absoluteIJK[2])];return o[0]<a[0]||o[0]>a[1]||o[1]<a[2]||o[1]>a[3]||o[2]<a[4]||o[2]>a[5]?null:{t:r.t,ijk:o}}return null}(t,n,e)},e.intersectWithLineForCellPicking=function(t,n){return function(e,t,n){var r=hw(e,t,n);if(r){var a=n.getCurrentImage().getExtent(),o=r.absoluteIJK,i=[Math.floor(o[0]),Math.floor(o[1]),Math.floor(o[2])];if(i[0]<a[0]||i[0]>a[1]-1||i[1]<a[2]||i[1]>a[3]-1||i[2]<a[4]||i[2]>(a[5]?a[5]-1:a[5]))return null;var s=[o[0]-i[0],o[1]-i[1],o[2]-i[2]];return{t:r.t,ijk:i,pCoords:s}}return null}(t,n,e)},e.getCurrentImage=function(){return e.getInputData()}}var Cw={slicingMode:Pw.NONE,closestIJKAxis:{ijkMode:Pw.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function Ow(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cw,n),vw(e,t,n),Ot.get(e,t,["slicingMode"]),Ot.setGet(e,t,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),cv.implementCoincidentTopologyMethods(e,t),ww(e,t)}var Aw=bw(bw(bw({newInstance:Ot.newInstance(Ow,"vtkImageMapper"),extend:Ow},xw),Tw),Ac),Iw=xc.InterpolationType,Mw=Ot.vtkErrorMacro;function Rw(e,t){t.classHierarchy.push("vtkImageProperty"),e.getMTime=function(){for(var e,n=t.mtime,r=0;r<4;r++)t.componentData[r].rGBTransferFunction&&(n=n>(e=t.componentData[r].rGBTransferFunction.getMTime())?n:e),t.componentData[r].piecewiseFunction&&(n=n>(e=t.componentData[r].piecewiseFunction.getMTime())?n:e);return n},e.setRGBTransferFunction=function(n,r){var a=n,o=r;return Number.isInteger(n)||(o=n,a=0),t.componentData[a].rGBTransferFunction!==o&&(t.componentData[a].rGBTransferFunction=o,e.modified(),!0)},e.getRGBTransferFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].rGBTransferFunction},e.setPiecewiseFunction=function(n,r){var a=n,o=r;return Number.isInteger(n)||(o=n,a=0),t.componentData[a].piecewiseFunction!==o&&(t.componentData[a].piecewiseFunction=o,e.modified(),!0)},e.getPiecewiseFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].piecewiseFunction},e.setScalarOpacity=function(t,n){var r=t,a=n;return Number.isInteger(t)||(a=t,r=0),e.setPiecewiseFunction(r,a)},e.getScalarOpacity=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.getPiecewiseFunction(t)},e.setComponentWeight=function(n,r){if(n<0||n>=4)return Mw("Invalid index"),!1;var a=Math.min(1,Math.max(0,r));return t.componentData[n].componentWeight!==a&&(t.componentData[n].componentWeight=a,e.modified(),!0)},e.getComponentWeight=function(e){return e<0||e>=4?(Mw("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(Iw.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(Iw.LINEAR)},e.getInterpolationTypeAsString=function(){return Ot.enumToString(Iw,t.interpolationType)}}var Ew={independentComponents:!1,interpolationType:Iw.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1};function Dw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,Ew,n),Ot.obj(e,t),!t.componentData){t.componentData=[];for(var r=0;r<4;r++)t.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}Ot.setGet(e,t,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange"]),Rw(e,t)}var Lw={newInstance:Ot.newInstance(Dw,"vtkImageProperty"),extend:Dw},Bw=Ot.vtkDebugMacro;function Nw(e,t){t.classHierarchy.push("vtkImageSlice"),e.getActors=function(){return e},e.getImages=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return!1},e.makeProperty=Lw.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||!(n=[r,t.mapperBounds],n[0].map((function(e,t){return n.map((function(e){return e[t]}))}))).reduce((function(e,t){return e&&t[0]===t[1]}),!0)||e.getMTime()>t.boundsMTime.getMTime()){Bw("Recomputing bounds..."),t.mapperBounds=r.map((function(e){return e})),e.computeMatrix();var a=new Float64Array(16);v(a,t.matrix),of.transformBounds(r,a,t.bounds),t.boundsMTime.modified()}return t.bounds},e.getBoundsForSlice=function(n,r){var a=t.mapper.getBoundsForSlice(n,r);if(!of.isValid(a))return a;e.computeMatrix();var o=new Float64Array(16);return v(o,t.matrix),of.transformBounds(a,o)},e.getMinXBound=function(){return e.getBounds()[0]},e.getMaxXBound=function(){return e.getBounds()[1]},e.getMinYBound=function(){return e.getBounds()[2]},e.getMaxYBound=function(){return e.getBounds()[3]},e.getMinZBound=function(){return e.getBounds()[4]},e.getMaxZBound=function(){return e.getBounds()[5]},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}if(null!==t.property){var r=t.property.getMTime();e=r>e?r:e,null!==t.property.getRGBTransferFunction()&&(e=(r=t.property.getRGBTransferFunction().getMTime())>e?r:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}var kw={mapper:null,property:null,bounds:ve(of.INIT_BOUNDS)};function Vw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kw,n),km.extend(e,t,n),t.boundsMTime={},Ot.obj(t.boundsMTime),Ot.set(e,t,["property"]),Ot.setGet(e,t,["mapper"]),Ot.getArray(e,t,["bounds"],6),Nw(e,t)}var _w={newInstance:Ot.newInstance(Vw,"vtkImageSlice"),extend:Vw};function Fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Gw=Kc.InterpolationType,Uw=Kc.OpacityMode,jw=Ot.vtkErrorMacro;function zw(e,t){t.classHierarchy.push("vtkVolumeProperty"),e.getMTime=function(){for(var e,n=t.mtime,r=0;r<4;r++)1===t.componentData[r].colorChannels?t.componentData[r].grayTransferFunction&&(n=n>(e=t.componentData[r].grayTransferFunction.getMTime())?n:e):3===t.componentData[r].colorChannels&&t.componentData[r].rGBTransferFunction&&(n=n>(e=t.componentData[r].rGBTransferFunction.getMTime())?n:e),t.componentData[r].scalarOpacity&&(n=n>(e=t.componentData[r].scalarOpacity.getMTime())?n:e),t.componentData[r].gradientOpacity&&(t.componentData[r].disableGradientOpacity||(n=n>(e=t.componentData[r].gradientOpacity.getMTime())?n:e));return n},e.getColorChannels=function(e){return e<0||e>3?(jw("Bad index - must be between 0 and 3"),0):t.componentData[e].colorChannels},e.setGrayTransferFunction=function(n,r){var a=!1;return t.componentData[n].grayTransferFunction!==r&&(t.componentData[n].grayTransferFunction=r,a=!0),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1,a=!0),a&&e.modified(),a},e.getGrayTransferFunction=function(n){return null===t.componentData[n].grayTransferFunction&&(t.componentData[n].grayTransferFunction=Kf.newInstance(),t.componentData[n].grayTransferFunction.addPoint(0,0),t.componentData[n].grayTransferFunction.addPoint(1024,1),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1),e.modified()),t.componentData[n].grayTransferFunction},e.setRGBTransferFunction=function(n,r){var a=!1;return t.componentData[n].rGBTransferFunction!==r&&(t.componentData[n].rGBTransferFunction=r,a=!0),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3,a=!0),a&&e.modified(),a},e.getRGBTransferFunction=function(n){return null===t.componentData[n].rGBTransferFunction&&(t.componentData[n].rGBTransferFunction=fm.newInstance(),t.componentData[n].rGBTransferFunction.addRGBPoint(0,0,0,0),t.componentData[n].rGBTransferFunction.addRGBPoint(1024,1,1,1),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3),e.modified()),t.componentData[n].rGBTransferFunction},e.setScalarOpacity=function(n,r){return t.componentData[n].scalarOpacity!==r&&(t.componentData[n].scalarOpacity=r,e.modified(),!0)},e.getScalarOpacity=function(n){return null===t.componentData[n].scalarOpacity&&(t.componentData[n].scalarOpacity=Kf.newInstance(),t.componentData[n].scalarOpacity.addPoint(0,1),t.componentData[n].scalarOpacity.addPoint(1024,1),e.modified()),t.componentData[n].scalarOpacity},e.setComponentWeight=function(n,r){if(n<0||n>=4)return jw("Invalid index"),!1;var a=Math.min(1,Math.max(0,r));return t.componentData[n].componentWeight!==a&&(t.componentData[n].componentWeight=a,e.modified(),!0)},e.getComponentWeight=function(e){return e<0||e>=4?(jw("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(Gw.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(Gw.LINEAR)},e.setInterpolationTypeToFastLinear=function(){return e.setInterpolationType(Gw.FAST_LINEAR)},e.getInterpolationTypeAsString=function(){return Ot.enumToString(Gw,t.interpolationType)},["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach((function(n){var r=Ot.capitalize(n);e["set".concat(r)]=function(r,a){return t.componentData[r]["".concat(n)]!==a&&(t.componentData[r]["".concat(n)]=a,e.modified(),!0)}})),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach((function(n){var r=Ot.capitalize(n);e["get".concat(r)]=function(e){return t.componentData[e]["".concat(n)]}}))}var Ww={independentComponents:!0,interpolationType:Gw.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:1,labelOutlineOpacity:1};function Hw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,Ww,n),Ot.obj(e,t),!t.componentData){t.componentData=[];for(var r=0;r<4;++r)t.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:Uw.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1})}Ot.setGet(e,t,["independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineThickness","labelOutlineOpacity"]),zw(e,t)}var Kw=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fw(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:Ot.newInstance(Hw,"vtkVolumeProperty"),extend:Hw},Kc),Xw=Ot.vtkDebugMacro;function qw(e,t){t.classHierarchy.push("vtkVolume"),e.getVolumes=function(){return e},e.makeProperty=Kw.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||!(n=[r,t.mapperBounds],n[0].map((function(e,t){return n.map((function(e){return e[t]}))}))).reduce((function(e,t){return e&&t[0]===t[1]}),!0)||e.getMTime()>t.boundsMTime.getMTime()){Xw("Recomputing bounds..."),t.mapperBounds=r.map((function(e){return e}));var a=[];of.getCorners(r,a),e.computeMatrix();var o=new Float64Array(16);v(o,t.matrix),a.forEach((function(e){return Cn(e,e,o)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?a.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):a.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e}}var Yw={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function Zw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yw,n),km.extend(e,t,n),t.boundsMTime={},Ot.obj(t.boundsMTime),Ot.set(e,t,["property"]),Ot.setGet(e,t,["mapper"]),Ot.getArray(e,t,["bounds"],6),qw(e,t)}var Qw={newInstance:Ot.newInstance(Zw,"vtkVolume"),extend:Zw};function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jw(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eC=qc,tC={OFF:0,NORMALIZED:1,RAW:2},nC={createRadonTransferFunction:function(e,t,n,r,a){var o=null;return a?(o=a).removeAllPoints():o=Kf.newInstance(),o.addPointLong(-1024,0,1,1),o.addPoint(e,t),o.addPoint(n,r),o}};function rC(e,t){t.classHierarchy.push("vtkVolumeMapper");var n=$w({},e);e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=ha(),t.bounds},e.update=function(){e.getInputData()},e.setBlendModeToComposite=function(){e.setBlendMode(eC.COMPOSITE_BLEND)},e.setBlendModeToMaximumIntensity=function(){e.setBlendMode(eC.MAXIMUM_INTENSITY_BLEND)},e.setBlendModeToMinimumIntensity=function(){e.setBlendMode(eC.MINIMUM_INTENSITY_BLEND)},e.setBlendModeToAverageIntensity=function(){e.setBlendMode(eC.AVERAGE_INTENSITY_BLEND)},e.setBlendModeToAdditiveIntensity=function(){e.setBlendMode(eC.ADDITIVE_INTENSITY_BLEND)},e.setBlendModeToRadonTransform=function(){e.setBlendMode(eC.RADON_TRANSFORM_BLEND)},e.getBlendModeAsString=function(){return Ot.enumToString(eC,t.blendMode)},e.setAverageIPScalarRange=function(t,n){console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),e.setIpScalarRange(t,n)},e.getFilterModeAsString=function(){return Ot.enumToString(tC,t.filterMode)},e.setFilterModeToOff=function(){e.setFilterMode(tC.OFF)},e.setFilterModeToNormalized=function(){e.setFilterMode(tC.NORMALIZED)},e.setFilterModeToRaw=function(){e.setFilterMode(tC.RAW)},e.setGlobalIlluminationReach=function(e){return n.setGlobalIlluminationReach(ua(e,0,1))},e.setVolumetricScatteringBlending=function(e){return n.setVolumetricScatteringBlending(ua(e,0,1))},e.setVolumeShadowSamplingDistFactor=function(e){return n.setVolumeShadowSamplingDistFactor(e>=1?e:1)},e.setAnisotropy=function(e){return n.setAnisotropy(ua(e,-.99,.99))},e.setLAOKernelSize=function(e){return n.setLAOKernelSize(lr(ua(e,1,32)))},e.setLAOKernelRadius=function(e){return n.setLAOKernelRadius(e>=1?e:1)}}var aC={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,blendMode:eC.COMPOSITE_BLEND,ipScalarRange:[-1e6,1e6],filterMode:tC.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,volumeShadowSamplingDistFactor:5,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7};function oC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,aC,n),Hm(e,t,n),Ot.setGet(e,t,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","blendMode","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","volumeShadowSamplingDistFactor","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius"]),Ot.setGetArray(e,t,["ipScalarRange"],2),Ot.event(e,t,"lightingActivated"),rC(e,t)}var iC=$w({newInstance:Ot.newInstance(oC,"vtkVolumeMapper"),extend:oC},nC);function sC(e,t){function n(){if(t.input)for(var e=0;e<t.sourceDependencies.length;++e)t.sourceDependencies[e].setInputData(t.input.getDataset())}t.classHierarchy.push("vtkAbstractRepresentationProxy"),e.setInput=function(r){if(t.sourceSubscription&&(t.sourceSubscription.unsubscribe(),t.sourceSubscription=null),e.gcPropertyLinks("source"),t.input=r,e.updateColorByDomain(),t.input&&(n(),t.sourceSubscription=t.input.onDatasetChange(n)),t.links)for(var a=0;a<t.links.length;a++){var o=t.links[a],i=o.link,s=o.property,c=o.persistent,u=o.updateOnBind,l=o.type;if(void 0===l||"source"===l){var d=r.getPropertyLink(i,c);e.registerPropertyLinkForGC(d,"source"),d.bind(e,s,u)}}},e.getInputDataSet=function(){return t.input?t.input.getDataset():null},e.getDataArray=function(t,n){var r=fe(e.getColorBy(),2),a=r[0],o=r[1],i=e.getInputDataSet(),s=i?i.getReferenceByName(n||o):null;return s?s.getArrayByName(t||a):null},e.getLookupTableProxy=function(n){var r=n||e.getColorBy()[0];return r?t.proxyManager.getLookupTable(r):null},e.setLookupTableProxy=function(){},e.getPiecewiseFunctionProxy=function(n){var r=n||e.getColorBy()[0];return r?t.proxyManager.getPiecewiseFunction(r):null},e.setPiecewiseFunctionProxy=function(){},e.rescaleTransferFunctionToDataRange=function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=e.getDataArray(n,r),i=o.getRange(a);t.proxyManager.rescaleTransferFunctionToDataRange(n,i)},e.isVisible=function(){return t.actors.length?t.actors[0].getVisibility():!!t.volumes.length&&t.volumes[0].getVisibility()},e.setVisibility=function(n){for(var r=0,a=t.actors.length;a--;)r+=t.actors[a].setVisibility(n);for(a=t.volumes.length;a--;)r+=t.volumes[a].setVisibility(n);r&&e.modified()},e.setColorBy=function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=Cv.ColorMode.DEFAULT,i=Cv.ScalarMode.DEFAULT,s=n,c=e.getDataArray(n,r),u=!!c,l=n?e.getLookupTableProxy(n).getLookupTable():null;l&&(-1===a?l.setVectorModeToMagnitude():(l.setVectorModeToComponent(),l.setVectorComponent(a))),u&&(o=Cv.ColorMode.MAP_SCALARS,i="pointData"===r?Cv.ScalarMode.USE_POINT_FIELD_DATA:Cv.ScalarMode.USE_CELL_FIELD_DATA,t.mapper.setLookupTable&&t.mapper.setLookupTable(l),t.rescaleOnColorBy&&e.rescaleTransferFunctionToDataRange(n,r,a)),t.mapper.set({colorByArrayName:s,colorMode:o,scalarMode:i,scalarVisibility:u},!0)},e.getColorBy=function(){if(!t.mapper.getColorByArrayName){var n=e.getInputDataSet();return n.getPointData().getScalars()?[n.getPointData().getScalars().getName(),"pointData",-1]:n.getCellData().getScalars()?[n.getCellData().getScalars().getName(),"cellData",-1]:n.getPointData().getNumberOfArrays()?[n.getPointData().getArrayByIndex(0).getName(),"pointData",-1]:n.getCellData().getNumberOfArrays()?[n.getCellData().getArrayByIndex(0).getName(),"cellData",-1]:[]}var r=[],a=t.mapper.get("colorByArrayName","colorMode","scalarMode","scalarVisibility"),o=a.colorByArrayName,i=a.colorMode,s=a.scalarMode;if(a.scalarVisibility&&o&&(r.push(o),r.push(s===Cv.ScalarMode.USE_POINT_FIELD_DATA?"pointData":"cellData")),i===Cv.ColorMode.MAP_SCALARS&&o){var c=e.getLookupTableProxy(o).getLookupTable(),u=c.getVectorMode()===Jg.VectorMode.MAGNITUDE?-1:c.getVectorComponent();r.push(u)}return r},e.listDataArrays=function(){var n=[];if(!t.input)return n;for(var r=e.getInputDataSet(),a=r.getPointData(),o=a.getNumberOfArrays(),i=0;i<o;i++){var s=a.getArrayByIndex(i);n.push({name:s.getName(),location:"pointData",numberOfComponents:s.getNumberOfComponents(),dataRange:s.getRange()})}var c=r.getCellData();o=c.getNumberOfArrays();for(var u=0;u<o;u++){var l=c.getArrayByIndex(u);n.push({name:l.getName(),location:"cellData",numberOfComponents:l.getNumberOfComponents(),dataRange:l.getRange()})}return n},e.updateColorByDomain=function(){e.updateProxyProperty("colorBy",{domain:{arrays:e.listDataArrays(),solidColor:!t.disableSolidColor}})},e.delete=bt((function(){t.sourceSubscription&&(t.sourceSubscription.unsubscribe(),t.sourceSubscription=null)}),e.delete);var r=[],a=ve(of.INIT_BOUNDS);function o(e){e&&(of.addBounds(a,e.getBounds()),r.push(e))}e.getNestedProps=function(){return r},e.getBounds=function(){return t.boundMTime<t.mtime&&(t.boundMTime=t.mtime,of.reset(a),r.length=0,t.actors.forEach(o),t.volumes.forEach(o)),a}}var cC={boundMTime:0,actors:[],volumes:[],sourceDependencies:[],rescaleOnColorBy:!0},uC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cC,n),Dm.extend(e,t,n),lt(e,t,["rescaleOnColorBy"]),it(e,t,["input","mapper","actors","volumes"]),sC(e,t),wt(e,t)};function lC(e,t){return e+t}function dC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(lC,0)/t.length}function pC(e,t,n){n.mapper;var r=n.property;r.setInterpolationTypeToLinear();for(var a=t.getNumberOfComponents(),o=of.getDiagonalLength(e.getBounds())/Math.max.apply(Math,ve(e.getDimensions())),i=0;i<a;i++){r.setScalarOpacityUnitDistance(i,o);var s=t.getRange(i);r.setGradientOpacityMinimumValue(i,0),r.setGradientOpacityMaximumValue(i,.05*(s[1]-s[0])),r.setShade(!0),r.setUseGradientOpacity(i,!0),r.setGradientOpacityMinimumOpacity(i,0),r.setGradientOpacityMaximumOpacity(i,1)}r.setAmbient(.2),r.setDiffuse(.7),r.setSpecular(.3),r.setSpecularPower(8)}function fC(e,t){t.classHierarchy.push("vtkVolumeRepresentationProxy"),t.mapper=iC.newInstance(),t.volume=Qw.newInstance(),t.property=t.volume.getProperty(),t.cropFilter=fw.newInstance(),t.mapper.setInputConnection(t.cropFilter.getOutputPort()),t.sourceDependencies.push(t.cropFilter),t.mapperX=Aw.newInstance({slicingMode:Aw.SlicingMode.X}),t.actorX=_w.newInstance({visibility:!1}),t.propertySlices=t.actorX.getProperty(),t.mapperY=Aw.newInstance({slicingMode:Aw.SlicingMode.Y}),t.actorY=_w.newInstance({visibility:!1,property:t.propertySlices}),t.mapperZ=Aw.newInstance({slicingMode:Aw.SlicingMode.Z}),t.actorZ=_w.newInstance({visibility:!1,property:t.propertySlices}),t.mapperX.setInputConnection(t.cropFilter.getOutputPort()),t.mapperY.setInputConnection(t.cropFilter.getOutputPort()),t.mapperZ.setInputConnection(t.cropFilter.getOutputPort()),t.volume.setMapper(t.mapper),t.volumes.push(t.volume),t.actorX.setMapper(t.mapperX),t.actors.push(t.actorX),t.actorY.setMapper(t.mapperY),t.actors.push(t.actorY),t.actorZ.setMapper(t.mapperZ),t.actors.push(t.actorZ),t.sourceDependencies.push({setInputData:function(n){var r=fe(e.getColorBy(),2),a=r[0],o=r[1];e.rescaleTransferFunctionToDataRange(a,o);var i=e.getLookupTableProxy(a),s=e.getPiecewiseFunctionProxy(a);t.property.setRGBTransferFunction(0,i.getLookupTable()),t.property.setScalarOpacity(0,s.getPiecewiseFunction()),pC(n,e.getDataArray(),t),(t.sampleDistance<0||t.sampleDistance>1)&&e.setSampleDistance(),(t.edgeGradient<0||t.edgeGradient>1)&&e.setEdgeGradient();var c=function(e,t,n,r){var a=t.getRange(),o=e.getSpacing(),i=e.getBounds(),s=n.mapperX.getClosestIJKAxis().ijkMode,c=n.mapperY.getClosestIJKAxis().ijkMode,u=n.mapperZ.getClosestIJKAxis().ijkMode,l={xSlice:{domain:{min:i[0],max:i[1],step:o[s]}},ySlice:{domain:{min:i[2],max:i[3],step:o[c]}},zSlice:{domain:{min:i[4],max:i[5],step:o[u]}},windowWidth:{domain:{min:0,max:a[1]-a[0],step:"any"}},windowLevel:{domain:{min:a[0],max:a[1],step:"any"}}};return r("xSlice",l.xSlice),r("ySlice",l.ySlice),r("zSlice",l.zSlice),r("windowWidth",l.windowWidth),r("windowLevel",l.windowLevel),{xSlice:dC(l.xSlice.domain.min,l.xSlice.domain.max),ySlice:dC(l.ySlice.domain.min,l.ySlice.domain.max),zSlice:dC(l.zSlice.domain.min,l.zSlice.domain.max),windowWidth:l.windowWidth.domain.max,windowLevel:Math.floor(dC(l.windowLevel.domain.min,l.windowLevel.domain.max))}}(n,e.getDataArray(),t,e.updateProxyProperty);e.set(c),2===n.getDimensions().reduce((function(e,t){return e+(t>1?1:0)}),0)&&e.setIs2DVolume(!0)}}),e.setIs2DVolume=function(n){t.is2DVolume=n,n&&(e.getVisibility()&&e.setSliceVisibility(!0),t.volume.setVisibility(!1))},e.isVisible=function(){return t.volume.getVisibility()},e.setVisibility=function(n){n?t.is2DVolume?e.setSliceVisibility(!0):t.volume.setVisibility(!0):(t.volume.setVisibility(!1),e.setSliceVisibility(!1))},e.getVisibility=function(){return t.volume.getVisibility()||e.getSliceVisibility()},e.isVisible=e.getVisibility,e.setSliceVisibility=function(n){if(n&&t.is2DVolume){var r=e.getInputDataSet().getDimensions().indexOf(1);t.actors[r]&&t.actors[r].setVisibility(!0)}else t.actors.forEach((function(e){return e.setVisibility(n)}))},e.getSliceVisibility=function(){return t.actorX.getVisibility()||t.actorY.getVisibility()||t.actorZ.getVisibility()},e.setSampleDistance=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4;if(t.sampleDistance!==n){t.sampleDistance=n;var r=e.getInputDataSet(),a=.7*Math.sqrt(r.getSpacing().map((function(e){return e*e})).reduce((function(e,t){return e+t}),0));t.mapper.setSampleDistance(a*Math.pow(2,3*n-1.5)),e.modified()}},e.setEdgeGradient=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2;if(t.edgeGradient!==n){t.edgeGradient=n;var r=e.getDataArray(),a=r.getNumberOfComponents();if(0===n)for(var o=0;o<a;o++)t.volume.getProperty().setUseGradientOpacity(o,!1);else for(var i=0;i<a;i++){var s=r.getRange(i);t.volume.getProperty().setUseGradientOpacity(i,!0);var c=Math.max(0,n-.3)/.7;c>0?t.volume.getProperty().setGradientOpacityMinimumValue(i,Math.exp(Math.log(.2*(s[1]-s[0]))*c*c)):t.volume.getProperty().setGradientOpacityMinimumValue(i,0),t.volume.getProperty().setGradientOpacityMaximumValue(i,Math.exp(Math.log(1*(s[1]-s[0]))*n*n))}e.modified()}};var n=e.setColorBy;e.setColorBy=function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n(r,a,o);var i=e.getLookupTableProxy(r),s=e.getPiecewiseFunctionProxy(r);t.property.setRGBTransferFunction(0,i.getLookupTable()),t.property.setScalarOpacity(0,s.getPiecewiseFunction())}}var gC={sampleDistance:-1,edgeGradient:-1,disableSolidColor:!0,is2DVolume:!1};function mC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gC,n),uC(e,t,n),Ot.get(e,t,["sampleDistance","edgeGradient","cropFilter","is2DVolume"]),fC(e,t),Ot.proxyPropertyMapping(e,t,{xSlice:{modelKey:"mapperX",property:"slice"},ySlice:{modelKey:"mapperY",property:"slice"},zSlice:{modelKey:"mapperZ",property:"slice"},volumeVisibility:{modelKey:"volume",property:"visibility"},xSliceVisibility:{modelKey:"actorX",property:"visibility"},ySliceVisibility:{modelKey:"actorY",property:"visibility"},zSliceVisibility:{modelKey:"actorZ",property:"visibility"},windowWidth:{modelKey:"propertySlices",property:"colorWindow"},windowLevel:{modelKey:"propertySlices",property:"colorLevel"},useShadow:{modelKey:"property",property:"shade"},croppingPlanes:{modelKey:"cropFilter",property:"croppingPlanes"}})}var vC={newInstance:Ot.newInstance(mC,"vtkVolumeRepresentationProxy"),extend:mC,updateConfiguration:pC};function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yC(e,t){return e+t}function bC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(yC,0)/t.length}function xC(e,t,n,r){var a,o,i,s,c=t.getRange(),u=e.getSpacing(),l=e.getBounds(),d=e.getExtent(),p=n.mapper.getSlicingMode(),f="IJKXYZ"[p];switch(p){case Aw.SlicingMode.I:case Aw.SlicingMode.J:case Aw.SlicingMode.K:a=d[2*(s="IJK".indexOf(f))],o=d[2*s+1],i=1;break;case Aw.SlicingMode.X:case Aw.SlicingMode.Y:case Aw.SlicingMode.Z:a=l[2*(s="XYZ".indexOf(f))],o=l[2*s+1],i=u[n.mapper.getClosestIJKAxis().ijkMode]}var g={slice:{domain:{min:a,max:o,step:i}},windowWidth:{domain:{min:0,max:c[1]-c[0],step:"any"}},windowLevel:{domain:{min:c[0],max:c[1],step:"any"}}};return r("slice",g.slice),r("windowWidth",g.windowWidth),r("windowLevel",g.windowLevel),{slice:bC(g.slice.domain.min,g.slice.domain.max),windowWidth:g.windowWidth.domain.max,windowLevel:Math.floor(bC(g.windowLevel.domain.min,g.windowLevel.domain.max))}}function TC(e,t){function n(n){t.mapper.setSlicingMode(Aw.SlicingMode[n]);var r="".concat(n.toLowerCase(),"Slice");if(r in t&&void 0!==t[r]&&t.mapper.setSlice(t[r]),t.input){var a=xC(e.getInputDataSet(),e.getDataArray(),t,e.updateProxyProperty);e.set(a)}e.modified()}t.classHierarchy.push("vtkSliceRepresentationProxy"),t.mapper=Aw.newInstance(),t.actor=_w.newInstance(),t.property=t.actor.getProperty(),t.actor.setMapper(t.mapper),t.actors.push(t.actor),t.sourceDependencies.push(t.mapper),t.sourceDependencies.push({setInputData:function(n){var r=xC(n,e.getDataArray(),t,e.updateProxyProperty);e.set(r);var a=n.getBounds(),o=n.getExtent();switch(t.mapper.getSlicingMode()){case Aw.SlicingMode.I:e.setSlice(Math.floor(bC(o[0],o[1])));break;case Aw.SlicingMode.J:e.setSlice(Math.floor(bC(o[2],o[3])));break;case Aw.SlicingMode.K:e.setSlice(Math.floor(bC(o[4],o[5])));break;case Aw.SlicingMode.X:e.setSlice(bC(a[0],a[1]));break;case Aw.SlicingMode.Y:e.setSlice(bC(a[2],a[3]));break;case Aw.SlicingMode.Z:e.setSlice(bC(a[4],a[5]))}}}),e.setSlicingMode=function(e){return!!e&&t.slicingMode!==e&&(t.slicingMode=e,n(e),!0)},e.getSliceIndex=function(){return-1!=="XYZ".indexOf(t.slicingMode)?t.mapper.getSliceAtPosition(t.mapper.getSlice()):t.mapper.getSlice()},e.getAnnotations=function(){var n={},r=e.getSliceIndex(),a=t.mapper.getBoundsForSlice(),o=t.mapper.getSlicingModeNormal(),i=t.mapper.getClosestIJKAxis().ijkMode,s=[.5*(a[0]+a[1]),.5*(a[2]+a[3]),.5*(a[4]+a[5])],c=0;a[1]-a[0]<Number.EPSILON&&(c=a[0]),a[3]-a[2]<Number.EPSILON&&(c=a[2]),a[5]-a[4]<Number.EPSILON&&(c=a[4]);var u=t.mapper.getInputData();if(u){n.sliceSpacing=u.getSpacing()[i],n.dimensions=u.getDimensions(),n.sliceCount=u.getDimensions()[i];for(var l=[],d=0;d<3;d++){var p=[0,0,0,0,0,0];p[2*d+1]=1;var f=u.extentToBounds(p);f[1]-f[0]>Number.EPSILON&&(l[0]="IJK"[d]),f[3]-f[2]>Number.EPSILON&&(l[1]="IJK"[d]),f[5]-f[4]>Number.EPSILON&&(l[2]="IJK"[d])}n.ijkOrientation=l.join("")}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hC(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ijkMode:i,sliceBounds:a,sliceIndex:r,sliceNormal:o,sliceOrigin:s,slicePosition:c},n)};var r=e.setColorBy;e.setColorBy=function(n,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(null===n)t.property.setRGBTransferFunction(null),t.property.setPiecewiseFunction(null);else{r(n,a,o);var i=e.getLookupTableProxy(n),s=e.getPiecewiseFunctionProxy(n);t.property.setRGBTransferFunction(i.getLookupTable()),t.property.setPiecewiseFunction(s.getPiecewiseFunction())}},n(t.slicingMode||"X")}var SC={};function PC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,SC,n),uC(e,t,n),Ot.get(e,t,["slicingMode"]),TC(e,t),Ot.proxyPropertyMapping(e,t,{visibility:{modelKey:"actor",property:"visibility"},windowWidth:{modelKey:"property",property:"colorWindow"},windowLevel:{modelKey:"property",property:"colorLevel"},interpolationType:{modelKey:"property",property:"interpolationType"},slice:{modelKey:"mapper",property:"slice"}})}var wC=Ot.newInstance(PC,"vtkSliceRepresentationProxy"),CC={definitions:{Proxy:{LookupTable:{class:bm},PiecewiseFunction:{class:wg}},Sources:{TrivialProducer:{class:Pm}},Representations:{Volume:{class:vC},ImageSlice:{class:{newInstance:wC,extend:PC}}},Views:{View3D:{class:nw},View2D:{class:cw}}},representations:{View3D:{vtkImageData:{name:"Volume"}},View2D:{vtkImageData:{name:"ImageSlice"}}},filters:{}},OC=Nf.newInstance({fetchGzip:!0}).setUrl("".concat("/vtk-js","/data/volume/LIDC2.vti")).then((function(e){return e.loadData()})).then((function(e){return e.getOutputData()})),AC=Bg.newInstance({proxyConfiguration:CC}),IC=document.createElement("div");document.body.appendChild(IC);var MC=document.createElement("div");IC.appendChild(MC);var RC=document.createElement("div");IC.appendChild(RC),document.documentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",IC.style.height="100%",IC.style.display="flex";var EC=document.createElement("style");EC.innerHTML="\n.viewContainer {\n  display: flex;\n  position: relative;\n  width: 50%;\n  padding: 5px;\n}\n",document.head.appendChild(EC),MC.className="viewContainer",RC.className="viewContainer";var DC=AC.createProxy("Views","View3D");DC.setContainer(MC),DC.getOpenGLRenderWindow().setSize([MC.clientWidth,MC.clientHeight]);var LC,BC,NC=AC.createProxy("Views","View2D",{axis:2});NC.setContainer(RC),NC.getOpenGLRenderWindow().setSize([RC.clientWidth,RC.clientHeight]);var kC=AC.createProxy("Sources","TrivialProducer");OC.then((function(e){kC.setInputData(e),LC=AC.getRepresentation(kC,DC),DC.resetCamera(),BC=AC.getRepresentation(kC,NC),NC.resetCamera()})),n.g.mainContainer=IC,n.g.view3DContainer=MC,n.g.view2DContainer=RC,n.g.proxyManager=AC,n.g.sourceProxy=kC,n.g.view3DProxy=DC,n.g.view2DProxy=NC,n.g.representation3DProxy=LC,n.g.representation2DProxy=BC},191:function(e,t,n){e.exports=n(112)},145:function(e,t,n){"use strict";var r=n(426),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,i=Array.prototype.concat,s=Object.defineProperty,c=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),u=function(e,t,n,r){var a;(!(t in e)||"function"==typeof(a=r)&&"[object Function]"===o.call(a)&&r())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},l=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);a&&(o=i.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)u(e,o[s],t[o[s]],n[o[s]])};l.supportsDescriptors=!!c,e.exports=l},903:function(e,t,n){"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},152:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,o[a]))return!1;for(a=r;0!=a--;){var i=o[a];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n}},491:function(e){"use strict";"undefined"!=typeof self?e.exports=self:"undefined"!=typeof window?e.exports=window:e.exports=Function("return this")()},177:function(e,t,n){"use strict";var r=n(145),a=n(491),o=n(486),i=n(999),s=o(),c=function(){return s};r(c,{getPolyfill:o,implementation:a,shim:i}),e.exports=c},486:function(e,t,n){"use strict";var r=n(491);e.exports=function(){return"object"==typeof n.g&&n.g&&n.g.Math===Math&&n.g.Array===Array?n.g:r}},999:function(e,t,n){"use strict";var r=n(145),a=n(486);e.exports=function(){var e=a();if(r.supportsDescriptors){var t=Object.getOwnPropertyDescriptor(e,"globalThis");t&&(!t.configurable||!t.enumerable&&t.writable&&globalThis===e)||Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else"object"==typeof globalThis&&globalThis===e||(e.globalThis=e);return e}},444:function(e,t,n){"use strict";var r;if(!Object.keys){var a=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=n(511),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=i(e),s=t&&"[object String]"===o.call(e),p=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var g=u&&n;if(s&&e.length>0&&!a.call(e,0))for(var m=0;m<e.length;++m)p.push(String(m));if(r&&e.length>0)for(var v=0;v<e.length;++v)p.push(String(v));else for(var h in e)g&&"prototype"===h||!a.call(e,h)||p.push(String(h));if(c)for(var y=function(e){if("undefined"==typeof window||!f)return d(e);try{return d(e)}catch(e){return!1}}(e),b=0;b<l.length;++b)y&&"constructor"===l[b]||!a.call(e,l[b])||p.push(l[b]);return p}}e.exports=r},426:function(e,t,n){"use strict";var r=Array.prototype.slice,a=n(511),o=Object.keys,i=o?function(e){return o(e)}:n(444),s=Object.keys;i.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return a(e)?s(r.call(e)):s(e)})}else Object.keys=i;return Object.keys||i},e.exports=i},511:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},112:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),i=new I(r||[]);return o._invoke=function(e,t,n){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===g){if("throw"===a)throw o;return R()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=C(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?g:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=g,n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function v(){}function h(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,T=x&&x(x(M([])));T&&T!==n&&r.call(T,o)&&(b=T);var S=y.prototype=v.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,i,s){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function M(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:t,done:!0}}return h.prototype=y,c(S,"constructor",y),c(y,"constructor",h),h.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},P(w.prototype),c(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(S),c(S,s,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},640:function(e,t,n){var r=n(64),a=n(115),o=n(965),i=n(332),s=n(65),c=n(182),u=n(293);u.alea=r,u.xor128=a,u.xorwow=o,u.xorshift7=i,u.xor4096=s,u.tychei=c,e.exports=u},64:function(e,t,n){var r;!function(e,a,o){function i(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.alea=c}(0,e=n.nmd(e),n.amdD)},182:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.tychei=c}(0,e=n.nmd(e),n.amdD)},115:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor128=c}(0,e=n.nmd(e),n.amdD)},65:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,o=-32;o<c;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor4096=c}(0,e=n.nmd(e),n.amdD)},332:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorshift7=c}(0,e=n.nmd(e),n.amdD)},965:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorwow=c}(0,e=n.nmd(e),n.amdD)},293:function(e,t,n){var r;!function(a,o,i){var s,c=256,u=i.pow(c,6),l=i.pow(2,52),d=2*l,p=255;function f(e,t,n){var r=[],p=h(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),f=new g(r),b=function(){for(var e=f.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=f.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,h(y(f.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,f),e.state=function(){return m(f,{})}),n?(i.random=e,t):e})(b,p,"global"in t?t.global:this==i,t.state)}function g(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<c;)i[a]=a++;for(a=0;a<c;a++)i[a]=i[o=p&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=p&a+1],n=n*c+i[p&(i[a]=i[o=p&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(v(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function h(e,t){for(var n,r=e+"",a=0;a<r.length;)t[p&a]=p&(n^=19*t[p&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(h(i.random(),o),e.exports){e.exports=f;try{s=n(706)}catch(e){}}else void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},594:function(e){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],a=e[2],o=e[3];r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&a|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&a)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|a>>>15)+o|0)&o|~a&n)+t[3]-1044525330|0)<<22|r>>>10)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&a|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&a)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|a>>>15)+o|0)&o|~a&n)+t[7]-45705983|0)<<22|r>>>10)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&a|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&a)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|a>>>15)+o|0)&o|~a&n)+t[11]-1990404162|0)<<22|r>>>10)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&a|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&a)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|a>>>15)+o|0)&o|~a&n)+t[15]+1236535329|0)<<22|r>>>10)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&o|a&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&a|r&~a)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|a>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&o|a&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&a|r&~a)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|a>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&o|a&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&a|r&~a)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|a>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r&o|a&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&a|r&~a)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|a>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r^a^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^a)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|a>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r^a^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^a)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|a>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r^a^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^a)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|a>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+a|0,r=((r+=((a=((a+=((o=((o+=((n=((n+=(r^a^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^a)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|a>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+a|0,r=((r+=((o=((o+=(r^((n=((n+=(a^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~a))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((a=((a+=(n^(o|~r))+t[14]-1416354905|0)<<15|a>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+a|0,r=((r+=((o=((o+=(r^((n=((n+=(a^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~a))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((a=((a+=(n^(o|~r))+t[10]-1051523|0)<<15|a>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+a|0,r=((r+=((o=((o+=(r^((n=((n+=(a^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~a))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((a=((a+=(n^(o|~r))+t[6]-1560198380|0)<<15|a>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+a|0,r=((r+=((o=((o+=(r^((n=((n+=(a^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~a))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((a=((a+=(n^(o|~r))+t[2]+718787259|0)<<15|a>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+a|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=a+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function a(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,a,o,i,s,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,r(e.substring(t-64,t)));for(a=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return i=(i=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),c=parseInt(i[1],16)||0,o[14]=s,o[15]=c,n(l,o),l}function i(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=i(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return s(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,n){var r,a,o,i,s=this.byteLength,c=e(t,s),u=s;return undefined!==n&&(u=e(n,s)),c>u?new ArrayBuffer(0):(r=u-c,a=new ArrayBuffer(r),o=new Uint8Array(a),i=new Uint8Array(this,c,r),o.set(i),a)}}(),l.prototype.append=function(e){return this.appendBinary(c(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,a=this._buff.length;for(t=64;t<=a;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,a=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,a),n=s(this._hash),e&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var r,a,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(n(this._hash,e),i=0;i<16;i+=1)e[i]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=a,e[15]=o,n(this._hash,e)},l.hash=function(e,t){return l.hashBinary(c(e),t)},l.hashBinary=function(e,t){var n=s(o(e));return t?u(n):n},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,r,o,i,s,c=(r=this._buff.buffer,o=e,i=!0,(s=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),s.set(new Uint8Array(o),r.byteLength),i?s:s.buffer),u=c.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)n(this._hash,a(c.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,a=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,a),n=s(this._hash),e&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,a=new ArrayBuffer(r),o=new Uint8Array(a);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:a}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var r=s(function(e){var t,r,o,i,s,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,a(e.subarray(t-64,t)));for(r=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return i=(i=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),c=parseInt(i[1],16)||0,o[14]=s,o[15]=c,n(l,o),l}(new Uint8Array(e)));return t?u(r):r},l}()},57:function(e,t,n){const r=n(514);e.exports=class extends r{constructor(e){super(),this._messageId=1,this._messages=new Map,this._worker=e,this._worker.onmessage=this._onMessage.bind(this),this._id=Math.ceil(1e7*Math.random())}terminate(){this._worker.terminate()}isFree(){return 0===this._messages.size}jobsLength(){return this._messages.size}exec(e,t=null,n=[],r){return new Promise(((a,o)=>{const i=this._messageId++;this._messages.set(i,[a,o,r]),this._worker.postMessage([i,t,e],n||[])}))}postMessage(e=null,t=[],n){return new Promise(((r,a)=>{const o=this._messageId++;this._messages.set(o,[r,a,n]),this._worker.postMessage([o,e],t||[])}))}emit(e,...t){this._worker.postMessage({eventName:e,args:t})}_onMessage(e){if(!Array.isArray(e.data)&&e.data.eventName)return super.emit(e.data.eventName,...e.data.args);const[t,...n]=e.data;if(1===t)this._onEvent(...n);else{if(0!==t)throw new Error(`Wrong message type '${t}'`);this._onResult(...n)}}_onResult(e,t,n){const[r,a]=this._messages.get(e);return this._messages.delete(e),1===t?r(n):a(n)}_onEvent(e,t,n){const[,,r]=this._messages.get(e);r&&r(t,n)}}},514:function(e){e.exports=class{constructor(){Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}emit(e,...t){if(!this.__listeners[e])return this;for(const n of this.__listeners[e])n(...t);return this}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};return this.on(e,n)}on(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}off(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((e=>e!==t)):[],this}}},69:function(e,t,n){var r=n(865),a=n(903);void 0===a.ProxyManager&&(a.ProxyManager=r),e.exports=r},706:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n(69)}();